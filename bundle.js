!function e(t,r,i){function n(o,s){if(!r[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){var r=t[o][1][e];return n(r?r:e)},c,c.exports,e,t,r,i)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(e,t){"use strict";t.exports=function(){try{return!!new Blob}catch(e){return!1}}()},{}],2:[function(e,t){"use strict";function r(){i.call(this),this.setMaxListeners(20)}var i=e("events").EventEmitter;r.prototype=Object.create(i.prototype),r.prototype.constructor=r,r.prototype.off=function(e,t){return t?this.removeListener(e,t):e?this.removeAllListeners(e):this.removeAllListeners()},t.exports=r},{events:13}],3:[function(e,t){"use strict";var r=e("./emitter.js"),i=e("./loader"),n=0;t.exports=function a(e){var t,o={},s=[],l=[],u=0,c=0,h={},p=function(r){if(Array.isArray(r))return r.forEach(p),t;var n,o=!!r.assets&&Array.isArray(r.assets);return n=o?a(v(r,e)):i(v(r,e)),n.once("destroy",x),l.push(n),h[n.id]=n,t},d=function(e){return arguments.length?o[e]:s},f=function(e){if(d(e))return d(e);var t=null;return Object.keys(h).some(function(r){return t=h[r].find&&h[r].find(e),!!t}),t},m=function(e){return e&&e.split("?")[0].split(".").pop().toLowerCase()},v=function(e,t){if("string"==typeof e){var r=e;e={url:r}}return void 0===e.isTouchLocked&&(e.isTouchLocked=t.isTouchLocked),void 0===e.blob&&(e.blob=t.blob),void 0===e.basePath&&(e.basePath=t.basePath),e.id=e.id||e.url||String(++n),e.type=e.type||m(e.url),e.crossOrigin=e.crossOrigin||t.crossOrigin,e.webAudioContext=e.webAudioContext||t.webAudioContext,e.log=t.log,e},g=function(){return c=l.length,l.forEach(function(e){e.on("progress",y).once("complete",b).once("error",_).start()}),l=[],t},y=function(e){var r=u+e;t.emit("progress",r/c)},b=function(e,r,i){Array.isArray(e)&&(e={id:r,file:e,type:i}),u++,t.emit("progress",u/c),o[e.id]=e.file,s.push(e),t.emit("childcomplete",e),w()},_=function(e){c--,t.listeners("error").length?t.emit("error",e):console.error(e),w()},x=function(e){h[e]=null,delete h[e],o[e]=null,delete o[e],s.some(function(t,r){return t.id===e?(s.splice(r,1),!0):void 0})},w=function(){u>=c&&t.emit("complete",s,e.id,"group")},T=function(){for(;l.length;)l.pop().destroy();return t.off("error"),t.off("progress"),t.off("complete"),s=[],o={},e.webAudioContext=null,c=0,u=0,Object.keys(h).forEach(function(e){h[e].destroy()}),h={},t.emit("destroy",t.id),t};return t=Object.create(r.prototype,{_events:{value:{}},id:{get:function(){return e.id}},add:{value:p},start:{value:g},get:{value:d},find:{value:f},getLoader:{value:function(e){return h[e]}},loaded:{get:function(){return u>=c}},file:{get:function(){return s}},destroy:{value:T}}),e=v(e||{},{basePath:"",blob:!1,touchLocked:!1,crossOrigin:null,webAudioContext:null,log:!1}),Array.isArray(e.assets)&&p(e.assets),Object.freeze(t)}},{"./emitter.js":2,"./loader":5}],4:[function(e,t){"use strict";var r=e("./group");r.stats=e("./stats"),t.exports=r},{"./group":3,"./stats":6}],5:[function(e,t){"use strict";var r=e("./emitter.js"),i=e("./browser-has-blob.js"),n=e("./stats");t.exports=function(e){var t,a,o,s,l,u,c=e.id,h=e.basePath||"",p=e.url,d=e.type,f=e.crossOrigin,m=e.isTouchLocked,v=e.blob&&i,g=e.webAudioContext,y=e.log,b=function(){switch(s=Date.now(),d){case"json":S();break;case"jpg":case"png":case"gif":case"webp":E();break;case"mp3":case"ogg":case"opus":case"wav":case"m4a":k();break;case"ogv":case"mp4":case"webm":case"hls":L();break;case"bin":case"binary":x("arraybuffer");break;case"txt":case"text":x("text");break;default:throw"AssetsLoader ERROR: Unknown type for file with URL: "+h+p+" ("+d+")"}},_=function(e){e&&(u={id:c,file:e,type:d},t.emit("progress",1),t.emit("complete",u,c,d),F())},x=function(e,t){a=t||T,o=new XMLHttpRequest,o.open("GET",h+p,!0),o.responseType=e,o.addEventListener("progress",w),o.addEventListener("load",a),o.addEventListener("error",D),o.send()},w=function(e){e.lengthComputable&&t.emit("progress",e.loaded/e.total)},T=function(){M()&&_(o.response)},M=function(){return o&&o.status<400?(n.update(o,s,p,y),!0):(D(o&&o.statusText),!1)},S=function(){x("json",function(){if(M()){var e=o.response;"string"==typeof e&&(e=JSON.parse(e)),_(e)}})},E=function(){v?C():P()},P=function(){o=new Image,f&&(o.crossOrigin="anonymous"),o.addEventListener("error",D,!1),o.addEventListener("load",A,!1),o.src=h+p},A=function(){window.clearTimeout(l),_(o)},C=function(){x("blob",function(){M()&&(o=new Image,o.addEventListener("error",D,!1),o.addEventListener("load",O,!1),o.src=window.URL.createObjectURL(o.response))})},O=function(){window.URL.revokeObjectURL(o.src),_(o)},k=function(){g?R():I("audio")},L=function(){v?x("blob"):I("video")},R=function(){x("arraybuffer",function(){M()&&g.decodeAudioData(o.response,function(e){o=null,_(e)},function(e){D(e)})})},I=function(e){o=document.createElement(e),m||(window.clearTimeout(l),l=window.setTimeout(A,2e3),o.addEventListener("canplaythrough",A,!1)),o.addEventListener("error",D,!1),o.preload="auto",o.src=h+p,o.load(),m&&_(o)},D=function(e){window.clearTimeout(l);var r=e;if(o&&o.tagName&&o.error){var i=["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"];r="MediaError: "+i[o.error.code]+" "+o.src}else o&&o.statusText?r=o.statusText:e&&e.message?r=e.message:e&&e.type&&(r=e.type);t.emit("error",'Error loading "'+h+p+'" '+r),N()},F=function(){t.off("error"),t.off("progress"),t.off("complete"),o&&(o.removeEventListener("progress",w),o.removeEventListener("load",a),o.removeEventListener("error",D),o.removeEventListener("load",A),o.removeEventListener("canplaythrough",A),o.removeEventListener("load",O))},N=function(){F(),o&&o.abort&&o.readyState<4&&o.abort(),o=null,g=null,u=null,window.clearTimeout(l),t.emit("destroy",c)};return t=Object.create(r.prototype,{_events:{value:{}},id:{value:e.id},start:{value:b},loaded:{get:function(){return!!u}},file:{get:function(){return u}},destroy:{value:N}}),Object.freeze(t)}},{"./browser-has-blob.js":1,"./emitter.js":2,"./stats":6}],6:[function(e,t){"use strict";t.exports={mbs:0,secs:0,update:function(e,t,r,i){var n,a=e.getAllResponseHeaders();if(a){var o=a.match(/content-length: (\d+)/i);o&&o.length&&(n=o[1])}if(n){n=parseInt(n,10);var s=n/1024/1024,l=(Date.now()-t)/1e3;this.secs+=l,this.mbs+=s,i&&this.log(r,s,l)}else i&&console.warn.call(console,"Can't get Content-Length:",r)},log:function(e,t,r){if(e){var i="File loaded: "+e.substr(e.lastIndexOf("/")+1)+" size:"+t.toFixed(2)+"mb time:"+r.toFixed(2)+"s speed:"+(t/r).toFixed(2)+"mbps";console.log.call(console,i)}var n="Total loaded: "+this.mbs.toFixed(2)+"mb time:"+this.secs.toFixed(2)+"s speed:"+this.getMbps().toFixed(2)+"mbps";console.log.call(console,n)},getMbps:function(){return this.mbs/this.secs}}},{}],7:[function(e,t){function r(e,t){e=Array.isArray(e)?e:[e];var r=e.map(i("threshold",0)),s=e.map(i("threshold",0)),l=e.map(i("decay",.005)),u=e.map(a(i("hi",512))),c=e.map(a(i("lo",0))),h=n(u,c),p=e.length,d=new Float64Array(p),f=new Uint8Array(p);t=t||0,o(u,'All "hi" keys must be numbers'),o(c,'All "lo" keys must be numbers'),o(s,'All "threshold" keys must be numbers'),o(l,'All "decay" keys must be numbers');for(var m=0;m<l.length;m+=1)l[m]=1-l[m];return function(e,i){i=i||1;for(var n=0;p>n;n+=1){for(var a=1/h[n],o=u[n],m=c[n],v=0,g=m;o>g;g+=1)v+=a*e[g];d[n]+=i,d[n]>t&&v>s[n]?(f[n]=v,d[n]=0,s[n]=v>r[n]?v:s[n]):f[n]=0,s[n]*=l[n]}return f}}function i(e,t){return function(r){return e in r?r[e]:t}}function n(e,t){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i]-t[i];return r}function a(e){return function(t){return Math.round(e(t))}}function o(e,t){for(var r=0;r<e.length;r+=1)if("number"!=typeof e[r])throw new Error(t);return e}t.exports=r},{}],8:[function(require,module,exports){!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():e.bodymovin=t()}(window,function(){function ProjectInterface(){return{}}function roundValues(e){bm_rnd=e?Math.round:function(e){return e}}function roundTo2Decimals(e){return Math.round(1e4*e)/1e4}function roundTo3Decimals(e){return Math.round(100*e)/100}function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin=e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility=e.style.webkitBackfaceVisibility="visible",e.style.transformStyle=e.style.webkitTransformStyle=e.style.mozTransformStyle="preserve-3d"}function styleUnselectableDiv(e){e.style.userSelect="none",e.style.MozUserSelect="none",e.style.webkitUserSelect="none",e.style.oUserSelect="none"}function BMEnterFrameEvent(e,t,r,i){this.type=e,this.currentTime=t,this.totalTime=r,this.direction=0>i?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=0>t?-1:1}function BMCompleteLoopEvent(e,t,r,i){this.type=e,this.currentLoop=t,this.totalLoops=r,this.direction=0>i?-1:1}function BMSegmentStartEvent(e,t,r){this.type=e,this.firstFrame=t,this.totalFrames=r}function BMDestroyEvent(e,t){this.type=e,this.target=t}function _addEventListener(e,t){this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t)}function _removeEventListener(e,t){if(t){if(this._cbs[e]){for(var r=0,i=this._cbs[e].length;i>r;)this._cbs[e][r]===t&&(this._cbs[e].splice(r,1),r-=1,i-=1),r+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}function _triggerEvent(e,t){if(this._cbs[e])for(var r=this._cbs[e].length,i=0;r>i;i++)this._cbs[e][i](t)}function randomString(e,t){void 0===t&&(t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890");var r,i="";for(r=e;r>0;--r)i+=t[Math.round(Math.random()*(t.length-1))];return i}function HSVtoRGB(e,t,r){var i,n,a,o,s,l,u,c;switch(1===arguments.length&&(t=e.s,r=e.v,e=e.h),o=Math.floor(6*e),s=6*e-o,l=r*(1-t),u=r*(1-s*t),c=r*(1-(1-s)*t),o%6){case 0:i=r,n=c,a=l;break;case 1:i=u,n=r,a=l;break;case 2:i=l,n=r,a=c;break;case 3:i=l,n=u,a=r;break;case 4:i=c,n=l,a=r;break;case 5:i=r,n=l,a=u}return[i,n,a]}function RGBtoHSV(e,t,r){1===arguments.length&&(t=e.g,r=e.b,e=e.r);var i,n=Math.max(e,t,r),a=Math.min(e,t,r),o=n-a,s=0===n?0:o/n,l=n/255;switch(n){case a:i=0;break;case e:i=t-r+o*(r>t?6:0),i/=6*o;break;case t:i=r-e+2*o,i/=6*o;break;case r:i=e-t+4*o,i/=6*o}return[i,s,l]}function addSaturationToRGB(e,t){var r=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return r[1]+=t,r[1]>1?r[1]=1:r[1]<=0&&(r[1]=0),HSVtoRGB(r[0],r[1],r[2])}function addBrightnessToRGB(e,t){var r=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return r[2]+=t,r[2]>1?r[2]=1:r[2]<0&&(r[2]=0),HSVtoRGB(r[0],r[1],r[2])}function addHueToRGB(e,t){var r=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return r[0]+=t/360,r[0]>1?r[0]-=1:r[0]<0&&(r[0]+=1),HSVtoRGB(r[0],r[1],r[2])}function componentToHex(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function fillToRgba(e,t){if(!cachedColors[e]){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);cachedColors[e]=parseInt(r[1],16)+","+parseInt(r[2],16)+","+parseInt(r[3],16)}return"rgba("+cachedColors[e]+","+t+")"}function RenderedFrame(e,t){this.tr=e,this.o=t}function LetterProps(e,t,r,i,n,a){this.o=e,this.sw=t,this.sc=r,this.fc=i,this.m=n,this.props=a}function iterateDynamicProperties(e){var t,r=this.dynamicProperties;for(t=0;r>t;t+=1)this.dynamicProperties[t].getValue(e)}function reversePath(e){var t,r,i=[],n=[],a=[],o={},s=0;e.c&&(i[0]=e.o[0],n[0]=e.i[0],a[0]=e.v[0],s=1),r=e.i.length;var l=r-1;for(t=s;r>t;t+=1)i.push(e.o[l]),n.push(e.i[l]),a.push(e.v[l]),l-=1;return o.i=i,o.o=n,o.v=a,o}function Matrix(){}function matrixManagerFunction(){var e=new Matrix,t=function(t,r,i,n,a){return e.reset().translate(n,a).rotate(t).scale(r,i).toCSS()},r=function(e){return t(e.tr.r[2],e.tr.s[0],e.tr.s[1],e.tr.p[0],e.tr.p[1])};return{getMatrix:r}}function createElement(e,t,r){if(!t){var i=Object.create(e.prototype,r),n={};return i&&"[object Function]"===n.toString.call(i.init)&&i.init(),i}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype._parent=e.prototype}function extendPrototype(e,t){for(var r in e.prototype)e.prototype.hasOwnProperty(r)&&(t.prototype[r]=e.prototype[r])}function bezFunction(){function e(e,t,r,i,n,a){var o=e*i+t*n+r*a-n*i-a*e-r*t;return o>-1e-4&&1e-4>o}function t(t,r,i,n,a,o,s,l,u){return e(t,r,n,a,s,l)&&e(t,i,n,o,s,u)}function r(e){this.segmentLength=0,this.points=new Array(e)}function i(e,t){this.partialLength=e,this.point=t}function n(e,t){var r=t.segments,i=r.length,n=bm_floor((i-1)*e),a=e*t.addedLength,o=0;if(a==r[n].l)return r[n].p;for(var s=r[n].l>a?-1:1,l=!0;l;)r[n].l<=a&&r[n+1].l>a?(o=(a-r[n].l)/(r[n+1].l-r[n].l),l=!1):n+=s,(0>n||n>=i-1)&&(l=!1);return r[n].p+(r[n+1].p-r[n].p)*o}function a(){this.pt1=new Array(2),this.pt2=new Array(2),this.pt3=new Array(2),this.pt4=new Array(2)}function o(e,t,r,i,o,s,l){var u=new a;o=0>o?0:o>1?1:o;var c=n(o,l);s=s>1?1:s;var h,p=n(s,l),d=e.length,f=1-c,m=1-p;for(h=0;d>h;h+=1)u.pt1[h]=Math.round(1e3*(f*f*f*e[h]+(c*f*f+f*c*f+f*f*c)*r[h]+(c*c*f+f*c*c+c*f*c)*i[h]+c*c*c*t[h]))/1e3,u.pt3[h]=Math.round(1e3*(f*f*m*e[h]+(c*f*m+f*c*m+f*f*p)*r[h]+(c*c*m+f*c*p+c*f*p)*i[h]+c*c*p*t[h]))/1e3,u.pt4[h]=Math.round(1e3*(f*m*m*e[h]+(c*m*m+f*p*m+f*m*p)*r[h]+(c*p*m+f*p*p+c*m*p)*i[h]+c*p*p*t[h]))/1e3,u.pt2[h]=Math.round(1e3*(m*m*m*e[h]+(p*m*m+m*p*m+m*m*p)*r[h]+(p*p*m+m*p*p+p*m*p)*i[h]+p*p*p*t[h]))/1e3;return u}var s=(Math,function(){function e(e,t){this.l=e,this.p=t}return function(t,r,i,n){var a,o,s,l,u,c,h=defaultCurveSegments,p=0,d=[],f=[],m={addedLength:0,segments:[]};for(s=i.length,a=0;h>a;a+=1){for(u=a/(h-1),c=0,o=0;s>o;o+=1)l=bm_pow(1-u,3)*t[o]+3*bm_pow(1-u,2)*u*i[o]+3*(1-u)*bm_pow(u,2)*n[o]+bm_pow(u,3)*r[o],d[o]=l,null!==f[o]&&(c+=bm_pow(d[o]-f[o],2)),f[o]=d[o];c&&(c=bm_sqrt(c),p+=c),m.segments.push(new e(p,u))}return m.addedLength=p,m}}()),l=function(){var t={};return function(n){var a=n.s,o=n.e,s=n.to,l=n.ti,u=(a.join("_")+"_"+o.join("_")+"_"+s.join("_")+"_"+l.join("_")).replace(/\./g,"p");if(t[u])return void(n.bezierData=t[u]);var c,h,p,d,f,m,v,g=defaultCurveSegments,y=0,b=null;2===a.length&&(a[0]!=o[0]||a[1]!=o[1])&&e(a[0],a[1],o[0],o[1],a[0]+s[0],a[1]+s[1])&&e(a[0],a[1],o[0],o[1],o[0]+l[0],o[1]+l[1])&&(g=2);var _=new r(g);for(p=s.length,c=0;g>c;c+=1){for(v=new Array(p),f=c/(g-1),m=0,h=0;p>h;h+=1)d=bm_pow(1-f,3)*a[h]+3*bm_pow(1-f,2)*f*(a[h]+s[h])+3*(1-f)*bm_pow(f,2)*(o[h]+l[h])+bm_pow(f,3)*o[h],v[h]=d,null!==b&&(m+=bm_pow(v[h]-b[h],2));m=bm_sqrt(m),y+=m,_.points[c]=new i(m,v),b=v}_.segmentLength=y,n.bezierData=_,t[u]=_}}();return{getBezierLength:s,getNewSegment:o,buildBezierData:l,pointOnLine2D:e,pointOnLine3D:t}}function dataFunctionManager(){function e(n,a,s){var l,u,c,h,p,d,f,m,v=n.length;for(h=0;v>h;h+=1)if(l=n[h],"ks"in l&&!l.completed){if(l.completed=!0,l.tt&&(n[h-1].td=l.tt),u=[],c=-1,l.hasMask){var g=l.masksProperties;for(d=g.length,p=0;d>p;p+=1)if(g[p].pt.k.i)i(g[p].pt.k);else for(m=g[p].pt.k.length,f=0;m>f;f+=1)g[p].pt.k[f].s&&i(g[p].pt.k[f].s[0]),g[p].pt.k[f].e&&i(g[p].pt.k[f].e[0])}0===l.ty?(l.layers=t(l.refId,a),e(l.layers,a,s)):4===l.ty?r(l.shapes):5==l.ty&&o(l,s)}}function t(e,t){for(var r=0,i=t.length;i>r;){if(t[r].id===e)return t[r].layers;r+=1}}function r(e){var t,n,a,o=e.length,s=!1;for(t=o-1;t>=0;t-=1)if("sh"==e[t].ty){if(e[t].ks.k.i)i(e[t].ks.k);else for(a=e[t].ks.k.length,n=0;a>n;n+=1)e[t].ks.k[n].s&&i(e[t].ks.k[n].s[0]),e[t].ks.k[n].e&&i(e[t].ks.k[n].e[0]);s=!0}else"gr"==e[t].ty&&r(e[t].it)}function i(e){var t,r=e.i.length;for(t=0;r>t;t+=1)e.i[t][0]+=e.v[t][0],e.i[t][1]+=e.v[t][1],e.o[t][0]+=e.v[t][0],e.o[t][1]+=e.v[t][1]}function n(e,t){var r=t?t.split("."):[100,100,100];return e[0]>r[0]?!0:r[0]>e[0]?!1:e[1]>r[1]?!0:r[1]>e[1]?!1:e[2]>r[2]?!0:r[2]>e[2]?!1:void 0}function a(t,r){t.__complete||(l(t),s(t),u(t),e(t.layers,t.assets,r),t.__complete=!0)}function o(e,t){var r,i,n=e.t.d.k,a=n.length;for(i=0;a>i;i+=1){var o=e.t.d.k[i].s;r=[];var s,l,u,c,h,p,d,f=0,m=e.t.m.g,v=0,g=0,y=0,b=[],_=0,x=0,w=t.getFontByName(o.f),T=0,M=w.fStyle.split(" "),S="normal",E="normal";for(l=M.length,s=0;l>s;s+=1)"italic"===M[s].toLowerCase()?E="italic":"bold"===M[s].toLowerCase()?S="700":"black"===M[s].toLowerCase()?S="900":"medium"===M[s].toLowerCase()?S="500":"regular"===M[s].toLowerCase()||"normal"===M[s].toLowerCase()?S="400":("light"===M[s].toLowerCase()||"thin"===M[s].toLowerCase())&&(S="200");if(o.fWeight=S,o.fStyle=E,l=o.t.length,o.sz){var P=o.sz[0],A=-1;for(s=0;l>s;s+=1)u=!1," "===o.t.charAt(s)?A=s:13===o.t.charCodeAt(s)&&(_=0,u=!0),t.chars?(d=t.getCharData(o.t.charAt(s),w.fStyle,w.fFamily),T=u?0:d.w*o.s/100):T=t.measureText(o.t.charAt(s),o.f,o.s),_+T>P?(-1===A?(o.t=o.t.substr(0,s)+"\r"+o.t.substr(s),l+=1):(s=A,o.t=o.t.substr(0,s)+"\r"+o.t.substr(s+1)),A=-1,_=0):_+=T;l=o.t.length}for(_=0,T=0,s=0;l>s;s+=1)if(u=!1," "===o.t.charAt(s)?c=" ":13===o.t.charCodeAt(s)?(b.push(_),x=_>x?_:x,_=0,c="",u=!0,y+=1):c=o.t.charAt(s),t.chars?(d=t.getCharData(o.t.charAt(s),w.fStyle,t.getFontByName(o.f).fFamily),T=u?0:d.w*o.s/100):T=t.measureText(c,o.f,o.s),_+=T,r.push({l:T,an:T,add:v,n:u,anIndexes:[],val:c,line:y}),2==m){if(v+=T,""==c||" "==c||s==l-1){for((""==c||" "==c)&&(v-=T);s>=g;)r[g].an=v,r[g].ind=f,r[g].extra=T,g+=1;f+=1,v=0}}else if(3==m){if(v+=T,""==c||s==l-1){for(""==c&&(v-=T);s>=g;)r[g].an=v,r[g].ind=f,r[g].extra=T,g+=1;v=0,f+=1}}else r[f].ind=f,r[f].extra=0,f+=1;if(o.l=r,x=_>x?_:x,b.push(_),o.sz)o.boxWidth=o.sz[0],o.justifyOffset=0;else switch(o.boxWidth=x,o.j){case 1:o.justifyOffset=-o.boxWidth;break;case 2:o.justifyOffset=-o.boxWidth/2;break;default:o.justifyOffset=0}o.lineWidths=b;var C=e.t.a;p=C.length;var O,k,L=[];for(h=0;p>h;h+=1){for(C[h].a.sc&&(o.strokeColorAnim=!0),C[h].a.sw&&(o.strokeWidthAnim=!0),(C[h].a.fc||C[h].a.fh||C[h].a.fs||C[h].a.fb)&&(o.fillColorAnim=!0),k=0,O=C[h].s.b,s=0;l>s;s+=1)r[s].anIndexes[h]=k,(1==O&&""!=r[s].val||2==O&&""!=r[s].val&&" "!=r[s].val||3==O&&(r[s].n||" "==r[s].val||s==l-1)||4==O&&(r[s].n||s==l-1))&&(1===C[h].s.rn&&L.push(k),k+=1);e.t.a[h].s.totalChars=k;var R,I=-1;if(1===C[h].s.rn)for(s=0;l>s;s+=1)I!=r[s].anIndexes[h]&&(I=r[s].anIndexes[h],R=L.splice(Math.floor(Math.random()*L.length),1)[0]),r[s].anIndexes[h]=R}0!==p||"m"in e.t.p||(e.singleShape=!0),o.yOffset=o.lh||1.2*o.s,o.ascent=w.ascent*o.s/100}}var s=function(){function e(e){var t=e.t.d;e.t.d={k:[{s:t,t:0}]}}function t(t){var r,i=t.length;for(r=0;i>r;r+=1)5===t[r].ty&&e(t[r])}var r=[4,4,14];return function(e){if(n(r,e.v)&&(t(e.layers),e.assets)){var i,a=e.assets.length;for(i=0;a>i;i+=1)e.assets[i].layers&&t(e.assets[i].layers)}}}(),l=function(){function e(t){var r,i,n,a=t.length;for(r=0;a>r;r+=1)if("gr"===t[r].ty)e(t[r].it);else if("fl"===t[r].ty||"st"===t[r].ty)if(t[r].c.k&&t[r].c.k[0].i)for(n=t[r].c.k.length,i=0;n>i;i+=1)t[r].c.k[i].s&&(t[r].c.k[i].s[0]/=255,t[r].c.k[i].s[1]/=255,t[r].c.k[i].s[2]/=255,t[r].c.k[i].s[3]/=255),t[r].c.k[i].e&&(t[r].c.k[i].e[0]/=255,t[r].c.k[i].e[1]/=255,t[r].c.k[i].e[2]/=255,t[r].c.k[i].e[3]/=255);else t[r].c.k[0]/=255,t[r].c.k[1]/=255,t[r].c.k[2]/=255,t[r].c.k[3]/=255}function t(t){var r,i=t.length;for(r=0;i>r;r+=1)4===t[r].ty&&e(t[r].shapes)}var r=[4,1,9];return function(e){if(n(r,e.v)&&(t(e.layers),e.assets)){var i,a=e.assets.length;for(i=0;a>i;i+=1)e.assets[i].layers&&t(e.assets[i].layers)}}}(),u=function(){function e(t){var r,i,n,a=t.length,o=!1;for(r=a-1;r>=0;r-=1)if("sh"==t[r].ty){if(t[r].ks.k.i)t[r].ks.k.c=t[r].closed;else for(n=t[r].ks.k.length,i=0;n>i;i+=1)t[r].ks.k[i].s&&(t[r].ks.k[i].s[0].c=t[r].closed),t[r].ks.k[i].e&&(t[r].ks.k[i].e[0].c=t[r].closed);o=!0}else"gr"==t[r].ty&&e(t[r].it)}function t(t){var r,i,n,a,o,s,l=t.length;for(i=0;l>i;i+=1){if(r=t[i],r.hasMask){var u=r.masksProperties;for(a=u.length,n=0;a>n;n+=1)if(u[n].pt.k.i)u[n].pt.k.c=u[n].cl;else for(s=u[n].pt.k.length,o=0;s>o;o+=1)u[n].pt.k[o].s&&(u[n].pt.k[o].s[0].c=u[n].cl),u[n].pt.k[o].e&&(u[n].pt.k[o].e[0].c=u[n].cl)}4===r.ty&&e(r.shapes)}}var r=[4,4,18];return function(e){if(n(r,e.v)&&(t(e.layers),e.assets)){var i,a=e.assets.length;for(i=0;a>i;i+=1)e.assets[i].layers&&t(e.assets[i].layers)}}}(),c={};return c.completeData=a,c}function ShapeModifier(){}function TrimModifier(){}function MouseModifier(){}function RoundCornersModifier(){}function BaseRenderer(){}function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.globalData={frameNum:-1},this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",progressiveLoad:t&&t.progressiveLoad||!1},this.elements=[],this.pendingElements=[],this.destroyed=!1}function MaskElement(e,t,r){this.dynamicProperties=[],this.data=e,this.element=t,this.globalData=r,this.paths=[],this.storedData=[],this.masksProperties=this.data.masksProperties,this.viewData=new Array(this.masksProperties.length),this.maskElement=null,this.firstFrame=!0;var i,n,a,o,s,l,u,c,h=this.globalData.defs,p=this.masksProperties.length,d=this.masksProperties,f=0,m=[],v=randomString(10),g="clipPath",y="clip-path";for(i=0;p>i;i++)if(("a"!==d[i].mode&&"n"!==d[i].mode||d[i].inv||100!==d[i].o.k)&&(g="mask",y="mask"),"s"!=d[i].mode&&"i"!=d[i].mode||0!=f?s=null:(s=document.createElementNS(svgNS,"rect"),s.setAttribute("fill","#ffffff"),s.setAttribute("width",this.element.comp.data?this.element.comp.data.w:this.element.globalData.compSize.w),s.setAttribute("height",this.element.comp.data?this.element.comp.data.h:this.element.globalData.compSize.h),m.push(s)),n=document.createElementNS(svgNS,"path"),"n"!=d[i].mode){if(f+=1,"s"==d[i].mode?n.setAttribute("fill","#000000"):n.setAttribute("fill","#ffffff"),n.setAttribute("clip-rule","nonzero"),0!==d[i].x.k){g="mask",y="mask",c=PropertyFactory.getProp(this.element,d[i].x,0,null,this.dynamicProperties);var b="fi_"+randomString(10);l=document.createElementNS(svgNS,"filter"),l.setAttribute("id",b),u=document.createElementNS(svgNS,"feMorphology"),u.setAttribute("operator","dilate"),u.setAttribute("in","SourceGraphic"),u.setAttribute("radius","0"),l.appendChild(u),h.appendChild(l),"s"==d[i].mode?n.setAttribute("stroke","#000000"):n.setAttribute("stroke","#ffffff")}else u=null,c=null;if(this.storedData[i]={elem:n,x:c,expan:u,lastPath:"",lastOperator:"",filterId:b,lastRadius:0},"i"==d[i].mode){o=m.length;var _=document.createElementNS(svgNS,"g");for(a=0;o>a;a+=1)_.appendChild(m[a]);var x=document.createElementNS(svgNS,"mask");x.setAttribute("mask-type","alpha"),x.setAttribute("id",v+"_"+f),x.appendChild(n),h.appendChild(x),_.setAttribute("mask","url(#"+v+"_"+f+")"),m.length=0,m.push(_)}else m.push(n);d[i].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[i]={elem:n,lastPath:"",op:PropertyFactory.getProp(this.element,d[i].o,0,.01,this.dynamicProperties),prop:ShapePropertyFactory.getShapeProp(this.element,d[i],3,this.dynamicProperties,null)},s&&(this.viewData[i].invRect=s),this.viewData[i].prop.k||this.drawPath(d[i],this.viewData[i].prop.v,this.viewData[i])}else this.viewData[i]={op:PropertyFactory.getProp(this.element,d[i].o,0,.01,this.dynamicProperties),prop:ShapePropertyFactory.getShapeProp(this.element,d[i],3,this.dynamicProperties,null),elem:n},h.appendChild(n);for(this.maskElement=document.createElementNS(svgNS,g),p=m.length,i=0;p>i;i+=1)this.maskElement.appendChild(m[i]);this.maskElement.setAttribute("id",v),f>0&&this.element.maskedElement.setAttribute(y,"url(#"+v+")"),h.appendChild(this.maskElement)}function BaseElement(){}function SVGBaseElement(e,t,r,i,n){this.globalData=r,this.comp=i,this.data=e,this.matteElement=null,this.parentContainer=t,this.layerId=n?n.layerId:"ly_"+randomString(10),this.placeholder=n,this.init()}function ITextElement(){}function SVGTextElement(e,t,r,i,n){this.textSpans=[],this.renderType="svg",this._parent.constructor.call(this,e,t,r,i,n)}function SVGEffects(e){var t,r=e.data.ef.length,i=randomString(10),n=filtersFactory.createFilter(i),a=0;this.filters=[];var o;for(t=0;r>t;t+=1)20===e.data.ef[t].ty?(a+=1,o=new SVGTintFilter(n,e.effects.effectElements[t]),this.filters.push(o)):21===e.data.ef[t].ty?(a+=1,o=new SVGFillFilter(n,e.effects.effectElements[t]),this.filters.push(o)):22===e.data.ef[t].ty&&(o=new SVGStrokeEffect(e,e.effects.effectElements[t]),this.filters.push(o));a&&(e.globalData.defs.appendChild(n),e.layerElement.setAttribute("filter","url(#"+i+")"))}function SVGTintFilter(e,t){this.filterManager=t;var r=document.createElementNS(svgNS,"feColorMatrix");if(r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","linearRGB"),r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),r.setAttribute("result","f1"),e.appendChild(r),r=document.createElementNS(svgNS,"feColorMatrix"),r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),r.setAttribute("result","f2"),e.appendChild(r),this.matrixFilter=r,100!==t.effectElements[2].p.v||t.effectElements[2].p.k){var i=document.createElementNS(svgNS,"feMerge");e.appendChild(i);var n;n=document.createElementNS(svgNS,"feMergeNode"),n.setAttribute("in","SourceGraphic"),i.appendChild(n),n=document.createElementNS(svgNS,"feMergeNode"),n.setAttribute("in","f2"),i.appendChild(n)}}function SVGFillFilter(e,t){this.filterManager=t;var r=document.createElementNS(svgNS,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),e.appendChild(r),this.matrixFilter=r}function SVGStrokeEffect(e,t){this.initialized=!1,this.filterManager=t,this.elem=e,this.paths=[]}function ICompElement(e,t,r,i,n){this._parent.constructor.call(this,e,t,r,i,n),this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?Array.apply(null,{length:this.layers.length}):[],this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,r.frameRate,this.dynamicProperties)),this.data.xt?(this.layerElement=document.createElementNS(svgNS,"g"),this.buildAllItems()):r.progressiveLoad||this.buildAllItems()}function IImageElement(e,t,r,i,n){this.assetData=r.getAssetData(e.refId),this._parent.constructor.call(this,e,t,r,i,n)}function IShapeElement(e,t,r,i,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.viewData=[],this.shapeModifiers=[],this._parent.constructor.call(this,e,t,r,i,n)}function ISolidElement(e,t,r,i,n){this._parent.constructor.call(this,e,t,r,i,n)}function CanvasRenderer(e,t){this.animationItem=e,this.renderConfig={clearCanvas:t&&void 0!==t.clearCanvas?t.clearCanvas:!0,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet"},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1},this.contextData={saved:Array.apply(null,{length:15}),savedOp:Array.apply(null,{length:15}),cArrPos:0,cTr:new Matrix,cO:1};var r,i=15;for(r=0;i>r;r+=1)this.contextData.saved[r]=Array.apply(null,{length:16});this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1}function HybridRenderer(e){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.globalData={frameNum:-1},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0}function CVBaseElement(e,t,r){this.globalData=r,this.data=e,this.comp=t,this.canvasContext=r.canvasContext,this.init()}function CVCompElement(e,t,r){this._parent.constructor.call(this,e,t,r);var i={};for(var n in r)r.hasOwnProperty(n)&&(i[n]=r[n]);i.renderer=this,i.compHeight=this.data.h,i.compWidth=this.data.w,this.renderConfig={clearCanvas:!0},this.contextData={saved:Array.apply(null,{length:15}),savedOp:Array.apply(null,{length:15}),cArrPos:0,cTr:new Matrix,cO:1},this.completeLayers=!1;var a,o=15;for(a=0;o>a;a+=1)this.contextData.saved[a]=Array.apply(null,{length:16});this.transformMat=new Matrix,this.parentGlobalData=this.globalData;var s=document.createElement("canvas");i.canvasContext=s.getContext("2d"),this.canvasContext=i.canvasContext,s.width=this.data.w,s.height=this.data.h,this.canvas=s,this.globalData=i,this.layers=e.layers,this.pendingElements=[],this.elements=Array.apply(null,{length:this.layers.length}),this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,r.frameRate,this.dynamicProperties)),(this.data.xt||!r.progressiveLoad)&&this.buildAllItems()}function CVImageElement(e,t,r){this.assetData=r.getAssetData(e.refId),this._parent.constructor.call(this,e,t,r),this.globalData.addPendingElement()}function CVMaskElement(e,t){this.data=e,this.element=t,this.dynamicProperties=[],this.masksProperties=this.data.masksProperties,this.viewData=new Array(this.masksProperties.length);var r,i=this.masksProperties.length;for(r=0;i>r;r++)this.viewData[r]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[r],3,this.dynamicProperties,null)}function CVShapeElement(e,t,r){this.shapes=[],this.stylesList=[],this.viewData=[],this.shapeModifiers=[],this.shapesData=e.shapes,this.firstFrame=!0,this._parent.constructor.call(this,e,t,r)}function CVSolidElement(e,t,r){this._parent.constructor.call(this,e,t,r)}function CVTextElement(e,t,r){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this._parent.constructor.call(this,e,t,r)}function HBaseElement(e,t,r,i,n){this.globalData=r,this.comp=i,this.data=e,this.matteElement=null,this.parentContainer=t,this.layerId=n?n.layerId:"ly_"+randomString(10),this.placeholder=n,this.init()}function HSolidElement(e,t,r,i,n){this._parent.constructor.call(this,e,t,r,i,n)}function HCompElement(e,t,r,i,n){this._parent.constructor.call(this,e,t,r,i,n),this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=Array.apply(null,{length:this.layers.length}),this.data.tm&&(this.tm=PropertyFactory.getProp(this,this.data.tm,0,r.frameRate,this.dynamicProperties)),this.data.hasMask&&(this.supports3d=!1),this.data.xt&&(this.layerElement=document.createElement("div")),this.buildAllItems()}function HShapeElement(e,t,r,i,n){this.shapes=[],this.shapeModifiers=[],this.shapesData=e.shapes,this.stylesList=[],this.viewData=[],this._parent.constructor.call(this,e,t,r,i,n),this.addedTransforms={mdf:!1,mats:[this.finalTransform.mat]},this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(e,t,r,i,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this._parent.constructor.call(this,e,t,r,i,n)}function HImageElement(e,t,r,i,n){this.assetData=r.getAssetData(e.refId),this._parent.constructor.call(this,e,t,r,i,n)}function HCameraElement(e,t,r,i,n){if(this._parent.constructor.call(this,e,t,r,i,n),this.pe=PropertyFactory.getProp(this,e.pe,0,0,this.dynamicProperties),e.ks.p.s?(this.px=PropertyFactory.getProp(this,e.ks.p.x,1,0,this.dynamicProperties),this.py=PropertyFactory.getProp(this,e.ks.p.y,1,0,this.dynamicProperties),this.pz=PropertyFactory.getProp(this,e.ks.p.z,1,0,this.dynamicProperties)):this.p=PropertyFactory.getProp(this,e.ks.p,1,0,this.dynamicProperties),e.ks.a&&(this.a=PropertyFactory.getProp(this,e.ks.a,1,0,this.dynamicProperties)),e.ks.or.k.length){var a,o=e.ks.or.k.length;for(a=0;o>a;a+=1)e.ks.or.k[a].to=null,e.ks.or.k[a].ti=null}this.or=PropertyFactory.getProp(this,e.ks.or,1,degToRads,this.dynamicProperties),this.or.sh=!0,this.rx=PropertyFactory.getProp(this,e.ks.rx,0,degToRads,this.dynamicProperties),this.ry=PropertyFactory.getProp(this,e.ks.ry,0,degToRads,this.dynamicProperties),this.rz=PropertyFactory.getProp(this,e.ks.rz,0,degToRads,this.dynamicProperties),this.mat=new Matrix}function SliderEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function AngleEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r);

}function ColorEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,1,0,r)}function PointEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,1,0,r)}function LayerIndexEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function CheckboxEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,1,0,r)}function NoValueEffect(){this.p={}}function EffectsManager(e,t,r){var i=e.ef;this.effectElements=[];var n,a,o=i.length;for(n=0;o>n;n++)a=new GroupEffect(i[n],t,r),this.effectElements.push(a)}function GroupEffect(e,t,r){this.dynamicProperties=[],this.init(e,t,this.dynamicProperties),this.dynamicProperties.length&&r.push(this)}function play(e){animationManager.play(e)}function pause(e){animationManager.pause(e)}function togglePause(e){animationManager.togglePause(e)}function setSpeed(e,t){animationManager.setSpeed(e,t)}function setDirection(e,t){animationManager.setDirection(e,t)}function stop(e){animationManager.stop(e)}function moveFrame(e){animationManager.moveFrame(e)}function searchAnimations(){standalone===!0?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function registerAnimation(e){return animationManager.registerAnimation(e)}function resize(){animationManager.resize()}function start(){animationManager.start()}function goToAndStop(e,t,r){animationManager.goToAndStop(e,t,r)}function setSubframeRendering(e){subframeEnabled=e}function loadAnimation(e){return standalone===!0&&(e.animationData=JSON.parse(animationData)),animationManager.loadAnimation(e)}function destroy(e){return animationManager.destroy(e)}function setQuality(e){if("string"==typeof e)switch(e){case"high":defaultCurveSegments=200;break;case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(e)&&e>1&&(defaultCurveSegments=e);roundValues(defaultCurveSegments>=50?!1:!0)}function installPlugin(e,t){"expressions"===e&&(expressionsPlugin=t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),r=0;r<t.length;r++){var i=t[r].split("=");if(decodeURIComponent(i[0])==e)return decodeURIComponent(i[1])}}var svgNS="http://www.w3.org/2000/svg",subframeEnabled=!0,expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bm_rounder=Math.round,bm_rnd,bm_pow=Math.pow,bm_sqrt=Math.sqrt,bm_abs=Math.abs,bm_floor=Math.floor,bm_max=Math.max,bm_min=Math.min,blitter=10,BMMath={};!function(){var e,t=Object.getOwnPropertyNames(Math),r=t.length;for(e=0;r>e;e+=1)BMMath[t[e]]=Math[t[e]]}(),BMMath.random=Math.random,BMMath.abs=function(e){var t=typeof e;if("object"===t&&e.length){var r,i=Array.apply(null,{length:e.length}),n=e.length;for(r=0;n>r;r+=1)i[r]=Math.abs(e[r]);return i}return Math.abs(e)};var defaultCurveSegments=75,degToRads=Math.PI/180,roundCorner=.5519;roundValues(!1);var rgbToHex=function(){var e,t,r=[];for(e=0;256>e;e+=1)t=e.toString(16),r[e]=1==t.length?"0"+t:t;return function(e,t,i){return 0>e&&(e=0),0>t&&(t=0),0>i&&(i=0),"#"+r[e]+r[t]+r[i]}}(),fillColorToString=function(){var e=[];return function(t,r){return void 0!==r&&(t[3]=r),e[t[0]]||(e[t[0]]={}),e[t[0]][t[1]]||(e[t[0]][t[1]]={}),e[t[0]][t[1]][t[2]]||(e[t[0]][t[1]][t[2]]={}),e[t[0]][t[1]][t[2]][t[3]]||(e[t[0]][t[1]][t[2]][t[3]]="rgba("+t.join(",")+")"),e[t[0]][t[1]][t[2]][t[3]]}}(),Matrix=function(){function e(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function t(e){if(0===e)return this;var t=Math.cos(e),r=Math.sin(e);return this._t(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1)}function r(e){if(0===e)return this;var t=Math.cos(e),r=Math.sin(e);return this._t(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1)}function i(e){if(0===e)return this;var t=Math.cos(e),r=Math.sin(e);return this._t(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1)}function n(e){if(0===e)return this;var t=Math.cos(e),r=Math.sin(e);return this._t(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1)}function a(e,t){return this._t(1,t,e,1,0,0)}function o(e,t){return this.shear(Math.tan(e),Math.tan(t))}function s(e,t){var r=Math.cos(t),i=Math.sin(t);return this._t(r,i,0,0,-i,r,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,Math.tan(e),1,0,0,0,0,1,0,0,0,0,1)._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function l(e,t,r){return r=isNaN(r)?1:r,1==e&&1==t&&1==r?this:this._t(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1)}function u(e,t,r,i,n,a,o,s,l,u,c,h,p,d,f,m){return this.props[0]=e,this.props[1]=t,this.props[2]=r,this.props[3]=i,this.props[4]=n,this.props[5]=a,this.props[6]=o,this.props[7]=s,this.props[8]=l,this.props[9]=u,this.props[10]=c,this.props[11]=h,this.props[12]=p,this.props[13]=d,this.props[14]=f,this.props[15]=m,this}function c(e,t,r){return r=r||0,0!==e||0!==t||0!==r?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1):this}function h(e,t,r,i,n,a,o,s,l,u,c,h,p,d,f,m){if(1===e&&0===t&&0===r&&0===i&&0===n&&1===a&&0===o&&0===s&&0===l&&0===u&&1===c&&0===h)return(0!==p||0!==d||0!==f)&&(this.props[12]=this.props[12]*e+this.props[13]*n+this.props[14]*l+this.props[15]*p,this.props[13]=this.props[12]*t+this.props[13]*a+this.props[14]*u+this.props[15]*d,this.props[14]=this.props[12]*r+this.props[13]*o+this.props[14]*c+this.props[15]*f,this.props[15]=this.props[12]*i+this.props[13]*s+this.props[14]*h+this.props[15]*m),this;var v=this.props[0],g=this.props[1],y=this.props[2],b=this.props[3],_=this.props[4],x=this.props[5],w=this.props[6],T=this.props[7],M=this.props[8],S=this.props[9],E=this.props[10],P=this.props[11],A=this.props[12],C=this.props[13],O=this.props[14],k=this.props[15];return this.props[0]=v*e+g*n+y*l+b*p,this.props[1]=v*t+g*a+y*u+b*d,this.props[2]=v*r+g*o+y*c+b*f,this.props[3]=v*i+g*s+y*h+b*m,this.props[4]=_*e+x*n+w*l+T*p,this.props[5]=_*t+x*a+w*u+T*d,this.props[6]=_*r+x*o+w*c+T*f,this.props[7]=_*i+x*s+w*h+T*m,this.props[8]=M*e+S*n+E*l+P*p,this.props[9]=M*t+S*a+E*u+P*d,this.props[10]=M*r+S*o+E*c+P*f,this.props[11]=M*i+S*s+E*h+P*m,this.props[12]=A*e+C*n+O*l+k*p,this.props[13]=A*t+C*a+O*u+k*d,this.props[14]=A*r+C*o+O*c+k*f,this.props[15]=A*i+C*s+O*h+k*m,this}function p(e){var t;for(t=0;16>t;t+=1)e.props[t]=this.props[t]}function d(e){var t;for(t=0;16>t;t+=1)this.props[t]=e[t]}function f(e,t,r){return{x:e*this.props[0]+t*this.props[4]+r*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+r*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+r*this.props[10]+this.props[14]}}function m(e,t,r){return e*this.props[0]+t*this.props[4]+r*this.props[8]+this.props[12]}function v(e,t,r){return e*this.props[1]+t*this.props[5]+r*this.props[9]+this.props[13]}function g(e,t,r){return e*this.props[2]+t*this.props[6]+r*this.props[10]+this.props[14]}function y(e){var t,r=this.props[0]*this.props[5]-this.props[1]*this.props[4],i=this.props[5]/r,n=-this.props[1]/r,a=-this.props[4]/r,o=this.props[0]/r,s=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/r,l=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/r,u=e.length,c=[];for(t=0;u>t;t+=1)c[t]=[e[t][0]*i+e[t][1]*a+s,e[t][0]*n+e[t][1]*o+l,0];return c}function b(e,t,r){return[e*this.props[0]+t*this.props[4]+r*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+r*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+r*this.props[10]+this.props[14]]}function _(e,t){return bm_rnd(e*this.props[0]+t*this.props[4]+this.props[12])+","+bm_rnd(e*this.props[1]+t*this.props[5]+this.props[13])}function x(){return[this.props[0],this.props[1],this.props[2],this.props[3],this.props[4],this.props[5],this.props[6],this.props[7],this.props[8],this.props[9],this.props[10],this.props[11],this.props[12],this.props[13],this.props[14],this.props[15]]}function w(){return isSafari?"matrix3d("+roundTo2Decimals(this.props[0])+","+roundTo2Decimals(this.props[1])+","+roundTo2Decimals(this.props[2])+","+roundTo2Decimals(this.props[3])+","+roundTo2Decimals(this.props[4])+","+roundTo2Decimals(this.props[5])+","+roundTo2Decimals(this.props[6])+","+roundTo2Decimals(this.props[7])+","+roundTo2Decimals(this.props[8])+","+roundTo2Decimals(this.props[9])+","+roundTo2Decimals(this.props[10])+","+roundTo2Decimals(this.props[11])+","+roundTo2Decimals(this.props[12])+","+roundTo2Decimals(this.props[13])+","+roundTo2Decimals(this.props[14])+","+roundTo2Decimals(this.props[15])+")":(this.cssParts[1]=this.props.join(","),this.cssParts.join(""))}function T(){return"matrix("+this.props[0]+","+this.props[1]+","+this.props[4]+","+this.props[5]+","+this.props[12]+","+this.props[13]+")"}function M(){return""+this.toArray()}return function(){this.reset=e,this.rotate=t,this.rotateX=r,this.rotateY=i,this.rotateZ=n,this.skew=o,this.skewFromAxis=s,this.shear=a,this.scale=l,this.setTransform=u,this.translate=c,this.transform=h,this.applyToPoint=f,this.applyToX=m,this.applyToY=v,this.applyToZ=g,this.applyToPointArray=b,this.applyToPointStringified=_,this.toArray=x,this.toCSS=w,this.to2dCSS=T,this.toString=M,this.clone=p,this.cloneFromProps=d,this.inversePoints=y,this._t=this.transform,this.props=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.cssParts=["matrix3d(","",")"]}}();!function(e,t){function r(r,u,c){var d=[];u=1==u?{entropy:!0}:u||{};var y=o(a(u.entropy?[r,l(e)]:null==r?s():r,3),d),b=new i(d),_=function(){for(var e=b.g(p),t=m,r=0;v>e;)e=(e+r)*h,t*=h,r=b.g(1);for(;e>=g;)e/=2,t/=2,r>>>=1;return(e+r)/t};return _.int32=function(){return 0|b.g(4)},_.quick=function(){return b.g(4)/4294967296},_["double"]=_,o(l(b.S),e),(u.pass||c||function(e,r,i,a){return a&&(a.S&&n(a,b),e.state=function(){return n(b,{})}),i?(t[f]=e,r):e})(_,y,"global"in u?u.global:this==t,u.state)}function i(e){var t,r=e.length,i=this,n=0,a=i.i=i.j=0,o=i.S=[];for(r||(e=[r++]);h>n;)o[n]=n++;for(n=0;h>n;n++)o[n]=o[a=y&a+e[n%r]+(t=o[n])],o[a]=t;(i.g=function(e){for(var t,r=0,n=i.i,a=i.j,o=i.S;e--;)t=o[n=y&n+1],r=r*h+o[y&(o[n]=o[a=y&a+t])+(o[a]=t)];return i.i=n,i.j=a,r})(h)}function n(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function a(e,t){var r,i=[],n=typeof e;if(t&&"object"==n)for(r in e)try{i.push(a(e[r],t-1))}catch(o){}return i.length?i:"string"==n?e:e+"\x00"}function o(e,t){for(var r,i=e+"",n=0;n<i.length;)t[y&n]=y&(r^=19*t[y&n])+i.charCodeAt(n++);return l(t)}function s(){try{if(u)return l(u.randomBytes(h));var t=new Uint8Array(h);return(c.crypto||c.msCrypto).getRandomValues(t),l(t)}catch(r){var i=c.navigator,n=i&&i.plugins;return[+new Date,c,n,c.screen,l(e)]}}function l(e){return String.fromCharCode.apply(0,e)}var u,c=this,h=256,p=6,d=52,f="random",m=t.pow(h,p),v=t.pow(2,d),g=2*v,y=h-1;t["seed"+f]=r,o(t.random(),e)}([],BMMath);var BezierFactory=function(){function e(e,t,r,i,n){var a=n||("bez_"+e+"_"+t+"_"+r+"_"+i).replace(/\./g,"p");if(c[a])return c[a];var o=new l([e,t,r,i]);return c[a]=o,o}function t(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function i(e){return 3*e}function n(e,n,a){return((t(n,a)*e+r(n,a))*e+i(n))*e}function a(e,n,a){return 3*t(n,a)*e*e+2*r(n,a)*e+i(n)}function o(e,t,r,i,a){var o,s,l=0;do s=t+(r-t)/2,o=n(s,i,a)-e,o>0?r=s:t=s;while(Math.abs(o)>d&&++l<f);return s}function s(e,t,r,i){for(var o=0;h>o;++o){var s=a(t,r,i);if(0===s)return t;var l=n(t,r,i)-e;t-=l/s}return t}function l(e){this._p=e,this._mSampleValues=g?new Float32Array(m):new Array(m),this._precomputed=!1,this.get=this.get.bind(this)}var u={};u.getBezierEasing=e;var c={},h=4,p=.001,d=1e-7,f=10,m=11,v=1/(m-1),g="function"==typeof Float32Array;return l.prototype={get:function(e){var t=this._p[0],r=this._p[1],i=this._p[2],a=this._p[3];return this._precomputed||this._precompute(),t===r&&i===a?e:0===e?0:1===e?1:n(this._getTForX(e),r,a)},_precompute:function(){var e=this._p[0],t=this._p[1],r=this._p[2],i=this._p[3];this._precomputed=!0,(e!==t||r!==i)&&this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],r=0;m>r;++r)this._mSampleValues[r]=n(r*v,e,t)},_getTForX:function(e){for(var t=this._p[0],r=this._p[2],i=this._mSampleValues,n=0,l=1,u=m-1;l!==u&&i[l]<=e;++l)n+=v;--l;var c=(e-i[l])/(i[l+1]-i[l]),h=n+c*v,d=a(h,t,r);return d>=p?s(e,h,t,r):0===d?h:o(e,n,n+v,t,r)}},u}(),MatrixManager=matrixManagerFunction;!function(){for(var e=0,t=["ms","moz","webkit","o"],r=0;r<t.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[t[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[r]+"CancelAnimationFrame"]||window[t[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),n=window.setTimeout(function(){t(r+i)},i);return e=r+i,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var bez=bezFunction(),dataManager=dataFunctionManager(),FontManager=function(){function e(e,t){var r=document.createElement("span");r.style.fontFamily=t;var i=document.createElement("span");i.innerHTML="giItT1WQy@!-/#",r.style.position="absolute",r.style.left="-10000px",r.style.top="-10000px",r.style.fontSize="300px",r.style.fontVariant="normal",r.style.fontStyle="normal",r.style.fontWeight="normal",r.style.letterSpacing="0",r.appendChild(i),document.body.appendChild(r);var n=i.offsetWidth;return i.style.fontFamily=e+", "+t,{node:i,w:n,parent:r}}function t(){var e,r,i,n=this.fonts.length,a=n;for(e=0;n>e;e+=1)if(this.fonts[e].loaded)a-=1;else if("t"===this.fonts[e].fOrigin){if(window.Typekit&&window.Typekit.load&&0===this.typekitLoaded){this.typekitLoaded=1;try{Typekit.load({async:!0,active:function(){this.typekitLoaded=2}.bind(this)})}catch(o){}}2===this.typekitLoaded&&(this.fonts[e].loaded=!0)}else"n"===this.fonts[e].fOrigin?this.fonts[e].loaded=!0:(r=this.fonts[e].monoCase.node,i=this.fonts[e].monoCase.w,r.offsetWidth!==i?(a-=1,this.fonts[e].loaded=!0):(r=this.fonts[e].sansCase.node,i=this.fonts[e].sansCase.w,r.offsetWidth!==i&&(a-=1,this.fonts[e].loaded=!0)),this.fonts[e].loaded&&(this.fonts[e].sansCase.parent.parentNode.removeChild(this.fonts[e].sansCase.parent),this.fonts[e].monoCase.parent.parentNode.removeChild(this.fonts[e].monoCase.parent)));0!==a&&Date.now()-this.initTime<l?setTimeout(t.bind(this),20):setTimeout(function(){this.loaded=!0}.bind(this),0)}function r(e,t){var r=document.createElementNS(svgNS,"text");r.style.fontSize="100px",r.style.fontFamily=t.fFamily,r.textContent="1",t.fClass?(r.style.fontFamily="inherit",r.className=t.fClass):r.style.fontFamily=t.fFamily,e.appendChild(r);var i=document.createElement("canvas").getContext("2d");return i.font="100px "+t.fFamily,i}function i(i,n){if(!i)return void(this.loaded=!0);if(this.chars)return this.loaded=!0,void(this.fonts=i.list);var a,o=i.list,s=o.length;for(a=0;s>a;a+=1){if(o[a].loaded=!1,o[a].monoCase=e(o[a].fFamily,"monospace"),o[a].sansCase=e(o[a].fFamily,"sans-serif"),o[a].fPath){if("p"===o[a].fOrigin){var l=document.createElement("style");l.type="text/css",l.innerHTML="@font-face {font-family: "+o[a].fFamily+"; font-style: normal; src: url('"+o[a].fPath+"');}",n.appendChild(l)}else if("g"===o[a].fOrigin){var u=document.createElement("link");u.type="text/css",u.rel="stylesheet",u.href=o[a].fPath,n.appendChild(u)}else if("t"===o[a].fOrigin){var c=document.createElement("script");c.setAttribute("src",o[a].fPath),n.appendChild(c)}}else o[a].loaded=!0;o[a].helper=r(n,o[a]),this.fonts.push(o[a])}t.bind(this)()}function n(e){if(e){this.chars||(this.chars=[]);var t,r,i,n=e.length,a=this.chars.length;for(t=0;n>t;t+=1){for(r=0,i=!1;a>r;)this.chars[r].style===e[t].style&&this.chars[r].fFamily===e[t].fFamily&&this.chars[r].ch===e[t].ch&&(i=!0),r+=1;i||(this.chars.push(e[t]),a+=1)}}}function a(e,t,r){for(var i=0,n=this.chars.length;n>i;){if(this.chars[i].ch===e&&this.chars[i].style===t&&this.chars[i].fFamily===r)return this.chars[i];i+=1}}function o(e,t,r){var i=this.getFontByName(t),n=i.helper;return n.measureText(e).width*r/100}function s(e){for(var t=0,r=this.fonts.length;r>t;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return"sans-serif"}var l=5e3,u=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.loaded=!1,this.initTime=Date.now()};return u.prototype.addChars=n,u.prototype.addFonts=i,u.prototype.getCharData=a,u.prototype.getFontByName=s,u.prototype.measureText=o,u}(),PropertyFactory=function(){function e(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var e=this.comp.renderedFrame-this.offsetTime;if(e===this.lastFrame||this.lastFrame!==u&&(this.lastFrame>=this.keyframes[this.keyframes.length-1].t-this.offsetTime&&e>=this.keyframes[this.keyframes.length-1].t-this.offsetTime||this.lastFrame<this.keyframes[0].t-this.offsetTime&&e<this.keyframes[0].t-this.offsetTime));else{for(var t,r,i=0,n=this.keyframes.length-1,a=1,o=!0;o;){if(t=this.keyframes[i],r=this.keyframes[i+1],i==n-1&&e>=r.t-this.offsetTime){t.h&&(t=r);break}if(r.t-this.offsetTime>e)break;n-1>i?i+=a:o=!1}var s,l,c,h,p,d=0;if(t.to){t.bezierData||bez.buildBezierData(t);var f=t.bezierData;if(e>=r.t-this.offsetTime||e<t.t-this.offsetTime){var m=e>=r.t-this.offsetTime?f.points.length-1:0;for(l=f.points[m].point.length,s=0;l>s;s+=1)this.v[s]=this.mult?f.points[m].point[s]*this.mult:f.points[m].point[s],this.pv[s]=f.points[m].point[s],this.lastPValue[s]!==this.pv[s]&&(this.mdf=!0,this.lastPValue[s]=this.pv[s])}else{t.__fnct?p=t.__fnct:(p=BezierFactory.getBezierEasing(t.o.x,t.o.y,t.i.x,t.i.y,t.n).get,t.__fnct=p),c=p((e-(t.t-this.offsetTime))/(r.t-this.offsetTime-(t.t-this.offsetTime)));var v,g=f.segmentLength*c,y=0;for(a=1,o=!0,h=f.points.length;o;){if(y+=f.points[d].partialLength*a,0===g||0===c||d==f.points.length-1){for(l=f.points[d].point.length,s=0;l>s;s+=1)this.v[s]=this.mult?f.points[d].point[s]*this.mult:f.points[d].point[s],this.pv[s]=f.points[d].point[s],this.lastPValue[s]!==this.pv[s]&&(this.mdf=!0,this.lastPValue[s]=this.pv[s]);break}if(g>=y&&g<y+f.points[d+1].partialLength){for(v=(g-y)/f.points[d+1].partialLength,l=f.points[d].point.length,s=0;l>s;s+=1)this.v[s]=this.mult?(f.points[d].point[s]+(f.points[d+1].point[s]-f.points[d].point[s])*v)*this.mult:f.points[d].point[s]+(f.points[d+1].point[s]-f.points[d].point[s])*v,this.pv[s]=f.points[d].point[s]+(f.points[d+1].point[s]-f.points[d].point[s])*v,this.lastPValue[s]!==this.pv[s]&&(this.mdf=!0,this.lastPValue[s]=this.pv[s]);break}h-1>d&&1==a||d>0&&-1==a?d+=a:o=!1}}}else{var b,_,x,w,T,M=!1;for(n=t.s.length,i=0;n>i;i+=1){if(1!==t.h&&(t.o.x instanceof Array?(M=!0,t.__fnct||(t.__fnct=[]),t.__fnct[i]||(b=t.o.x[i]||t.o.x[0],_=t.o.y[i]||t.o.y[0],x=t.i.x[i]||t.i.x[0],w=t.i.y[i]||t.i.y[0])):(M=!1,t.__fnct||(b=t.o.x,_=t.o.y,x=t.i.x,w=t.i.y)),M?t.__fnct[i]?p=t.__fnct[i]:(p=BezierFactory.getBezierEasing(b,_,x,w).get,t.__fnct[i]=p):t.__fnct?p=t.__fnct:(p=BezierFactory.getBezierEasing(b,_,x,w).get,t.__fnct=p),c=e>=r.t-this.offsetTime?1:e<t.t-this.offsetTime?0:p((e-(t.t-this.offsetTime))/(r.t-this.offsetTime-(t.t-this.offsetTime)))),this.sh&&1!==t.h){var S=t.s[i],E=t.e[i];-180>S-E?S+=360:S-E>180&&(S-=360),T=S+(E-S)*c}else T=1===t.h?t.s[i]:t.s[i]+(t.e[i]-t.s[i])*c;1===n?(this.v=this.mult?T*this.mult:T,this.pv=T,this.lastPValue!=this.pv&&(this.mdf=!0,this.lastPValue=this.pv)):(this.v[i]=this.mult?T*this.mult:T,this.pv[i]=T,this.lastPValue[i]!==this.pv[i]&&(this.mdf=!0,this.lastPValue[i]=this.pv[i]))}}}this.lastFrame=e,this.frameId=this.elem.globalData.frameId}}function t(){}function r(e,r,i){this.mult=i,this.v=i?r.k*i:r.k,this.pv=r.k,this.mdf=!1,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.getValue=t}function i(e,r,i){this.mult=i,this.data=r,this.mdf=!1,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1,this.v=new Array(r.k.length),this.pv=new Array(r.k.length),this.lastValue=new Array(r.k.length);var n=Array.apply(null,{length:r.k.length});this.vel=n.map(function(){return 0});var a,o=r.k.length;for(a=0;o>a;a+=1)this.v[a]=i?r.k[a]*i:r.k[a],this.pv[a]=r.k[a];this.getValue=t}function n(t,r,i){this.keyframes=r.k,this.offsetTime=t.data.st,this.lastValue=-99999,this.lastPValue=-99999,this.frameId=-1,this.k=!0,this.kf=!0,this.data=r,this.mult=i,this.elem=t,this.comp=t.comp,this.lastFrame=u,this.v=i?r.k[0].s[0]*i:r.k[0].s[0],this.pv=r.k[0].s[0],this.getValue=e}function a(t,r,i){var n,a,o,s,l,c=r.k.length;for(n=0;c-1>n;n+=1)r.k[n].to&&r.k[n].s&&r.k[n].e&&(a=r.k[n].s,o=r.k[n].e,s=r.k[n].to,l=r.k[n].ti,(2===a.length&&(a[0]!==o[0]||a[1]!==o[1])&&bez.pointOnLine2D(a[0],a[1],o[0],o[1],a[0]+s[0],a[1]+s[1])&&bez.pointOnLine2D(a[0],a[1],o[0],o[1],o[0]+l[0],o[1]+l[1])||3===a.length&&(a[0]!==o[0]||a[1]!==o[1]||a[2]!==o[2])&&bez.pointOnLine3D(a[0],a[1],a[2],o[0],o[1],o[2],a[0]+s[0],a[1]+s[1],a[2]+s[2])&&bez.pointOnLine3D(a[0],a[1],a[2],o[0],o[1],o[2],o[0]+l[0],o[1]+l[1],o[2]+l[2]))&&(r.k[n].to=null,r.k[n].ti=null));this.keyframes=r.k,this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this.mult=i,this.elem=t,this.comp=t.comp,this.getValue=e,this.frameId=-1,this.v=new Array(r.k[0].s.length),this.pv=new Array(r.k[0].s.length),this.lastValue=new Array(r.k[0].s.length),this.lastPValue=new Array(r.k[0].s.length),this.lastFrame=u}function o(e,t,o,s,l){var u;if(2===o)u=new c(e,t,l);else if(7===o)u=new TrimProperty(e,t,l);else if(t.k.length)if("number"==typeof t.k[0])u=new i(e,t,s);else switch(o){case 0:u=new n(e,t,s);break;case 1:u=new a(e,t,s)}else u=new r(e,t,s);return u.k&&l.push(u),u}function s(e,t,r,i){return new p(e,t,r,i)}function l(e,t,r){return new d(e,t,r)}var u=-999999,c=function(){function e(){return this.p.k&&this.p.getValue(),this.p.v.key||(this.p.v.key=function(e){return this.p.v.numKeys?this.p.keyframes[e-1].t:0}.bind(this)),this.p.v.numKeys||(this.p.v.numKeys=this.p.keyframes?this.p.keyframes.length:0),this.p.v.valueAtTime||(this.p.v.valueAtTime=this.p.getValueAtTime.bind(this.p)),this.p.v}function t(){return this.px.k&&this.px.getValue(),this.px.v}function r(){return this.py.k&&this.py.getValue(),this.py.v}function i(){return this.a.k&&this.a.getValue(),this.a.v}function n(){return this.or.k&&this.or.getValue(),this.or.v}function a(){return this.r.k&&this.r.getValue(),this.r.v/degToRads}function o(){return this.s.k&&this.s.getValue(),this.s.v}function s(){return this.o.k&&this.o.getValue(),this.o.v}function l(){return this.sk.k&&this.sk.getValue(),this.sk.v}function u(){return this.sa.k&&this.sa.getValue(),this.sa.v}function c(e){var t,r=this.dynamicProperties.length;for(t=0;r>t;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0);this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function h(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var e,t=this.dynamicProperties.length;for(e=0;t>e;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0);if(this.mdf){if(this.v.reset(),this.a&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r?this.v.rotate(-this.r.v):this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented&&this.p.keyframes&&this.p.getValueAtTime){var r,i;this.p.lastFrame+this.p.offsetTime<this.p.keyframes[0].t?(r=this.p.getValueAtTime(this.p.keyframes[0].t+.01,0),i=this.p.getValueAtTime(this.p.keyframes[0].t,0)):this.p.lastFrame+this.p.offsetTime>this.p.keyframes[this.p.keyframes.length-1].t?(r=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t,0),i=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t-.01,0)):(r=this.p.pv,i=this.p.getValueAtTime(this.p.lastFrame+this.p.offsetTime-.01,this.p.offsetTime)),this.v.rotate(-Math.atan2(r[1]-i[1],r[0]-i[0]))}this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function p(){this.inverted=!0,this.iv=new Matrix,this.k||(this.data.p.s?this.iv.translate(this.px.v,this.py.v,-this.pz.v):this.iv.translate(this.p.v[0],this.p.v[1],-this.p.v[2]),this.r?this.iv.rotate(-this.r.v):this.iv.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.s&&this.iv.scale(this.s.v[0],this.s.v[1],1),this.a&&this.iv.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]))}function d(){}return function(f,m,v){this.elem=f,this.frameId=-1,this.dynamicProperties=[],this.mdf=!1,this.data=m,this.getValue=h,this.applyToMatrix=c,this.setInverted=p,this.autoOrient=d,this.v=new Matrix,m.p.s?(this.px=PropertyFactory.getProp(f,m.p.x,0,0,this.dynamicProperties),this.py=PropertyFactory.getProp(f,m.p.y,0,0,this.dynamicProperties),m.p.z&&(this.pz=PropertyFactory.getProp(f,m.p.z,0,0,this.dynamicProperties))):this.p=PropertyFactory.getProp(f,m.p,1,0,this.dynamicProperties),m.r?this.r=PropertyFactory.getProp(f,m.r,0,degToRads,this.dynamicProperties):m.rx&&(this.rx=PropertyFactory.getProp(f,m.rx,0,degToRads,this.dynamicProperties),this.ry=PropertyFactory.getProp(f,m.ry,0,degToRads,this.dynamicProperties),this.rz=PropertyFactory.getProp(f,m.rz,0,degToRads,this.dynamicProperties),this.or=PropertyFactory.getProp(f,m.or,0,degToRads,this.dynamicProperties)),m.sk&&(this.sk=PropertyFactory.getProp(f,m.sk,0,degToRads,this.dynamicProperties),this.sa=PropertyFactory.getProp(f,m.sa,0,degToRads,this.dynamicProperties)),m.a&&(this.a=PropertyFactory.getProp(f,m.a,1,0,this.dynamicProperties)),m.s&&(this.s=PropertyFactory.getProp(f,m.s,1,.01,this.dynamicProperties)),this.o=m.o?PropertyFactory.getProp(f,m.o,0,.01,v):{mdf:!1,v:1},this.dynamicProperties.length?v.push(this):(this.a&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r?this.v.rotate(-this.r.v):this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?m.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])),Object.defineProperty(this,"position",{get:e}),Object.defineProperty(this,"xPosition",{get:t}),Object.defineProperty(this,"yPosition",{get:r}),Object.defineProperty(this,"orientation",{get:n}),Object.defineProperty(this,"anchorPoint",{get:i}),Object.defineProperty(this,"rotation",{get:a}),Object.defineProperty(this,"scale",{get:o}),Object.defineProperty(this,"opacity",{get:s}),Object.defineProperty(this,"skew",{get:l}),Object.defineProperty(this,"skewAxis",{get:u})}}(),h=function(){function e(e){if(this.prop.getValue(),this.cmdf=!1,this.omdf=!1,this.prop.mdf||e){var t,r,i,n=4*this.data.p;for(t=0;n>t;t+=1)r=t%4===0?100:255,i=Math.round(this.prop.v[t]*r),this.c[t]!==i&&(this.c[t]=i,this.cmdf=!0);if(this.o.length)for(n=this.prop.v.length,t=4*this.data.p;n>t;t+=1)r=t%2===0?100:1,i=t%2===0?Math.round(100*this.prop.v[t]):this.prop.v[t],this.o[t-4*this.data.p]!==i&&(this.o[t-4*this.data.p]=i,this.omdf=!0)}}function t(t,r,i){this.prop=o(t,r.k,1,null,[]),this.data=r,this.k=this.prop.k,this.c=Array.apply(null,{length:4*r.p});var n=r.k.k[0].s?r.k.k[0].s.length-4*r.p:r.k.k.length-4*r.p;this.o=Array.apply(null,{length:n}),this.cmdf=!1,this.omdf=!1,this.getValue=e,this.prop.k&&i.push(this),this.getValue(!0)}return function(e,r,i){return new t(e,r,i)}}(),p=function(){function e(e){var t=0,r=this.dataProps.length;if(this.elem.globalData.frameId!==this.frameId||e){for(this.mdf=!1,this.frameId=this.elem.globalData.frameId;r>t;){if(this.dataProps[t].p.mdf){this.mdf=!0;break}t+=1}if(this.mdf||e)for("svg"===this.renderer&&(this.dasharray=""),t=0;r>t;t+=1)"o"!=this.dataProps[t].n?"svg"===this.renderer?this.dasharray+=" "+this.dataProps[t].p.v:this.dasharray[t]=this.dataProps[t].p.v:this.dashoffset=this.dataProps[t].p.v}}return function(t,r,i,n){this.elem=t,this.frameId=-1,this.dataProps=new Array(r.length),this.renderer=i,this.mdf=!1,this.k=!1,this.dasharray="svg"===this.renderer?"":new Array(r.length-1),this.dashoffset=0;var a,o,s=r.length;for(a=0;s>a;a+=1)o=PropertyFactory.getProp(t,r[a].v,0,0,n),this.k=o.k?!0:this.k,this.dataProps[a]={n:r[a].n,p:o};this.getValue=e,this.k?n.push(this):this.getValue(!0)}}(),d=function(){function e(){if(this.dynamicProperties.length){var e,t=this.dynamicProperties.length;for(e=0;t>e;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0)}var r=this.data.totalChars,i=2===this.data.r?1:100/r,n=this.o.v/i,a=this.s.v/i+n,o=this.e.v/i+n;if(a>o){var s=a;a=o,o=s}this.finalS=a,this.finalE=o}function t(e){var t=BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get,a=0,o=this.finalS,s=this.finalE,l=this.data.sh;if(2==l)a=s===o?e>=s?1:0:r(0,i(.5/(s-o)+(e-o)/(s-o),1)),a=t(a);else if(3==l)a=s===o?e>=s?0:1:1-r(0,i(.5/(s-o)+(e-o)/(s-o),1)),a=t(a);else if(4==l)s===o?a=e>=s?0:1:(a=r(0,i(.5/(s-o)+(e-o)/(s-o),1)),.5>a?a*=2:a=1-2*(a-.5)),a=t(a);else if(5==l){if(s===o)a=e>=s?0:1;else{var u=s-o;e=i(r(0,e+.5-o),s-o);var c=-u/2+e,h=u/2;a=Math.sqrt(1-c*c/(h*h))}a=t(a)}else 6==l?(s===o?a=e>=s?0:1:(e=i(r(0,e+.5-o),s-o),a=(1+Math.cos(Math.PI+2*Math.PI*e/(s-o)))/2),a=t(a)):(e>=n(o)&&(a=0>e-o?1-(o-e):r(0,i(s-e,1))),a=t(a));return a*this.a.v}var r=Math.max,i=Math.min,n=Math.floor;return this.mdf=!1,function(r,i,n){this.mdf=!1,this.k=!1,this.data=i,this.dynamicProperties=[],this.getValue=e,this.getMult=t,this.comp=r.comp,this.finalS=0,this.finalE=0,this.s=PropertyFactory.getProp(r,i.s||{k:0},0,0,this.dynamicProperties),this.e="e"in i?PropertyFactory.getProp(r,i.e,0,0,this.dynamicProperties):{v:2===i.r?i.totalChars:100},this.o=PropertyFactory.getProp(r,i.o||{k:0},0,0,this.dynamicProperties),this.xe=PropertyFactory.getProp(r,i.xe||{k:0},0,0,this.dynamicProperties),this.ne=PropertyFactory.getProp(r,i.ne||{k:0},0,0,this.dynamicProperties),this.a=PropertyFactory.getProp(r,i.a,0,.01,this.dynamicProperties),this.dynamicProperties.length?n.push(this):this.getValue()}}(),f={};return f.getProp=o,f.getDashProp=s,f.getTextSelectorProp=l,f.getGradientProp=h,f}(),ShapePropertyFactory=function(){function e(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1;var e=this.comp.renderedFrame-this.offsetTime;if(this.lastFrame!==o&&(this.lastFrame<this.keyframes[0].t-this.offsetTime&&e<this.keyframes[0].t-this.offsetTime||this.lastFrame>this.keyframes[this.keyframes.length-1].t-this.offsetTime&&e>this.keyframes[this.keyframes.length-1].t-this.offsetTime));else{var t,r,i;if(e<this.keyframes[0].t-this.offsetTime)t=this.keyframes[0].s[0],i=!0;else if(e>=this.keyframes[this.keyframes.length-1].t-this.offsetTime)t=1===this.keyframes[this.keyframes.length-2].h?this.keyframes[this.keyframes.length-1].s[0]:this.keyframes[this.keyframes.length-2].e[0],i=!0;else{for(var n,a,s,l,u,c,h=0,p=this.keyframes.length-1,d=!0;d&&(n=this.keyframes[h],a=this.keyframes[h+1],!(a.t-this.offsetTime>e));)p-1>h?h+=1:d=!1;i=1===n.h,i&&h===p&&(n=a);var f;if(!i){var m;n.__fnct?m=n.__fnct:(m=BezierFactory.getBezierEasing(n.o.x,n.o.y,n.i.x,n.i.y).get,n.__fnct=m),f=e>=a.t-this.offsetTime?1:e<n.t-this.offsetTime?0:m((e-(n.t-this.offsetTime))/(a.t-this.offsetTime-(n.t-this.offsetTime))),r=n.e[0]}t=n.s[0]}l=this.v.i.length,c=t.i[0].length;var v,g=!1;for(s=0;l>s;s+=1)for(u=0;c>u;u+=1)i?(v=t.i[s][u],this.v.i[s][u]!==v&&(this.v.i[s][u]=v,this.pv.i[s][u]=v,g=!0),v=t.o[s][u],this.v.o[s][u]!==v&&(this.v.o[s][u]=v,this.pv.o[s][u]=v,g=!0),v=t.v[s][u],this.v.v[s][u]!==v&&(this.v.v[s][u]=v,this.pv.v[s][u]=v,g=!0)):(v=t.i[s][u]+(r.i[s][u]-t.i[s][u])*f,this.v.i[s][u]!==v&&(this.v.i[s][u]=v,
this.pv.i[s][u]=v,g=!0),v=t.o[s][u]+(r.o[s][u]-t.o[s][u])*f,this.v.o[s][u]!==v&&(this.v.o[s][u]=v,this.pv.o[s][u]=v,g=!0),v=t.v[s][u]+(r.v[s][u]-t.v[s][u])*f,this.v.v[s][u]!==v&&(this.v.v[s][u]=v,this.pv.v[s][u]=v,g=!0));this.mdf=g,this.paths.length=0,this.v.c=t.c,this.paths[0]=this.v}this.lastFrame=e,this.frameId=this.elem.globalData.frameId}}function t(){return this.v}function r(){this.paths.length?(this.paths.length=1,this.paths[0]=this.v):this.paths=[this.v],this.k||(this.mdf=!1)}function i(e,i,n){this.comp=e.comp,this.k=!1,this.mdf=!1,this.numNodes=3===n?i.pt.k.v.length:i.ks.k.v.length,this.v=3===n?i.pt.k:i.ks.k,this.getValue=t,this.pv=this.v,this.paths=[this.v],this.reset=r}function n(t,i,n){this.comp=t.comp,this.elem=t,this.offsetTime=t.data.st,this.getValue=e,this.keyframes=3===n?i.pt.k:i.ks.k,this.k=!0;var a,s=this.keyframes[0].s[0].i.length,l=this.keyframes[0].s[0].i[0].length;for(this.numNodes=s,this.v={i:Array.apply(null,{length:s}),o:Array.apply(null,{length:s}),v:Array.apply(null,{length:s}),c:this.keyframes[0].s[0].c},this.pv={i:Array.apply(null,{length:s}),o:Array.apply(null,{length:s}),v:Array.apply(null,{length:s}),c:this.keyframes[0].s[0].c},a=0;s>a;a+=1)this.v.i[a]=Array.apply(null,{length:l}),this.v.o[a]=Array.apply(null,{length:l}),this.v.v[a]=Array.apply(null,{length:l}),this.pv.i[a]=Array.apply(null,{length:l}),this.pv.o[a]=Array.apply(null,{length:l}),this.pv.v[a]=Array.apply(null,{length:l});this.paths=[],this.lastFrame=o,this.reset=r}function a(e,t,r,a){var o;if(3===r||4===r){var c=3===r?t.pt.k:t.ks.k;o=c.length?new n(e,t,r):new i(e,t,r)}else 5===r?o=new u(e,t):6===r?o=new s(e,t):7===r&&(o=new l(e,t));return o.k&&a.push(o),o}var o=-999999,s=function(){function e(){var e=this.p.v[0],t=this.p.v[1],r=this.s.v[0]/2,n=this.s.v[1]/2;2!==this.d&&3!==this.d?(this.v.v[0]=[e,t-n],this.v.i[0]=[e-r*i,t-n],this.v.o[0]=[e+r*i,t-n],this.v.v[1]=[e+r,t],this.v.i[1]=[e+r,t-n*i],this.v.o[1]=[e+r,t+n*i],this.v.v[2]=[e,t+n],this.v.i[2]=[e+r*i,t+n],this.v.o[2]=[e-r*i,t+n],this.v.v[3]=[e-r,t],this.v.i[3]=[e-r,t+n*i],this.v.o[3]=[e-r,t-n*i]):(this.v.v[0]=[e,t-n],this.v.o[0]=[e-r*i,t-n],this.v.i[0]=[e+r*i,t-n],this.v.v[1]=[e-r,t],this.v.o[1]=[e-r,t+n*i],this.v.i[1]=[e-r,t-n*i],this.v.v[2]=[e,t+n],this.v.o[2]=[e+r*i,t+n],this.v.i[2]=[e-r*i,t+n],this.v.v[3]=[e+r,t],this.v.o[3]=[e+r,t-n*i],this.v.i[3]=[e+r,t+n*i]),this.paths.length=0,this.paths[0]=this.v}function t(e){var t,r=this.dynamicProperties.length;if(this.elem.globalData.frameId!==this.frameId){for(this.mdf=!1,this.frameId=this.elem.globalData.frameId,t=0;r>t;t+=1)this.dynamicProperties[t].getValue(e),this.dynamicProperties[t].mdf&&(this.mdf=!0);this.mdf&&(this.convertEllToPath(),this.paths.length=0,this.paths[0]=this.v)}}var i=roundCorner;return function(i,n){this.v={v:Array.apply(null,{length:4}),i:Array.apply(null,{length:4}),o:Array.apply(null,{length:4}),c:!0},this.numNodes=4,this.d=n.d,this.dynamicProperties=[],this.paths=[],this.elem=i,this.comp=i.comp,this.frameId=-1,this.mdf=!1,this.getValue=t,this.convertEllToPath=e,this.reset=r,this.p=PropertyFactory.getProp(i,n.p,1,0,this.dynamicProperties),this.s=PropertyFactory.getProp(i,n.s,1,0,this.dynamicProperties),this.dynamicProperties.length?this.k=!0:this.convertEllToPath()}}(),l=function(){function e(){var e=Math.floor(this.pt.v),t=2*Math.PI/e;this.v.v.length=e,this.v.i.length=e,this.v.o.length=e;var r,i=this.or.v,n=this.os.v,a=2*Math.PI*i/(4*e),o=-Math.PI/2,s=3===this.data.d?-1:1;for(o+=this.r.v,r=0;e>r;r+=1){var l=i*Math.cos(o),u=i*Math.sin(o),c=0===l&&0===u?0:u/Math.sqrt(l*l+u*u),h=0===l&&0===u?0:-l/Math.sqrt(l*l+u*u);l+=+this.p.v[0],u+=+this.p.v[1],this.v.v[r]=[l,u],this.v.i[r]=[l+c*a*n*s,u+h*a*n*s],this.v.o[r]=[l-c*a*n*s,u-h*a*n*s],o+=t*s}this.numNodes=e,this.paths.length=0,this.paths[0]=this.v}function t(){var e=2*Math.floor(this.pt.v),t=2*Math.PI/e;this.v.v.length=e,this.v.i.length=e,this.v.o.length=e;var r,i,n,a,o=!0,s=this.or.v,l=this.ir.v,u=this.os.v,c=this.is.v,h=2*Math.PI*s/(2*e),p=2*Math.PI*l/(2*e),d=-Math.PI/2;d+=this.r.v;var f=3===this.data.d?-1:1;for(r=0;e>r;r+=1){i=o?s:l,n=o?u:c,a=o?h:p;var m=i*Math.cos(d),v=i*Math.sin(d),g=0===m&&0===v?0:v/Math.sqrt(m*m+v*v),y=0===m&&0===v?0:-m/Math.sqrt(m*m+v*v);m+=+this.p.v[0],v+=+this.p.v[1],this.v.v[r]=[m,v],this.v.i[r]=[m+g*a*n*f,v+y*a*n*f],this.v.o[r]=[m-g*a*n*f,v-y*a*n*f],o=!o,d+=t*f}this.numNodes=e,this.paths.length=0,this.paths[0]=this.v}function i(){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1,this.frameId=this.elem.globalData.frameId;var e,t=this.dynamicProperties.length;for(e=0;t>e;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e].mdf&&(this.mdf=!0);this.mdf&&this.convertToPath()}}return function(n,a){this.v={v:[],i:[],o:[],c:!0},this.elem=n,this.comp=n.comp,this.data=a,this.frameId=-1,this.d=a.d,this.dynamicProperties=[],this.mdf=!1,this.getValue=i,this.reset=r,1===a.sy?(this.ir=PropertyFactory.getProp(n,a.ir,0,0,this.dynamicProperties),this.is=PropertyFactory.getProp(n,a.is,0,.01,this.dynamicProperties),this.convertToPath=t):this.convertToPath=e,this.pt=PropertyFactory.getProp(n,a.pt,0,0,this.dynamicProperties),this.p=PropertyFactory.getProp(n,a.p,1,0,this.dynamicProperties),this.r=PropertyFactory.getProp(n,a.r,0,degToRads,this.dynamicProperties),this.or=PropertyFactory.getProp(n,a.or,0,0,this.dynamicProperties),this.os=PropertyFactory.getProp(n,a.os,0,.01,this.dynamicProperties),this.paths=[],this.dynamicProperties.length?this.k=!0:this.convertToPath()}}(),u=function(){function e(e){if(this.elem.globalData.frameId!==this.frameId){this.mdf=!1,this.frameId=this.elem.globalData.frameId;var t,r=this.dynamicProperties.length;for(t=0;r>t;t+=1)this.dynamicProperties[t].getValue(e),this.dynamicProperties[t].mdf&&(this.mdf=!0);this.mdf&&this.convertRectToPath()}}function t(){var e=this.p.v[0],t=this.p.v[1],r=this.s.v[0]/2,i=this.s.v[1]/2,n=bm_min(r,i,this.r.v),a=n*(1-roundCorner);0===n?(this.v.v.length=4,this.v.i.length=4,this.v.o.length=4):(this.v.v.length=8,this.v.i.length=8,this.v.o.length=8),2===this.d||1===this.d?(this.v.v[0]=[e+r,t-i+n],this.v.o[0]=this.v.v[0],this.v.i[0]=[e+r,t-i+a],this.v.v[1]=[e+r,t+i-n],this.v.o[1]=[e+r,t+i-a],this.v.i[1]=this.v.v[1],0!==n?(this.v.v[2]=[e+r-n,t+i],this.v.o[2]=this.v.v[2],this.v.i[2]=[e+r-a,t+i],this.v.v[3]=[e-r+n,t+i],this.v.o[3]=[e-r+a,t+i],this.v.i[3]=this.v.v[3],this.v.v[4]=[e-r,t+i-n],this.v.o[4]=this.v.v[4],this.v.i[4]=[e-r,t+i-a],this.v.v[5]=[e-r,t-i+n],this.v.o[5]=[e-r,t-i+a],this.v.i[5]=this.v.v[5],this.v.v[6]=[e-r+n,t-i],this.v.o[6]=this.v.v[6],this.v.i[6]=[e-r+a,t-i],this.v.v[7]=[e+r-n,t-i],this.v.o[7]=[e+r-a,t-i],this.v.i[7]=this.v.v[7]):(this.v.v[2]=[e-r+n,t+i],this.v.o[2]=[e-r+a,t+i],this.v.i[2]=this.v.v[2],this.v.v[3]=[e-r,t-i+n],this.v.o[3]=[e-r,t-i+a],this.v.i[3]=this.v.v[3])):(this.v.v[0]=[e+r,t-i+n],this.v.o[0]=[e+r,t-i+a],this.v.i[0]=this.v.v[0],0!==n?(this.v.v[1]=[e+r-n,t-i],this.v.o[1]=this.v.v[1],this.v.i[1]=[e+r-a,t-i],this.v.v[2]=[e-r+n,t-i],this.v.o[2]=[e-r+a,t-i],this.v.i[2]=this.v.v[2],this.v.v[3]=[e-r,t-i+n],this.v.o[3]=this.v.v[3],this.v.i[3]=[e-r,t-i+a],this.v.v[4]=[e-r,t+i-n],this.v.o[4]=[e-r,t+i-a],this.v.i[4]=this.v.v[4],this.v.v[5]=[e-r+n,t+i],this.v.o[5]=this.v.v[5],this.v.i[5]=[e-r+a,t+i],this.v.v[6]=[e+r-n,t+i],this.v.o[6]=[e+r-a,t+i],this.v.i[6]=this.v.v[6],this.v.v[7]=[e+r,t+i-n],this.v.o[7]=this.v.v[7],this.v.i[7]=[e+r,t+i-a]):(this.v.v[1]=[e-r+n,t-i],this.v.o[1]=[e-r+a,t-i],this.v.i[1]=this.v.v[1],this.v.v[2]=[e-r,t+i-n],this.v.o[2]=[e-r,t+i-a],this.v.i[2]=this.v.v[2],this.v.v[3]=[e+r-n,t+i],this.v.o[3]=[e+r-a,t+i],this.v.i[3]=this.v.v[3])),this.paths.length=0,this.paths[0]=this.v}return function(i,n){this.v={v:Array.apply(null,{length:8}),i:Array.apply(null,{length:8}),o:Array.apply(null,{length:8}),c:!0},this.idd=randomString(10),this.paths=[],this.numNodes=8,this.elem=i,this.comp=i.comp,this.frameId=-1,this.d=n.d,this.dynamicProperties=[],this.mdf=!1,this.getValue=e,this.convertRectToPath=t,this.reset=r,this.p=PropertyFactory.getProp(i,n.p,1,0,this.dynamicProperties),this.s=PropertyFactory.getProp(i,n.s,1,0,this.dynamicProperties),this.r=PropertyFactory.getProp(i,n.r,0,0,this.dynamicProperties),this.dynamicProperties.length?this.k=!0:this.convertRectToPath()}}(),c={};return c.getShapeProp=a,c}(),ShapeModifiers=function(){function e(e,t){i[e]||(i[e]=t)}function t(e,t,r,n){return new i[e](t,r,n)}var r={},i={};return r.registerModifier=e,r.getModifier=t,r}();ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){this.closed||(this.shapes.push({shape:e,last:[]}),this.addShapeToModifier(e))},ShapeModifier.prototype.init=function(e,t,r){this.elem=e,this.frameId=-1,this.shapes=[],this.dynamicProperties=[],this.mdf=!1,this.closed=!1,this.k=!1,this.isTrimming=!1,this.comp=e.comp,this.initModifierProperties(e,t),this.dynamicProperties.length?(this.k=!0,r.push(this)):this.getValue(!0)},extendPrototype(ShapeModifier,TrimModifier),TrimModifier.prototype.processKeys=function(e){if(this.elem.globalData.frameId!==this.frameId||e){this.mdf=e?!0:!1,this.frameId=this.elem.globalData.frameId;var t,r=this.dynamicProperties.length;for(t=0;r>t;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0);if(this.mdf||e){var i=this.o.v%360/360;0>i&&(i+=1);var n=this.s.v+i,a=this.e.v+i;if(n>a){var o=n;n=a,a=o}this.sValue=n,this.eValue=a,this.oValue=i}}},TrimModifier.prototype.initModifierProperties=function(e,t){this.sValue=0,this.eValue=0,this.oValue=0,this.getValue=this.processKeys,this.s=PropertyFactory.getProp(e,t.s,0,.01,this.dynamicProperties),this.e=PropertyFactory.getProp(e,t.e,0,.01,this.dynamicProperties),this.o=PropertyFactory.getProp(e,t.o,0,0,this.dynamicProperties),this.dynamicProperties.length||this.getValue(!0)},TrimModifier.prototype.getSegmentsLength=function(e){var t,r=e.c,i=e.v,n=e.o,a=e.i,o=i.length,s=[],l=0;for(t=0;o-1>t;t+=1)s[t]=bez.getBezierLength(i[t],i[t+1],n[t],a[t+1]),l+=s[t].addedLength;return r&&(s[t]=bez.getBezierLength(i[t],i[0],n[t],a[0]),l+=s[t].addedLength),{lengths:s,totalLength:l}},TrimModifier.prototype.processShapes=function(e){var t,r,i,n,a,o,s,l=this.shapes.length,u=this.sValue,c=this.eValue,h=0;if(c===u)for(r=0;l>r;r+=1)this.shapes[r].shape.paths=[],this.shapes[r].shape.mdf=!0;else{var p,d,f=[];for(r=0;l>r;r+=1){if(p=this.shapes[r],p.shape.mdf||this.mdf||e){if(t=p.shape.paths,n=t.length,s=0,!p.shape.mdf&&p.pathsData)s=p.totalShapeLength;else{for(a=[],i=0;n>i;i+=1)o=this.getSegmentsLength(t[i]),a.push(o),s+=o.totalLength;p.totalShapeLength=s,p.pathsData=a}h+=s}else p.shape.paths=p.last;p.shape.mdf=!0}for(r=0;l>r;r+=1)if(d=[],p=this.shapes[r],p.shape.mdf){f.length=0,1>=c?f.push({s:p.totalShapeLength*u,e:p.totalShapeLength*c}):u>=1?f.push({s:p.totalShapeLength*(u-1),e:p.totalShapeLength*(c-1)}):(f.push({s:p.totalShapeLength*u,e:p.totalShapeLength}),f.push({s:0,e:p.totalShapeLength*(c-1)}));var m,v=this.addShapes(p,f[0]);d.push(v),f.length>1&&(p.shape.v.c?this.addShapes(p,f[1],v):(v.i[0]=[v.v[0][0],v.v[0][1]],m=v.v.length-1,v.o[m]=[v.v[m][0],v.v[m][1]],v=this.addShapes(p,f[1]),d.push(v))),v.i[0]=[v.v[0][0],v.v[0][1]],m=v.v.length-1,v.o[m]=[v.v[m][0],v.v[m][1]],p.last=d,p.shape.paths=d}}this.dynamicProperties.length||(this.mdf=!1)},TrimModifier.prototype.addSegment=function(e,t,r,i,n,a){n.o[a]=t,n.i[a+1]=r,n.v[a+1]=i,n.v[a]=e},TrimModifier.prototype.addShapes=function(e,t,r){var i,n,a,o,s,l,u,c=e.pathsData,h=e.shape.paths,p=h.length,d=0;for(r?s=r.v.length-1:(r={c:!1,v:[],i:[],o:[]},s=0),i=0;p>i;i+=1){for(l=c[i].lengths,a=h[i].c?l.length:l.length+1,n=1;a>n;n+=1)if(o=l[n-1],d+o.addedLength<t.s)d+=o.addedLength;else{if(d>t.e)break;t.s<=d&&t.e>=d+o.addedLength?this.addSegment(h[i].v[n-1],h[i].o[n-1],h[i].i[n],h[i].v[n],r,s):(u=bez.getNewSegment(h[i].v[n-1],h[i].v[n],h[i].o[n-1],h[i].i[n],(t.s-d)/o.addedLength,(t.e-d)/o.addedLength,l[n-1]),this.addSegment(u.pt1,u.pt3,u.pt4,u.pt2,r,s)),d+=o.addedLength,s+=1}if(h[i].c&&d<=t.e){var f=l[n-1].addedLength;t.s<=d&&t.e>=d+f?this.addSegment(h[i].v[n-1],h[i].o[n-1],h[i].i[0],h[i].v[0],r,s):(u=bez.getNewSegment(h[i].v[n-1],h[i].v[0],h[i].o[n-1],h[i].i[0],(t.s-d)/f,(t.e-d)/f,l[n-1]),this.addSegment(u.pt1,u.pt3,u.pt4,u.pt2,r,s))}}return r},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype(ShapeModifier,MouseModifier),MouseModifier.prototype.processKeys=function(e){(this.elem.globalData.frameId!==this.frameId||e)&&(this.mdf=!0)},MouseModifier.prototype.addShapeToModifier=function(){this.positions.push([])},MouseModifier.prototype.processPath=function(e,t,r){var i,n,a,o,s=e.v.length,l=[],u=[],c=[];for(i=0;s>i;i+=1){r.v[i]||(r.v[i]=[e.v[i][0],e.v[i][1]],r.o[i]=[e.o[i][0],e.o[i][1]],r.i[i]=[e.i[i][0],e.i[i][1]],r.distV[i]=0,r.distO[i]=0,r.distI[i]=0),n=Math.atan2(e.v[i][1]-t[1],e.v[i][0]-t[0]),a=t[0]-r.v[i][0],o=t[1]-r.v[i][1];var h=Math.sqrt(a*a+o*o);r.distV[i]+=(h-r.distV[i])*this.data.dc,r.v[i][0]=Math.cos(n)*Math.max(0,this.data.maxDist-r.distV[i])/2+e.v[i][0],r.v[i][1]=Math.sin(n)*Math.max(0,this.data.maxDist-r.distV[i])/2+e.v[i][1],n=Math.atan2(e.o[i][1]-t[1],e.o[i][0]-t[0]),a=t[0]-r.o[i][0],o=t[1]-r.o[i][1];var h=Math.sqrt(a*a+o*o);r.distO[i]+=(h-r.distO[i])*this.data.dc,r.o[i][0]=Math.cos(n)*Math.max(0,this.data.maxDist-r.distO[i])/2+e.o[i][0],r.o[i][1]=Math.sin(n)*Math.max(0,this.data.maxDist-r.distO[i])/2+e.o[i][1],n=Math.atan2(e.i[i][1]-t[1],e.i[i][0]-t[0]),a=t[0]-r.i[i][0],o=t[1]-r.i[i][1];var h=Math.sqrt(a*a+o*o);r.distI[i]+=(h-r.distI[i])*this.data.dc,r.i[i][0]=Math.cos(n)*Math.max(0,this.data.maxDist-r.distI[i])/2+e.i[i][0],r.i[i][1]=Math.sin(n)*Math.max(0,this.data.maxDist-r.distI[i])/2+e.i[i][1],l.push(r.v[i]),u.push(r.o[i]),c.push(r.i[i])}return{v:l,o:u,i:c,c:e.c}},MouseModifier.prototype.processShapes=function(){var e,t,r,i,n=this.elem.globalData.mouseX,a=this.elem.globalData.mouseY,o=this.shapes.length;if(n){var s,l=this.elem.globalToLocal([n,a,0]),u=[];for(t=0;o>t;t+=1)if(s=this.shapes[t],s.shape.mdf||this.mdf){for(s.shape.mdf=!0,e=s.shape.paths,i=e.length,r=0;i>r;r+=1)this.positions[t][r]||(this.positions[t][r]={v:[],o:[],i:[],distV:[],distO:[],distI:[]}),u.push(this.processPath(e[r],l,this.positions[t][r]));s.shape.paths=u,s.last=u}else s.shape.paths=s.last}},MouseModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.data=t,this.positions=[]},ShapeModifiers.registerModifier("ms",MouseModifier),extendPrototype(ShapeModifier,RoundCornersModifier),RoundCornersModifier.prototype.processKeys=function(e){if(this.elem.globalData.frameId!==this.frameId||e){this.mdf=e?!0:!1,this.frameId=this.elem.globalData.frameId;var t,r=this.dynamicProperties.length;for(t=0;r>t;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.mdf=!0)}},RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this.dynamicProperties),this.dynamicProperties.length||this.getValue(!0)},RoundCornersModifier.prototype.processPath=function(e,t){var r,i,n,a,o,s,l,u,c,h,p=e.v.length,d=[],f=[],m=[];for(r=0;p>r;r+=1)i=e.v[r],a=e.o[r],n=e.i[r],i[0]===a[0]&&i[1]===a[1]&&i[0]===n[0]&&i[1]===n[1]?0!==r&&r!==p-1||e.c?(o=0===r?e.v[p-1]:e.v[r-1],c=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)),h=c?Math.min(c/2,t)/c:0,s=[i[0]+(o[0]-i[0])*h,i[1]-(i[1]-o[1])*h],u=s,l=[s[0]-(s[0]-i[0])*roundCorner,s[1]-(s[1]-i[1])*roundCorner],d.push(s),f.push(l),m.push(u),o=r===p-1?e.v[0]:e.v[r+1],c=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)),h=c?Math.min(c/2,t)/c:0,s=[i[0]+(o[0]-i[0])*h,i[1]+(o[1]-i[1])*h],u=[s[0]-(s[0]-i[0])*roundCorner,s[1]-(s[1]-i[1])*roundCorner],l=s,d.push(s),f.push(l),m.push(u)):(d.push(i),f.push(a),m.push(n)):(d.push(e.v[r]),f.push(e.o[r]),m.push(e.i[r]));return{v:d,o:f,i:m,c:e.c}},RoundCornersModifier.prototype.processShapes=function(){var e,t,r,i,n=this.shapes.length,a=this.rd.v;if(0!==a){var o,s;for(t=0;n>t;t+=1)if(s=[],o=this.shapes[t],o.shape.mdf||this.mdf){for(o.shape.mdf=!0,e=o.shape.paths,i=e.length,r=0;i>r;r+=1)s.push(this.processPath(e[r],a));o.shape.paths=s,o.last=s}else o.shape.paths=o.last}this.dynamicProperties.length||(this.mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier);var ImagePreloader=function(){function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages}function t(e){var t="";if(this.assetsPath){var r=e.p;-1!==r.indexOf("images/")&&(r=r.split("/")[1]),t=this.assetsPath+r}else t=this.path,t+=e.u?e.u:"",t+=e.p;return t}function r(t){var r=document.createElement("img");r.addEventListener("load",e.bind(this),!1),r.addEventListener("error",e.bind(this),!1),r.src=t}function i(e){this.totalAssets=e.length;var i;for(i=0;i<this.totalAssets;i+=1)e[i].layers||(r.bind(this)(t.bind(this)(e[i])),this.totalImages+=1)}function n(e){this.path=e||""}function a(e){this.assetsPath=e||""}return function(){this.loadAssets=i,this.setAssetsPath=a,this.setPath=n,this.assetsPath="",this.path="",this.totalAssets=0,this.totalImages=0,this.loadedAssets=0}}(),featureSupport=function(){var e={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),e}(),filtersFactory=function(){function e(e){var t=document.createElementNS(svgNS,"filter");return t.setAttribute("id",e),t.setAttribute("filterUnits","objectBoundingBox"),t.setAttribute("x","0%"),t.setAttribute("y","0%"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t}function t(){var e=document.createElementNS(svgNS,"feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 0 1"),e}var r={};return r.createFilter=e,r.createAlphaToLuminanceFilter=t,r}();BaseRenderer.prototype.checkLayers=function(e){var t,r,i=this.layers.length;for(this.completeLayers=!0,t=i-1;t>=0;t--)this.elements[t]||(r=this.layers[t],r.ip-r.st<=e-this.layers[t].st&&r.op-r.st>e-this.layers[t].st&&this.buildItem(t)),this.completeLayers=this.elements[t]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 99:return null}return this.createBase(e)},BaseRenderer.prototype.buildAllItems=function(){var e,t=this.layers.length;for(e=0;t>e;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){this.completeLayers=!1;var t,r,i=e.length,n=this.layers.length;for(t=0;i>t;t+=1)for(r=0;n>r;){if(this.layers[r].id==e[t].id){this.layers[r]=e[t];break}r+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,r){r=r||[];for(var i=this.elements,n=this.layers,a=0,o=n.length;o>a;)n[a].ind==t&&(i[a]&&i[a]!==!0?void 0!==n[a].parent?(r.push(i[a]),this.buildElementParenting(e,n[a].parent,r)):(r.push(i[a]),e.setHierarchy(r)):(this.buildItem(a),this.addPendingElement(e))),a+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},extendPrototype(BaseRenderer,SVGRenderer),SVGRenderer.prototype.createBase=function(e){return new SVGBaseElement(e,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createShape=function(e){return new IShapeElement(e,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createText=function(e){return new SVGTextElement(e,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createImage=function(e){return new IImageElement(e,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createComp=function(e){return new ICompElement(e,this.layerElement,this.globalData,this)},SVGRenderer.prototype.createSolid=function(e){return new ISolidElement(e,this.layerElement,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(e){this.layerElement=document.createElementNS(svgNS,"svg"),this.layerElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.layerElement.setAttribute("width",e.w),this.layerElement.setAttribute("height",e.h),this.layerElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.layerElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.layerElement.style.width="100%",this.layerElement.style.height="100%",this.animationItem.wrapper.appendChild(this.layerElement);var t=document.createElementNS(svgNS,"defs");this.globalData.defs=t,this.layerElement.appendChild(t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.frameId=0,this.globalData.compSize={w:e.w,h:e.h},this.globalData.frameRate=e.fr;var r=document.createElementNS(svgNS,"clipPath"),i=document.createElementNS(svgNS,"rect");i.setAttribute("width",e.w),i.setAttribute("height",e.h),i.setAttribute("x",0),i.setAttribute("y",0);var n="animationMask_"+randomString(10);r.setAttribute("id",n),r.appendChild(i);var a=document.createElementNS(svgNS,"g");a.setAttribute("clip-path","url(#"+n+")"),this.layerElement.appendChild(a),t.appendChild(r),this.layerElement=a,this.layers=e.layers,this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.elements=Array.apply(null,{length:e.layers.length})},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.layerElement=null,this.globalData.defs=null;var e,t=this.layers?this.layers.length:0;for(e=0;t>e;e++)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!=this.layers[e].ty){t[e]=!0;var r=this.createItem(this.layers[e]);t[e]=r,expressionsPlugin&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(r),r.initExpressions()),this.appendElementInPos(r,e),this.layers[e].tt&&(this.elements[e-1]&&this.elements[e-1]!==!0?r.setMatte(t[e-1].layerId):(this.buildItem(e-1),this.addPendingElement(r)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,r=this.elements.length;r>t;){if(this.elements[t]===e){e.setMatte(this.elements[t-1].layerId);break}t+=1}}},SVGRenderer.prototype.renderFrame=function(e){if(this.renderedFrame!=e&&!this.destroyed){null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e;var t,r=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=r-1;t>=0;t--)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);for(t=r-1;t>=0;t--)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(e,t){var r=e.getBaseElement();if(r){for(var i,n=0;t>n;)this.elements[n]&&this.elements[n]!==!0&&this.elements[n].getBaseElement()&&(i=this.elements[n].getBaseElement()),n+=1;i?this.layerElement.insertBefore(r,i):this.layerElement.appendChild(r)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},SVGRenderer.prototype.searchExtraCompositions=function(e){var t,r=e.length,i=document.createElementNS(svgNS,"g");for(t=0;r>t;t+=1)if(e[t].xt){var n=this.createComp(e[t],i,this.globalData.comp,null);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.prepareFrame=function(){var e,t=this.dynamicProperties.length;for(e=0;t>e;e+=1)this.dynamicProperties[e].getValue()},MaskElement.prototype.renderFrame=function(e){var t,r=this.masksProperties.length;for(t=0;r>t;t++)if((this.viewData[t].prop.mdf||this.firstFrame)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op.mdf||this.firstFrame)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),"n"!==this.masksProperties[t].mode&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp.mdf||this.firstFrame)&&(this.viewData[t].invRect.setAttribute("x",-e.props[12]),this.viewData[t].invRect.setAttribute("y",-e.props[13])),this.storedData[t].x&&(this.storedData[t].x.mdf||this.firstFrame))){var i=this.storedData[t].expan;this.storedData[t].x.v<0?("erode"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url(#"+this.storedData[t].filterId+")")),i.setAttribute("radius",-this.storedData[t].x.v)):("dilate"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",2*this.storedData[t].x.v))}this.firstFrame=!1},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,e+=" h-"+this.globalData.compSize.w,e+=" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(e,t,r){var i,n,a="";for(n=t.v.length,i=1;n>i;i+=1)1==i&&(a+=" M"+bm_rnd(t.v[0][0])+","+bm_rnd(t.v[0][1])),a+=" C"+bm_rnd(t.o[i-1][0])+","+bm_rnd(t.o[i-1][1])+" "+bm_rnd(t.i[i][0])+","+bm_rnd(t.i[i][1])+" "+bm_rnd(t.v[i][0])+","+bm_rnd(t.v[i][1]);t.c&&n>1&&(a+=" C"+bm_rnd(t.o[i-1][0])+","+bm_rnd(t.o[i-1][1])+" "+bm_rnd(t.i[0][0])+","+bm_rnd(t.i[0][1])+" "+bm_rnd(t.v[0][0])+","+bm_rnd(t.v[0][1])),r.lastPath!==a&&(r.elem&&(t.c?e.inv?r.elem.setAttribute("d",this.solidPath+a):r.elem.setAttribute("d",a):r.elem.setAttribute("d","")),r.lastPath=a)},MaskElement.prototype.getMask=function(e){for(var t=0,r=this.masksProperties.length;r>t;){if(this.masksProperties[t].nm===e)return{maskPath:this.viewData[t].prop.pv};t+=1}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.paths=null,this.masksProperties=null},BaseElement.prototype.checkMasks=function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;t>e;){if("n"!==this.data.masksProperties[e].mode&&this.data.masksProperties[e].cl!==!1)return!0;e+=1}return!1},BaseElement.prototype.checkParenting=function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent)},BaseElement.prototype.prepareFrame=function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?this.isVisible!==!0&&(this.elemMdf=!0,this.globalData.mdf=!0,this.isVisible=!0,this.firstFrame=!0,this.data.hasMask&&(this.maskManager.firstFrame=!0)):this.isVisible!==!1&&(this.elemMdf=!0,this.globalData.mdf=!0,this.isVisible=!1);var t,r=this.dynamicProperties.length;for(t=0;r>t;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t].mdf&&(this.elemMdf=!0,this.globalData.mdf=!0);return this.data.hasMask&&this.maskManager.prepareFrame(e*this.data.sr),this.currentFrameNum=e*this.data.sr,this.isVisible},BaseElement.prototype.globalToLocal=function(e){var t=[];t.push(this.finalTransform);for(var r=!0,i=this.comp;r;)i.finalTransform?(i.data.hasMask&&t.splice(0,0,i.finalTransform),i=i.comp):r=!1;var n,a,o=t.length;for(n=0;o>n;n+=1)a=t[n].mat.applyToPointArray(0,0,0),e=[e[0]-a[0],e[1]-a[1],0];return e},BaseElement.prototype.initExpressions=function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.layerInterface.registerMaskInterface(this.maskManager);var e=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(e),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty&&(this.layerInterface.shapeInterface=ShapeExpressionInterface.createShapeInterface(this.shapesData,this.viewData,this.layerInterface))},BaseElement.prototype.setBlendMode=function(){var e="";switch(this.data.bm){case 1:e="multiply";break;case 2:e="screen";break;case 3:e="overlay";break;case 4:e="darken";break;case 5:e="lighten";break;case 6:e="color-dodge";break;case 7:e="color-burn";break;case 8:e="hard-light";break;case 9:e="soft-light";break;case 10:e="difference";break;case 11:e="exclusion";break;case 12:e="hue";break;case 13:e="saturation";break;case 14:e="color";break;case 15:e="luminosity"}var t=this.baseElement||this.layerElement;t.style["mix-blend-mode"]=e},BaseElement.prototype.init=function(){this.data.sr||(this.data.sr=1),this.dynamicProperties=[],this.data.ef&&(this.effects=new EffectsManager(this.data,this,this.dynamicProperties)),this.hidden=!1,this.firstFrame=!0,this.isVisible=!1,this.currentFrameNum=-99999,this.lastNum=-99999,this.data.ks&&(this.finalTransform={mProp:PropertyFactory.getProp(this,this.data.ks,2,null,this.dynamicProperties),matMdf:!1,opMdf:!1,mat:new Matrix,opacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.finalTransform.op=this.finalTransform.mProp.o,this.transform=this.finalTransform.mProp,11!==this.data.ty&&this.createElements(),this.data.hasMask&&this.addMasks(this.data)),this.elemMdf=!1},BaseElement.prototype.getType=function(){return this.type},BaseElement.prototype.resetHierarchy=function(){this.hierarchy?this.hierarchy.length=0:this.hierarchy=[]},BaseElement.prototype.getHierarchy=function(){return this.hierarchy||(this.hierarchy=[]),this.hierarchy},BaseElement.prototype.setHierarchy=function(e){this.hierarchy=e},BaseElement.prototype.getLayerSize=function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}},BaseElement.prototype.hide=function(){},BaseElement.prototype.mHelper=new Matrix,createElement(BaseElement,SVGBaseElement),SVGBaseElement.prototype.createElements=function(){if(this.data.td){if(3==this.data.td||1==this.data.td){this.layerElement=document.createElementNS(svgNS,"g");var e=document.createElementNS(svgNS,"mask");if(e.setAttribute("id",this.layerId),e.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),e.appendChild(this.layerElement),this.globalData.defs.appendChild(e),!featureSupport.maskType&&1==this.data.td){e.setAttribute("mask-type","luminance");var t=randomString(10),r=filtersFactory.createFilter(t);this.globalData.defs.appendChild(r),r.appendChild(filtersFactory.createAlphaToLuminanceFilter());var i=document.createElementNS(svgNS,"g");i.appendChild(this.layerElement),e.appendChild(i),i.setAttribute("filter","url(#"+t+")")}}else if(2==this.data.td){var n=document.createElementNS(svgNS,"mask");n.setAttribute("id",this.layerId),n.setAttribute("mask-type","alpha");var a=document.createElementNS(svgNS,"g");n.appendChild(a),this.layerElement=document.createElementNS(svgNS,"g");var t=randomString(10),r=filtersFactory.createFilter(t),o=document.createElementNS(svgNS,"feComponentTransfer");o.setAttribute("in","SourceGraphic"),r.appendChild(o);var s=document.createElementNS(svgNS,"feFuncA");s.setAttribute("type","table"),s.setAttribute("tableValues","1.0 0.0"),o.appendChild(s),this.globalData.defs.appendChild(r);var l=document.createElementNS(svgNS,"rect");if(l.setAttribute("width",this.comp.data?this.comp.data.w:this.globalData.compSize.w),l.setAttribute("height",this.comp.data?this.comp.data.h:this.globalData.compSize.h),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("fill","#ffffff"),l.setAttribute("opacity","0"),a.setAttribute("filter","url(#"+t+")"),
a.appendChild(l),a.appendChild(this.layerElement),!featureSupport.maskType){n.setAttribute("mask-type","luminance"),r.appendChild(filtersFactory.createAlphaToLuminanceFilter());var i=document.createElementNS(svgNS,"g");a.appendChild(l),i.appendChild(this.layerElement),a.appendChild(i)}this.globalData.defs.appendChild(n)}else this.layerElement=document.createElementNS(svgNS,"g");this.data.hasMask&&(this.maskedElement=this.layerElement)}else this.data.hasMask||this.data.tt?(this.layerElement=document.createElementNS(svgNS,"g"),this.data.tt?(this.matteElement=document.createElementNS(svgNS,"g"),this.matteElement.appendChild(this.layerElement),this.baseElement=this.matteElement):this.baseElement=this.layerElement,this.data.hasMask&&(this.maskedElement=this.layerElement)):(this.layerElement=document.createElementNS(svgNS,"g"),this.baseElement=this.layerElement);if(!this.data.ln&&!this.data.cl||4!==this.data.ty&&0!==this.data.ty||(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)),0===this.data.ty&&!this.checkMasks()){var u=document.createElementNS(svgNS,"clipPath"),c=document.createElementNS(svgNS,"path");c.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var h="cp_"+randomString(8);u.setAttribute("id",h),this.layerElement.setAttribute("clip-path","url(#"+h+")"),u.appendChild(c),this.globalData.defs.appendChild(u)}0!==this.data.bm&&this.setBlendMode(),this.layerElement!==this.parentContainer&&(this.placeholder=null),this.data.ef&&(this.effectsManager=new SVGEffects(this)),this.checkParenting()},SVGBaseElement.prototype.setBlendMode=BaseElement.prototype.setBlendMode,SVGBaseElement.prototype.renderFrame=function(e){if(3===this.data.ty||this.data.hd)return!1;if(!this.isVisible)return this.isVisible;this.lastNum=this.currentFrameNum,this.finalTransform.opMdf=this.finalTransform.op.mdf,this.finalTransform.matMdf=this.finalTransform.mProp.mdf,this.finalTransform.opacity=this.finalTransform.op.v,this.firstFrame&&(this.finalTransform.opMdf=!0,this.finalTransform.matMdf=!0);var t,r=this.finalTransform.mat;if(this.hierarchy){var i,n=this.hierarchy.length;for(t=this.finalTransform.mProp.v.props,r.cloneFromProps(t),i=0;n>i;i+=1)this.finalTransform.matMdf=this.hierarchy[i].finalTransform.mProp.mdf?!0:this.finalTransform.matMdf,t=this.hierarchy[i].finalTransform.mProp.v.props,r.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}else this.isVisible&&r.cloneFromProps(this.finalTransform.mProp.v.props);return e&&(t=e.mat.props,r.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),this.finalTransform.opacity*=e.opacity,this.finalTransform.opMdf=e.opMdf?!0:this.finalTransform.opMdf,this.finalTransform.matMdf=e.matMdf?!0:this.finalTransform.matMdf),this.finalTransform.matMdf&&this.layerElement&&this.layerElement.setAttribute("transform",r.to2dCSS()),this.finalTransform.opMdf&&this.layerElement&&this.layerElement.setAttribute("opacity",this.finalTransform.opacity),this.data.hasMask&&this.maskManager.renderFrame(r),this.effectsManager&&this.effectsManager.renderFrame(this.firstFrame),this.isVisible},SVGBaseElement.prototype.destroy=function(){this.layerElement=null,this.parentContainer=null,this.matteElement&&(this.matteElement=null),this.maskManager&&this.maskManager.destroy()},SVGBaseElement.prototype.getBaseElement=function(){return this.baseElement},SVGBaseElement.prototype.addMasks=function(e){this.maskManager=new MaskElement(e,this,this.globalData)},SVGBaseElement.prototype.setMatte=function(e){this.matteElement&&this.matteElement.setAttribute("mask","url(#"+e+")")},SVGBaseElement.prototype.setMatte=function(e){this.matteElement&&this.matteElement.setAttribute("mask","url(#"+e+")")},SVGBaseElement.prototype.hide=function(){},ITextElement.prototype.init=function(){this._parent.init.call(this),this.lettersChangedFlag=!1,this.currentTextDocumentData={};var e=this.data;this.viewData={m:{a:PropertyFactory.getProp(this,e.t.m.a,1,0,this.dynamicProperties)}};var t=this.data.t;if(t.a.length){this.viewData.a=Array.apply(null,{length:t.a.length});var r,i,n,a=t.a.length;for(r=0;a>r;r+=1)n=t.a[r],i={a:{},s:{}},"r"in n.a&&(i.a.r=PropertyFactory.getProp(this,n.a.r,0,degToRads,this.dynamicProperties)),"rx"in n.a&&(i.a.rx=PropertyFactory.getProp(this,n.a.rx,0,degToRads,this.dynamicProperties)),"ry"in n.a&&(i.a.ry=PropertyFactory.getProp(this,n.a.ry,0,degToRads,this.dynamicProperties)),"sk"in n.a&&(i.a.sk=PropertyFactory.getProp(this,n.a.sk,0,degToRads,this.dynamicProperties)),"sa"in n.a&&(i.a.sa=PropertyFactory.getProp(this,n.a.sa,0,degToRads,this.dynamicProperties)),"s"in n.a&&(i.a.s=PropertyFactory.getProp(this,n.a.s,1,.01,this.dynamicProperties)),"a"in n.a&&(i.a.a=PropertyFactory.getProp(this,n.a.a,1,0,this.dynamicProperties)),"o"in n.a&&(i.a.o=PropertyFactory.getProp(this,n.a.o,0,.01,this.dynamicProperties)),"p"in n.a&&(i.a.p=PropertyFactory.getProp(this,n.a.p,1,0,this.dynamicProperties)),"sw"in n.a&&(i.a.sw=PropertyFactory.getProp(this,n.a.sw,0,0,this.dynamicProperties)),"sc"in n.a&&(i.a.sc=PropertyFactory.getProp(this,n.a.sc,1,0,this.dynamicProperties)),"fc"in n.a&&(i.a.fc=PropertyFactory.getProp(this,n.a.fc,1,0,this.dynamicProperties)),"fh"in n.a&&(i.a.fh=PropertyFactory.getProp(this,n.a.fh,0,0,this.dynamicProperties)),"fs"in n.a&&(i.a.fs=PropertyFactory.getProp(this,n.a.fs,0,.01,this.dynamicProperties)),"fb"in n.a&&(i.a.fb=PropertyFactory.getProp(this,n.a.fb,0,.01,this.dynamicProperties)),"t"in n.a&&(i.a.t=PropertyFactory.getProp(this,n.a.t,0,0,this.dynamicProperties)),i.s=PropertyFactory.getTextSelectorProp(this,n.s,this.dynamicProperties),i.s.t=n.s.t,this.viewData.a[r]=i}else this.viewData.a=[];t.p&&"m"in t.p?(this.viewData.p={f:PropertyFactory.getProp(this,t.p.f,0,0,this.dynamicProperties),l:PropertyFactory.getProp(this,t.p.l,0,0,this.dynamicProperties),r:t.p.r,m:this.maskManager.getMaskProperty(t.p.m)},this.maskPath=!0):this.maskPath=!1},ITextElement.prototype.prepareFrame=function(e){var t=0,r=this.data.t.d.k.length,i=this.data.t.d.k[t].s;for(t+=1;r>t&&!(this.data.t.d.k[t].t>e);)i=this.data.t.d.k[t].s,t+=1;this.lettersChangedFlag=!1,i!==this.currentTextDocumentData&&(this.currentTextDocumentData=i,this.lettersChangedFlag=!0,this.buildNewText()),this._parent.prepareFrame.call(this,e)},ITextElement.prototype.createPathShape=function(e,t){var r,i,n,a,o=t.length,s="";for(r=0;o>r;r+=1){for(n=t[r].ks.k.i.length,a=t[r].ks.k,i=1;n>i;i+=1)1==i&&(s+=" M"+e.applyToPointStringified(a.v[0][0],a.v[0][1])),s+=" C"+e.applyToPointStringified(a.o[i-1][0],a.o[i-1][1])+" "+e.applyToPointStringified(a.i[i][0],a.i[i][1])+" "+e.applyToPointStringified(a.v[i][0],a.v[i][1]);s+=" C"+e.applyToPointStringified(a.o[i-1][0],a.o[i-1][1])+" "+e.applyToPointStringified(a.i[0][0],a.i[0][1])+" "+e.applyToPointStringified(a.v[0][0],a.v[0][1]),s+="z"}return s},ITextElement.prototype.getMeasures=function(){var e,t,r,i,n=this.mHelper,a=this.renderType,o=this.data,s=this.currentTextDocumentData,l=s.l;if(this.maskPath){var u=this.viewData.p.m;if(!this.viewData.p.n||this.viewData.p.mdf){var c=u.v;this.viewData.p.r&&(c=reversePath(c));var h={tLength:0,segments:[]};i=c.v.length-1;var p,d=0;for(r=0;i>r;r+=1)p={s:c.v[r],e:c.v[r+1],to:[c.o[r][0]-c.v[r][0],c.o[r][1]-c.v[r][1]],ti:[c.i[r+1][0]-c.v[r+1][0],c.i[r+1][1]-c.v[r+1][1]]},bez.buildBezierData(p),h.tLength+=p.bezierData.segmentLength,h.segments.push(p),d+=p.bezierData.segmentLength;r=i,u.v.c&&(p={s:c.v[r],e:c.v[0],to:[c.o[r][0]-c.v[r][0],c.o[r][1]-c.v[r][1]],ti:[c.i[0][0]-c.v[0][0],c.i[0][1]-c.v[0][1]]},bez.buildBezierData(p),h.tLength+=p.bezierData.segmentLength,h.segments.push(p),d+=p.bezierData.segmentLength),this.viewData.p.pi=h}var f,m,v,h=this.viewData.p.pi,g=this.viewData.p.f.v,y=0,b=1,_=0,x=!0,w=h.segments;if(0>g&&u.v.c)for(h.tLength<Math.abs(g)&&(g=-Math.abs(g)%h.tLength),y=w.length-1,v=w[y].bezierData.points,b=v.length-1;0>g;)g+=v[b].partialLength,b-=1,0>b&&(y-=1,v=w[y].bezierData.points,b=v.length-1);v=w[y].bezierData.points,m=v[b-1],f=v[b];var T,M,S=f.partialLength}i=l.length,e=0,t=0;var E,P,A,C,O,k=1.2*s.s*.714,L=!0,R=this.viewData,I=Array.apply(null,{length:i});C=R.a.length;var D,F,N,B,G,j,V,U,z,H,W,X,Y,q,K,$,Z=-1,Q=g,J=y,ee=b,te=-1,re=0;for(r=0;i>r;r+=1)if(n.reset(),j=1,l[r].n)e=0,t+=s.yOffset,t+=L?1:0,g=Q,L=!1,re=0,this.maskPath&&(y=J,b=ee,v=w[y].bezierData.points,m=v[b-1],f=v[b],S=f.partialLength,_=0),I[r]=this.emptyProp;else{if(this.maskPath){if(te!==l[r].line){switch(s.j){case 1:g+=d-s.lineWidths[l[r].line];break;case 2:g+=(d-s.lineWidths[l[r].line])/2}te=l[r].line}Z!==l[r].ind&&(l[Z]&&(g+=l[Z].extra),g+=l[r].an/2,Z=l[r].ind),g+=R.m.a.v[0]*l[r].an/200;var ie=0;for(A=0;C>A;A+=1)E=R.a[A].a,"p"in E&&(P=R.a[A].s,F=P.getMult(l[r].anIndexes[A],o.t.a[A].s.totalChars),ie+=F.length?E.p.v[0]*F[0]:E.p.v[0]*F);for(x=!0;x;)_+S>=g+ie||!v?(T=(g+ie-_)/f.partialLength,B=m.point[0]+(f.point[0]-m.point[0])*T,G=m.point[1]+(f.point[1]-m.point[1])*T,n.translate(0,-(R.m.a.v[1]*k/100)+t),x=!1):v&&(_+=f.partialLength,b+=1,b>=v.length&&(b=0,y+=1,w[y]?v=w[y].bezierData.points:u.v.c?(b=0,y=0,v=w[y].bezierData.points):(_-=f.partialLength,v=null)),v&&(m=f,f=v[b],S=f.partialLength));N=l[r].an/2-l[r].add,n.translate(-N,0,0)}else N=l[r].an/2-l[r].add,n.translate(-N,0,0),n.translate(-R.m.a.v[0]*l[r].an/200,-R.m.a.v[1]*k/100,0);for(re+=l[r].l/2,A=0;C>A;A+=1)E=R.a[A].a,"t"in E&&(P=R.a[A].s,F=P.getMult(l[r].anIndexes[A],o.t.a[A].s.totalChars),this.maskPath?g+=F.length?E.t*F[0]:E.t*F:e+=F.length?E.t.v*F[0]:E.t.v*F);for(re+=l[r].l/2,s.strokeWidthAnim&&(U=s.sw||0),s.strokeColorAnim&&(V=s.sc?[s.sc[0],s.sc[1],s.sc[2]]:[0,0,0]),s.fillColorAnim&&(z=[s.fc[0],s.fc[1],s.fc[2]]),A=0;C>A;A+=1)E=R.a[A].a,"a"in E&&(P=R.a[A].s,F=P.getMult(l[r].anIndexes[A],o.t.a[A].s.totalChars),F.length?n.translate(-E.a.v[0]*F[0],-E.a.v[1]*F[1],E.a.v[2]*F[2]):n.translate(-E.a.v[0]*F,-E.a.v[1]*F,E.a.v[2]*F));for(A=0;C>A;A+=1)E=R.a[A].a,"s"in E&&(P=R.a[A].s,F=P.getMult(l[r].anIndexes[A],o.t.a[A].s.totalChars),F.length?n.scale(1+(E.s.v[0]-1)*F[0],1+(E.s.v[1]-1)*F[1],1):n.scale(1+(E.s.v[0]-1)*F,1+(E.s.v[1]-1)*F,1));for(A=0;C>A;A+=1){if(E=R.a[A].a,P=R.a[A].s,F=P.getMult(l[r].anIndexes[A],o.t.a[A].s.totalChars),"sk"in E&&(F.length?n.skewFromAxis(-E.sk.v*F[0],E.sa.v*F[1]):n.skewFromAxis(-E.sk.v*F,E.sa.v*F)),"r"in E&&n.rotateZ(F.length?-E.r.v*F[2]:-E.r.v*F),"ry"in E&&n.rotateY(F.length?E.ry.v*F[1]:E.ry.v*F),"rx"in E&&n.rotateX(F.length?E.rx.v*F[0]:E.rx.v*F),"o"in E&&(j+=F.length?(E.o.v*F[0]-j)*F[0]:(E.o.v*F-j)*F),s.strokeWidthAnim&&"sw"in E&&(U+=F.length?E.sw.v*F[0]:E.sw.v*F),s.strokeColorAnim&&"sc"in E)for(H=0;3>H;H+=1)V[H]=Math.round(F.length?255*(V[H]+(E.sc.v[H]-V[H])*F[0]):255*(V[H]+(E.sc.v[H]-V[H])*F));if(s.fillColorAnim){if("fc"in E)for(H=0;3>H;H+=1)z[H]=F.length?z[H]+(E.fc.v[H]-z[H])*F[0]:z[H]+(E.fc.v[H]-z[H])*F;"fh"in E&&(z=F.length?addHueToRGB(z,E.fh.v*F[0]):addHueToRGB(z,E.fh.v*F)),"fs"in E&&(z=F.length?addSaturationToRGB(z,E.fs.v*F[0]):addSaturationToRGB(z,E.fs.v*F)),"fb"in E&&(z=F.length?addBrightnessToRGB(z,E.fb.v*F[0]):addBrightnessToRGB(z,E.fb.v*F))}}for(A=0;C>A;A+=1)E=R.a[A].a,"p"in E&&(P=R.a[A].s,F=P.getMult(l[r].anIndexes[A],o.t.a[A].s.totalChars),this.maskPath?F.length?n.translate(0,E.p.v[1]*F[0],-E.p.v[2]*F[1]):n.translate(0,E.p.v[1]*F,-E.p.v[2]*F):F.length?n.translate(E.p.v[0]*F[0],E.p.v[1]*F[1],-E.p.v[2]*F[2]):n.translate(E.p.v[0]*F,E.p.v[1]*F,-E.p.v[2]*F));if(s.strokeWidthAnim&&(W=0>U?0:U),s.strokeColorAnim&&(X="rgb("+Math.round(255*V[0])+","+Math.round(255*V[1])+","+Math.round(255*V[2])+")"),s.fillColorAnim&&(Y="rgb("+Math.round(255*z[0])+","+Math.round(255*z[1])+","+Math.round(255*z[2])+")"),this.maskPath){if(o.t.p.p){M=(f.point[1]-m.point[1])/(f.point[0]-m.point[0]);var ne=180*Math.atan(M)/Math.PI;f.point[0]<m.point[0]&&(ne+=180),n.rotate(-ne*Math.PI/180)}n.translate(B,G,0),n.translate(R.m.a.v[0]*l[r].an/200,R.m.a.v[1]*k/100,0),g-=R.m.a.v[0]*l[r].an/200,l[r+1]&&Z!==l[r+1].ind&&(g+=l[r].an/2,g+=s.tr/1e3*s.s)}else{switch(n.translate(e,t,0),s.ps&&n.translate(s.ps[0],s.ps[1]+s.ascent,0),s.j){case 1:n.translate(s.justifyOffset+(s.boxWidth-s.lineWidths[l[r].line]),0,0);break;case 2:n.translate(s.justifyOffset+(s.boxWidth-s.lineWidths[l[r].line])/2,0,0)}n.translate(N,0,0),n.translate(R.m.a.v[0]*l[r].an/200,R.m.a.v[1]*k/100,0),e+=l[r].l+s.tr/1e3*s.s}"html"===a?q=n.toCSS():"svg"===a?q=n.to2dCSS():K=[n.props[0],n.props[1],n.props[2],n.props[3],n.props[4],n.props[5],n.props[6],n.props[7],n.props[8],n.props[9],n.props[10],n.props[11],n.props[12],n.props[13],n.props[14],n.props[15]],$=j,D=this.renderedLetters[r],!D||D.o===$&&D.sw===W&&D.sc===X&&D.fc===Y?"svg"!==a&&"html"!==a||D&&D.m===q?"canvas"!==a||D&&D.props[0]===K[0]&&D.props[1]===K[1]&&D.props[4]===K[4]&&D.props[5]===K[5]&&D.props[12]===K[12]&&D.props[13]===K[13]?O=D:(this.lettersChangedFlag=!0,O=new LetterProps($,W,X,Y,null,K)):(this.lettersChangedFlag=!0,O=new LetterProps($,W,X,Y,q)):(this.lettersChangedFlag=!0,O=new LetterProps($,W,X,Y,q,K)),this.renderedLetters[r]=O}},ITextElement.prototype.emptyProp=new LetterProps,createElement(SVGBaseElement,SVGTextElement),SVGTextElement.prototype.init=ITextElement.prototype.init,SVGTextElement.prototype.createPathShape=ITextElement.prototype.createPathShape,SVGTextElement.prototype.getMeasures=ITextElement.prototype.getMeasures,SVGTextElement.prototype.prepareFrame=ITextElement.prototype.prepareFrame,SVGTextElement.prototype.createElements=function(){this._parent.createElements.call(this),this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)},SVGTextElement.prototype.buildNewText=function(){var e,t,r=this.currentTextDocumentData;this.renderedLetters=Array.apply(null,{length:this.currentTextDocumentData.l?this.currentTextDocumentData.l.length:0}),r.fc?this.layerElement.setAttribute("fill","rgb("+Math.round(255*r.fc[0])+","+Math.round(255*r.fc[1])+","+Math.round(255*r.fc[2])+")"):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),r.sc&&(this.layerElement.setAttribute("stroke","rgb("+Math.round(255*r.sc[0])+","+Math.round(255*r.sc[1])+","+Math.round(255*r.sc[2])+")"),this.layerElement.setAttribute("stroke-width",r.sw)),this.layerElement.setAttribute("font-size",r.s);var i=this.globalData.fontManager.getFontByName(r.f);if(i.fClass)this.layerElement.setAttribute("class",i.fClass);else{this.layerElement.setAttribute("font-family",i.fFamily);var n=r.fWeight,a=r.fStyle;this.layerElement.setAttribute("font-style",a),this.layerElement.setAttribute("font-weight",n)}var o=r.l||[];if(t=o.length){var s,l,u=this.mHelper,c="",h=this.data.singleShape;if(h)var p=0,d=0,f=r.lineWidths,m=r.boxWidth,v=!0;var g=0;for(e=0;t>e;e+=1){if(this.globalData.fontManager.chars?h&&0!==e||(s=this.textSpans[g]?this.textSpans[g]:document.createElementNS(svgNS,"path")):s=this.textSpans[g]?this.textSpans[g]:document.createElementNS(svgNS,"text"),s.style.display="inherit",s.setAttribute("stroke-linecap","butt"),s.setAttribute("stroke-linejoin","round"),s.setAttribute("stroke-miterlimit","4"),h&&o[e].n&&(p=0,d+=r.yOffset,d+=v?1:0,v=!1),u.reset(),this.globalData.fontManager.chars&&u.scale(r.s/100,r.s/100),h){switch(r.ps&&u.translate(r.ps[0],r.ps[1]+r.ascent,0),r.j){case 1:u.translate(r.justifyOffset+(m-f[o[e].line]),0,0);break;case 2:u.translate(r.justifyOffset+(m-f[o[e].line])/2,0,0)}u.translate(p,d,0)}if(this.globalData.fontManager.chars){var y,b=this.globalData.fontManager.getCharData(r.t.charAt(e),i.fStyle,this.globalData.fontManager.getFontByName(r.f).fFamily);y=b?b.data:null,y&&y.shapes&&(l=y.shapes[0].it,h||(c=""),c+=this.createPathShape(u,l),h||s.setAttribute("d",c)),h||this.layerElement.appendChild(s)}else s.textContent=o[e].val,s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.layerElement.appendChild(s),h&&s.setAttribute("transform",u.to2dCSS());h&&(p+=o[e].l,p+=r.tr/1e3*r.s),this.textSpans[g]=s,g+=1}for(;g<this.textSpans.length;)this.textSpans[g].style.display="none",g+=1;h&&this.globalData.fontManager.chars&&(s.setAttribute("d",c),this.layerElement.appendChild(s))}},SVGTextElement.prototype.hide=function(){this.hidden||(this.layerElement.style.display="none",this.hidden=!0)},SVGTextElement.prototype.renderFrame=function(e){var t=this._parent.renderFrame.call(this,e);if(t===!1)return void this.hide();if(this.hidden&&(this.hidden=!1,this.layerElement.style.display="block"),!this.data.singleShape&&(this.getMeasures(),this.lettersChangedFlag)){var r,i,n=this.renderedLetters,a=this.currentTextDocumentData.l;i=a.length;var o;for(r=0;i>r;r+=1)a[r].n||(o=n[r],this.textSpans[r].setAttribute("transform",o.m),this.textSpans[r].setAttribute("opacity",o.o),o.sw&&this.textSpans[r].setAttribute("stroke-width",o.sw),o.sc&&this.textSpans[r].setAttribute("stroke",o.sc),o.fc&&this.textSpans[r].setAttribute("fill",o.fc));this.firstFrame&&(this.firstFrame=!1)}},SVGTextElement.prototype.destroy=function(){this._parent.destroy.call()},SVGEffects.prototype.renderFrame=function(e){var t,r=this.filters.length;for(t=0;r>t;t+=1)this.filters[t].renderFrame(e)},SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager.mdf){var t=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",r[0]-t[0]+" 0 0 0 "+t[0]+" "+(r[1]-t[1])+" 0 0 0 "+t[1]+" "+(r[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 "+i+" 0")}},SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager.mdf){var t=this.filterManager.effectElements[2].p.v,r=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+r+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var e,t,r,i,n=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(i=this.elem.maskManager.masksProperties.length,r=0):(r=this.filterManager.effectElements[0].p.v-1,i=r+1),t=document.createElementNS(svgNS,"g"),t.setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1),r;i>r;r+=1)e=document.createElementNS(svgNS,"path"),t.appendChild(e),this.paths.push({p:e,m:r});if(3===this.filterManager.effectElements[10].p.v){var a=document.createElementNS(svgNS,"mask"),o="stms_"+randomString(10);a.setAttribute("id",o),a.setAttribute("mask-type","alpha"),a.appendChild(t),this.elem.globalData.defs.appendChild(a);var s=document.createElementNS(svgNS,"g");s.setAttribute("mask","url(#"+o+")"),n[0]&&s.appendChild(n[0]),this.elem.layerElement.appendChild(s),this.masker=a,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(var n=this.elem.layerElement.children||this.elem.layerElement.childNodes;n.length;)this.elem.layerElement.removeChild(n[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(e){this.initialized||this.initialize();var t,r,i,n=this.paths.length;for(t=0;n>t;t+=1)if(r=this.elem.maskManager.viewData[this.paths[t].m],i=this.paths[t].p,(e||this.filterManager.mdf||r.prop.mdf)&&i.setAttribute("d",r.lastPath),e||this.filterManager.effectElements[9].p.mdf||this.filterManager.effectElements[4].p.mdf||this.filterManager.effectElements[7].p.mdf||this.filterManager.effectElements[8].p.mdf||r.prop.mdf){var a;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var o=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,s=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,l=i.getTotalLength();a="0 0 0 "+l*o+" ";var u,c=l*(s-o),h=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100,p=Math.floor(c/h);for(u=0;p>u;u+=1)a+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100+" ";a+="0 "+10*l+" 0 0"}else a="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;i.setAttribute("stroke-dasharray",a)}if((e||this.filterManager.effectElements[4].p.mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(e||this.filterManager.effectElements[6].p.mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(e||this.filterManager.effectElements[3].p.mdf)){var d=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bm_floor(255*d[0])+","+bm_floor(255*d[1])+","+bm_floor(255*d[2])+")")}},createElement(SVGBaseElement,ICompElement),ICompElement.prototype.hide=function(){if(!this.hidden){var e,t=this.elements.length;for(e=0;t>e;e+=1)this.elements[e]&&this.elements[e].hide();this.hidden=!0}},ICompElement.prototype.prepareFrame=function(e){if(this._parent.prepareFrame.call(this,e),this.isVisible!==!1||this.data.xt){if(this.tm){var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}else this.renderedFrame=e/this.data.sr;var r,i=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),r=0;i>r;r+=1)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(this.renderedFrame-this.layers[r].st)}},ICompElement.prototype.renderFrame=function(e){var t,r=this._parent.renderFrame.call(this,e),i=this.layers.length;if(r===!1)return void this.hide();for(this.hidden=!1,t=0;i>t;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame();this.firstFrame&&(this.firstFrame=!1)},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroy=function(){this._parent.destroy.call();var e,t=this.layers.length;for(e=0;t>e;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.checkLayers=SVGRenderer.prototype.checkLayers,ICompElement.prototype.buildItem=SVGRenderer.prototype.buildItem,ICompElement.prototype.buildAllItems=SVGRenderer.prototype.buildAllItems,ICompElement.prototype.buildElementParenting=SVGRenderer.prototype.buildElementParenting,ICompElement.prototype.createItem=SVGRenderer.prototype.createItem,ICompElement.prototype.createImage=SVGRenderer.prototype.createImage,ICompElement.prototype.createComp=SVGRenderer.prototype.createComp,ICompElement.prototype.createSolid=SVGRenderer.prototype.createSolid,ICompElement.prototype.createShape=SVGRenderer.prototype.createShape,ICompElement.prototype.createText=SVGRenderer.prototype.createText,ICompElement.prototype.createBase=SVGRenderer.prototype.createBase,ICompElement.prototype.appendElementInPos=SVGRenderer.prototype.appendElementInPos,ICompElement.prototype.checkPendingElements=SVGRenderer.prototype.checkPendingElements,ICompElement.prototype.addPendingElement=SVGRenderer.prototype.addPendingElement,createElement(SVGBaseElement,IImageElement),IImageElement.prototype.createElements=function(){var e=this.globalData.getAssetsPath(this.assetData);this._parent.createElements.call(this),this.innerElem=document.createElementNS(svgNS,"image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio","xMidYMid slice"),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.maskedElement=this.innerElem,this.layerElement.appendChild(this.innerElem),this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)},IImageElement.prototype.hide=function(){this.hidden||(this.layerElement.style.display="none",this.hidden=!0)},IImageElement.prototype.renderFrame=function(e){var t=this._parent.renderFrame.call(this,e);return t===!1?void this.hide():(this.hidden&&(this.hidden=!1,this.layerElement.style.display="block"),void(this.firstFrame&&(this.firstFrame=!1)))},IImageElement.prototype.destroy=function(){this._parent.destroy.call(),this.innerElem=null},createElement(SVGBaseElement,IShapeElement),IShapeElement.prototype.lcEnum={1:"butt",2:"round",3:"butt"},IShapeElement.prototype.ljEnum={1:"miter",2:"round",3:"butt"},IShapeElement.prototype.buildExpressionInterface=function(){},IShapeElement.prototype.createElements=function(){this._parent.createElements.call(this),this.searchShapes(this.shapesData,this.viewData,this.layerElement,this.dynamicProperties,0),(!this.data.hd||this.data.td)&&styleUnselectableDiv(this.layerElement)},IShapeElement.prototype.setGradientData=function(e,t,r){var i,n="gr_"+randomString(10);i=1===t.t?document.createElementNS(svgNS,"linearGradient"):document.createElementNS(svgNS,"radialGradient"),i.setAttribute("id",n),i.setAttribute("spreadMethod","pad"),i.setAttribute("gradientUnits","userSpaceOnUse");var a,o,s,l=[];for(s=4*t.g.p,o=0;s>o;o+=4)a=document.createElementNS(svgNS,"stop"),i.appendChild(a),l.push(a);e.setAttribute("gf"===t.ty?"fill":"stroke","url(#"+n+")"),this.globalData.defs.appendChild(i),r.gf=i,r.cst=l},IShapeElement.prototype.setGradientOpacity=function(e,t,r){if(e.g.k.k[0].s&&e.g.k.k[0].s.length>4*e.g.p||e.g.k.k.length>4*e.g.p){var i,n,a,o,s=document.createElementNS(svgNS,"mask"),l=document.createElementNS(svgNS,"path");s.appendChild(l);var u="op_"+randomString(10),c="mk_"+randomString(10);s.setAttribute("id",c),i=1===e.t?document.createElementNS(svgNS,"linearGradient"):document.createElementNS(svgNS,"radialGradient"),i.setAttribute("id",u),i.setAttribute("spreadMethod","pad"),i.setAttribute("gradientUnits","userSpaceOnUse"),o=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var h=[];for(a=4*e.g.p;o>a;a+=2)n=document.createElementNS(svgNS,"stop"),n.setAttribute("stop-color","rgb(255,255,255)"),i.appendChild(n),h.push(n);return l.setAttribute("gf"===e.ty?"fill":"stroke","url(#"+u+")"),this.globalData.defs.appendChild(i),this.globalData.defs.appendChild(s),t.of=i,t.ost=h,r.msElem=l,c}},IShapeElement.prototype.searchShapes=function(e,t,r,i,n,a){a=a||[];var o,s,l,u,c,h=[].concat(a),p=e.length-1,d=[],f=[];for(o=p;o>=0;o-=1)if("fl"==e[o].ty||"st"==e[o].ty||"gf"==e[o].ty||"gs"==e[o].ty){t[o]={},u={type:e[o].ty,d:"",ld:"",lvl:n,mdf:!1};var m=document.createElementNS(svgNS,"path");if(t[o].o=PropertyFactory.getProp(this,e[o].o,0,.01,i),("st"==e[o].ty||"gs"==e[o].ty)&&(m.setAttribute("stroke-linecap",this.lcEnum[e[o].lc]||"round"),m.setAttribute("stroke-linejoin",this.ljEnum[e[o].lj]||"round"),m.setAttribute("fill-opacity","0"),1==e[o].lj&&m.setAttribute("stroke-miterlimit",e[o].ml),t[o].w=PropertyFactory.getProp(this,e[o].w,0,null,i),e[o].d)){var v=PropertyFactory.getDashProp(this,e[o].d,"svg",i);v.k||(m.setAttribute("stroke-dasharray",v.dasharray),m.setAttribute("stroke-dashoffset",v.dashoffset)),t[o].d=v}if("fl"==e[o].ty||"st"==e[o].ty)t[o].c=PropertyFactory.getProp(this,e[o].c,1,255,i),r.appendChild(m);else{t[o].g=PropertyFactory.getGradientProp(this,e[o].g,i),2==e[o].t&&(t[o].h=PropertyFactory.getProp(this,e[o].h,1,.01,i),t[o].a=PropertyFactory.getProp(this,e[o].a,1,degToRads,i)),t[o].s=PropertyFactory.getProp(this,e[o].s,1,null,i),t[o].e=PropertyFactory.getProp(this,e[o].e,1,null,i),this.setGradientData(m,e[o],t[o],u);var g=this.setGradientOpacity(e[o],t[o],u);g&&m.setAttribute("mask","url(#"+g+")"),t[o].elem=m,r.appendChild(m)}e[o].ln&&m.setAttribute("id",e[o].ln),e[o].cl&&m.setAttribute("class",e[o].cl),u.pElem=m,this.stylesList.push(u),t[o].style=u,d.push(u)}else if("gr"==e[o].ty){t[o]={it:[]};var y=document.createElementNS(svgNS,"g");r.appendChild(y),t[o].gr=y,this.searchShapes(e[o].it,t[o].it,y,i,n+1,a)}else if("tr"==e[o].ty)t[o]={transform:{op:PropertyFactory.getProp(this,e[o].o,0,.01,i),mProps:PropertyFactory.getProp(this,e[o],2,null,i)},elements:[]},c=t[o].transform,h.push(c);else if("sh"==e[o].ty||"rc"==e[o].ty||"el"==e[o].ty||"sr"==e[o].ty){t[o]={elements:[],caches:[],styles:[],transformers:h,lStr:""};var b=4;for("rc"==e[o].ty?b=5:"el"==e[o].ty?b=6:"sr"==e[o].ty&&(b=7),t[o].sh=ShapePropertyFactory.getShapeProp(this,e[o],b,i),t[o].lvl=n,this.shapes.push(t[o].sh),this.addShapeToModifiers(t[o].sh),l=this.stylesList.length,s=0;l>s;s+=1)this.stylesList[s].closed||t[o].elements.push({ty:this.stylesList[s].type,st:this.stylesList[s]})}else if("tm"==e[o].ty||"rd"==e[o].ty||"ms"==e[o].ty){var _=ShapeModifiers.getModifier(e[o].ty);_.init(this,e[o],i),this.shapeModifiers.push(_),f.push(_),t[o]=_}for(p=d.length,o=0;p>o;o+=1)d[o].closed=!0;for(p=f.length,o=0;p>o;o+=1)f[o].closed=!0},IShapeElement.prototype.addShapeToModifiers=function(e){var t,r=this.shapeModifiers.length;for(t=0;r>t;t+=1)this.shapeModifiers[t].addShape(e)},IShapeElement.prototype.renderModifiers=function(){if(this.shapeModifiers.length){var e,t=this.shapes.length;for(e=0;t>e;e+=1)this.shapes[e].reset();for(t=this.shapeModifiers.length,e=t-1;e>=0;e-=1)this.shapeModifiers[e].processShapes(this.firstFrame)}},IShapeElement.prototype.renderFrame=function(e){var t=this._parent.renderFrame.call(this,e);return t===!1?void this.hide():(this.globalToLocal([0,0,0]),this.hidden&&(this.layerElement.style.display="block",this.hidden=!1),this.renderModifiers(),void this.renderShape(null,null,!0,null))},IShapeElement.prototype.hide=function(){if(!this.hidden){this.layerElement.style.display="none";var e,t=this.stylesList.length;for(e=t-1;e>=0;e-=1)"0"!==this.stylesList[e].ld&&(this.stylesList[e].ld="0",this.stylesList[e].pElem.style.display="none",this.stylesList[e].pElem.parentNode&&(this.stylesList[e].parent=this.stylesList[e].pElem.parentNode));this.hidden=!0}},IShapeElement.prototype.renderShape=function(e,t,r,i){var n,a;if(!e)for(e=this.shapesData,a=this.stylesList.length,n=0;a>n;n+=1)this.stylesList[n].d="",this.stylesList[n].mdf=!1;t||(t=this.viewData),a=e.length-1;var o;for(n=a;n>=0;n-=1)o=e[n].ty,"tr"==o?((this.firstFrame||t[n].transform.op.mdf&&i)&&i.setAttribute("opacity",t[n].transform.op.v),(this.firstFrame||t[n].transform.mProps.mdf&&i)&&i.setAttribute("transform",t[n].transform.mProps.v.to2dCSS())):"sh"==o||"el"==o||"rc"==o||"sr"==o?this.renderPath(e[n],t[n]):"fl"==o?this.renderFill(e[n],t[n]):"gf"==o?this.renderGradient(e[n],t[n]):"gs"==o?(this.renderGradient(e[n],t[n]),this.renderStroke(e[n],t[n])):"st"==o?this.renderStroke(e[n],t[n]):"gr"==o&&this.renderShape(e[n].it,t[n].it,!1,t[n].gr);if(r){for(a=this.stylesList.length,n=0;a>n;n+=1)"0"===this.stylesList[n].ld&&(this.stylesList[n].ld="1",this.stylesList[n].pElem.style.display="block"),(this.stylesList[n].mdf||this.firstFrame)&&(this.stylesList[n].pElem.setAttribute("d",this.stylesList[n].d),this.stylesList[n].msElem&&this.stylesList[n].msElem.setAttribute("d",this.stylesList[n].d));this.firstFrame&&(this.firstFrame=!1)}},IShapeElement.prototype.renderPath=function(e,t){var r,i,n,a,o,s,l,u,c=t.elements.length,h=t.lvl;for(u=0;c>u;u+=1){s=t.sh.mdf||this.firstFrame,o="";var p=t.sh.paths;if(a=p.length,t.elements[u].st.lvl<h){var d,f,m=this.mHelper.reset();for(f=t.transformers.length-1;f>=0;f-=1)s=t.transformers[f].mProps.mdf||s,d=t.transformers[f].mProps.v.props,m.transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]);if(s){for(n=0;a>n;n+=1)if(l=p[n],l&&l.v){for(r=l.v.length,i=1;r>i;i+=1)1==i&&(o+=" M"+m.applyToPointStringified(l.v[0][0],l.v[0][1])),o+=" C"+m.applyToPointStringified(l.o[i-1][0],l.o[i-1][1])+" "+m.applyToPointStringified(l.i[i][0],l.i[i][1])+" "+m.applyToPointStringified(l.v[i][0],l.v[i][1]);1==r&&(o+=" M"+m.applyToPointStringified(l.v[0][0],l.v[0][1])),l.c&&(o+=" C"+m.applyToPointStringified(l.o[i-1][0],l.o[i-1][1])+" "+m.applyToPointStringified(l.i[0][0],l.i[0][1])+" "+m.applyToPointStringified(l.v[0][0],l.v[0][1]),o+="z")}t.caches[u]=o}else o=t.caches[u];

}else if(s){for(n=0;a>n;n+=1)if(l=p[n],l&&l.v){for(r=l.v.length,i=1;r>i;i+=1)1==i&&(o+=" M"+l.v[0].join(",")),o+=" C"+l.o[i-1].join(",")+" "+l.i[i].join(",")+" "+l.v[i].join(",");1==r&&(o+=" M"+l.v[0].join(",")),l.c&&r&&(o+=" C"+l.o[i-1].join(",")+" "+l.i[0].join(",")+" "+l.v[0].join(","),o+="z")}t.caches[u]=o}else o=t.caches[u];t.elements[u].st.d+=o,t.elements[u].st.mdf=s||t.elements[u].st.mdf}},IShapeElement.prototype.renderFill=function(e,t){var r=t.style;(t.c.mdf||this.firstFrame)&&r.pElem.setAttribute("fill","rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o.mdf||this.firstFrame)&&r.pElem.setAttribute("fill-opacity",t.o.v)},IShapeElement.prototype.renderGradient=function(e,t){var r=t.gf,i=t.of,n=t.s.v,a=t.e.v;if(t.o.mdf||this.firstFrame){var o="gf"===e.ty?"fill-opacity":"stroke-opacity";t.elem.setAttribute(o,t.o.v)}if(t.s.mdf||this.firstFrame){var s=1===e.t?"x1":"cx",l="x1"===s?"y1":"cy";r.setAttribute(s,n[0]),r.setAttribute(l,n[1]),i&&(i.setAttribute(s,n[0]),i.setAttribute(l,n[1]))}var u,c,h,p;if(t.g.cmdf||this.firstFrame){u=t.cst;var d=t.g.c;for(h=u.length,c=0;h>c;c+=1)p=u[c],p.setAttribute("offset",d[4*c]+"%"),p.setAttribute("stop-color","rgb("+d[4*c+1]+","+d[4*c+2]+","+d[4*c+3]+")")}if(i&&(t.g.omdf||this.firstFrame)){u=t.ost;var f=t.g.o;for(h=u.length,c=0;h>c;c+=1)p=u[c],p.setAttribute("offset",f[2*c]+"%"),p.setAttribute("stop-opacity",f[2*c+1])}if(1===e.t)(t.e.mdf||this.firstFrame)&&(r.setAttribute("x2",a[0]),r.setAttribute("y2",a[1]),i&&(i.setAttribute("x2",a[0]),i.setAttribute("y2",a[1])));else{var m;if((t.s.mdf||t.e.mdf||this.firstFrame)&&(m=Math.sqrt(Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2)),r.setAttribute("r",m),i&&i.setAttribute("r",m)),t.e.mdf||t.h.mdf||t.a.mdf||this.firstFrame){m||(m=Math.sqrt(Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2)));var v=Math.atan2(a[1]-n[1],a[0]-n[0]),g=t.h.v>=1?.99:t.h.v<=-1?-.99:t.h.v,y=m*g,b=Math.cos(v+t.a.v)*y+n[0],_=Math.sin(v+t.a.v)*y+n[1];r.setAttribute("fx",b),r.setAttribute("fy",_),i&&(i.setAttribute("fx",b),i.setAttribute("fy",_))}}},IShapeElement.prototype.renderStroke=function(e,t){var r=t.style,i=t.d;i&&i.k&&(i.mdf||this.firstFrame)&&(r.pElem.setAttribute("stroke-dasharray",i.dasharray),r.pElem.setAttribute("stroke-dashoffset",i.dashoffset)),t.c&&(t.c.mdf||this.firstFrame)&&r.pElem.setAttribute("stroke","rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o.mdf||this.firstFrame)&&r.pElem.setAttribute("stroke-opacity",t.o.v),(t.w.mdf||this.firstFrame)&&(r.pElem.setAttribute("stroke-width",t.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",t.w.v))},IShapeElement.prototype.destroy=function(){this._parent.destroy.call(),this.shapeData=null,this.viewData=null,this.parentContainer=null,this.placeholder=null},createElement(SVGBaseElement,ISolidElement),ISolidElement.prototype.createElements=function(){this._parent.createElements.call(this);var e=document.createElementNS(svgNS,"rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e),this.innerElem=e,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl)},ISolidElement.prototype.hide=IImageElement.prototype.hide,ISolidElement.prototype.renderFrame=IImageElement.prototype.renderFrame,ISolidElement.prototype.destroy=IImageElement.prototype.destroy;var animationManager=function(){function e(e){for(var t=0,r=e.target;M>t;)w[t].animation===r&&(w.splice(t,1),t-=1,M-=1,r.isPaused||i()),t+=1}function t(e,t){if(!e)return null;for(var r=0;M>r;){if(w[r].elem==e&&null!==w[r].elem)return w[r].animation;r+=1}var i=new AnimationItem;return i.setData(e,t),n(i,e),i}function r(){E+=1,_()}function i(){E-=1,0===E&&(S=!0)}function n(t,n){t.addEventListener("destroy",e),t.addEventListener("_active",r),t.addEventListener("_idle",i),w.push({elem:n,animation:t}),M+=1}function a(e){var t=new AnimationItem;return n(t,null),t.setParams(e),t}function o(e,t){var r;for(r=0;M>r;r+=1)w[r].animation.setSpeed(e,t)}function s(e,t){var r;for(r=0;M>r;r+=1)w[r].animation.setDirection(e,t)}function l(e){var t;for(t=0;M>t;t+=1)w[t].animation.play(e)}function u(e,t){T=Date.now();var r;for(r=0;M>r;r+=1)w[r].animation.moveFrame(e,t)}function c(e){var t,r=e-T;for(t=0;M>t;t+=1)w[t].animation.advanceTime(r);T=e,S||requestAnimationFrame(c)}function h(e){T=e,requestAnimationFrame(c)}function p(e){var t;for(t=0;M>t;t+=1)w[t].animation.pause(e)}function d(e,t,r){var i;for(i=0;M>i;i+=1)w[i].animation.goToAndStop(e,t,r)}function f(e){var t;for(t=0;M>t;t+=1)w[t].animation.stop(e)}function m(e){var t;for(t=0;M>t;t+=1)w[t].animation.togglePause(e)}function v(e){var t;for(t=0;M>t;t+=1)w[t].animation.destroy(e)}function g(e,r,i){var n,a=document.getElementsByClassName("bodymovin"),o=a.length;for(n=0;o>n;n+=1)i&&a[n].setAttribute("data-bm-type",i),t(a[n],e);if(r&&0===o){i||(i="svg");var s=document.getElementsByTagName("body")[0];s.innerHTML="";var l=document.createElement("div");l.style.width="100%",l.style.height="100%",l.setAttribute("data-bm-type",i),s.appendChild(l),t(l,e)}}function y(){var e;for(e=0;M>e;e+=1)w[e].animation.resize()}function b(){requestAnimationFrame(h)}function _(){S&&(S=!1,Performance&&Performance.now?h(Performance.now):requestAnimationFrame(h))}var x={},w=[],T=0,M=0,S=!0,E=0;return setTimeout(b,0),x.registerAnimation=t,x.loadAnimation=a,x.setSpeed=o,x.setDirection=s,x.play=l,x.moveFrame=u,x.pause=p,x.stop=f,x.togglePause=m,x.searchAnimations=g,x.resize=y,x.start=b,x.goToAndStop=d,x.destroy=v,x}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.pendingElements=0,this.playCount=0,this.prerenderFramesFlag=!0,this.animationData={},this.layers=[],this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=randomString(10),this.scaleMode="fit",this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.subframeEnabled=subframeEnabled,this.segments=[],this.pendingSegment=!1,this.projectInterface=ProjectInterface()};AnimationItem.prototype.setParams=function(e){var t=this;e.context&&(this.context=e.context),(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var r=e.animType?e.animType:e.renderer?e.renderer:"svg";switch(r){case"canvas":this.renderer=new CanvasRenderer(this,e.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,e.rendererSettings);break;case"hybrid":case"html":default:this.renderer=new HybridRenderer(this,e.rendererSettings)}if(this.renderer.setProjectInterface(this.projectInterface),this.animType=r,""===e.loop||null===e.loop||(this.loop=e.loop===!1?!1:e.loop===!0?!0:parseInt(e.loop)),this.autoplay="autoplay"in e?e.autoplay:!0,this.name=e.name?e.name:"",this.prerenderFramesFlag="prerender"in e?e.prerender:!0,this.autoloadSegments=e.hasOwnProperty("autoloadSegments")?e.autoloadSegments:!0,e.animationData)t.configAnimation(e.animationData);else if(e.path){"json"!=e.path.substr(-4)&&("/"!=e.path.substr(-1,1)&&(e.path+="/"),e.path+="data.json");var i=new XMLHttpRequest;this.path=-1!=e.path.lastIndexOf("\\")?e.path.substr(0,e.path.lastIndexOf("\\")+1):e.path.substr(0,e.path.lastIndexOf("/")+1),this.assetsPath=e.assetsPath,this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),i.open("GET",e.path,!0),i.send(),i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status)t.configAnimation(JSON.parse(i.responseText));else try{var e=JSON.parse(i.responseText);t.configAnimation(e)}catch(r){}}}},AnimationItem.prototype.setData=function(e,t){var r={wrapper:e,animationData:t?"object"==typeof t?t:JSON.parse(t):null},i=e.attributes;r.path=i.getNamedItem("data-animation-path")?i.getNamedItem("data-animation-path").value:i.getNamedItem("data-bm-path")?i.getNamedItem("data-bm-path").value:i.getNamedItem("bm-path")?i.getNamedItem("bm-path").value:"",r.animType=i.getNamedItem("data-anim-type")?i.getNamedItem("data-anim-type").value:i.getNamedItem("data-bm-type")?i.getNamedItem("data-bm-type").value:i.getNamedItem("bm-type")?i.getNamedItem("bm-type").value:i.getNamedItem("data-bm-renderer")?i.getNamedItem("data-bm-renderer").value:i.getNamedItem("bm-renderer")?i.getNamedItem("bm-renderer").value:"canvas";var n=i.getNamedItem("data-anim-loop")?i.getNamedItem("data-anim-loop").value:i.getNamedItem("data-bm-loop")?i.getNamedItem("data-bm-loop").value:i.getNamedItem("bm-loop")?i.getNamedItem("bm-loop").value:"";""===n||(r.loop="false"===n?!1:"true"===n?!0:parseInt(n));var a=i.getNamedItem("data-anim-autoplay")?i.getNamedItem("data-anim-autoplay").value:i.getNamedItem("data-bm-autoplay")?i.getNamedItem("data-bm-autoplay").value:i.getNamedItem("bm-autoplay")?i.getNamedItem("bm-autoplay").value:!0;r.autoplay="false"!==a,r.name=i.getNamedItem("data-name")?i.getNamedItem("data-name").value:i.getNamedItem("data-bm-name")?i.getNamedItem("data-bm-name").value:i.getNamedItem("bm-name")?i.getNamedItem("bm-name").value:"";var o=i.getNamedItem("data-anim-prerender")?i.getNamedItem("data-anim-prerender").value:i.getNamedItem("data-bm-prerender")?i.getNamedItem("data-bm-prerender").value:i.getNamedItem("bm-prerender")?i.getNamedItem("bm-prerender").value:"";"false"===o&&(r.prerender=!1),this.setParams(r)},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip),this.animationData.tf=this.totalFrames);var t,r,i=this.animationData.layers,n=i.length,a=e.layers,o=a.length;for(r=0;o>r;r+=1)for(t=0;n>t;){if(i[t].id==a[r].id){i[t]=a[r];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(n=e.assets.length,t=0;n>t;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(e.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.renderFrame(null),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.animationData.tf);var t=e.shift();this.timeCompleted=t.time*this.frameRate;var r=new XMLHttpRequest,i=this,n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,r.open("GET",n,!0),r.send(),r.onreadystatechange=function(){if(4==r.readyState)if(200==r.status)i.includeLayers(JSON.parse(r.responseText));else try{var e=JSON.parse(r.responseText);i.includeLayers(e)}catch(t){}}},AnimationItem.prototype.loadSegments=function(){var e=this.animationData.segments;e||(this.timeCompleted=this.animationData.tf),this.loadNextSegment()},AnimationItem.prototype.configAnimation=function(e){this.renderer&&this.renderer.destroyed||(this.animationData=e,this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.animationData.tf=this.totalFrames,this.renderer.configAnimation(e),e.assets||(e.assets=[]),e.comps&&(e.assets=e.assets.concat(e.comps),e.comps=null),this.renderer.searchExtraCompositions(e.assets),this.layers=this.animationData.layers,this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.firstFrame=Math.round(this.animationData.ip),this.frameMult=this.animationData.fr/1e3,this.trigger("config_ready"),this.imagePreloader=new ImagePreloader,this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(e.assets),this.loadSegments(),this.updaFrameModifier(),this.renderer.globalData.fontManager?this.waitForFontsLoaded():(dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.checkLoaded()))},AnimationItem.prototype.waitForFontsLoaded=function(){function e(){this.renderer.globalData.fontManager.loaded?(dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.checkLoaded()):setTimeout(e.bind(this),20)}return function(){e.bind(this)()}}(),AnimationItem.prototype.addPendingElement=function(){this.pendingElements+=1},AnimationItem.prototype.elementLoaded=function(){this.pendingElements--,this.checkLoaded()},AnimationItem.prototype.checkLoaded=function(){0===this.pendingElements&&(expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.isLoaded=!0,this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(e){this.subframeEnabled=e?!0:!1},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.subframeEnabled?this.currentRawFrame:Math.floor(this.currentRawFrame),this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){this.isLoaded!==!1&&this.renderer.renderFrame(this.currentFrame+this.firstFrame)},AnimationItem.prototype.play=function(e){e&&this.name!=e||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_active"))},AnimationItem.prototype.pause=function(e){e&&this.name!=e||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_idle"))},AnimationItem.prototype.togglePause=function(e){e&&this.name!=e||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!=e||(this.pause(),this.currentFrame=this.currentRawFrame=0,this.playCount=0,this.gotoFrame())},AnimationItem.prototype.goToAndStop=function(e,t,r){r&&this.name!=r||(this.setCurrentRawFrameValue(t?e:e*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(e,t,r){this.goToAndStop(e,t,r),this.play()},AnimationItem.prototype.advanceTime=function(e){return this.pendingSegment?(this.pendingSegment=!1,this.adjustSegment(this.segments.shift()),void(this.isPaused&&this.play())):void(this.isPaused!==!0&&this.isLoaded!==!1&&this.setCurrentRawFrameValue(this.currentRawFrame+e*this.frameModifier))},AnimationItem.prototype.updateAnimation=function(e){this.setCurrentRawFrameValue(this.totalFrames*e)},AnimationItem.prototype.moveFrame=function(e,t){t&&this.name!=t||this.setCurrentRawFrameValue(this.currentRawFrame+e)},AnimationItem.prototype.adjustSegment=function(e){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.01)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.firstFrame=e[0],this.setCurrentRawFrameValue(0)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var r=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?r=e:this.currentRawFrame+this.firstFrame>t&&(r=t-e-.01)),this.firstFrame=e,this.totalFrames=t-e,-1!==r&&this.goToAndStop(r,!0)},AnimationItem.prototype.playSegments=function(e,t){if("object"==typeof e[0]){var r,i=e.length;for(r=0;i>r;r+=1)this.segments.push(e[r])}else this.segments.push(e);t&&this.adjustSegment(this.segments.shift()),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op-this.animationData.ip+this.animationData.ip*this.frameRate)]),e&&this.adjustSegment(this.segments.shift())},AnimationItem.prototype.checkSegments=function(){this.segments.length&&(this.pendingSegment=!0)},AnimationItem.prototype.remove=function(e){e&&this.name!=e||this.renderer.destroy()},AnimationItem.prototype.destroy=function(e){e&&this.name!=e||this.renderer&&this.renderer.destroyed||(this.renderer.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){if(this.currentRawFrame=e,this.currentRawFrame>=this.totalFrames){if(this.checkSegments(),this.loop===!1)return this.currentRawFrame=this.totalFrames-.01,this.gotoFrame(),this.pause(),void this.trigger("complete");if(this.trigger("loopComplete"),this.playCount+=1,this.loop!==!0&&this.playCount==this.loop||this.pendingSegment)return this.currentRawFrame=this.totalFrames-.01,this.gotoFrame(),this.pause(),void this.trigger("complete");this.currentRawFrame=this.currentRawFrame%this.totalFrames}else if(this.currentRawFrame<0)return this.checkSegments(),this.playCount-=1,this.playCount<0&&(this.playCount=0),this.loop===!1||this.pendingSegment?(this.currentRawFrame=0,this.gotoFrame(),this.pause(),void this.trigger("complete")):(this.trigger("loopComplete"),this.currentRawFrame=(this.totalFrames+this.currentRawFrame)%this.totalFrames,void this.gotoFrame());this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=0>e?-1:1,this.updaFrameModifier()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t="";if(this.assetsPath){var r=e.p;-1!==r.indexOf("images/")&&(r=r.split("/")[1]),t=this.assetsPath+r}else t=this.path,t+=e.u?e.u:"",t+=e.p;return t},AnimationItem.prototype.getAssetData=function(e){for(var t=0,r=this.assets.length;r>t;){if(e==this.assets[t].id)return this.assets[t];t+=1}},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getAssets=function(){return this.assets},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult));break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.addEventListener=_addEventListener,AnimationItem.prototype.removeEventListener=_removeEventListener,AnimationItem.prototype.triggerEvent=_triggerEvent,extendPrototype(BaseRenderer,CanvasRenderer),CanvasRenderer.prototype.createBase=function(e){return new CVBaseElement(e,this,this.globalData)},CanvasRenderer.prototype.createShape=function(e){return new CVShapeElement(e,this,this.globalData)},CanvasRenderer.prototype.createText=function(e){return new CVTextElement(e,this,this.globalData)},CanvasRenderer.prototype.createImage=function(e){return new CVImageElement(e,this,this.globalData)},CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this,this.globalData)},CanvasRenderer.prototype.createSolid=function(e){return new CVSolidElement(e,this,this.globalData)},CanvasRenderer.prototype.ctxTransform=function(e){if(1!==e[0]||0!==e[1]||0!==e[4]||1!==e[5]||0!==e[12]||0!==e[13]){if(!this.renderConfig.clearCanvas)return void this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13]);this.transformMat.cloneFromProps(e),this.transformMat.transform(this.contextData.cTr.props[0],this.contextData.cTr.props[1],this.contextData.cTr.props[2],this.contextData.cTr.props[3],this.contextData.cTr.props[4],this.contextData.cTr.props[5],this.contextData.cTr.props[6],this.contextData.cTr.props[7],this.contextData.cTr.props[8],this.contextData.cTr.props[9],this.contextData.cTr.props[10],this.contextData.cTr.props[11],this.contextData.cTr.props[12],this.contextData.cTr.props[13],this.contextData.cTr.props[14],this.contextData.cTr.props[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var t=this.contextData.cTr.props;this.canvasContext.setTransform(t[0],t[1],t[4],t[5],t[12],t[13])}},CanvasRenderer.prototype.ctxOpacity=function(e){if(1!==e){if(!this.renderConfig.clearCanvas)return void(this.canvasContext.globalAlpha*=0>e?0:e);this.contextData.cO*=0>e?0:e,this.canvasContext.globalAlpha=this.contextData.cO}},CanvasRenderer.prototype.reset=function(){return this.renderConfig.clearCanvas?(this.contextData.cArrPos=0,this.contextData.cTr.reset(),void(this.contextData.cO=1)):void this.canvasContext.restore()},CanvasRenderer.prototype.save=function(e){if(!this.renderConfig.clearCanvas)return void this.canvasContext.save();e&&this.canvasContext.save();var t=this.contextData.cTr.props;(null===this.contextData.saved[this.contextData.cArrPos]||void 0===this.contextData.saved[this.contextData.cArrPos])&&(this.contextData.saved[this.contextData.cArrPos]=new Array(16));var r,i=this.contextData.saved[this.contextData.cArrPos];for(r=0;16>r;r+=1)i[r]=t[r];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1},CanvasRenderer.prototype.restore=function(e){if(!this.renderConfig.clearCanvas)return void this.canvasContext.restore();e&&this.canvasContext.restore(),this.contextData.cArrPos-=1;var t,r=this.contextData.saved[this.contextData.cArrPos],i=this.contextData.cTr.props;for(t=0;16>t;t+=1)i[t]=r[t];this.canvasContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13]),r=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=r,this.canvasContext.globalAlpha=r},CanvasRenderer.prototype.configAnimation=function(e){this.animationItem.wrapper?(this.animationItem.container=document.createElement("canvas"),this.animationItem.container.style.width="100%",this.animationItem.container.style.height="100%",this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px",this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d")):this.canvasContext=this.renderConfig.context,this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.totalFrames=Math.floor(e.tf),this.globalData.compWidth=e.w,this.globalData.compHeight=e.h,this.globalData.frameRate=e.fr,this.globalData.frameId=0,this.globalData.compSize={w:e.w,h:e.h},this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.layers=e.layers,this.transformCanvas={},this.transformCanvas.w=e.w,this.transformCanvas.h=e.h,this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,document.body),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.elementLoaded=this.animationItem.elementLoaded.bind(this.animationItem),this.globalData.addPendingElement=this.animationItem.addPendingElement.bind(this.animationItem),this.globalData.transformCanvas=this.transformCanvas,this.elements=Array.apply(null,{length:e.layers.length}),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var e,t;this.animationItem.wrapper&&this.animationItem.container?(e=this.animationItem.wrapper.offsetWidth,t=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",e*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",t*this.renderConfig.dpr)):(e=this.canvasContext.canvas.width*this.renderConfig.dpr,t=this.canvasContext.canvas.height*this.renderConfig.dpr);var r,i;if(-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var n=this.renderConfig.preserveAspectRatio.split(" "),a=n[1]||"meet",o=n[0]||"xMidYMid",s=o.substr(0,4),l=o.substr(4);r=e/t,i=this.transformCanvas.w/this.transformCanvas.h,i>r&&"meet"===a||r>i&&"slice"===a?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===s&&(r>i&&"meet"===a||i>r&&"slice"===a)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===s&&(r>i&&"meet"===a||i>r&&"slice"===a)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===l&&(i>r&&"meet"===a||r>i&&"slice"===a)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===l&&(i>r&&"meet"===a||r>i&&"slice"===a)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"==this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1];var u,c=this.elements.length;for(u=0;c>u;u+=1)this.elements[u]&&0===this.elements[u].data.ty&&this.elements[u].resize(this.globalData.transformCanvas)},CanvasRenderer.prototype.destroy=function(){this.renderConfig.clearCanvas&&(this.animationItem.wrapper.innerHTML="");var e,t=this.layers?this.layers.length:0;for(e=t-1;e>=0;e-=1)this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(e){if(!(this.renderedFrame==e&&this.renderConfig.clearCanvas===!0||this.destroyed||null===e)){this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem.firstFrame,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.renderConfig.clearCanvas===!0?(this.reset(),this.canvasContext.save(),this.canvasContext.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)):this.save(),this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip();var t,r=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=0;r>t;t++)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);for(t=r-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame();this.renderConfig.clearCanvas!==!0?this.restore():this.canvasContext.restore()}},CanvasRenderer.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!=this.layers[e].ty){var r=this.createItem(this.layers[e],this,this.globalData);t[e]=r,r.initExpressions(),0===this.layers[e].ty&&r.resize(this.globalData.transformCanvas)}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();e.checkParenting()}},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},CanvasRenderer.prototype.searchExtraCompositions=function(e){{var t,r=e.length;document.createElementNS(svgNS,"g")}for(t=0;r>t;t+=1)if(e[t].xt){var i=this.createComp(e[t],this.globalData.comp,this.globalData);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},extendPrototype(BaseRenderer,HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();e.checkParenting()}},HybridRenderer.prototype.appendElementInPos=function(e,t){var r=e.getBaseElement();if(r){var i=this.layers[t];if(i.ddd&&this.supports3d)this.addTo3dContainer(r,t);else{for(var n,a=0;t>a;)this.elements[a]&&this.elements[a]!==!0&&this.elements[a].getBaseElement()&&(n=this.elements[a].getBaseElement()),a+=1;n?i.ddd&&this.supports3d||this.layerElement.insertBefore(r,n):i.ddd&&this.supports3d||this.layerElement.appendChild(r)}}},HybridRenderer.prototype.createBase=function(e){return new SVGBaseElement(e,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.layerElement,this.globalData,this):new IShapeElement(e,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.layerElement,this.globalData,this):new SVGTextElement(e,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.layerElement,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.layerElement,this.globalData,this):new IImageElement(e,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.layerElement,this.globalData,this):new ICompElement(e,this.layerElement,this.globalData,this)},HybridRenderer.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.layerElement,this.globalData,this):new ISolidElement(e,this.layerElement,this.globalData,this)},HybridRenderer.prototype.getThreeDContainer=function(e){var t=document.createElement("div");styleDiv(t),t.style.width=this.globalData.compSize.w+"px",t.style.height=this.globalData.compSize.h+"px",t.style.transformOrigin=t.style.mozTransformOrigin=t.style.webkitTransformOrigin="50% 50%";var r=document.createElement("div");styleDiv(r),r.style.transform=r.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)",t.appendChild(r),this.resizerElem.appendChild(t);var i={container:r,perspectiveElem:t,startPos:e,endPos:e};return this.threeDElements.push(i),i},HybridRenderer.prototype.build3dContainers=function(){var e,t,r=this.layers.length;for(e=0;r>e;e+=1)this.layers[e].ddd?(t||(t=this.getThreeDContainer(e)),t.endPos=Math.max(t.endPos,e)):t=null},HybridRenderer.prototype.addTo3dContainer=function(e,t){for(var r=0,i=this.threeDElements.length;i>r;){if(t<=this.threeDElements[r].endPos){for(var n,a=this.threeDElements[r].startPos;t>a;)this.elements[a]&&this.elements[a].getBaseElement()&&(n=this.elements[a].getBaseElement()),a+=1;n?this.threeDElements[r].container.insertBefore(e,n):this.threeDElements[r].container.appendChild(e);

break}r+=1}},HybridRenderer.prototype.configAnimation=function(e){var t=document.createElement("div"),r=this.animationItem.wrapper;t.style.width=e.w+"px",t.style.height=e.h+"px",this.resizerElem=t,styleDiv(t),t.style.transformStyle=t.style.webkitTransformStyle=t.style.mozTransformStyle="flat",r.appendChild(t),t.style.overflow="hidden";var i=document.createElementNS(svgNS,"svg");i.setAttribute("width","1"),i.setAttribute("height","1"),styleDiv(i),this.resizerElem.appendChild(i);var n=document.createElementNS(svgNS,"defs");i.appendChild(n),this.globalData.defs=n,this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.elementLoaded=this.animationItem.elementLoaded.bind(this.animationItem),this.globalData.frameId=0,this.globalData.compSize={w:e.w,h:e.h},this.globalData.frameRate=e.fr,this.layers=e.layers,this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,i),this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.animationItem.container=null,this.globalData.defs=null;var e,t=this.layers?this.layers.length:0;for(e=0;t>e;e++)this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var e,t,r,i,n=this.animationItem.wrapper.offsetWidth,a=this.animationItem.wrapper.offsetHeight,o=n/a,s=this.globalData.compSize.w/this.globalData.compSize.h;s>o?(e=n/this.globalData.compSize.w,t=n/this.globalData.compSize.w,r=0,i=(a-this.globalData.compSize.h*(n/this.globalData.compSize.w))/2):(e=a/this.globalData.compSize.h,t=a/this.globalData.compSize.h,r=(n-this.globalData.compSize.w*(a/this.globalData.compSize.h))/2,i=0),this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+e+",0,0,0,0,"+t+",0,0,0,0,1,0,"+r+","+i+",0,1)"},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e,t=this.globalData.compSize.w,r=this.globalData.compSize.h,i=this.threeDElements.length;for(e=0;i>e;e+=1)this.threeDElements[e].perspectiveElem.style.perspective=this.threeDElements[e].perspectiveElem.style.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(r,2))+"px"}},HybridRenderer.prototype.searchExtraCompositions=function(e){var t,r=e.length,i=document.createElement("div");for(t=0;r>t;t+=1)if(e[t].xt){var n=this.createComp(e[t],i,this.globalData.comp,null);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},createElement(BaseElement,CVBaseElement),CVBaseElement.prototype.createElements=function(){this.checkParenting()},CVBaseElement.prototype.checkBlendMode=function(e){if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var t="";switch(this.data.bm){case 0:t="normal";break;case 1:t="multiply";break;case 2:t="screen";break;case 3:t="overlay";break;case 4:t="darken";break;case 5:t="lighten";break;case 6:t="color-dodge";break;case 7:t="color-burn";break;case 8:t="hard-light";break;case 9:t="soft-light";break;case 10:t="difference";break;case 11:t="exclusion";break;case 12:t="hue";break;case 13:t="saturation";break;case 14:t="color";break;case 15:t="luminosity"}e.canvasContext.globalCompositeOperation=t}},CVBaseElement.prototype.renderFrame=function(e){if(3===this.data.ty)return!1;if(this.checkBlendMode(0===this.data.ty?this.parentGlobalData:this.globalData),!this.isVisible)return this.isVisible;this.finalTransform.opMdf=this.finalTransform.op.mdf,this.finalTransform.matMdf=this.finalTransform.mProp.mdf,this.finalTransform.opacity=this.finalTransform.op.v;var t,r=this.finalTransform.mat;if(this.hierarchy){var i,n=this.hierarchy.length;for(t=this.finalTransform.mProp.v.props,r.cloneFromProps(t),i=0;n>i;i+=1)this.finalTransform.matMdf=this.hierarchy[i].finalTransform.mProp.mdf?!0:this.finalTransform.matMdf,t=this.hierarchy[i].finalTransform.mProp.v.props,r.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}else e?(t=this.finalTransform.mProp.v.props,r.cloneFromProps(t)):r.cloneFromProps(this.finalTransform.mProp.v.props);return e&&(t=e.mat.props,r.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),this.finalTransform.opacity*=e.opacity,this.finalTransform.opMdf=e.opMdf?!0:this.finalTransform.opMdf,this.finalTransform.matMdf=e.matMdf?!0:this.finalTransform.matMdf),this.data.hasMask&&(this.globalData.renderer.save(!0),this.maskManager.renderFrame(0===this.data.ty?null:r)),this.data.hd&&(this.isVisible=!1),this.isVisible},CVBaseElement.prototype.addMasks=function(e){this.maskManager=new CVMaskElement(e,this,this.globalData)},CVBaseElement.prototype.destroy=function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager&&this.maskManager.destroy()},CVBaseElement.prototype.mHelper=new Matrix,createElement(CVBaseElement,CVCompElement),CVCompElement.prototype.ctxTransform=CanvasRenderer.prototype.ctxTransform,CVCompElement.prototype.ctxOpacity=CanvasRenderer.prototype.ctxOpacity,CVCompElement.prototype.save=CanvasRenderer.prototype.save,CVCompElement.prototype.restore=CanvasRenderer.prototype.restore,CVCompElement.prototype.reset=function(){this.contextData.cArrPos=0,this.contextData.cTr.reset(),this.contextData.cO=1},CVCompElement.prototype.resize=function(e){var t=Math.max(e.sx,e.sy);this.canvas.width=this.data.w*t,this.canvas.height=this.data.h*t,this.transformCanvas={sc:t,w:this.data.w*t,h:this.data.h*t,props:[t,0,0,0,0,t,0,0,0,0,1,0,0,0,0,1]};var r,i=this.elements.length;for(r=0;i>r;r+=1)this.elements[r]&&0===this.elements[r].data.ty&&this.elements[r].resize(e)},CVCompElement.prototype.prepareFrame=function(e){if(this.globalData.frameId=this.parentGlobalData.frameId,this.globalData.mdf=!1,this._parent.prepareFrame.call(this,e),this.isVisible!==!1||this.data.xt){var t=e;this.tm&&(t=this.tm.v,t===this.data.op&&(t=this.data.op-1)),this.renderedFrame=t/this.data.sr;var r,i=this.elements.length;for(this.completeLayers||this.checkLayers(e),r=0;i>r;r+=1)(this.completeLayers||this.elements[r])&&(this.elements[r].prepareFrame(t/this.data.sr-this.layers[r].st),0===this.elements[r].data.ty&&this.elements[r].globalData.mdf&&(this.globalData.mdf=!0));this.globalData.mdf&&!this.data.xt&&(this.canvasContext.clearRect(0,0,this.data.w,this.data.h),this.ctxTransform(this.transformCanvas.props))}},CVCompElement.prototype.renderFrame=function(e){if(this._parent.renderFrame.call(this,e)!==!1){if(this.globalData.mdf){var t,r=this.layers.length;for(t=r-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}this.data.hasMask&&this.globalData.renderer.restore(!0),this.firstFrame&&(this.firstFrame=!1),this.parentGlobalData.renderer.save(),this.parentGlobalData.renderer.ctxTransform(this.finalTransform.mat.props),this.parentGlobalData.renderer.ctxOpacity(this.finalTransform.opacity),this.parentGlobalData.renderer.canvasContext.drawImage(this.canvas,0,0,this.data.w,this.data.h),this.parentGlobalData.renderer.restore(),this.globalData.mdf&&this.reset()}},CVCompElement.prototype.setElements=function(e){this.elements=e},CVCompElement.prototype.getElements=function(){return this.elements},CVCompElement.prototype.destroy=function(){var e,t=this.layers.length;for(e=t-1;e>=0;e-=1)this.elements[e].destroy();this.layers=null,this.elements=null,this._parent.destroy.call()},CVCompElement.prototype.checkLayers=CanvasRenderer.prototype.checkLayers,CVCompElement.prototype.buildItem=CanvasRenderer.prototype.buildItem,CVCompElement.prototype.checkPendingElements=CanvasRenderer.prototype.checkPendingElements,CVCompElement.prototype.addPendingElement=CanvasRenderer.prototype.addPendingElement,CVCompElement.prototype.buildAllItems=CanvasRenderer.prototype.buildAllItems,CVCompElement.prototype.createItem=CanvasRenderer.prototype.createItem,CVCompElement.prototype.createImage=CanvasRenderer.prototype.createImage,CVCompElement.prototype.createComp=CanvasRenderer.prototype.createComp,CVCompElement.prototype.createSolid=CanvasRenderer.prototype.createSolid,CVCompElement.prototype.createShape=CanvasRenderer.prototype.createShape,CVCompElement.prototype.createText=CanvasRenderer.prototype.createText,CVCompElement.prototype.createBase=CanvasRenderer.prototype.createBase,CVCompElement.prototype.buildElementParenting=CanvasRenderer.prototype.buildElementParenting,createElement(CVBaseElement,CVImageElement),CVImageElement.prototype.createElements=function(){var e=function(){if(this.globalData.elementLoaded(),this.assetData.w!==this.img.width||this.assetData.h!==this.img.height){var e=document.createElement("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var t,r,i=e.getContext("2d"),n=this.img.width,a=this.img.height,o=n/a,s=this.assetData.w/this.assetData.h;o>s?(r=a,t=r*s):(t=n,r=t/s),i.drawImage(this.img,(n-t)/2,(a-r)/2,t,r,0,0,this.assetData.w,this.assetData.h),this.img=e}}.bind(this),t=function(){this.failed=!0,this.globalData.elementLoaded()}.bind(this);this.img=new Image,this.img.addEventListener("load",e,!1),this.img.addEventListener("error",t,!1);var r=this.globalData.getAssetsPath(this.assetData);this.img.src=r,this._parent.createElements.call(this)},CVImageElement.prototype.renderFrame=function(e){if(!this.failed&&this._parent.renderFrame.call(this,e)!==!1){var t=this.canvasContext;this.globalData.renderer.save();var r=this.finalTransform.mat.props;this.globalData.renderer.ctxTransform(r),this.globalData.renderer.ctxOpacity(this.finalTransform.opacity),t.drawImage(this.img,0,0),this.globalData.renderer.restore(this.data.hasMask),this.firstFrame&&(this.firstFrame=!1)}},CVImageElement.prototype.destroy=function(){this.img=null,this._parent.destroy.call()},CVMaskElement.prototype.getMaskProperty=function(e){return this.viewData[e]},CVMaskElement.prototype.prepareFrame=function(e){var t,r=this.dynamicProperties.length;for(t=0;r>t;t+=1)this.dynamicProperties[t].getValue(e),this.dynamicProperties[t].mdf&&(this.element.globalData.mdf=!0)},CVMaskElement.prototype.renderFrame=function(e){var t,r,i,n,a,o=this.element.canvasContext,s=this.data.masksProperties.length,l=!1;for(t=0;s>t;t++)if("n"!==this.masksProperties[t].mode){l===!1&&(o.beginPath(),l=!0),this.masksProperties[t].inv&&(o.moveTo(0,0),o.lineTo(this.element.globalData.compWidth,0),o.lineTo(this.element.globalData.compWidth,this.element.globalData.compHeight),o.lineTo(0,this.element.globalData.compHeight),o.lineTo(0,0)),a=this.viewData[t].v,r=e?e.applyToPointArray(a.v[0][0],a.v[0][1],0):a.v[0],o.moveTo(r[0],r[1]);var u,c=a.v.length;for(u=1;c>u;u++)r=e?e.applyToPointArray(a.o[u-1][0],a.o[u-1][1],0):a.o[u-1],i=e?e.applyToPointArray(a.i[u][0],a.i[u][1],0):a.i[u],n=e?e.applyToPointArray(a.v[u][0],a.v[u][1],0):a.v[u],o.bezierCurveTo(r[0],r[1],i[0],i[1],n[0],n[1]);r=e?e.applyToPointArray(a.o[u-1][0],a.o[u-1][1],0):a.o[u-1],i=e?e.applyToPointArray(a.i[0][0],a.i[0][1],0):a.i[0],n=e?e.applyToPointArray(a.v[0][0],a.v[0][1],0):a.v[0],o.bezierCurveTo(r[0],r[1],i[0],i[1],n[0],n[1])}l&&o.clip()},CVMaskElement.prototype.getMask=function(e){for(var t=0,r=this.masksProperties.length;r>t;){if(this.masksProperties[t].nm===e)return{maskPath:this.viewData[t].pv};t+=1}},CVMaskElement.prototype.destroy=function(){this.element=null},createElement(CVBaseElement,CVShapeElement),CVShapeElement.prototype.lcEnum={1:"butt",2:"round",3:"butt"},CVShapeElement.prototype.ljEnum={1:"miter",2:"round",3:"butt"},CVShapeElement.prototype.transformHelper={opacity:1,mat:new Matrix,matMdf:!1,opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createElements=function(){this._parent.createElements.call(this),this.searchShapes(this.shapesData,this.viewData,this.dynamicProperties)},CVShapeElement.prototype.searchShapes=function(e,t,r){var i,n,a,o,s=e.length-1,l=[],u=[];for(i=s;i>=0;i-=1)if("fl"==e[i].ty||"st"==e[i].ty){if(o={type:e[i].ty,elements:[]},t[i]={},("fl"==e[i].ty||"st"==e[i].ty)&&(t[i].c=PropertyFactory.getProp(this,e[i].c,1,255,r),t[i].c.k||(o.co="rgb("+bm_floor(t[i].c.v[0])+","+bm_floor(t[i].c.v[1])+","+bm_floor(t[i].c.v[2])+")")),t[i].o=PropertyFactory.getProp(this,e[i].o,0,.01,r),"st"==e[i].ty&&(o.lc=this.lcEnum[e[i].lc]||"round",o.lj=this.ljEnum[e[i].lj]||"round",1==e[i].lj&&(o.ml=e[i].ml),t[i].w=PropertyFactory.getProp(this,e[i].w,0,null,r),t[i].w.k||(o.wi=t[i].w.v),e[i].d)){var c=PropertyFactory.getDashProp(this,e[i].d,"canvas",r);t[i].d=c,t[i].d.k||(o.da=t[i].d.dasharray,o["do"]=t[i].d.dashoffset)}this.stylesList.push(o),t[i].style=o,l.push(t[i].style)}else if("gr"==e[i].ty)t[i]={it:[]},this.searchShapes(e[i].it,t[i].it,r);else if("tr"==e[i].ty)t[i]={transform:{mat:new Matrix,opacity:1,matMdf:!1,opMdf:!1,op:PropertyFactory.getProp(this,e[i].o,0,.01,r),mProps:PropertyFactory.getProp(this,e[i],2,null,r)},elements:[]};else if("sh"==e[i].ty||"rc"==e[i].ty||"el"==e[i].ty||"sr"==e[i].ty){t[i]={nodes:[],trNodes:[],tr:[0,0,0,0,0,0]};var h=4;"rc"==e[i].ty?h=5:"el"==e[i].ty?h=6:"sr"==e[i].ty&&(h=7),t[i].sh=ShapePropertyFactory.getShapeProp(this,e[i],h,r),this.shapes.push(t[i].sh),this.addShapeToModifiers(t[i].sh),a=this.stylesList.length;var p=!1,d=!1;for(n=0;a>n;n+=1)this.stylesList[n].closed||(this.stylesList[n].elements.push(t[i]),"st"===this.stylesList[n].type?p=!0:d=!0);t[i].st=p,t[i].fl=d}else if("tm"==e[i].ty||"rd"==e[i].ty){var f=ShapeModifiers.getModifier(e[i].ty);f.init(this,e[i],r),this.shapeModifiers.push(f),u.push(f),t[i]=f}for(s=l.length,i=0;s>i;i+=1)l[i].closed=!0;for(s=u.length,i=0;s>i;i+=1)u[i].closed=!0},CVShapeElement.prototype.addShapeToModifiers=IShapeElement.prototype.addShapeToModifiers,CVShapeElement.prototype.renderModifiers=IShapeElement.prototype.renderModifiers,CVShapeElement.prototype.renderFrame=function(e){this._parent.renderFrame.call(this,e)!==!1&&(this.transformHelper.mat.reset(),this.transformHelper.opacity=this.finalTransform.opacity,this.transformHelper.matMdf=!1,this.transformHelper.opMdf=this.finalTransform.opMdf,this.renderModifiers(),this.renderShape(this.transformHelper,null,null,!0),this.data.hasMask&&this.globalData.renderer.restore(!0))},CVShapeElement.prototype.renderShape=function(e,t,r,i){var n,a;if(!t)for(t=this.shapesData,a=this.stylesList.length,n=0;a>n;n+=1)this.stylesList[n].d="",this.stylesList[n].mdf=!1;r||(r=this.viewData),a=t.length-1;var o,s;for(o=e,n=a;n>=0;n-=1)if("tr"==t[n].ty){o=r[n].transform;var l=r[n].transform.mProps.v.props;if(o.matMdf=o.mProps.mdf,o.opMdf=o.op.mdf,s=o.mat,s.cloneFromProps(l),e){var u=e.mat.props;o.opacity=e.opacity,o.opacity*=r[n].transform.op.v,o.matMdf=e.matMdf?!0:o.matMdf,o.opMdf=e.opMdf?!0:o.opMdf,s.transform(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15])}else o.opacity=o.op.o}else"sh"==t[n].ty||"el"==t[n].ty||"rc"==t[n].ty||"sr"==t[n].ty?this.renderPath(t[n],r[n],o):"fl"==t[n].ty?this.renderFill(t[n],r[n],o):"st"==t[n].ty?this.renderStroke(t[n],r[n],o):"gr"==t[n].ty?this.renderShape(o,t[n].it,r[n].it):"tm"==t[n].ty;if(i){a=this.stylesList.length;var c,h,p,d,f,m,v,g=this.globalData.renderer,y=this.globalData.canvasContext;for(g.save(),g.ctxTransform(this.finalTransform.mat.props),n=0;a>n;n+=1)if(v=this.stylesList[n].type,"st"!==v||0!==this.stylesList[n].wi){for(g.save(),f=this.stylesList[n].elements,"st"===v?(y.strokeStyle=this.stylesList[n].co,y.lineWidth=this.stylesList[n].wi,y.lineCap=this.stylesList[n].lc,y.lineJoin=this.stylesList[n].lj,y.miterLimit=this.stylesList[n].ml||0):y.fillStyle=this.stylesList[n].co,g.ctxOpacity(this.stylesList[n].coOp),"st"!==v&&y.beginPath(),h=f.length,c=0;h>c;c+=1){for("st"===v&&(y.beginPath(),this.stylesList[n].da?(y.setLineDash(this.stylesList[n].da),y.lineDashOffset=this.stylesList[n]["do"],this.globalData.isDashed=!0):this.globalData.isDashed&&(y.setLineDash(this.dashResetter),this.globalData.isDashed=!1)),m=f[c].trNodes,d=m.length,p=0;d>p;p+=1)"m"==m[p].t?y.moveTo(m[p].p[0],m[p].p[1]):"c"==m[p].t?y.bezierCurveTo(m[p].p1[0],m[p].p1[1],m[p].p2[0],m[p].p2[1],m[p].p3[0],m[p].p3[1]):y.closePath();"st"===v&&y.stroke()}"st"!==v&&y.fill(),g.restore()}g.restore(),this.firstFrame&&(this.firstFrame=!1)}},CVShapeElement.prototype.renderPath=function(e,t,r){var i,n,a,o,s=r.matMdf||t.sh.mdf||this.firstFrame;if(s){var l=t.sh.paths;o=l.length;var u=t.trNodes;for(u.length=0,a=0;o>a;a+=1){var c=l[a];if(c&&c.v){for(i=c.v.length,n=1;i>n;n+=1)1==n&&u.push({t:"m",p:r.mat.applyToPointArray(c.v[0][0],c.v[0][1],0)}),u.push({t:"c",p1:r.mat.applyToPointArray(c.o[n-1][0],c.o[n-1][1],0),p2:r.mat.applyToPointArray(c.i[n][0],c.i[n][1],0),p3:r.mat.applyToPointArray(c.v[n][0],c.v[n][1],0)});1==i&&u.push({t:"m",p:r.mat.applyToPointArray(c.v[0][0],c.v[0][1],0)}),c.c&&i&&(u.push({t:"c",p1:r.mat.applyToPointArray(c.o[n-1][0],c.o[n-1][1],0),p2:r.mat.applyToPointArray(c.i[0][0],c.i[0][1],0),p3:r.mat.applyToPointArray(c.v[0][0],c.v[0][1],0)}),u.push({t:"z"})),t.lStr=u}}if(t.st)for(n=0;16>n;n+=1)t.tr[n]=r.mat.props[n];t.trNodes=u}},CVShapeElement.prototype.renderFill=function(e,t,r){var i=t.style;(t.c.mdf||this.firstFrame)&&(i.co="rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o.mdf||r.opMdf||this.firstFrame)&&(i.coOp=t.o.v*r.opacity)},CVShapeElement.prototype.renderStroke=function(e,t,r){var i=t.style,n=t.d;n&&(n.mdf||this.firstFrame)&&(i.da=n.dasharray,i["do"]=n.dashoffset),(t.c.mdf||this.firstFrame)&&(i.co="rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o.mdf||r.opMdf||this.firstFrame)&&(i.coOp=t.o.v*r.opacity),(t.w.mdf||this.firstFrame)&&(i.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.viewData.length=0,this._parent.destroy.call()},createElement(CVBaseElement,CVSolidElement),CVSolidElement.prototype.renderFrame=function(e){if(this._parent.renderFrame.call(this,e)!==!1){var t=this.canvasContext;this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.opacity),t.fillStyle=this.data.sc,t.fillRect(0,0,this.data.sw,this.data.sh),this.globalData.renderer.restore(this.data.hasMask),this.firstFrame&&(this.firstFrame=!1)}},createElement(CVBaseElement,CVTextElement),CVTextElement.prototype.init=ITextElement.prototype.init,CVTextElement.prototype.getMeasures=ITextElement.prototype.getMeasures,CVTextElement.prototype.getMult=ITextElement.prototype.getMult,CVTextElement.prototype.prepareFrame=ITextElement.prototype.prepareFrame,CVTextElement.prototype.tHelper=document.createElement("canvas").getContext("2d"),CVTextElement.prototype.createElements=function(){this._parent.createElements.call(this)},CVTextElement.prototype.buildNewText=function(){var e=this.currentTextDocumentData;this.renderedLetters=Array.apply(null,{length:this.currentTextDocumentData.l?this.currentTextDocumentData.l.length:0});var t=!1;e.fc?(t=!0,this.values.fill="rgb("+Math.round(255*e.fc[0])+","+Math.round(255*e.fc[1])+","+Math.round(255*e.fc[2])+")"):this.values.fill="rgba(0,0,0,0)",this.fill=t;var r=!1;e.sc&&(r=!0,this.values.stroke="rgb("+Math.round(255*e.sc[0])+","+Math.round(255*e.sc[1])+","+Math.round(255*e.sc[2])+")",this.values.sWidth=e.sw);var i,n,a=this.globalData.fontManager.getFontByName(e.f),o=e.l,s=this.mHelper;this.stroke=r,this.values.fValue=e.s+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,n=e.t.length,this.tHelper.font=this.values.fValue;var l,u,c,h,p,d,f,m,v,g,y=this.data.singleShape;if(y)var b=0,_=0,x=e.lineWidths,w=e.boxWidth,T=!0;var M=0;for(i=0;n>i;i+=1){l=this.globalData.fontManager.getCharData(e.t.charAt(i),a.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);var u;if(u=l?l.data:null,s.reset(),y&&o[i].n&&(b=0,_+=e.yOffset,_+=T?1:0,T=!1),u&&u.shapes){if(p=u.shapes[0].it,f=p.length,s.scale(e.s/100,e.s/100),y){switch(e.ps&&s.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:s.translate(e.justifyOffset+(w-x[o[i].line]),0,0);break;case 2:s.translate(e.justifyOffset+(w-x[o[i].line])/2,0,0)}s.translate(b,_,0)}for(v=new Array(f),d=0;f>d;d+=1){for(h=p[d].ks.k.i.length,m=p[d].ks.k,g=[],c=1;h>c;c+=1)1==c&&g.push(s.applyToX(m.v[0][0],m.v[0][1],0),s.applyToY(m.v[0][0],m.v[0][1],0)),g.push(s.applyToX(m.o[c-1][0],m.o[c-1][1],0),s.applyToY(m.o[c-1][0],m.o[c-1][1],0),s.applyToX(m.i[c][0],m.i[c][1],0),s.applyToY(m.i[c][0],m.i[c][1],0),s.applyToX(m.v[c][0],m.v[c][1],0),s.applyToY(m.v[c][0],m.v[c][1],0));g.push(s.applyToX(m.o[c-1][0],m.o[c-1][1],0),s.applyToY(m.o[c-1][0],m.o[c-1][1],0),s.applyToX(m.i[0][0],m.i[0][1],0),s.applyToY(m.i[0][0],m.i[0][1],0),s.applyToX(m.v[0][0],m.v[0][1],0),s.applyToY(m.v[0][0],m.v[0][1],0)),v[d]=g}}else v=[];y&&(b+=o[i].l),this.textSpans[M]?this.textSpans[M].elem=v:this.textSpans[M]={elem:v},M+=1}},CVTextElement.prototype.renderFrame=function(e){if(this._parent.renderFrame.call(this,e)!==!1){var t=this.canvasContext,r=this.finalTransform.mat.props;this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(r),this.globalData.renderer.ctxOpacity(this.finalTransform.opacity),t.font=this.values.fValue,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,this.data.singleShape||this.getMeasures();var i,n,a,o,s,l,u=this.renderedLetters,c=this.currentTextDocumentData.l;n=c.length;var h,p,d,f=null,m=null,v=null;for(i=0;n>i;i+=1)if(!c[i].n){if(h=u[i],h&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(h.props),this.globalData.renderer.ctxOpacity(h.o)),this.fill){for(h&&h.fc?f!==h.fc&&(f=h.fc,t.fillStyle=h.fc):f!==this.values.fill&&(f=this.values.fill,t.fillStyle=this.values.fill),p=this.textSpans[i].elem,o=p.length,this.globalData.canvasContext.beginPath(),a=0;o>a;a+=1)for(d=p[a],l=d.length,this.globalData.canvasContext.moveTo(d[0],d[1]),s=2;l>s;s+=6)this.globalData.canvasContext.bezierCurveTo(d[s],d[s+1],d[s+2],d[s+3],d[s+4],d[s+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(h&&h.sw?v!==h.sw&&(v=h.sw,t.lineWidth=h.sw):v!==this.values.sWidth&&(v=this.values.sWidth,t.lineWidth=this.values.sWidth),h&&h.sc?m!==h.sc&&(m=h.sc,t.strokeStyle=h.sc):m!==this.values.stroke&&(m=this.values.stroke,t.strokeStyle=this.values.stroke),p=this.textSpans[i].elem,o=p.length,this.globalData.canvasContext.beginPath(),a=0;o>a;a+=1)for(d=p[a],l=d.length,this.globalData.canvasContext.moveTo(d[0],d[1]),s=2;l>s;s+=6)this.globalData.canvasContext.bezierCurveTo(d[s],d[s+1],d[s+2],d[s+3],d[s+4],d[s+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}h&&this.globalData.renderer.restore()}this.globalData.renderer.restore(this.data.hasMask),this.firstFrame&&(this.firstFrame=!1)}},createElement(BaseElement,HBaseElement),HBaseElement.prototype.checkBlendMode=function(){},HBaseElement.prototype.setBlendMode=BaseElement.prototype.setBlendMode,HBaseElement.prototype.getBaseElement=function(){return this.baseElement},HBaseElement.prototype.createElements=function(){this.data.hasMask?(this.layerElement=document.createElementNS(svgNS,"svg"),this.baseElement=this.layerElement,this.maskedElement=this.layerElement):this.layerElement=this.parentContainer,!this.data.ln||4!==this.data.ty&&0!==this.data.ty||(this.layerElement===this.parentContainer&&(this.layerElement=document.createElementNS(svgNS,"g"),this.baseElement=this.layerElement),this.layerElement.setAttribute("id",this.data.ln)),this.setBlendMode(),this.layerElement!==this.parentContainer&&(this.placeholder=null),this.checkParenting()},HBaseElement.prototype.renderFrame=function(e){if(3===this.data.ty)return!1;if(this.currentFrameNum===this.lastNum||!this.isVisible)return this.isVisible;this.lastNum=this.currentFrameNum,this.finalTransform.opMdf=this.finalTransform.op.mdf,this.finalTransform.matMdf=this.finalTransform.mProp.mdf,this.finalTransform.opacity=this.finalTransform.op.v,this.firstFrame&&(this.finalTransform.opMdf=!0,this.finalTransform.matMdf=!0);var t,r=this.finalTransform.mat;if(this.hierarchy){var i,n=this.hierarchy.length;for(t=this.finalTransform.mProp.v.props,r.cloneFromProps(t),i=0;n>i;i+=1)this.finalTransform.matMdf=this.hierarchy[i].finalTransform.mProp.mdf?!0:this.finalTransform.matMdf,t=this.hierarchy[i].finalTransform.mProp.v.props,r.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}else this.isVisible&&this.finalTransform.matMdf&&(e?(t=this.finalTransform.mProp.v.props,r.cloneFromProps(t)):r.cloneFromProps(this.finalTransform.mProp.v.props));return this.data.hasMask&&this.maskManager.renderFrame(r),e&&(t=e.mat.props,r.cloneFromProps(t),this.finalTransform.opacity*=e.opacity,this.finalTransform.opMdf=e.opMdf?!0:this.finalTransform.opMdf,this.finalTransform.matMdf=e.matMdf?!0:this.finalTransform.matMdf),this.finalTransform.matMdf&&(this.layerElement.style.transform=this.layerElement.style.webkitTransform=r.toCSS(),this.finalMat=r),this.finalTransform.opMdf&&(this.layerElement.style.opacity=this.finalTransform.opacity),this.isVisible},HBaseElement.prototype.destroy=function(){this.layerElement=null,this.parentContainer=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},HBaseElement.prototype.getDomElement=function(){return this.layerElement},HBaseElement.prototype.addMasks=function(e){this.maskManager=new MaskElement(e,this,this.globalData)},HBaseElement.prototype.hide=function(){},HBaseElement.prototype.setMatte=function(){},HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,createElement(HBaseElement,HSolidElement),HSolidElement.prototype.createElements=function(){var e=document.createElement("div");styleDiv(e);var t=document.createElementNS(svgNS,"svg");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),e.appendChild(t),this.layerElement=e,this.baseElement=e,this.innerElem=e,this.data.ln&&this.innerElem.setAttribute("id",this.data.ln),0!==this.data.bm&&this.setBlendMode();var r=document.createElementNS(svgNS,"rect");r.setAttribute("width",this.data.sw),r.setAttribute("height",this.data.sh),r.setAttribute("fill",this.data.sc),t.appendChild(r),this.data.hasMask&&(this.maskedElement=r),this.checkParenting()},HSolidElement.prototype.hide=IImageElement.prototype.hide,HSolidElement.prototype.renderFrame=IImageElement.prototype.renderFrame,HSolidElement.prototype.destroy=IImageElement.prototype.destroy,createElement(HBaseElement,HCompElement),HCompElement.prototype.createElements=function(){var e=document.createElement("div");if(styleDiv(e),this.data.ln&&e.setAttribute("id",this.data.ln),e.style.clip="rect(0px, "+this.data.w+"px, "+this.data.h+"px, 0px)",this.data.hasMask){var t=document.createElementNS(svgNS,"svg");t.setAttribute("width",this.data.w),t.setAttribute("height",this.data.h);var r=document.createElementNS(svgNS,"g");t.appendChild(r),e.appendChild(t),this.maskedElement=r,this.baseElement=e,this.layerElement=r}else this.layerElement=e,this.baseElement=this.layerElement;this.checkParenting()},HCompElement.prototype.hide=ICompElement.prototype.hide,HCompElement.prototype.prepareFrame=ICompElement.prototype.prepareFrame,HCompElement.prototype.setElements=ICompElement.prototype.setElements,HCompElement.prototype.getElements=ICompElement.prototype.getElements,HCompElement.prototype.destroy=ICompElement.prototype.destroy,HCompElement.prototype.renderFrame=function(e){var t,r=this._parent.renderFrame.call(this,e),i=this.layers.length;if(r===!1)return void this.hide();for(this.hidden=!1,t=0;i>t;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame();this.firstFrame&&(this.firstFrame=!1)},HCompElement.prototype.checkLayers=BaseRenderer.prototype.checkLayers,HCompElement.prototype.buildItem=HybridRenderer.prototype.buildItem,HCompElement.prototype.checkPendingElements=HybridRenderer.prototype.checkPendingElements,HCompElement.prototype.addPendingElement=HybridRenderer.prototype.addPendingElement,HCompElement.prototype.buildAllItems=BaseRenderer.prototype.buildAllItems,HCompElement.prototype.createItem=HybridRenderer.prototype.createItem,HCompElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,HCompElement.prototype.createImage=HybridRenderer.prototype.createImage,HCompElement.prototype.createComp=HybridRenderer.prototype.createComp,HCompElement.prototype.createSolid=HybridRenderer.prototype.createSolid,HCompElement.prototype.createShape=HybridRenderer.prototype.createShape,HCompElement.prototype.createText=HybridRenderer.prototype.createText,HCompElement.prototype.createBase=HybridRenderer.prototype.createBase,HCompElement.prototype.appendElementInPos=HybridRenderer.prototype.appendElementInPos,createElement(HBaseElement,HShapeElement);var parent=HShapeElement.prototype._parent;extendPrototype(IShapeElement,HShapeElement),HShapeElement.prototype._parent=parent,HShapeElement.prototype.createElements=function(){var e=document.createElement("div");styleDiv(e);var t=document.createElementNS(svgNS,"svg"),r=this.comp.data?this.comp.data:this.globalData.compSize;if(t.setAttribute("width",r.w),t.setAttribute("height",r.h),this.data.hasMask){var i=document.createElementNS(svgNS,"g");e.appendChild(t),t.appendChild(i),this.maskedElement=i,this.layerElement=i,this.shapesContainer=i}else e.appendChild(t),this.layerElement=t,this.shapesContainer=document.createElementNS(svgNS,"g"),this.layerElement.appendChild(this.shapesContainer);this.data.hd||(this.baseElement=e),this.innerElem=e,this.data.ln&&this.innerElem.setAttribute("id",this.data.ln),this.searchShapes(this.shapesData,this.viewData,this.layerElement,this.dynamicProperties,0),this.buildExpressionInterface(),this.layerElement=e,this.shapeCont=t,0!==this.data.bm&&this.setBlendMode(),this.checkParenting()},HShapeElement.prototype.renderFrame=function(e){var t=this._parent.renderFrame.call(this,e);if(t===!1)return void this.hide();if(this.hidden=!1,this.renderModifiers(),this.addedTransforms.mdf=this.finalTransform.matMdf,this.addedTransforms.mats.length=1,this.addedTransforms.mats[0]=this.finalTransform.mat,this.renderShape(null,null,!0,null),this.isVisible&&(this.elemMdf||this.firstFrame)){var r=this.shapeCont.getBBox(),i=!1;this.currentBBox.w!==r.width&&(this.currentBBox.w=r.width,this.shapeCont.setAttribute("width",r.width),i=!0),this.currentBBox.h!==r.height&&(this.currentBBox.h=r.height,this.shapeCont.setAttribute("height",r.height),i=!0),(i||this.currentBBox.x!==r.x||this.currentBBox.y!==r.y)&&(this.currentBBox.w=r.width,this.currentBBox.h=r.height,this.currentBBox.x=r.x,this.currentBBox.y=r.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}},createElement(HBaseElement,HTextElement),HTextElement.prototype.init=ITextElement.prototype.init,HTextElement.prototype.getMeasures=ITextElement.prototype.getMeasures,HTextElement.prototype.createPathShape=ITextElement.prototype.createPathShape,HTextElement.prototype.prepareFrame=ITextElement.prototype.prepareFrame,HTextElement.prototype.createElements=function(){this.isMasked=this.checkMasks();var e=document.createElement("div");if(styleDiv(e),this.layerElement=e,this.isMasked){this.renderType="svg";var t=document.createElementNS(svgNS,"svg");this.cont=t,this.compW=this.comp.data?this.comp.data.w:this.globalData.compSize.w,this.compH=this.comp.data?this.comp.data.h:this.globalData.compSize.h,t.setAttribute("width",this.compW),t.setAttribute("height",this.compH);

var r=document.createElementNS(svgNS,"g");t.appendChild(r),e.appendChild(t),this.maskedElement=r,this.innerElem=r}else this.renderType="html",this.innerElem=e;this.baseElement=e},HTextElement.prototype.buildNewText=function(){var e=this.currentTextDocumentData;this.renderedLetters=Array.apply(null,{length:this.currentTextDocumentData.l?this.currentTextDocumentData.l.length:0}),this.innerElem.style.color=this.innerElem.style.fill=e.fc?"rgb("+Math.round(255*e.fc[0])+","+Math.round(255*e.fc[1])+","+Math.round(255*e.fc[2])+")":"rgba(0,0,0,0)",e.sc&&(this.innerElem.style.stroke="rgb("+Math.round(255*e.sc[0])+","+Math.round(255*e.sc[1])+","+Math.round(255*e.sc[2])+")",this.innerElem.style.strokeWidth=e.sw+"px");var t=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(this.innerElem.style.fontSize=e.s+"px",this.innerElem.style.lineHeight=e.s+"px",t.fClass)this.innerElem.className=t.fClass;else{this.innerElem.style.fontFamily=t.fFamily;var r=e.fWeight,i=e.fStyle;this.innerElem.style.fontStyle=i,this.innerElem.style.fontWeight=r}var n,a,o=e.l;a=o.length;var s,l,u,c,h=this.mHelper,p="",d=0;for(n=0;a>n;n+=1){if(this.globalData.fontManager.chars?(this.textPaths[d]?s=this.textPaths[d]:(s=document.createElementNS(svgNS,"path"),s.setAttribute("stroke-linecap","butt"),s.setAttribute("stroke-linejoin","round"),s.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[d]?(l=this.textSpans[d],u=l.children()[0]):(l=document.createElement("div"),u=document.createElementNS(svgNS,"svg"),u.appendChild(s),styleDiv(l)))):this.isMasked?s=this.textPaths[d]?this.textPaths[d]:document.createElementNS(svgNS,"text"):this.textSpans[d]?(l=this.textSpans[d],s=this.textPaths[d]):(l=document.createElement("span"),styleDiv(l),s=document.createElement("span"),styleDiv(s),l.appendChild(s)),this.globalData.fontManager.chars){var f,m=this.globalData.fontManager.getCharData(e.t.charAt(n),t.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);if(f=m?m.data:null,h.reset(),f&&f.shapes&&(c=f.shapes[0].it,h.scale(e.s/100,e.s/100),p=this.createPathShape(h,c),s.setAttribute("d",p)),this.isMasked)this.innerElem.appendChild(s);else if(this.innerElem.appendChild(l),f&&f.shapes){document.body.appendChild(u);var v=u.getBBox();u.setAttribute("width",v.width),u.setAttribute("height",v.height),u.setAttribute("viewBox",v.x+" "+v.y+" "+v.width+" "+v.height),u.style.transform=u.style.webkitTransform="translate("+v.x+"px,"+v.y+"px)",o[n].yOffset=v.y,l.appendChild(u)}else u.setAttribute("width",1),u.setAttribute("height",1)}else s.textContent=o[n].val,s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(s):(this.innerElem.appendChild(l),s.style.transform=s.style.webkitTransform="translate3d(0,"+-e.s/1.2+"px,0)");this.textSpans[d]=this.isMasked?s:l,this.textPaths[d]=s,d+=1}for(;d<this.textSpans.length;)this.textSpans[d].style.display="none",d+=1},HTextElement.prototype.hide=SVGTextElement.prototype.hide,HTextElement.prototype.renderFrame=function(e){var t=this._parent.renderFrame.call(this,e);if(t===!1)return void this.hide();if(this.hidden&&(this.hidden=!1,this.innerElem.style.display="block",this.layerElement.style.display="block"),this.data.singleShape){if(!this.firstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform.matMdf&&(this.cont.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),this.cont.style.transform=this.cont.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)")}if(this.getMeasures(),this.lettersChangedFlag){var r,i,n=this.renderedLetters,a=this.currentTextDocumentData.l;i=a.length;var o;for(r=0;i>r;r+=1)a[r].n||(o=n[r],this.isMasked?this.textSpans[r].setAttribute("transform",o.m):this.textSpans[r].style.transform=this.textSpans[r].style.webkitTransform=o.m,this.textSpans[r].style.opacity=o.o,o.sw&&this.textPaths[r].setAttribute("stroke-width",o.sw),o.sc&&this.textPaths[r].setAttribute("stroke",o.sc),o.fc&&(this.textPaths[r].setAttribute("fill",o.fc),this.textPaths[r].style.color=o.fc));if(this.isVisible&&(this.elemMdf||this.firstFrame)&&this.innerElem.getBBox){var s=this.innerElem.getBBox();this.currentBBox.w!==s.width&&(this.currentBBox.w=s.width,this.cont.setAttribute("width",s.width)),this.currentBBox.h!==s.height&&(this.currentBBox.h=s.height,this.cont.setAttribute("height",s.height)),(this.currentBBox.w!==s.width||this.currentBBox.h!==s.height||this.currentBBox.x!==s.x||this.currentBBox.y!==s.y)&&(this.currentBBox.w=s.width,this.currentBBox.h=s.height,this.currentBBox.x=s.x,this.currentBBox.y=s.y,this.cont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.cont.style.transform=this.cont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}this.firstFrame&&(this.firstFrame=!1)}},HTextElement.prototype.destroy=SVGTextElement.prototype.destroy,createElement(HBaseElement,HImageElement),HImageElement.prototype.createElements=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;if(this.data.hasMask){var r=document.createElement("div");styleDiv(r);var i=document.createElementNS(svgNS,"svg");i.setAttribute("width",this.assetData.w),i.setAttribute("height",this.assetData.h),r.appendChild(i),this.imageElem=document.createElementNS(svgNS,"image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),i.appendChild(this.imageElem),this.layerElement=r,this.baseElement=r,this.innerElem=r,this.maskedElement=this.imageElem}else styleDiv(t),this.layerElement=t,this.baseElement=t,this.innerElem=t;t.src=e,this.data.ln&&this.innerElem.setAttribute("id",this.data.ln),this.checkParenting()},HImageElement.prototype.hide=HSolidElement.prototype.hide,HImageElement.prototype.renderFrame=HSolidElement.prototype.renderFrame,HImageElement.prototype.destroy=HSolidElement.prototype.destroy,createElement(HBaseElement,HCameraElement),HCameraElement.prototype.setup=function(){var e,t,r=this.comp.threeDElements.length;for(e=0;r>e;e+=1)t=this.comp.threeDElements[e],t.perspectiveElem.style.perspective=t.perspectiveElem.style.webkitPerspective=this.pe.v+"px",t.container.style.transformOrigin=t.container.style.mozTransformOrigin=t.container.style.webkitTransformOrigin="0px 0px 0px",t.perspectiveElem.style.transform=t.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e,t,r=this.firstFrame;if(this.hierarchy)for(t=this.hierarchy.length,e=0;t>e;e+=1)r=this.hierarchy[e].finalTransform.mProp.mdf?!0:r;if(r||this.p&&this.p.mdf||this.px&&(this.px.mdf||this.py.mdf||this.pz.mdf)||this.rx.mdf||this.ry.mdf||this.rz.mdf||this.or.mdf||this.a&&this.a.mdf){if(this.mat.reset(),this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var i=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]],n=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)+Math.pow(i[2],2)),a=[i[0]/n,i[1]/n,i[2]/n],o=Math.sqrt(a[2]*a[2]+a[0]*a[0]),s=Math.atan2(a[1],o),l=Math.atan2(a[0],-a[2]);this.mat.rotateY(l).rotateX(-s)}if(this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v),this.hierarchy){var u;for(t=this.hierarchy.length,e=0;t>e;e+=1)u=this.hierarchy[e].finalTransform.mProp.iv.props,this.mat.transform(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],-u[12],-u[13],u[14],u[15])}t=this.comp.threeDElements.length;var c;for(e=0;t>e;e+=1)c=this.comp.threeDElements[e],c.container.style.transform=c.container.style.webkitTransform=this.mat.toCSS()}this.firstFrame=!1},HCameraElement.prototype.destroy=function(){};var Expressions=function(){function e(e){e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer)}var t={};return t.initExpressions=e,t}();expressionsPlugin=Expressions,function(){function e(){return this.pv}function t(e,t){var r,i,n=0,a=this.keyframes.length-1,o=1,s=!0;t=void 0===t?this.offsetTime:0;for(var l="object"==typeof this.pv?[this.pv.length]:0;s;){if(r=this.keyframes[n],i=this.keyframes[n+1],n==a-1&&e>=i.t-t){r.h&&(r=i);break}if(i.t-t>e)break;a-1>n?n+=o:s=!1}var u,c,h,p,d,f=0;if(r.to){r.bezierData||bez.buildBezierData(r);var m=r.bezierData;if(e>=i.t-t||e<r.t-t){var v=e>=i.t-t?m.points.length-1:0;for(c=m.points[v].point.length,u=0;c>u;u+=1)l[u]=m.points[v].point[u]}else{r.__fnct?d=r.__fnct:(d=BezierFactory.getBezierEasing(r.o.x,r.o.y,r.i.x,r.i.y,r.n).get,r.__fnct=d),h=d((e-(r.t-t))/(i.t-t-(r.t-t)));var g,y=m.segmentLength*h,b=0;for(o=1,s=!0,p=m.points.length;s;){if(b+=m.points[f].partialLength*o,0===y||0===h||f==m.points.length-1){for(c=m.points[f].point.length,u=0;c>u;u+=1)l[u]=m.points[f].point[u];break}if(y>=b&&y<b+m.points[f+1].partialLength){for(g=(y-b)/m.points[f+1].partialLength,c=m.points[f].point.length,u=0;c>u;u+=1)l[u]=m.points[f].point[u]+(m.points[f+1].point[u]-m.points[f].point[u])*g;break}p-1>f&&1==o||f>0&&-1==o?f+=o:s=!1}}}else{var _,x,w,T,M,S=!1;for(a=r.s.length,n=0;a>n;n+=1){if(1!==r.h&&(r.o.x instanceof Array?(S=!0,r.__fnct||(r.__fnct=[]),r.__fnct[n]||(_=r.o.x[n]||r.o.x[0],x=r.o.y[n]||r.o.y[0],w=r.i.x[n]||r.i.x[0],T=r.i.y[n]||r.i.y[0])):(S=!1,r.__fnct||(_=r.o.x,x=r.o.y,w=r.i.x,T=r.i.y)),S?r.__fnct[n]?d=r.__fnct[n]:(d=BezierFactory.getBezierEasing(_,x,w,T).get,r.__fnct[n]=d):r.__fnct?d=r.__fnct:(d=BezierFactory.getBezierEasing(_,x,w,T).get,r.__fnct=d),h=e>=i.t-t?1:e<r.t-t?0:d((e-(r.t-t))/(i.t-t-(r.t-t)))),this.sh&&1!==r.h){var E=r.s[n],P=r.e[n];-180>E-P?E+=360:E-P>180&&(E-=360),M=E+(P-E)*h}else M=1===r.h?r.s[n]:r.s[n]+(r.e[n]-r.s[n])*h;1===a?l=M:l[n]=M}}return l}function r(e){if(void 0!==this.vel)return this.vel;var t=-.01;e*=this.elem.globalData.frameRate;var r,i=this.getValueAtTime(e,0),n=this.getValueAtTime(e+t,0);if(i.length){r=Array.apply(null,{length:i.length});var a;for(a=0;a<i.length;a+=1)r[a]=this.elem.globalData.frameRate*((n[a]-i[a])/t)}else r=(n-i)/t;return r}function i(e){this.propertyGroup=e}function n(e,t,r){t.x&&(r.k=!0,r.x=!0,r.getValue&&(r.getPreValue=r.getValue),r.getValue=ExpressionManager.initiateExpression.bind(r)(e,t,r))}var a=function(){function a(e,t){return this.textIndex=e+1,this.textTotal=t,this.getValue(),this.v}return function(o,s){this.pv=1,this.comp=o.comp,this.elem=o,this.mult=.01,this.type="textSelector",this.textTotal=s.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],n.bind(this)(o,s,this),this.getMult=a,this.getVelocityAtTime=r,this.getValueAtTime=this.kf?t:e,this.setGroupProperty=i}}(),o=PropertyFactory.getProp;PropertyFactory.getProp=function(a,s,l,u,c){var h=o(a,s,l,u,c);h.getVelocityAtTime=r,h.getValueAtTime=h.kf?t:e,h.setGroupProperty=i;var p=h.k;return void 0!==s.ix&&Object.defineProperty(h,"propertyIndex",{get:function(){return s.ix}}),n(a,s,h),!p&&h.x&&c.push(h),h};var s=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(e,t,r,a,o){var l=s(e,t,r,a,o);l.setGroupProperty=i;var u=l.k;return void 0!==t.ix&&Object.defineProperty(l,"propertyIndex",{get:function(){return t.ix}}),3===r?n(e,t.pt,l):4===r&&n(e,t.ks,l),!u&&l.x&&a.push(l),l};var l=PropertyFactory.getTextSelectorProp;PropertyFactory.getTextSelectorProp=function(e,t,r){return 1===t.t?new a(e,t,r):l(e,t,r)}}();var ExpressionManager=function(){function duplicatePropertyValue(e,t){if(t=t||1,"number"==typeof e)return e*t;if(e.i)return JSON.parse(JSON.stringify(e));var r,i=Array.apply(null,{length:e.length}),n=e.length;for(r=0;n>r;r+=1)i[r]=e[r]*t;return i}function $bm_neg(e){var t=typeof e;if("number"===t||"boolean"===t)return-e;if("object"===t){var r,i=e.length,n=[];for(r=0;i>r;r+=1)n[r]=-e[r];return n}}function sum(e,t){var r=typeof e,i=typeof t;if("string"===r||"string"===i)return e+t;if(!("number"!==r&&"boolean"!==r||"number"!==i&&"boolean"!==i))return e+t;if("object"===r&&("number"===i||"boolean"===i))return e[0]=e[0]+t,e;if(("number"===r||"boolean"===r)&&"object"===i)return t[0]=e+t[0],t;if("object"===r&&"object"===i){for(var n=0,a=e.length,o=t.length,s=[];a>n||o>n;)s[n]="number"==typeof e[n]&&"number"==typeof t[n]?e[n]+t[n]:void 0==t[n]?e[n]:e[n]||t[n],n+=1;return s}return 0}function sub(e,t){var r=typeof e,i=typeof t;if(!("number"!==r&&"boolean"!==r||"number"!==i&&"boolean"!==i))return e-t;if("object"===r&&("number"===i||"boolean"===i))return e[0]=e[0]-t,e;if(("number"===r||"boolean"===r)&&"object"===i)return t[0]=e-t[0],t;if("object"===r&&"object"===i){for(var n=0,a=e.length,o=t.length,s=[];a>n||o>n;)s[n]="number"==typeof e[n]&&"number"==typeof t[n]?e[n]-t[n]:void 0==t[n]?e[n]:e[n]||t[n],n+=1;return s}return 0}function mul(e,t){var r=typeof e,i=typeof t;if(!("number"!==r&&"boolean"!==r||"number"!==i&&"boolean"!==i))return e*t;var n,a;if("object"===r&&("number"===i||"boolean"===i)){for(a=e.length,arr=Array.apply(null,{length:a}),n=0;a>n;n+=1)arr[n]=e[n]*t;return arr}if(("number"===r||"boolean"===r)&&"object"===i){for(a=t.length,arr=Array.apply(null,{length:a}),n=0;a>n;n+=1)arr[n]=e*t[n];return arr}return 0}function div(e,t){var r=typeof e,i=typeof t;if(!("number"!==r&&"boolean"!==r||"number"!==i&&"boolean"!==i))return e/t;var n,a;if("object"===r&&("number"===i||"boolean"===i)){for(a=e.length,arr=Array.apply(null,{length:a}),n=0;a>n;n+=1)arr[n]=e[n]/t;return arr}if(("number"===r||"boolean"===r)&&"object"===i){for(a=t.length,arr=Array.apply(null,{length:a}),n=0;a>n;n+=1)arr[n]=e/t[n];return arr}return 0}function clamp(e,t,r){if(t>r){var i=r;r=t,t=i}return Math.min(Math.max(e,t),r)}function radiansToDegrees(e){return e/degToRads}function degreesToRadians(e){return e*degToRads}function length(e,t){t||(t=helperLengthArray);var r,i=Math.min(e.length,t.length),n=0;for(r=0;i>r;r+=1)n+=Math.pow(t[r]-e[r],2);return Math.sqrt(n)}function rgbToHsl(e){var t,r,i=e[0],n=e[1],a=e[2],o=Math.max(i,n,a),s=Math.min(i,n,a),l=(o+s)/2;if(o==s)t=r=0;else{var u=o-s;switch(r=l>.5?u/(2-o-s):u/(o+s),o){case i:t=(n-a)/u+(a>n?6:0);break;case n:t=(a-i)/u+2;break;case a:t=(i-n)/u+4}t/=6}return[t,r,l,e[3]]}function hslToRgb(e){function t(e,t,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?e+6*(t-e)*r:.5>r?t:2/3>r?e+(t-e)*(2/3-r)*6:e}var r,i,n,a=e[0],o=e[1],s=e[2];if(0==o)r=i=n=s;else{var l=.5>s?s*(1+o):s+o-s*o,u=2*s-l;r=t(u,l,a+1/3),i=t(u,l,a),n=t(u,l,a-1/3)}return[r,i,n,e[3]]}function linear(e,t,r,i,n){if(void 0===i||void 0===n)return linear(e,0,1,t,r);if(t>=e)return i;if(e>=r)return n;var a=r===t?0:(e-t)/(r-t);if(!i.length)return i+(n-i)*a;var o,s=i.length,l=Array.apply(null,{length:s});for(o=0;s>o;o+=1)l[o]=i[o]+(n[o]-i[o])*a;return l}function seedRandom(e){BMMath.seedrandom(e)}function random(e,t){if(void 0===t&&(void 0===e?(e=0,t=1):(t=e,e=void 0)),t.length){var r,i=t.length;e||(e=Array.apply(null,{length:i}));var n=Array.apply(null,{length:i}),a=BMMath.random();for(r=0;i>r;r+=1)n[r]=e[r]+a*(t[r]-e[r]);return n}void 0===e&&(e=0);var o=BMMath.random();return e+o*(t-e)}function initiateExpression(elem,data,property){function lookAt(e,t){var r=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],i=Math.atan2(r[0],Math.sqrt(r[1]*r[1]+r[2]*r[2]))/degToRads,n=-Math.atan2(r[1],r[2])/degToRads;return[n,i,0]}function easeOut(e,t,r){return-(r-t)*e*(e-2)+t}function nearestKey(e){var t,r,i,n=data.k.length;if(data.k.length&&"number"!=typeof data.k[0]){for(r=-1,e*=elem.comp.globalData.frameRate,t=0;n-1>t;t+=1){if(e===data.k[t].t){r=t+1,i=data.k[t].t;break}if(e>data.k[t].t&&e<data.k[t+1].t){e-data.k[t].t>data.k[t+1].t-e?(r=t+2,i=data.k[t+1].t):(r=t+1,i=data.k[t].t);break}}-1===r&&(r=t+1,i=data.k[t].t)}else r=0,i=0;var a={};return a.index=r,a.time=i/elem.comp.globalData.frameRate,a}function key(e){if(!data.k.length||"number"==typeof data.k[0])return{time:0};e-=1;var t,r={time:data.k[e].t/elem.comp.globalData.frameRate};t=e===data.k.length-1?data.k[e-1].e:data.k[e].s;var i,n=t.length;for(i=0;n>i;i+=1)r[i]=t[i];return r}function framesToTime(e,t){return t||(t=elem.comp.globalData.frameRate),e/t}function timeToFrames(e,t){return e||(e=time),t||(t=elem.comp.globalData.frameRate),e*t}function toWorld(e){if(toworldMatrix.reset(),elem.finalTransform.mProp.applyToMatrix(toworldMatrix),elem.hierarchy&&elem.hierarchy.length){var t,r=elem.hierarchy.length;for(t=0;r>t;t+=1)elem.hierarchy[t].finalTransform.mProp.applyToMatrix(toworldMatrix);return toworldMatrix.applyToPointArray(e[0],e[1],e[2]||0)}return toworldMatrix.applyToPointArray(e[0],e[1],e[2]||0)}function fromWorld(e){fromworldMatrix.reset();var t=[];if(t.push(e),elem.finalTransform.mProp.applyToMatrix(fromworldMatrix),elem.hierarchy&&elem.hierarchy.length){var r,i=elem.hierarchy.length;for(r=0;i>r;r+=1)elem.hierarchy[r].finalTransform.mProp.applyToMatrix(fromworldMatrix);return fromworldMatrix.inversePoints(t)[0]}return fromworldMatrix.inversePoints(t)[0]}function execute(){if(this.frameExpressionId!==elem.globalData.frameId||"textSelector"===this.type){if(this.lock)return this.v=duplicatePropertyValue(this.pv,this.mult),!0;"textSelector"===this.type&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),transform||(transform=elem.transform),thisLayer||(thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!(!elem.hierarchy||!elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[elem.hierarchy.length-1].layerInterface),this.lock=!0,this.getPreValue&&this.getPreValue(),value=this.pv,time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),bindedFn(),this.frameExpressionId=elem.globalData.frameId;var e,t;if(this.mult)if("number"==typeof this.v)this.v*=this.mult;else for(t=this.v.length,value===this.v&&(this.v=2===t?[value[0],value[1]]:[value[0],value[1],value[2]]),e=0;t>e;e+=1)this.v[e]*=this.mult;if("number"==typeof this.v)this.lastValue!==this.v&&(this.lastValue=this.v,this.mdf=!0);else if(this.v.i)this.mdf=!0,this.paths.length=0,this.paths[0]=this.v;else for(t=this.v.length,e=0;t>e;e+=1)this.v[e]!==this.lastValue[e]&&(this.lastValue[e]=this.v[e],this.mdf=!0);this.lock=!1}}var val=data.x,needsVelocity=-1!==val.indexOf("velocity"),elemType=elem.data.ty,transform,content,effect,thisComp=elem.comp,thisProperty=property;elem.comp.frameDuration=1/elem.comp.globalData.frameRate;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,thisLayer,thisComp,fnStr="var fn = function(){"+val+";this.v = $bm_rt;}";eval(fnStr);var bindedFn=fn.bind(this),numKeys=data.k?data.k.length:0,wiggle=function(e,t){var r,i,n=this.pv.length?this.pv.length:1,a=Array.apply(null,{len:n});for(i=0;n>i;i+=1)a[i]=0;e=5;var o=Math.floor(time*e);for(r=0,i=0;o>r;){for(i=0;n>i;i+=1)a[i]+=-t+2*t*BMMath.random();r+=1}var s=time*e,l=s-Math.floor(s),u=Array.apply({length:n});for(i=0;n>i;i+=1)u[i]=this.pv[i]+a[i]+(-t+2*t*BMMath.random())*l;return u}.bind(this),loopIn=function(e,t,r){if(!this.k)return this.pv;var i=time*elem.comp.globalData.frameRate,n=this.keyframes,a=n[0].t;if(i>=a)return this.pv;var o,s;r?(o=t?Math.abs(elem.comp.globalData.frameRate*t):Math.max(0,this.elem.data.op-a),s=a+o):((!t||t>n.length-1)&&(t=n.length-1),s=n[t].t,o=s-a);var l,u,c;if("pingpong"===e){var h=Math.floor((a-i)/o);if(h%2===0)return this.getValueAtTime((a-i)%o+a,0)}else{if("offset"===e){var p=this.getValueAtTime(a,0),d=this.getValueAtTime(s,0),f=this.getValueAtTime(o-(a-i)%o+a,0),m=Math.floor((a-i)/o)+1;if(this.pv.length){for(c=new Array(p.length),u=c.length,l=0;u>l;l+=1)c[l]=f[l]-(d[l]-p[l])*m;return c}return f-(d-p)*m}if("continue"===e){var v=this.getValueAtTime(a,0),g=this.getValueAtTime(a+.001,0);if(this.pv.length){for(c=new Array(v.length),u=c.length,l=0;u>l;l+=1)c[l]=v[l]+(v[l]-g[l])*(a-i)/5e-4;return c}return v+(v-g)*(a-i)/5e-4}}return this.getValueAtTime(o-(a-i)%o+a,0)}.bind(this),loopInDuration=function(e,t){return loopIn(e,t,!0)}.bind(this),loopOut=function(e,t,r){if(!this.k)return this.pv;var i=time*elem.comp.globalData.frameRate,n=this.keyframes,a=n[n.length-1].t;if(a>=i)return this.pv;var o,s;r?(o=t?Math.abs(a-elem.comp.globalData.frameRate*t):Math.max(0,a-this.elem.data.ip),s=a-o):((!t||t>n.length-1)&&(t=n.length-1),s=n[n.length-1-t].t,o=a-s);var l,u,c;if("pingpong"===e){var h=Math.floor((i-s)/o);if(h%2!==0)return this.getValueAtTime(o-(i-s)%o+s,0)}else{if("offset"===e){var p=this.getValueAtTime(s,0),d=this.getValueAtTime(a,0),f=this.getValueAtTime((i-s)%o+s,0),m=Math.floor((i-s)/o);if(this.pv.length){for(c=new Array(p.length),u=c.length,l=0;u>l;l+=1)c[l]=(d[l]-p[l])*m+f[l];return c}return(d-p)*m+f}if("continue"===e){var v=this.getValueAtTime(a,0),g=this.getValueAtTime(a-.001,0);if(this.pv.length){for(c=new Array(v.length),u=c.length,l=0;u>l;l+=1)c[l]=v[l]+(v[l]-g[l])*(i-a)/5e-4;return c}return v+(v-g)*(i-a)/5e-4}}return this.getValueAtTime((i-s)%o+s,0)}.bind(this),loop_out=loopOut,loopOutDuration=function(e,t){return loopOut(e,t,!0)}.bind(this),valueAtTime=function(e){return this.getValueAtTime(e*elem.comp.globalData.frameRate,0)}.bind(this),velocityAtTime=function(e){return this.getVelocityAtTime(e)}.bind(this),comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),toworldMatrix=new Matrix,fromworldMatrix=new Matrix,time,velocity,value,textIndex,textTotal,selectorValue,index=elem.data.ind+1,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent;return execute}var ob={},Math=BMMath,radians_to_degrees=radiansToDegrees,degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];return ob.initiateExpression=initiateExpression,ob}(),ShapeExpressionInterface=function(){function e(e,t,r){return d(e,t,r)}function t(e,t,r){return m(e,t,r)}function r(e,t,r){return v(e,t,r)}function i(e,t,r){return g(e,t,r)}function n(e,t,r){return y(e,t,r)}function a(e,t,r){return b(e,t,r)}function o(e,t,r){return _(e,t,r)}function s(e,t,r){return x(e,t,r)}function l(e,t,r){return w(e,t,r)}function u(e,t,r){return T(e,t,r)}function c(e,t,r){return M(e,t,r)}function h(e,t,r){var i,n=[],a=e?e.length:0;for(i=0;a>i;i+=1)"gr"==e[i].ty?n.push(ShapeExpressionInterface.createGroupInterface(e[i],t[i],r)):"fl"==e[i].ty?n.push(ShapeExpressionInterface.createFillInterface(e[i],t[i],r)):"st"==e[i].ty?n.push(ShapeExpressionInterface.createStrokeInterface(e[i],t[i],r)):"tm"==e[i].ty?n.push(ShapeExpressionInterface.createTrimInterface(e[i],t[i],r)):"tr"==e[i].ty||("el"==e[i].ty?n.push(ShapeExpressionInterface.createEllipseInterface(e[i],t[i],r)):"sr"==e[i].ty?n.push(ShapeExpressionInterface.createStarInterface(e[i],t[i],r)):"sh"==e[i].ty?n.push(ShapeExpressionInterface.createPathInterface(e[i],t[i],r)):"rc"==e[i].ty?n.push(ShapeExpressionInterface.createRectInterface(e[i],t[i],r)):"rd"==e[i].ty&&n.push(ShapeExpressionInterface.createRoundedInterface(e[i],t[i],r)));return n}var p={createShapeInterface:e,createGroupInterface:t,createTrimInterface:n,createStrokeInterface:i,createTransformInterface:a,createEllipseInterface:o,createStarInterface:s,createRectInterface:l,createRoundedInterface:u,createPathInterface:c,createFillInterface:r},d=function(){return function(e,t,r){function i(e){if("number"==typeof e)return n[e-1];for(var t=0,r=n.length;r>t;){if(n[t]._name===e)return n[t];t+=1}}var n;return i.propertyGroup=r,n=h(e,t,i),i}}(),f=function(){return function(e,t,r){var i,n=function(e){if("number"==typeof e)return i[e-1];for(var t=0,r=i.length;r>t;){if(i[t]._name===e)return i[t];t+=1}};return n.propertyGroup=function(e){return 1===e?n:r(e-1)},i=h(e.it,t.it,n.propertyGroup),n}}(),m=function(){return function(e,t,r){var i=function(e){switch(e){case"ADBE Vectors Group":case 2:return i.content;case"ADBE Vector Transform Group":case 3:default:return i.transform}};i.propertyGroup=function(e){return 1===e?i:r(e-1)};var n=f(e,t,i.propertyGroup),a=ShapeExpressionInterface.createTransformInterface(e.it[e.it.length-1],t.it[t.it.length-1],i.propertyGroup);return i.content=n,i.transform=a,Object.defineProperty(i,"_name",{get:function(){return e.nm}}),i.nm=e.nm,i}}(),v=function(){return function(e,t,r){t.c.setGroupProperty(r),t.o.setGroupProperty(r);var i={get color(){return t.c.k&&t.c.getValue(),[t.c.v[0]/t.c.mult,t.c.v[1]/t.c.mult,t.c.v[2]/t.c.mult,1]},get opacity(){return t.o.k&&t.o.getValue(),t.o.v},_name:e.nm};return i}}(),g=function(){return function(e,t,r){function i(e){return 1===e?n:r(e-1)}t.c.setGroupProperty(i),t.o.setGroupProperty(i),t.w.setGroupProperty(i);var n={get color(){return t.c.k&&t.c.getValue(),[t.c.v[0]/t.c.mult,t.c.v[1]/t.c.mult,t.c.v[2]/t.c.mult,1]},get opacity(){return t.o.k&&t.o.getValue(),t.o.v},get strokeWidth(){return t.w.k&&t.w.getValue(),t.w.v},dashOb:{},get dash(){var i,n=t.d,a=e.d,o=a.length;for(i=0;o>i;i+=1)n.dataProps[i].p.k&&n.dataProps[i].p.getValue(),n.dataProps[i].p.setGroupProperty(r),this.dashOb[a[i].nm]=n.dataProps[i].p.v;return this.dashOb},_name:e.nm};return n}}(),y=function(){return function(e,t,r){function i(e){return 1==e?n:r(--e)}function n(t){return t===e.e.ix?n.end:t===e.s.ix?n.start:t===e.o.ix?n.offset:void 0}return n.propertyIndex=e.ix,t.s.setGroupProperty(i),t.e.setGroupProperty(i),t.o.setGroupProperty(i),n.propertyIndex=e.ix,Object.defineProperty(n,"start",{get:function(){return t.s.k&&t.s.getValue(),t.s.v/t.s.mult}}),Object.defineProperty(n,"end",{get:function(){return t.e.k&&t.e.getValue(),t.e.v/t.e.mult}}),Object.defineProperty(n,"offset",{get:function(){return t.o.k&&t.o.getValue(),t.o.v}}),Object.defineProperty(n,"_name",{get:function(){return e.nm}}),n}}(),b=function(){return function(e,t,r){function i(e){return 1==e?n:r(--e)}function n(t){return e.a.ix===t?n.anchorPoint:e.o.ix===t?n.opacity:e.p.ix===t?n.position:e.r.ix===t?n.rotation:e.s.ix===t?n.scale:e.sk&&e.sk.ix===t?n.skew:e.sa&&e.sa.ix===t?n.skewAxis:void 0}t.transform.mProps.o.setGroupProperty(i),t.transform.mProps.p.setGroupProperty(i),t.transform.mProps.a.setGroupProperty(i),t.transform.mProps.s.setGroupProperty(i),t.transform.mProps.r.setGroupProperty(i),t.transform.mProps.sk&&(t.transform.mProps.sk.setGroupProperty(i),t.transform.mProps.sa.setGroupProperty(i)),t.transform.op.setGroupProperty(i),Object.defineProperty(n,"opacity",{get:function(){return t.transform.mProps.o.k&&t.transform.mProps.o.getValue(),t.transform.mProps.o.v/t.transform.mProps.o.mult}}),Object.defineProperty(n,"position",{get:function(){return t.transform.mProps.p.k&&t.transform.mProps.p.getValue(),[t.transform.mProps.p.v[0],t.transform.mProps.p.v[1]]}}),Object.defineProperty(n,"anchorPoint",{get:function(){return t.transform.mProps.a.k&&t.transform.mProps.a.getValue(),[t.transform.mProps.a.v[0],t.transform.mProps.a.v[1]]}});var a=[];return Object.defineProperty(n,"scale",{get:function(){return t.transform.mProps.s.k&&t.transform.mProps.s.getValue(),a[0]=t.transform.mProps.s.v[0]/t.transform.mProps.s.mult,a[1]=t.transform.mProps.s.v[1]/t.transform.mProps.s.mult,a}}),Object.defineProperty(n,"rotation",{get:function(){return t.transform.mProps.r.k&&t.transform.mProps.r.getValue(),t.transform.mProps.r.v/t.transform.mProps.r.mult}}),Object.defineProperty(n,"skew",{get:function(){return t.transform.mProps.sk.k&&t.transform.mProps.sk.getValue(),t.transform.mProps.sk.v}}),Object.defineProperty(n,"skewAxis",{get:function(){return t.transform.mProps.sa.k&&t.transform.mProps.sa.getValue(),t.transform.mProps.sa.v}}),Object.defineProperty(n,"_name",{get:function(){return e.nm}}),n.ty="tr",n}}(),_=function(){return function(e,t,r){function i(e){return 1==e?n:r(--e)}function n(t){return e.p.ix===t?n.position:e.s.ix===t?n.size:void 0}n.propertyIndex=e.ix;var a="tm"===t.sh.ty?t.sh.prop:t.sh;return a.s.setGroupProperty(i),a.p.setGroupProperty(i),Object.defineProperty(n,"size",{get:function(){return a.s.k&&a.s.getValue(),[a.s.v[0],a.s.v[1]]}}),Object.defineProperty(n,"position",{get:function(){return a.p.k&&a.p.getValue(),[a.p.v[0],a.p.v[1]]}}),Object.defineProperty(n,"_name",{get:function(){return e.nm}}),n}}(),x=function(){return function(e,t,r){function i(e){return 1==e?n:r(--e)}function n(t){return e.p.ix===t?n.position:e.r.ix===t?n.rotation:e.pt.ix===t?n.points:e.or.ix===t||"ADBE Vector Star Outer Radius"===t?n.outerRadius:e.os.ix===t?n.outerRoundness:!e.ir||e.ir.ix!==t&&"ADBE Vector Star Inner Radius"!==t?e.is&&e.is.ix===t?n.innerRoundness:void 0:n.innerRadius}var a="tm"===t.sh.ty?t.sh.prop:t.sh;return n.propertyIndex=e.ix,a.or.setGroupProperty(i),a.os.setGroupProperty(i),a.pt.setGroupProperty(i),a.p.setGroupProperty(i),a.r.setGroupProperty(i),e.ir&&(a.ir.setGroupProperty(i),a.is.setGroupProperty(i)),Object.defineProperty(n,"position",{get:function(){return a.p.k&&a.p.getValue(),a.p.v}}),Object.defineProperty(n,"rotation",{get:function(){return a.r.k&&a.r.getValue(),a.r.v/a.r.mult}}),Object.defineProperty(n,"points",{get:function(){return a.pt.k&&a.pt.getValue(),a.pt.v}}),Object.defineProperty(n,"outerRadius",{get:function(){return a.or.k&&a.or.getValue(),a.or.v}}),Object.defineProperty(n,"outerRoundness",{get:function(){return a.os.k&&a.os.getValue(),a.os.v/a.os.mult}}),Object.defineProperty(n,"innerRadius",{get:function(){return a.ir?(a.ir.k&&a.ir.getValue(),a.ir.v):0}}),Object.defineProperty(n,"innerRoundness",{get:function(){return a.is?(a.is.k&&a.is.getValue(),a.is.v/a.is.mult):0}}),Object.defineProperty(n,"_name",{get:function(){return e.nm}}),n}}(),w=function(){return function(e,t,r){function i(e){return 1==e?n:r(--e)}function n(t){return e.p.ix===t?n.position:e.r.ix===t?n.rotation:e.pt.ix===t?n.points:e.or.ix===t||"ADBE Vector Star Outer Radius"===t?n.outerRadius:e.os.ix===t?n.outerRoundness:!e.ir||e.ir.ix!==t&&"ADBE Vector Star Inner Radius"!==t?e.is&&e.is.ix===t?n.innerRoundness:void 0:n.innerRadius}var a="tm"===t.sh.ty?t.sh.prop:t.sh;return n.propertyIndex=e.ix,a.p.setGroupProperty(i),a.s.setGroupProperty(i),a.r.setGroupProperty(i),Object.defineProperty(n,"position",{get:function(){return a.p.k&&a.p.getValue(),a.p.v}}),Object.defineProperty(n,"roundness",{get:function(){return a.r.k&&a.r.getValue(),a.r.v}}),Object.defineProperty(n,"size",{get:function(){return a.s.k&&a.s.getValue(),a.s.v}}),Object.defineProperty(n,"_name",{get:function(){return e.nm}}),n}}(),T=function(){return function(e,t,r){function i(e){return 1==e?n:r(--e)}function n(t){return e.r.ix===t||"Round Corners 1"===t?n.radius:void 0}var a=t;return n.propertyIndex=e.ix,a.rd.setGroupProperty(i),Object.defineProperty(n,"radius",{get:function(){return a.rd.k&&a.rd.getValue(),a.rd.v}}),Object.defineProperty(n,"_name",{get:function(){return e.nm}}),n}}(),M=function(){return function(e,t,r){var i="tm"===t.sh.ty?t.sh.prop:t.sh;i.setGroupProperty(r);var n={get shape(){return i.k&&i.getValue(),i.v},get path(){return i.k&&i.getValue(),i.v},_name:e.nm};return n}}();return p}(),LayerExpressionInterface=function(){function e(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var r,i=this._elem.hierarchy.length;for(r=0;i>r;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(t);return t.applyToPointArray(e[0],e[1],e[2]||0)}return t.applyToPointArray(e[0],e[1],e[2]||0)}return function(t){function r(e){n.mask=e.getMask.bind(e)}function i(e){n.effect=e}function n(e){switch(e){case"ADBE Root Vectors Group":case 2:return n.shapeInterface;case"Transform":case"transform":case"ADBE Transform Group":return a;case 4:case"ADBE Effect Parade":return n.effect}}var a=TransformExpressionInterface(t.transform);return n.toWorld=e,n.toComp=e,n._elem=t,Object.defineProperty(n,"hasParent",{
get:function(){return!!t.hierarchy}}),Object.defineProperty(n,"parent",{get:function(){return t.hierarchy[0].layerInterface}}),Object.defineProperty(n,"rotation",{get:function(){return a.rotation}}),Object.defineProperty(n,"scale",{get:function(){return a.scale}}),Object.defineProperty(n,"position",{get:function(){return a.position}}),Object.defineProperty(n,"anchorPoint",{get:function(){return a.anchorPoint}}),Object.defineProperty(n,"transform",{get:function(){return a}}),Object.defineProperty(n,"_name",{value:t.data.nm}),Object.defineProperty(n,"content",{get:function(){return n.shapeInterface}}),n.active=!0,n.registerMaskInterface=r,n.registerEffectsInterface=i,n}}(),CompExpressionInterface=function(){return function(e){function t(t){for(var r=0,i=e.layers.length;i>r;){if(e.layers[r].nm===t||e.layers[r].ind===t-1)return e.elements[r].layerInterface;r+=1}}return t.layer=t,t.pixelAspect=1,t.height=e.globalData.compSize.h,t.width=e.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/e.globalData.frameRate,t}}(),TransformExpressionInterface=function(){return function(e){function t(r){switch(r){case"scale":case"Scale":case"ADBE Scale":return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":return t.rotation;case"position":case"Position":case"ADBE Position":return e.position;case"anchorPoint":case"AnchorPoint":case"ADBE AnchorPoint":return t.anchorPoint;case"opacity":case"Opacity":return t.opacity}}return Object.defineProperty(t,"rotation",{get:function(){return e.rotation}}),Object.defineProperty(t,"scale",{get:function(){var t,r=e.scale,i=r.length,n=Array.apply(null,{length:i});for(t=0;i>t;t+=1)n[t]=100*r[t];return n}}),Object.defineProperty(t,"position",{get:function(){return e.position}}),Object.defineProperty(t,"xPosition",{get:function(){return e.xPosition}}),Object.defineProperty(t,"yPosition",{get:function(){return e.yPosition}}),Object.defineProperty(t,"anchorPoint",{get:function(){return e.anchorPoint}}),Object.defineProperty(t,"opacity",{get:function(){return 100*e.opacity}}),t}}(),ProjectInterface=function(){function e(e){this.compositions.push(e)}return function(){function t(e){for(var t=0,r=this.compositions.length;r>t;){if(this.compositions[t].data&&this.compositions[t].data.nm===e)return this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}}return t.compositions=[],t.currentFrame=0,t.registerComposition=e,t}}(),EffectsExpressionInterface=function(){function e(e,r){if(e.effects){var i,n=[],a=e.data.ef,o=e.effects.effectElements.length;for(i=0;o>i;i+=1)n.push(t(a[i],e.effects.effectElements[i],r,e));return function(t){for(var r=e.data.ef,i=0,a=r.length;a>i;){if(t===r[i].nm||t===r[i].mn||t===r[i].ix)return n[i];i+=1}}}}function t(e,i,n,a){var o,s=[],l=e.ef.length;for(o=0;l>o;o+=1)s.push(5===e.ef[o].ty?t(e.ef[o],i.effectElements[o],n,a):r(i.effectElements[o],e.ef[o].ty,a));return function(t){for(var r=e.ef,i=0,n=r.length;n>i;){if(t===r[i].nm||t===r[i].mn||t===r[i].ix)return 5===r[i].ty?s[i]:s[i]();i+=1}return s[0]()}}function r(e,t,r){return function(){if(10===t)return r.comp.compInterface(e.p.v);if(e.p.k&&e.p.getValue(),"number"==typeof e.p.v)return e.p.v;var i,n=e.p.v.length,a=Array.apply(null,{length:n});for(i=0;n>i;i+=1)a[i]=e.p.v[i];return a}}var i={createEffectsInterface:e};return i}();GroupEffect.prototype.getValue=function(){this.mdf=!1;var e,t=this.dynamicProperties.length;for(e=0;t>e;e+=1)this.dynamicProperties[e].getValue(),this.mdf=this.dynamicProperties[e].mdf?!0:this.mdf},GroupEffect.prototype.init=function(e,t,r){this.data=e,this.mdf=!1,this.effectElements=[];var i,n,a=this.data.ef.length,o=this.data.ef;for(i=0;a>i;i+=1)switch(o[i].ty){case 0:n=new SliderEffect(o[i],t,r),this.effectElements.push(n);break;case 1:n=new AngleEffect(o[i],t,r),this.effectElements.push(n);break;case 2:n=new ColorEffect(o[i],t,r),this.effectElements.push(n);break;case 3:n=new PointEffect(o[i],t,r),this.effectElements.push(n);break;case 4:case 7:n=new CheckboxEffect(o[i],t,r),this.effectElements.push(n);break;case 10:n=new LayerIndexEffect(o[i],t,r),this.effectElements.push(n);break;case 5:n=new EffectsManager(o[i],t,r),this.effectElements.push(n);break;case 6:n=new NoValueEffect(o[i],t,r),this.effectElements.push(n)}};var bodymovinjs={};bodymovinjs.play=play,bodymovinjs.pause=pause,bodymovinjs.togglePause=togglePause,bodymovinjs.setSpeed=setSpeed,bodymovinjs.setDirection=setDirection,bodymovinjs.stop=stop,bodymovinjs.moveFrame=moveFrame,bodymovinjs.searchAnimations=searchAnimations,bodymovinjs.registerAnimation=registerAnimation,bodymovinjs.loadAnimation=loadAnimation,bodymovinjs.setSubframeRendering=setSubframeRendering,bodymovinjs.resize=resize,bodymovinjs.start=start,bodymovinjs.goToAndStop=goToAndStop,bodymovinjs.destroy=destroy,bodymovinjs.setQuality=setQuality,bodymovinjs.installPlugin=installPlugin,bodymovinjs.__getFactory=getFactory,bodymovinjs.version="4.4.26";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index],queryString=myScript.src.replace(/^[^\?]+\??/,"");renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return bodymovinjs})},{}],9:[function(){},{}],10:[function(e,t,r){!function(e,i){"object"==typeof r&&"object"==typeof t?t.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof r?r.dat=i():e.dat=i()}(this,function(){return function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var n=r(1),a=i(n);e.exports=a["default"]},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var n=r(2),a=i(n),o=r(6),s=i(o),l=r(3),u=i(l),c=r(7),h=i(c),p=r(8),d=i(p),f=r(10),m=i(f),v=r(11),g=i(v),y=r(12),b=i(y),_=r(13),x=i(_),w=r(14),T=i(w),M=r(15),S=i(M),E=r(16),P=i(E),A=r(9),C=i(A),O=r(17),k=i(O);t["default"]={color:{Color:a["default"],math:s["default"],interpret:u["default"]},controllers:{Controller:h["default"],BooleanController:d["default"],OptionController:m["default"],StringController:g["default"],NumberController:b["default"],NumberControllerBox:x["default"],NumberControllerSlider:T["default"],FunctionController:S["default"],ColorController:P["default"]},dom:{dom:C["default"]},gui:{GUI:k["default"]},GUI:k["default"]}},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,r){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(m.recalculateRGB(this,t,r),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(m.recalculateRGB(this,t,r),this.__state.space="RGB"),this.__state[t]=e}})}function o(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(m.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(m.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}t.__esModule=!0;var s=r(3),l=i(s),u=r(6),c=i(u),h=r(4),p=i(h),d=r(5),f=i(d),m=function(){function e(){if(n(this,e),this.__state=l["default"].apply(this,arguments),this.__state===!1)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return e.prototype.toString=function(){return p["default"](this)},e.prototype.toOriginal=function(){return this.__state.conversion.write(this)},e}();m.recalculateRGB=function(e,t,r){if("HEX"===e.__state.space)e.__state[t]=c["default"].component_from_hex(e.__state.hex,r);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");f["default"].extend(e.__state,c["default"].hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},m.recalculateHSV=function(e){var t=c["default"].rgb_to_hsv(e.r,e.g,e.b);f["default"].extend(e.__state,{s:t.s,v:t.v}),f["default"].isNaN(t.h)?f["default"].isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},m.COMPONENTS=["r","g","b","h","s","v","hex","a"],a(m.prototype,"r",2),a(m.prototype,"g",1),a(m.prototype,"b",0),o(m.prototype,"h"),o(m.prototype,"s"),o(m.prototype,"v"),Object.defineProperty(m.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(m.prototype,"hex",{get:function(){return"HEX"!==!this.__state.space&&(this.__state.hex=c["default"].rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}}),t["default"]=m},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var n=r(4),a=i(n),o=r(5),s=i(o),l=[{litmus:s["default"].isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:a["default"]},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:a["default"]},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:a["default"]},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:a["default"]}}},{litmus:s["default"].isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:s["default"].isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:s["default"].isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(s["default"].isNumber(e.r)&&s["default"].isNumber(e.g)&&s["default"].isNumber(e.b)&&s["default"].isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(s["default"].isNumber(e.r)&&s["default"].isNumber(e.g)&&s["default"].isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(s["default"].isNumber(e.h)&&s["default"].isNumber(e.s)&&s["default"].isNumber(e.v)&&s["default"].isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(s["default"].isNumber(e.h)&&s["default"].isNumber(e.s)&&s["default"].isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],u=void 0,c=void 0,h=function(){c=!1;var e=arguments.length>1?s["default"].toArray(arguments):arguments[0];return s["default"].each(l,function(t){return t.litmus(e)?(s["default"].each(t.conversions,function(t,r){return u=t.read(e),c===!1&&u!==!1?(c=u,u.conversionName=r,u.conversion=t,s["default"].BREAK):void 0}),s["default"].BREAK):void 0}),c};t["default"]=h},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0,t["default"]=function(e){if(1===e.a||a["default"].isUndefined(e.a)){for(var t=e.hex.toString(16);t.length<6;)t="0"+t;return"#"+t}return"rgba("+Math.round(e.r)+","+Math.round(e.g)+","+Math.round(e.b)+","+e.a+")"};var n=r(5),a=i(n)},function(e,t){"use strict";t.__esModule=!0;var r=Array.prototype.forEach,i=Array.prototype.slice,n={BREAK:{},extend:function(e){return this.each(i.call(arguments,1),function(t){var r=this.isObject(t)?Object.keys(t):[];r.forEach(function(r){this.isUndefined(t[r])||(e[r]=t[r])}.bind(this))},this),e},defaults:function(e){return this.each(i.call(arguments,1),function(t){var r=this.isObject(t)?Object.keys(t):[];r.forEach(function(r){this.isUndefined(e[r])&&(e[r]=t[r])}.bind(this))},this),e},compose:function(){var e=i.call(arguments);return function(){for(var t=i.call(arguments),r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},each:function(e,t,i){if(e)if(r&&e.forEach&&e.forEach===r)e.forEach(t,i);else if(e.length===e.length+0){var n=void 0,a=void 0;for(n=0,a=e.length;a>n;n++)if(n in e&&t.call(i,e[n],n)===this.BREAK)return}else for(var o in e)if(t.call(i,e[o],o)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t){var r=void 0;return function(){function i(){r=null}var n=this,a=arguments,o=!r;clearTimeout(r),r=setTimeout(i,t),o&&e.apply(n,a)}},toArray:function(e){return e.toArray?e.toArray():i.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return e===!1||e===!0},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)}};t["default"]=n},function(e,t){"use strict";t.__esModule=!0;var r=void 0,i={hsv_to_rgb:function(e,t,r){var i=Math.floor(e/60)%6,n=e/60-Math.floor(e/60),a=r*(1-t),o=r*(1-n*t),s=r*(1-(1-n)*t),l=[[r,s,a],[o,r,a],[a,r,s],[a,o,r],[s,a,r],[r,a,o]][i];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,r){var i=Math.min(e,t,r),n=Math.max(e,t,r),a=n-i,o=void 0,s=void 0;return 0===n?{h:0/0,s:0,v:0}:(s=a/n,o=e===n?(t-r)/a:t===n?2+(r-e)/a:4+(e-t)/a,o/=6,0>o&&(o+=1),{h:360*o,s:s,v:n/255})},rgb_to_hex:function(e,t,r){var i=this.hex_with_component(0,2,e);return i=this.hex_with_component(i,1,t),i=this.hex_with_component(i,0,r)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,i){return i<<(r=8*t)|e&~(255<<r)}};t["default"]=i},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=function(){function e(t,i){r(this,e),this.initialValue=t[i],this.domElement=document.createElement("div"),this.object=t,this.property=i,this.__onChange=void 0,this.__onFinishChange=void 0}return e.prototype.onChange=function(e){return this.__onChange=e,this},e.prototype.onFinishChange=function(e){return this.__onFinishChange=e,this},e.prototype.setValue=function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this},e.prototype.getValue=function(){return this.object[this.property]},e.prototype.updateDisplay=function(){return this},e.prototype.isModified=function(){return this.initialValue!==this.getValue()},e}();t["default"]=i},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=r(7),l=i(s),u=r(9),c=i(u),h=function(e){function t(r,i){function o(){l.setValue(!l.__prev)}n(this,t);var s=a(this,e.call(this,r,i)),l=s;return s.__prev=s.getValue(),s.__checkbox=document.createElement("input"),s.__checkbox.setAttribute("type","checkbox"),c["default"].bind(s.__checkbox,"change",o,!1),s.domElement.appendChild(s.__checkbox),s.updateDisplay(),s}return o(t,e),t.prototype.setValue=function(t){var r=e.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),r},t.prototype.updateDisplay=function(){return this.getValue()===!0?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1,e.prototype.updateDisplay.call(this)},t}(l["default"]);t["default"]=h},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e){if("0"===e||o["default"].isUndefined(e))return 0;var t=e.match(u);return o["default"].isNull(t)?0:parseFloat(t[1])}t.__esModule=!0;var a=r(5),o=i(a),s={HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},l={};o["default"].each(s,function(e,t){o["default"].each(e,function(e){l[e]=t})});var u=/(\d+(\.\d+)?)px/,c={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,r){var i=r,n=t;o["default"].isUndefined(n)&&(n=!0),o["default"].isUndefined(i)&&(i=!0),e.style.position="absolute",n&&(e.style.left=0,e.style.right=0),i&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,r,i){var n=r||{},a=l[t];if(!a)throw new Error("Event type "+t+" not supported.");var s=document.createEvent(a);switch(a){case"MouseEvents":var u=n.x||n.clientX||0,c=n.y||n.clientY||0;s.initMouseEvent(t,n.bubbles||!1,n.cancelable||!0,window,n.clickCount||1,0,0,u,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var h=s.initKeyboardEvent||s.initKeyEvent;o["default"].defaults(n,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),h(t,n.bubbles||!1,n.cancelable,window,n.ctrlKey,n.altKey,n.shiftKey,n.metaKey,n.keyCode,n.charCode);break;default:s.initEvent(t,n.bubbles||!1,n.cancelable||!0)}o["default"].defaults(s,i),e.dispatchEvent(s)},bind:function(e,t,r,i){var n=i||!1;return e.addEventListener?e.addEventListener(t,r,n):e.attachEvent&&e.attachEvent("on"+t,r),c},unbind:function(e,t,r,i){var n=i||!1;return e.removeEventListener?e.removeEventListener(t,r,n):e.detachEvent&&e.detachEvent("on"+t,r),c},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var r=e.className.split(/ +/);-1===r.indexOf(t)&&(r.push(t),e.className=r.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return c},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var r=e.className.split(/ +/),i=r.indexOf(t);-1!==i&&(r.splice(i,1),e.className=r.join(" "))}else e.className=void 0;return c},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return n(t["border-left-width"])+n(t["border-right-width"])+n(t["padding-left"])+n(t["padding-right"])+n(t.width)},getHeight:function(e){var t=getComputedStyle(e);return n(t["border-top-width"])+n(t["border-bottom-width"])+n(t["padding-top"])+n(t["padding-bottom"])+n(t.height)},getOffset:function(e){var t=e,r={left:0,top:0};if(t.offsetParent)do r.left+=t.offsetLeft,r.top+=t.offsetTop,t=t.offsetParent;while(t);return r},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}};t["default"]=c},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=r(7),l=i(s),u=r(9),c=i(u),h=r(5),p=i(h),d=function(e){function t(r,i,o){n(this,t);var s=a(this,e.call(this,r,i)),l=o,u=s;return s.__select=document.createElement("select"),p["default"].isArray(l)&&!function(){var e={};p["default"].each(l,function(t){e[t]=t}),l=e}(),p["default"].each(l,function(e,t){var r=document.createElement("option");r.innerHTML=t,r.setAttribute("value",e),u.__select.appendChild(r)}),s.updateDisplay(),c["default"].bind(s.__select,"change",function(){var e=this.options[this.selectedIndex].value;u.setValue(e)}),s.domElement.appendChild(s.__select),s}return o(t,e),t.prototype.setValue=function(t){var r=e.prototype.setValue.call(this,t);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),r},t.prototype.updateDisplay=function(){return c["default"].isActive(this.__select)?this:(this.__select.value=this.getValue(),e.prototype.updateDisplay.call(this))},t}(l["default"]);t["default"]=d},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=r(7),l=i(s),u=r(9),c=i(u),h=function(e){function t(r,i){function o(){u.setValue(u.__input.value)}function s(){u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}n(this,t);var l=a(this,e.call(this,r,i)),u=l;return l.__input=document.createElement("input"),l.__input.setAttribute("type","text"),c["default"].bind(l.__input,"keyup",o),c["default"].bind(l.__input,"change",o),c["default"].bind(l.__input,"blur",s),c["default"].bind(l.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),l.updateDisplay(),l.domElement.appendChild(l.__input),l}return o(t,e),t.prototype.updateDisplay=function(){return c["default"].isActive(this.__input)||(this.__input.value=this.getValue()),e.prototype.updateDisplay.call(this)},t}(l["default"]);t["default"]=h},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}t.__esModule=!0;var l=r(7),u=i(l),c=r(5),h=i(c),p=function(e){function t(r,i,o){n(this,t);var l=a(this,e.call(this,r,i)),u=o||{};return l.__min=u.min,l.__max=u.max,l.__step=u.step,l.__impliedStep=h["default"].isUndefined(l.__step)?0===l.initialValue?1:Math.pow(10,Math.floor(Math.log(Math.abs(l.initialValue))/Math.LN10))/10:l.__step,l.__precision=s(l.__impliedStep),l}return o(t,e),t.prototype.setValue=function(t){var r=t;return void 0!==this.__min&&r<this.__min?r=this.__min:void 0!==this.__max&&r>this.__max&&(r=this.__max),void 0!==this.__step&&r%this.__step!==0&&(r=Math.round(r/this.__step)*this.__step),e.prototype.setValue.call(this,r)},t.prototype.min=function(e){return this.__min=e,this},t.prototype.max=function(e){return this.__max=e,this},t.prototype.step=function(e){return this.__step=e,this.__impliedStep=e,this.__precision=s(e),this},t}(u["default"]);t["default"]=p},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}t.__esModule=!0;var l=r(12),u=i(l),c=r(9),h=i(c),p=r(5),d=i(p),f=function(e){function t(r,i,o){function s(){var e=parseFloat(m.__input.value);d["default"].isNaN(e)||m.setValue(e)}function l(){s(),m.__onFinishChange&&m.__onFinishChange.call(m,m.getValue())}function u(e){document.activeElement.blur();var t=v-e.clientY;m.setValue(m.getValue()+t*m.__impliedStep),v=e.clientY}function c(){h["default"].unbind(window,"mousemove",u),h["default"].unbind(window,"mouseup",c)}function p(e){h["default"].bind(window,"mousemove",u),h["default"].bind(window,"mouseup",c),v=e.clientY}n(this,t);var f=a(this,e.call(this,r,i,o));f.__truncationSuspended=!1;var m=f,v=void 0;return f.__input=document.createElement("input"),f.__input.setAttribute("type","text"),h["default"].bind(f.__input,"change",s),h["default"].bind(f.__input,"blur",l),h["default"].bind(f.__input,"mousedown",p),h["default"].bind(f.__input,"keydown",function(e){13===e.keyCode&&(m.__truncationSuspended=!0,this.blur(),m.__truncationSuspended=!1)}),f.updateDisplay(),f.domElement.appendChild(f.__input),f}return o(t,e),t.prototype.updateDisplay=function(){return h["default"].isActive(this.__input)?this:(this.__input.value=this.__truncationSuspended?this.getValue():s(this.getValue(),this.__precision),e.prototype.updateDisplay.call(this))},t}(u["default"]);t["default"]=f},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,i,n){return i+(n-i)*((e-t)/(r-t))}t.__esModule=!0;var l=r(12),u=i(l),c=r(9),h=i(c),p=function(e){function t(r,i,o,l,u){function c(e){document.activeElement.blur(),h["default"].bind(window,"mousemove",p),h["default"].bind(window,"mouseup",d),p(e)}function p(e){e.preventDefault();var t=m.__background.getBoundingClientRect();return m.setValue(s(e.clientX,t.left,t.right,m.__min,m.__max)),!1}function d(){h["default"].unbind(window,"mousemove",p),h["default"].unbind(window,"mouseup",d),m.__onFinishChange&&m.__onFinishChange.call(m,m.getValue())}n(this,t);var f=a(this,e.call(this,r,i,{min:o,max:l,step:u})),m=f;return f.__background=document.createElement("div"),f.__foreground=document.createElement("div"),h["default"].bind(f.__background,"mousedown",c),h["default"].addClass(f.__background,"slider"),h["default"].addClass(f.__foreground,"slider-fg"),f.updateDisplay(),f.__background.appendChild(f.__foreground),f.domElement.appendChild(f.__background),f}return o(t,e),t.prototype.updateDisplay=function(){var t=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*t+"%",e.prototype.updateDisplay.call(this)},t}(u["default"]);t["default"]=p},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=r(7),l=i(s),u=r(9),c=i(u),h=function(e){function t(r,i,o){n(this,t);var s=a(this,e.call(this,r,i)),l=s;return s.__button=document.createElement("div"),s.__button.innerHTML=void 0===o?"Fire":o,c["default"].bind(s.__button,"click",function(e){return e.preventDefault(),l.fire(),!1}),c["default"].addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return o(t,e),t.prototype.fire=function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())},t}(l["default"]);t["default"]=h},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t,r,i){e.style.background="",y["default"].each(_,function(n){e.style.cssText+="background: "+n+"linear-gradient("+t+", "+r+" 0%, "+i+" 100%); "})}function l(e){e.style.background="",e.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",e.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",e.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}t.__esModule=!0;var u=r(7),c=i(u),h=r(9),p=i(h),d=r(2),f=i(d),m=r(3),v=i(m),g=r(5),y=i(g),b=function(e){function t(r,i){function o(e){m(e),p["default"].bind(window,"mousemove",m),p["default"].bind(window,"mouseup",u)}function u(){p["default"].unbind(window,"mousemove",m),p["default"].unbind(window,"mouseup",u),d()}function c(){var e=v["default"](this.value);e!==!1?(_.__color.__state=e,_.setValue(_.__color.toOriginal())):this.value=_.__color.toString()}function h(){p["default"].unbind(window,"mousemove",g),p["default"].unbind(window,"mouseup",h),d()}function d(){_.__onFinishChange&&_.__onFinishChange.call(_,_.__color.toString())}function m(e){e.preventDefault();var t=_.__saturation_field.getBoundingClientRect(),r=(e.clientX-t.left)/(t.right-t.left),i=1-(e.clientY-t.top)/(t.bottom-t.top);return i>1?i=1:0>i&&(i=0),r>1?r=1:0>r&&(r=0),_.__color.v=i,_.__color.s=r,_.setValue(_.__color.toOriginal()),!1}function g(e){e.preventDefault();var t=_.__hue_field.getBoundingClientRect(),r=1-(e.clientY-t.top)/(t.bottom-t.top);return r>1?r=1:0>r&&(r=0),_.__color.h=360*r,
_.setValue(_.__color.toOriginal()),!1}n(this,t);var b=a(this,e.call(this,r,i));b.__color=new f["default"](b.getValue()),b.__temp=new f["default"](0);var _=b;b.domElement=document.createElement("div"),p["default"].makeSelectable(b.domElement,!1),b.__selector=document.createElement("div"),b.__selector.className="selector",b.__saturation_field=document.createElement("div"),b.__saturation_field.className="saturation-field",b.__field_knob=document.createElement("div"),b.__field_knob.className="field-knob",b.__field_knob_border="2px solid ",b.__hue_knob=document.createElement("div"),b.__hue_knob.className="hue-knob",b.__hue_field=document.createElement("div"),b.__hue_field.className="hue-field",b.__input=document.createElement("input"),b.__input.type="text",b.__input_textShadow="0 1px 1px ",p["default"].bind(b.__input,"keydown",function(e){13===e.keyCode&&c.call(this)}),p["default"].bind(b.__input,"blur",c),p["default"].bind(b.__selector,"mousedown",function(){p["default"].addClass(this,"drag").bind(window,"mouseup",function(){p["default"].removeClass(_.__selector,"drag")})});var x=document.createElement("div");return y["default"].extend(b.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),y["default"].extend(b.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:b.__field_knob_border+(b.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),y["default"].extend(b.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),y["default"].extend(b.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),y["default"].extend(x.style,{width:"100%",height:"100%",background:"none"}),s(x,"top","rgba(0,0,0,0)","#000"),y["default"].extend(b.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),l(b.__hue_field),y["default"].extend(b.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:b.__input_textShadow+"rgba(0,0,0,0.7)"}),p["default"].bind(b.__saturation_field,"mousedown",o),p["default"].bind(b.__field_knob,"mousedown",o),p["default"].bind(b.__hue_field,"mousedown",function(e){g(e),p["default"].bind(window,"mousemove",g),p["default"].bind(window,"mouseup",h)}),b.__saturation_field.appendChild(x),b.__selector.appendChild(b.__field_knob),b.__selector.appendChild(b.__saturation_field),b.__selector.appendChild(b.__hue_field),b.__hue_field.appendChild(b.__hue_knob),b.domElement.appendChild(b.__input),b.domElement.appendChild(b.__selector),b.updateDisplay(),b}return o(t,e),t.prototype.updateDisplay=function(){var e=v["default"](this.getValue());if(e!==!1){var t=!1;y["default"].each(f["default"].COMPONENTS,function(r){return y["default"].isUndefined(e[r])||y["default"].isUndefined(this.__color.__state[r])||e[r]===this.__color.__state[r]?void 0:(t=!0,{})},this),t&&y["default"].extend(this.__color.__state,e)}y["default"].extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var r=this.__color.v<.5||this.__color.s>.5?255:0,i=255-r;y["default"].extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+r+","+r+","+r+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,s(this.__saturation_field,"left","#fff",this.__temp.toString()),y["default"].extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+r+","+r+","+r+")",textShadow:this.__input_textShadow+"rgba("+i+","+i+","+i+",.7)"})},t}(c["default"]),_=["-moz-","-o-","-webkit-","-ms-",""];t["default"]=b},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r){var i=document.createElement("li");return t&&i.appendChild(t),r?e.__ul.insertBefore(i,r):e.__ul.appendChild(i),e.onResize(),i}function a(e,t){var r=e.__preset_select[e.__preset_select.selectedIndex];r.innerHTML=t?r.value+"*":r.value}function o(e,t,r){if(r.__li=t,r.__gui=e,H["default"].extend(r,{options:function(t){if(arguments.length>1){var i=r.__li.nextElementSibling;return r.remove(),l(e,r.object,r.property,{before:i,factoryArgs:[H["default"].toArray(arguments)]})}if(H["default"].isArray(t)||H["default"].isObject(t)){var n=r.__li.nextElementSibling;return r.remove(),l(e,r.object,r.property,{before:n,factoryArgs:[t]})}},name:function(e){return r.__li.firstElementChild.firstElementChild.innerHTML=e,r},listen:function(){return r.__gui.listen(r),r},remove:function(){return r.__gui.remove(r),r}}),r instanceof I["default"])!function(){var e=new L["default"](r.object,r.property,{min:r.__min,max:r.__max,step:r.__step});H["default"].each(["updateDisplay","onChange","onFinishChange","step"],function(t){var i=r[t],n=e[t];r[t]=e[t]=function(){var t=Array.prototype.slice.call(arguments);return n.apply(e,t),i.apply(r,t)}}),U["default"].addClass(t,"has-slider"),r.domElement.insertBefore(e.domElement,r.domElement.firstElementChild)}();else if(r instanceof L["default"]){var i=function(t){if(H["default"].isNumber(r.__min)&&H["default"].isNumber(r.__max)){var i=r.__li.firstElementChild.firstElementChild.innerHTML,n=r.__gui.__listening.indexOf(r)>-1;r.remove();var a=l(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[r.__min,r.__max,r.__step]});return a.name(i),n&&a.listen(),a}return t};r.min=H["default"].compose(i,r.min),r.max=H["default"].compose(i,r.max)}else r instanceof A["default"]?(U["default"].bind(t,"click",function(){U["default"].fakeEvent(r.__checkbox,"click")}),U["default"].bind(r.__checkbox,"click",function(e){e.stopPropagation()})):r instanceof O["default"]?(U["default"].bind(t,"click",function(){U["default"].fakeEvent(r.__button,"click")}),U["default"].bind(t,"mouseover",function(){U["default"].addClass(r.__button,"hover")}),U["default"].bind(t,"mouseout",function(){U["default"].removeClass(r.__button,"hover")})):r instanceof F["default"]&&(U["default"].addClass(t,"color"),r.updateDisplay=H["default"].compose(function(e){return t.style.borderLeftColor=r.__color.toString(),e},r.updateDisplay),r.updateDisplay());r.setValue=H["default"].compose(function(t){return e.getRoot().__preset_select&&r.isModified()&&a(e.getRoot(),!0),t},r.setValue)}function s(e,t){var r=e.getRoot(),i=r.__rememberedObjects.indexOf(t.object);if(-1!==i){var n=r.__rememberedObjectIndecesToControllers[i];if(void 0===n&&(n={},r.__rememberedObjectIndecesToControllers[i]=n),n[t.property]=t,r.load&&r.load.remembered){var a=r.load.remembered,o=void 0;if(a[e.preset])o=a[e.preset];else{if(!a[$])return;o=a[$]}if(o[i]&&void 0!==o[i][t.property]){var s=o[i][t.property];t.initialValue=s,t.setValue(s)}}}}function l(e,t,r,i){if(void 0===t[r])throw new Error('Object "'+t+'" has no property "'+r+'"');var a=void 0;if(i.color)a=new F["default"](t,r);else{var l=[t,r].concat(i.factoryArgs);a=M["default"].apply(e,l)}i.before instanceof E["default"]&&(i.before=i.before.__li),s(e,a),U["default"].addClass(a.domElement,"c");var u=document.createElement("span");U["default"].addClass(u,"property-name"),u.innerHTML=a.property,i.label&&(u.style.width="100%");var c=document.createElement("div");c.appendChild(u),c.appendChild(a.domElement);var h=n(e,c,i.before);return U["default"].addClass(h,ie.CLASS_CONTROLLER_ROW),a instanceof F["default"]?U["default"].addClass(h,"color"):U["default"].addClass(h,y(a.getValue())),o(e,h,a),e.__controllers.push(a),a}function u(e,t){return document.location.href+"."+t}function c(e,t,r){var i=document.createElement("option");i.innerHTML=t,i.value=t,e.__preset_select.appendChild(i),r&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function h(e,t){t.style.display=e.useLocalStorage?"block":"none"}function p(e){var t=e.__save_row=document.createElement("li");U["default"].addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),U["default"].addClass(t,"save-row");var r=document.createElement("span");r.innerHTML="&nbsp;",U["default"].addClass(r,"button gears");var i=document.createElement("span");i.innerHTML="Save",U["default"].addClass(i,"button"),U["default"].addClass(i,"save");var n=document.createElement("span");n.innerHTML="New",U["default"].addClass(n,"button"),U["default"].addClass(n,"save-as");var a=document.createElement("span");a.innerHTML="Revert",U["default"].addClass(a,"button"),U["default"].addClass(a,"revert");var o=e.__preset_select=document.createElement("select");e.load&&e.load.remembered?H["default"].each(e.load.remembered,function(t,r){c(e,r,r===e.preset)}):c(e,$,!1),U["default"].bind(o,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(o),t.appendChild(r),t.appendChild(i),t.appendChild(n),t.appendChild(a),Z&&!function(){var t=document.getElementById("dg-local-explain"),r=document.getElementById("dg-local-storage"),i=document.getElementById("dg-save-locally");i.style.display="block","true"===localStorage.getItem(u(e,"isLocal"))&&r.setAttribute("checked","checked"),h(e,t),U["default"].bind(r,"change",function(){e.useLocalStorage=!e.useLocalStorage,h(e,t)})}();var s=document.getElementById("dg-new-constructor");U["default"].bind(s,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||Q.hide()}),U["default"].bind(r,"click",function(){s.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),Q.show(),s.focus(),s.select()}),U["default"].bind(i,"click",function(){e.save()}),U["default"].bind(n,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),U["default"].bind(a,"click",function(){e.revert()})}function d(e){function t(t){return t.preventDefault(),e.width+=n-t.clientX,e.onResize(),n=t.clientX,!1}function r(){U["default"].removeClass(e.__closeButton,ie.CLASS_DRAG),U["default"].unbind(window,"mousemove",t),U["default"].unbind(window,"mouseup",r)}function i(i){return i.preventDefault(),n=i.clientX,U["default"].addClass(e.__closeButton,ie.CLASS_DRAG),U["default"].bind(window,"mousemove",t),U["default"].bind(window,"mouseup",r),!1}var n=void 0;e.__resize_handle=document.createElement("div"),H["default"].extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),U["default"].bind(e.__resize_handle,"mousedown",i),U["default"].bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function f(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function m(e,t){var r={};return H["default"].each(e.__rememberedObjects,function(i,n){var a={},o=e.__rememberedObjectIndecesToControllers[n];H["default"].each(o,function(e,r){a[r]=t?e.initialValue:e.getValue()}),r[n]=a}),r}function v(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function g(e){0!==e.length&&B["default"].call(window,function(){g(e)}),H["default"].each(e,function(e){e.updateDisplay()})}var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b=r(18),_=i(b),x=r(19),w=i(x),T=r(20),M=i(T),S=r(7),E=i(S),P=r(8),A=i(P),C=r(15),O=i(C),k=r(13),L=i(k),R=r(14),I=i(R),D=r(16),F=i(D),N=r(21),B=i(N),G=r(22),j=i(G),V=r(9),U=i(V),z=r(5),H=i(z),W=r(23),X=i(W);_["default"].inject(X["default"]);var Y="dg",q=72,K=20,$="Default",Z=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}(),Q=void 0,J=!0,ee=void 0,te=!1,re=[],ie=function ne(e){function t(){var e=r.getRoot();e.width+=1,H["default"].defer(function(){e.width-=1})}var r=this,i=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),U["default"].addClass(this.domElement,Y),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],i=H["default"].defaults(i,{autoPlace:!0,width:ne.DEFAULT_WIDTH}),i=H["default"].defaults(i,{resizable:i.autoPlace,hideable:i.autoPlace}),H["default"].isUndefined(i.load)?i.load={preset:$}:i.preset&&(i.load.preset=i.preset),H["default"].isUndefined(i.parent)&&i.hideable&&re.push(this),i.resizable=H["default"].isUndefined(i.parent)&&i.resizable,i.autoPlace&&H["default"].isUndefined(i.scrollable)&&(i.scrollable=!0);var a=Z&&"true"===localStorage.getItem(u(this,"isLocal")),o=void 0;if(Object.defineProperties(this,{parent:{get:function(){return i.parent}},scrollable:{get:function(){return i.scrollable}},autoPlace:{get:function(){return i.autoPlace}},preset:{get:function(){return r.parent?r.getRoot().preset:i.load.preset},set:function(e){r.parent?r.getRoot().preset=e:i.load.preset=e,v(this),r.revert()}},width:{get:function(){return i.width},set:function(e){i.width=e,f(r,e)}},name:{get:function(){return i.name},set:function(e){i.name=e,titleRowName&&(titleRowName.innerHTML=i.name)}},closed:{get:function(){return i.closed},set:function(e){i.closed=e,i.closed?U["default"].addClass(r.__ul,ne.CLASS_CLOSED):U["default"].removeClass(r.__ul,ne.CLASS_CLOSED),this.onResize(),r.__closeButton&&(r.__closeButton.innerHTML=e?ne.TEXT_OPEN:ne.TEXT_CLOSED)}},load:{get:function(){return i.load}},useLocalStorage:{get:function(){return a},set:function(e){Z&&(a=e,e?U["default"].bind(window,"unload",o):U["default"].unbind(window,"unload",o),localStorage.setItem(u(r,"isLocal"),e))}}}),H["default"].isUndefined(i.parent)){if(i.closed=!1,U["default"].addClass(this.domElement,ne.CLASS_MAIN),U["default"].makeSelectable(this.domElement,!1),Z&&a){r.useLocalStorage=!0;var s=localStorage.getItem(u(this,"gui"));s&&(i.load=JSON.parse(s))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=ne.TEXT_CLOSED,U["default"].addClass(this.__closeButton,ne.CLASS_CLOSE_BUTTON),this.domElement.appendChild(this.__closeButton),U["default"].bind(this.__closeButton,"click",function(){r.closed=!r.closed})}else{void 0===i.closed&&(i.closed=!0);var l=document.createTextNode(i.name);U["default"].addClass(l,"controller-name");var c=n(r,l),h=function(e){return e.preventDefault(),r.closed=!r.closed,!1};U["default"].addClass(this.__ul,ne.CLASS_CLOSED),U["default"].addClass(c,"title"),U["default"].bind(c,"click",h),i.closed||(this.closed=!1)}i.autoPlace&&(H["default"].isUndefined(i.parent)&&(J&&(ee=document.createElement("div"),U["default"].addClass(ee,Y),U["default"].addClass(ee,ne.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(ee),J=!1),ee.appendChild(this.domElement),U["default"].addClass(this.domElement,ne.CLASS_AUTO_PLACE)),this.parent||f(r,i.width)),this.__resizeHandler=function(){r.onResize()},U["default"].bind(window,"resize",this.__resizeHandler),U["default"].bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),U["default"].bind(this.__ul,"transitionend",this.__resizeHandler),U["default"].bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),i.resizable&&d(this),o=function(){Z&&"true"===localStorage.getItem(u(r,"isLocal"))&&localStorage.setItem(u(r,"gui"),JSON.stringify(r.getSaveObject()))},this.saveToLocalStorageIfPossible=o,i.parent||t()};ie.toggleHide=function(){te=!te,H["default"].each(re,function(e){e.domElement.style.display=te?"none":""})},ie.CLASS_AUTO_PLACE="a",ie.CLASS_AUTO_PLACE_CONTAINER="ac",ie.CLASS_MAIN="main",ie.CLASS_CONTROLLER_ROW="cr",ie.CLASS_TOO_TALL="taller-than-window",ie.CLASS_CLOSED="closed",ie.CLASS_CLOSE_BUTTON="close-button",ie.CLASS_DRAG="drag",ie.DEFAULT_WIDTH=245,ie.TEXT_CLOSED="Close Controls",ie.TEXT_OPEN="Open Controls",ie._keydownHandler=function(e){"text"===document.activeElement.type||e.which!==q&&e.keyCode!==q||ie.toggleHide()},U["default"].bind(window,"keydown",ie._keydownHandler,!1),H["default"].extend(ie.prototype,{add:function(e,t){return l(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return l(this,e,t,{color:!0})},addLabel:function(e){var t={};return t[e]="",l(this,t,e,{label:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;H["default"].defer(function(){t.onResize()})},destroy:function(){this.autoPlace&&ee.removeChild(this.domElement),this.removeAllFolders(),U["default"].unbind(window,"keydown",ie._keydownHandler,!1),U["default"].unbind(window,"resize",this.__resizeHandler),this.saveToLocalStorageIfPossible&&U["default"].unbind(window,"unload",this.saveToLocalStorageIfPossible)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var r=new ie(t);this.__folders[e]=r;var i=n(this,r.domElement);return U["default"].addClass(i,"folder"),r},removeFolder:function(e){if("undefined"===this.__folders[e])throw new Error('The folder named "'+e+'" does not exist');this.__folders[e].domElement.remove(),delete this.__folders[e]},removeAllFolders:function(){H["default"].each(this.__folders,function(e){this.removeFolder(e.name)}.bind(this))},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:H["default"].debounce(function(){var e=this.getRoot();if(e.scrollable){var t=U["default"].getOffset(e.__ul).top,r=0;H["default"].each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(r+=U["default"].getHeight(t))}),window.innerHeight-t-K<r?(U["default"].addClass(e.domElement,ie.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-K+"px"):(U["default"].removeClass(e.domElement,ie.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&H["default"].defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},200),remember:function(){if(H["default"].isUndefined(Q)&&(Q=new j["default"],Q.domElement.innerHTML=w["default"]),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;H["default"].each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&p(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&f(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=m(this)),e.folders={},H["default"].each(this.__folders,function(t,r){e.folders[r]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=m(this),a(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[$]=m(this,!0)),this.load.remembered[e]=m(this),this.preset=e,c(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){H["default"].each(this.__controllers,function(t){this.getRoot().load.remembered?s(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),H["default"].each(this.__folders,function(e){e.revert(e)}),e||a(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&g(this.__listening)},updateDisplay:function(){H["default"].each(this.__controllers,function(e){e.updateDisplay()}),H["default"].each(this.__folders,function(e){e.updateDisplay()})}}),e.exports=ie},function(e){"use strict";e.exports={load:function(e,t){var r=t||document,i=r.createElement("link");i.type="text/css",i.rel="stylesheet",i.href=e,r.getElementsByTagName("head")[0].appendChild(i)},inject:function(e,t){var r=t||document,i=document.createElement("style");i.type="text/css",i.innerHTML=e;var n=r.getElementsByTagName("head")[0];try{n.appendChild(i)}catch(e){}}}},function(e){e.exports="<div id=dg-save class=\"dg dialogue\"> Here's the new load parameter for your <code>GUI</code>'s constructor: <textarea id=dg-new-constructor></textarea> <div id=dg-save-locally> <input id=dg-local-storage type=checkbox /> Automatically save values to <code>localStorage</code> on exit. <div id=dg-local-explain>The values saved to <code>localStorage</code> will override those passed to <code>dat.GUI</code>'s constructor. This makes it easier to work incrementally, but <code>localStorage</code> is fragile, and your friends may not see the same values you do. </div> </div> </div>"},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var n=r(10),a=i(n),o=r(13),s=i(o),l=r(14),u=i(l),c=r(11),h=i(c),p=r(15),d=i(p),f=r(8),m=i(f),v=r(5),g=i(v),y=function(e,t){var r=e[t];return g["default"].isArray(arguments[2])||g["default"].isObject(arguments[2])?new a["default"](e,t,arguments[2]):g["default"].isNumber(r)?g["default"].isNumber(arguments[2])&&g["default"].isNumber(arguments[3])?g["default"].isNumber(arguments[4])?new u["default"](e,t,arguments[2],arguments[3],arguments[4]):new u["default"](e,t,arguments[2],arguments[3]):g["default"].isNumber(arguments[4])?new s["default"](e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new s["default"](e,t,{min:arguments[2],max:arguments[3]}):g["default"].isString(r)?new h["default"](e,t):g["default"].isFunction(r)?new d["default"](e,t,""):g["default"].isBoolean(r)?new m["default"](e,t):null};t["default"]=y},function(e,t){"use strict";function r(e){setTimeout(e,1e3/60)}t.__esModule=!0,t["default"]=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||r},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var a=r(9),o=i(a),s=r(5),l=i(s),u=function(){function e(){n(this,e),this.backgroundElement=document.createElement("div"),l["default"].extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),o["default"].makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),l["default"].extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;o["default"].bind(this.backgroundElement,"click",function(){t.hide()})}return e.prototype.show=function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),l["default"].defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})},e.prototype.hide=function t(){var e=this,t=function r(){e.domElement.style.display="none",e.backgroundElement.style.display="none",o["default"].unbind(e.domElement,"webkitTransitionEnd",r),o["default"].unbind(e.domElement,"transitionend",r),o["default"].unbind(e.domElement,"oTransitionEnd",r)};o["default"].bind(this.domElement,"webkitTransitionEnd",t),o["default"].bind(this.domElement,"transitionend",t),o["default"].bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"},e.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-o["default"].getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-o["default"].getHeight(this.domElement)/2+"px"},e}();t["default"]=u},function(e,t,r){t=e.exports=r(24)(),t.push([e.id,".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1!important}.dg.main .close-button.drag,.dg.main:hover .close-button{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;transition:opacity .1s linear;border:0;position:absolute;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-x:hidden}.dg.a.has-save>ul{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{position:fixed;top:0;z-index:1002}.dg li{-webkit-transition:height .1s ease-out;transition:height .1s ease-out}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;overflow:hidden;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid transparent}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:9px}.dg .c select{margin-top:5px}.dg .cr.boolean,.dg .cr.boolean *,.dg .cr.function,.dg .cr.function *,.dg .cr.function .property-name{cursor:pointer}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco,monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px Lucida Grande,sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid hsla(0,0%,100%,.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2fa1d6}.dg .cr.number input[type=text]{color:#2fa1d6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.boolean:hover,.dg .cr.function:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2fa1d6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}",""])},function(e){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];e.push(r[2]?"@media "+r[2]+"{"+r[1]+"}":r[1])}return e.join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var a=this[n][0];"number"==typeof a&&(i[a]=!0)}for(n=0;n<t.length;n++){var o=t[n];"number"==typeof o[0]&&i[o[0]]||(r&&!o[2]?o[2]=r:r&&(o[2]="("+o[2]+") and ("+r+")"),e.push(o))}},e}}])})},{}],11:[function(e,t){"use strict";function r(){function e(){return!a[r.hidden]}function t(t){a.addEventListener(r.event,function(){t(e())})}var r=s(a);return r?{visible:e,onChange:o(t)}:i()}function i(){return{visible:function(){return!0},onChange:n}}function n(){}var a=e("global/document"),o=e("geval"),s=e("./keys");t.exports=r},{"./keys":12,geval:15,"global/document":16}],12:[function(e,t){"use strict";function r(e){var t=i(e);if(null!=t)return{hidden:n(t+"Hidden"),event:t+"visibilitychange"}}function i(e){return null!=e.hidden?"":null!=e.mozHidden?"moz":null!=e.msHidden?"ms":null!=e.webkitHidden?"webkit":void 0}function n(e){return e.substring(0,1).toLowerCase()+e.substring(1)}t.exports=r},{}],13:[function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function n(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!n(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,n,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(r=this._events[e],o(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(a(r))for(s=Array.prototype.slice.call(arguments,1),u=r.slice(),n=u.length,l=0;n>l;l++)u[l].apply(this,s);

return!0},r.prototype.addListener=function(e,t){var n;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(n=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,n,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],o=r.length,n=-1,r===t||i(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(s=o;s-->0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],i(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],14:[function(e,t){function r(){function e(e){for(var t=0;t<r.length;t++)r[t](e)}function t(e){function t(){var t=r.indexOf(e);-1!==t&&r.splice(t,1)}return r.push(e),t}var r=[];return{broadcast:e,listen:t}}t.exports=r},{}],15:[function(e,t){function r(e){var t=i();return e(t.broadcast),t.listen}var i=e("./event.js");t.exports=r},{"./event.js":14}],16:[function(e,t){(function(r){var i="undefined"!=typeof r?r:"undefined"!=typeof window?window:{},n=e("min-document");if("undefined"!=typeof document)t.exports=document;else{var a=i["__GLOBAL_DOCUMENT_CACHE@4"];a||(a=i["__GLOBAL_DOCUMENT_CACHE@4"]=n),t.exports=a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":9}],17:[function(e,t){(function(e){var r="undefined"!=typeof t&&t.exports&&"undefined"!=typeof e?e:this||window;(r._gsQueue||(r._gsQueue=[])).push(function(){"use strict";r._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,r){var i=function(e){var t,r=[],i=e.length;for(t=0;t!==i;r.push(e[t++]));return r},n=function(e,t,r){var i,n,a=e.cycle;for(i in a)n=a[i],e[i]="function"==typeof n?n(r,t[r]):n[r%n.length];delete e.cycle},a=function(e,t,i){r.call(this,e,t,i),this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=a.prototype.render},o=1e-10,s=r._internals,l=s.isSelector,u=s.isArray,c=a.prototype=r.to({},.1,{}),h=[];a.version="1.19.0",c.constructor=a,c.kill()._gc=!1,a.killTweensOf=a.killDelayedCallsTo=r.killTweensOf,a.getTweensOf=r.getTweensOf,a.lagSmoothing=r.lagSmoothing,a.ticker=r.ticker,a.render=r.render,c.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),r.prototype.invalidate.call(this)},c.updateTo=function(e,t){var i,n=this.ratio,a=this.vars.immediateRender||e.immediateRender;t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay));for(i in e)this.vars[i]=e[i];if(this._initted||a)if(t)this._initted=!1,a&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&r._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var o=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(o,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||a)for(var s,l=1/(1-n),u=this._firstPT;u;)s=u.s+u.c,u.c*=l,u.s=s-u.c,u=u._next;return this},c.render=function(e,t,r){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var i,n,a,l,u,c,h,p,d=this._dirty?this.totalDuration():this._totalDuration,f=this._time,m=this._totalTime,v=this._cycle,g=this._duration,y=this._rawPrevTime;if(e>=d-1e-7?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=g,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(i=!0,n="onComplete",r=r||this._timeline.autoRemoveChildren),0===g&&(this._initted||!this.vars.lazy||r)&&(this._startTime===this._timeline._duration&&(e=0),(0>y||0>=e&&e>=-1e-7||y===o&&"isPause"!==this.data)&&y!==e&&(r=!0,y>o&&(n="onReverseComplete")),this._rawPrevTime=p=!t||e||y===e?e:o)):1e-7>e?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===g&&y>0)&&(n="onReverseComplete",i=this._reversed),0>e&&(this._active=!1,0===g&&(this._initted||!this.vars.lazy||r)&&(y>=0&&(r=!0),this._rawPrevTime=p=!t||e||y===e?e:o)),this._initted||(r=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(l=g+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&e>=m&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!==(1&this._cycle)&&(this._time=g-this._time),this._time>g?this._time=g:this._time<0&&(this._time=0)),this._easeType?(u=this._time/g,c=this._easeType,h=this._easePower,(1===c||3===c&&u>=.5)&&(u=1-u),3===c&&(u*=2),1===h?u*=u:2===h?u*=u*u:3===h?u*=u*u*u:4===h&&(u*=u*u*u*u),this.ratio=1===c?1-u:2===c?u:this._time/g<.5?u/2:1-u/2):this.ratio=this._ease.getRatio(this._time/g)),f===this._time&&!r&&v===this._cycle)return void(m!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate")));if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!r&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=f,this._totalTime=m,this._rawPrevTime=y,this._cycle=v,s.lazyTweens.push(this),void(this._lazy=[e,t]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/g):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==f&&e>=0&&(this._active=!0),0===m&&(2===this._initted&&e>0&&this._init(),this._startAt&&(e>=0?this._startAt.render(e,t,r):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===g)&&(t||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(0>e&&this._startAt&&this._startTime&&this._startAt.render(e,t,r),t||(this._totalTime!==m||n)&&this._callback("onUpdate")),this._cycle!==v&&(t||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),n&&(!this._gc||r)&&(0>e&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,t,r),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[n]&&this._callback(n),0===g&&this._rawPrevTime===o&&p!==o&&(this._rawPrevTime=0))},a.to=function(e,t,r){return new a(e,t,r)},a.from=function(e,t,r){return r.runBackwards=!0,r.immediateRender=0!=r.immediateRender,new a(e,t,r)},a.fromTo=function(e,t,r,i){return i.startAt=r,i.immediateRender=0!=i.immediateRender&&0!=r.immediateRender,new a(e,t,i)},a.staggerTo=a.allTo=function(e,t,o,s,c,p,d){s=s||0;var f,m,v,g,y=0,b=[],_=function(){o.onComplete&&o.onComplete.apply(o.onCompleteScope||this,arguments),c.apply(d||o.callbackScope||this,p||h)},x=o.cycle,w=o.startAt&&o.startAt.cycle;for(u(e)||("string"==typeof e&&(e=r.selector(e)||e),l(e)&&(e=i(e))),e=e||[],0>s&&(e=i(e),e.reverse(),s*=-1),f=e.length-1,v=0;f>=v;v++){m={};for(g in o)m[g]=o[g];if(x&&(n(m,e,v),null!=m.duration&&(t=m.duration,delete m.duration)),w){w=m.startAt={};for(g in o.startAt)w[g]=o.startAt[g];n(m.startAt,e,v)}m.delay=y+(m.delay||0),v===f&&c&&(m.onComplete=_),b[v]=new a(e[v],t,m),y+=s}return b},a.staggerFrom=a.allFrom=function(e,t,r,i,n,o,s){return r.runBackwards=!0,r.immediateRender=0!=r.immediateRender,a.staggerTo(e,t,r,i,n,o,s)},a.staggerFromTo=a.allFromTo=function(e,t,r,i,n,o,s,l){return i.startAt=r,i.immediateRender=0!=i.immediateRender&&0!=r.immediateRender,a.staggerTo(e,t,i,n,o,s,l)},a.delayedCall=function(e,t,r,i,n){return new a(t,0,{delay:e,onComplete:t,onCompleteParams:r,callbackScope:i,onReverseComplete:t,onReverseCompleteParams:r,immediateRender:!1,useFrames:n,overwrite:0})},a.set=function(e,t){return new a(e,0,t)},a.isTweening=function(e){return r.getTweensOf(e,!0).length>0};var p=function(e,t){for(var i=[],n=0,a=e._first;a;)a instanceof r?i[n++]=a:(t&&(i[n++]=a),i=i.concat(p(a,t)),n=i.length),a=a._next;return i},d=a.getAllTweens=function(t){return p(e._rootTimeline,t).concat(p(e._rootFramesTimeline,t))};a.killAll=function(e,r,i,n){null==r&&(r=!0),null==i&&(i=!0);var a,o,s,l=d(0!=n),u=l.length,c=r&&i&&n;for(s=0;u>s;s++)o=l[s],(c||o instanceof t||(a=o.target===o.vars.onComplete)&&i||r&&!a)&&(e?o.totalTime(o._reversed?0:o.totalDuration()):o._enabled(!1,!1))},a.killChildTweensOf=function(e,t){if(null!=e){var n,o,c,h,p,d=s.tweenLookup;if("string"==typeof e&&(e=r.selector(e)||e),l(e)&&(e=i(e)),u(e))for(h=e.length;--h>-1;)a.killChildTweensOf(e[h],t);else{n=[];for(c in d)for(o=d[c].target.parentNode;o;)o===e&&(n=n.concat(d[c].tweens)),o=o.parentNode;for(p=n.length,h=0;p>h;h++)t&&n[h].totalTime(n[h].totalDuration()),n[h]._enabled(!1,!1)}}};var f=function(e,r,i,n){r=r!==!1,i=i!==!1,n=n!==!1;for(var a,o,s=d(n),l=r&&i&&n,u=s.length;--u>-1;)o=s[u],(l||o instanceof t||(a=o.target===o.vars.onComplete)&&i||r&&!a)&&o.paused(e)};return a.pauseAll=function(e,t,r){f(!0,e,t,r)},a.resumeAll=function(e,t,r){f(!1,e,t,r)},a.globalTimeScale=function(t){var i=e._rootTimeline,n=r.ticker.time;return arguments.length?(t=t||o,i._startTime=n-(n-i._startTime)*i._timeScale/t,i=e._rootFramesTimeline,n=r.ticker.frame,i._startTime=n-(n-i._startTime)*i._timeScale/t,i._timeScale=e._rootTimeline._timeScale=t,t):i._timeScale},c.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},c.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},c.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},c.duration=function(t){return arguments.length?e.prototype.duration.call(this,t):this._duration},c.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},c.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},c.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},c.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},a},!0),r._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(e,t,i){var n=function(e){t.call(this,e),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var r,i,n=this.vars;for(i in n)r=n[i],u(r)&&-1!==r.join("").indexOf("{self}")&&(n[i]=this._swapSelfInParams(r));u(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},a=1e-10,o=i._internals,s=n._internals={},l=o.isSelector,u=o.isArray,c=o.lazyTweens,h=o.lazyRender,p=r._gsDefine.globals,d=function(e){var t,r={};for(t in e)r[t]=e[t];return r},f=function(e,t,r){var i,n,a=e.cycle;for(i in a)n=a[i],e[i]="function"==typeof n?n.call(t[r],r):n[r%n.length];delete e.cycle},m=s.pauseCallback=function(){},v=function(e){var t,r=[],i=e.length;for(t=0;t!==i;r.push(e[t++]));return r},g=n.prototype=new t;return n.version="1.19.0",g.constructor=n,g.kill()._gc=g._forcingPlayhead=g._hasPause=!1,g.to=function(e,t,r,n){var a=r.repeat&&p.TweenMax||i;return t?this.add(new a(e,t,r),n):this.set(e,r,n)},g.from=function(e,t,r,n){return this.add((r.repeat&&p.TweenMax||i).from(e,t,r),n)},g.fromTo=function(e,t,r,n,a){var o=n.repeat&&p.TweenMax||i;return t?this.add(o.fromTo(e,t,r,n),a):this.set(e,n,a)},g.staggerTo=function(e,t,r,a,o,s,u,c){var h,p,m=new n({onComplete:s,onCompleteParams:u,callbackScope:c,smoothChildTiming:this.smoothChildTiming}),g=r.cycle;for("string"==typeof e&&(e=i.selector(e)||e),e=e||[],l(e)&&(e=v(e)),a=a||0,0>a&&(e=v(e),e.reverse(),a*=-1),p=0;p<e.length;p++)h=d(r),h.startAt&&(h.startAt=d(h.startAt),h.startAt.cycle&&f(h.startAt,e,p)),g&&(f(h,e,p),null!=h.duration&&(t=h.duration,delete h.duration)),m.to(e[p],t,h,p*a);return this.add(m,o)},g.staggerFrom=function(e,t,r,i,n,a,o,s){return r.immediateRender=0!=r.immediateRender,r.runBackwards=!0,this.staggerTo(e,t,r,i,n,a,o,s)},g.staggerFromTo=function(e,t,r,i,n,a,o,s,l){return i.startAt=r,i.immediateRender=0!=i.immediateRender&&0!=r.immediateRender,this.staggerTo(e,t,i,n,a,o,s,l)},g.call=function(e,t,r,n){return this.add(i.delayedCall(0,e,t,r),n)},g.set=function(e,t,r){return r=this._parseTimeOrLabel(r,0,!0),null==t.immediateRender&&(t.immediateRender=r===this._time&&!this._paused),this.add(new i(e,0,t),r)},n.exportRoot=function(e,t){e=e||{},null==e.smoothChildTiming&&(e.smoothChildTiming=!0);var r,a,o=new n(e),s=o._timeline;for(null==t&&(t=!0),s._remove(o,!0),o._startTime=0,o._rawPrevTime=o._time=o._totalTime=s._time,r=s._first;r;)a=r._next,t&&r instanceof i&&r.target===r.vars.onComplete||o.add(r,r._startTime-r._delay),r=a;return s.add(o,0),o},g.add=function(r,a,o,s){var l,c,h,p,d,f;if("number"!=typeof a&&(a=this._parseTimeOrLabel(a,0,!0,r)),!(r instanceof e)){if(r instanceof Array||r&&r.push&&u(r)){for(o=o||"normal",s=s||0,l=a,c=r.length,h=0;c>h;h++)u(p=r[h])&&(p=new n({tweens:p})),this.add(p,l),"string"!=typeof p&&"function"!=typeof p&&("sequence"===o?l=p._startTime+p.totalDuration()/p._timeScale:"start"===o&&(p._startTime-=p.delay())),l+=s;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,a);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is not a tween, timeline, function, or string.";r=i.delayedCall(0,r)}if(t.prototype.add.call(this,r,a),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(d=this,f=d.rawTime()>r._startTime;d._timeline;)f&&d._timeline.smoothChildTiming?d.totalTime(d._totalTime,!0):d._gc&&d._enabled(!0,!1),d=d._timeline;return this},g.remove=function(t){if(t instanceof e){this._remove(t,!1);var r=t._timeline=t.vars.useFrames?e._rootFramesTimeline:e._rootTimeline;return t._startTime=(t._paused?t._pauseTime:r._time)-(t._reversed?t.totalDuration()-t._totalTime:t._totalTime)/t._timeScale,this}if(t instanceof Array||t&&t.push&&u(t)){for(var i=t.length;--i>-1;)this.remove(t[i]);return this}return"string"==typeof t?this.removeLabel(t):this.kill(null,t)},g._remove=function(e,r){t.prototype._remove.call(this,e,r);var i=this._last;return i?this._time>i._startTime+i._totalDuration/i._timeScale&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},g.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},g.insert=g.insertMultiple=function(e,t,r,i){return this.add(e,t||0,r,i)},g.appendMultiple=function(e,t,r,i){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),r,i)},g.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},g.addPause=function(e,t,r,n){var a=i.delayedCall(0,m,r,n||this);return a.vars.onComplete=a.vars.onReverseComplete=t,a.data="isPause",this._hasPause=!0,this.add(a,e)},g.removeLabel=function(e){return delete this._labels[e],this},g.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},g._parseTimeOrLabel=function(t,r,i,n){var a;if(n instanceof e&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&u(n)))for(a=n.length;--a>-1;)n[a]instanceof e&&n[a].timeline===this&&this.remove(n[a]);if("string"==typeof r)return this._parseTimeOrLabel(r,i&&"number"==typeof t&&null==this._labels[r]?t-this.duration():0,i);if(r=r||0,"string"!=typeof t||!isNaN(t)&&null==this._labels[t])null==t&&(t=this.duration());else{if(a=t.indexOf("="),-1===a)return null==this._labels[t]?i?this._labels[t]=this.duration()+r:r:this._labels[t]+r;r=parseInt(t.charAt(a-1)+"1",10)*Number(t.substr(a+1)),t=a>1?this._parseTimeOrLabel(t.substr(0,a-1),0,i):this.duration()}return Number(t)+r},g.seek=function(e,t){return this.totalTime("number"==typeof e?e:this._parseTimeOrLabel(e),t!==!1)},g.stop=function(){return this.paused(!0)},g.gotoAndPlay=function(e,t){return this.play(e,t)},g.gotoAndStop=function(e,t){return this.pause(e,t)},g.render=function(e,t,r){this._gc&&this._enabled(!0,!1);var i,n,o,s,l,u,p,d=this._dirty?this.totalDuration():this._totalDuration,f=this._time,m=this._startTime,v=this._timeScale,g=this._paused;if(e>=d-1e-7)this._totalTime=this._time=d,this._reversed||this._hasPausedChild()||(n=!0,s="onComplete",l=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=e&&e>=-1e-7||this._rawPrevTime<0||this._rawPrevTime===a)&&this._rawPrevTime!==e&&this._first&&(l=!0,this._rawPrevTime>a&&(s="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a,e=d+1e-4;else if(1e-7>e)if(this._totalTime=this._time=0,(0!==f||0===this._duration&&this._rawPrevTime!==a&&(this._rawPrevTime>0||0>e&&this._rawPrevTime>=0))&&(s="onReverseComplete",n=this._reversed),0>e)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(l=n=!0,s="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(l=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a,0===e&&n)for(i=this._first;i&&0===i._startTime;)i._duration||(n=!1),i=i._next;e=0,this._initted||(l=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!t){if(e>=f)for(i=this._first;i&&i._startTime<=e&&!u;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(u=i),i=i._next;else for(i=this._last;i&&i._startTime>=e&&!u;)i._duration||"isPause"===i.data&&i._rawPrevTime>0&&(u=i),i=i._prev;u&&(this._time=e=u._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=e}if(this._time!==f&&this._first||r||l||u){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==f&&e>0&&(this._active=!0),0===f&&this.vars.onStart&&(0===this._time&&this._duration||t||this._callback("onStart")),p=this._time,p>=f)for(i=this._first;i&&(o=i._next,p===this._time&&(!this._paused||g));)(i._active||i._startTime<=p&&!i._paused&&!i._gc)&&(u===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,r):i.render((e-i._startTime)*i._timeScale,t,r)),i=o;else for(i=this._last;i&&(o=i._prev,p===this._time&&(!this._paused||g));){if(i._active||i._startTime<=f&&!i._paused&&!i._gc){if(u===i){for(u=i._prev;u&&u.endTime()>this._time;)u.render(u._reversed?u.totalDuration()-(e-u._startTime)*u._timeScale:(e-u._startTime)*u._timeScale,t,r),u=u._prev;u=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,r):i.render((e-i._startTime)*i._timeScale,t,r)}i=o}this._onUpdate&&(t||(c.length&&h(),this._callback("onUpdate"))),s&&(this._gc||(m===this._startTime||v!==this._timeScale)&&(0===this._time||d>=this.totalDuration())&&(n&&(c.length&&h(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[s]&&this._callback(s)))}},g._hasPausedChild=function(){for(var e=this._first;e;){if(e._paused||e instanceof n&&e._hasPausedChild())return!0;e=e._next}return!1},g.getChildren=function(e,t,r,n){n=n||-9999999999;for(var a=[],o=this._first,s=0;o;)o._startTime<n||(o instanceof i?t!==!1&&(a[s++]=o):(r!==!1&&(a[s++]=o),e!==!1&&(a=a.concat(o.getChildren(!0,t,r)),s=a.length))),o=o._next;return a},g.getTweensOf=function(e,t){var r,n,a=this._gc,o=[],s=0;for(a&&this._enabled(!0,!0),r=i.getTweensOf(e),n=r.length;--n>-1;)(r[n].timeline===this||t&&this._contains(r[n]))&&(o[s++]=r[n]);return a&&this._enabled(!1,!0),o},g.recent=function(){return this._recent},g._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},g.shiftChildren=function(e,t,r){r=r||0;for(var i,n=this._first,a=this._labels;n;)n._startTime>=r&&(n._startTime+=e),n=n._next;if(t)for(i in a)a[i]>=r&&(a[i]+=e);return this._uncache(!0)},g._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var r=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),i=r.length,n=!1;--i>-1;)r[i]._kill(e,t)&&(n=!0);return n},g.clear=function(e){var t=this.getChildren(!1,!0,!0),r=t.length;for(this._time=this._totalTime=0;--r>-1;)t[r]._enabled(!1,!1);return e!==!1&&(this._labels={}),this._uncache(!0)},g.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return e.prototype.invalidate.call(this)},g._enabled=function(e,r){if(e===this._gc)for(var i=this._first;i;)i._enabled(e,!0),i=i._next;return t.prototype._enabled.call(this,e,r)},g.totalTime=function(){this._forcingPlayhead=!0;var t=e.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,t},g.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},g.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,r,i=0,n=this._last,a=999999999999;n;)t=n._prev,n._dirty&&n.totalDuration(),n._startTime>a&&this._sortChildren&&!n._paused?this.add(n,n._startTime-n._delay):a=n._startTime,n._startTime<0&&!n._paused&&(i-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale),this.shiftChildren(-n._startTime,!1,-9999999999),a=0),r=n._startTime+n._totalDuration/n._timeScale,r>i&&(i=r),n=t;this._duration=this._totalDuration=i,this._dirty=!1}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this},g.paused=function(t){if(!t)for(var r=this._first,i=this._time;r;)r._startTime===i&&"isPause"===r.data&&(r._rawPrevTime=0),r=r._next;return e.prototype.paused.apply(this,arguments)},g.usesFrames=function(){for(var t=this._timeline;t._timeline;)t=t._timeline;return t===e._rootFramesTimeline},g.rawTime=function(){return this._paused?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},n},!0),r._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(e,t,i){var n=function(t){e.call(this,t),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=this.vars.yoyo===!0,this._dirty=!0},a=1e-10,o=t._internals,s=o.lazyTweens,l=o.lazyRender,u=r._gsDefine.globals,c=new i(null,null,1,0),h=n.prototype=new e;return h.constructor=n,h.kill()._gc=!1,n.version="1.19.0",h.invalidate=function(){return this._yoyo=this.vars.yoyo===!0,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),e.prototype.invalidate.call(this)},h.addCallback=function(e,r,i,n){return this.add(t.delayedCall(0,e,i,n),r)},h.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var r=this.getTweensOf(e,!1),i=r.length,n=this._parseTimeOrLabel(t);--i>-1;)r[i]._startTime===n&&r[i]._enabled(!1,!1);return this},h.removePause=function(t){return this.removeCallback(e._internals.pauseCallback,t)},h.tweenTo=function(e,r){r=r||{};var i,n,a,o={ease:c,useFrames:this.usesFrames(),immediateRender:!1},s=r.repeat&&u.TweenMax||t;for(n in r)o[n]=r[n];return o.time=this._parseTimeOrLabel(e),i=Math.abs(Number(o.time)-this._time)/this._timeScale||.001,a=new s(this,i,o),o.onStart=function(){a.target.paused(!0),a.vars.time!==a.target.time()&&i===a.duration()&&a.duration(Math.abs(a.vars.time-a.target.time())/a.target._timeScale),r.onStart&&a._callback("onStart")},a},h.tweenFromTo=function(e,t,r){r=r||{},e=this._parseTimeOrLabel(e),r.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},r.immediateRender=r.immediateRender!==!1;var i=this.tweenTo(t,r);return i.duration(Math.abs(i.vars.time-e)/this._timeScale||.001)},h.render=function(e,t,r){this._gc&&this._enabled(!0,!1);var i,n,o,u,c,h,p,d,f=this._dirty?this.totalDuration():this._totalDuration,m=this._duration,v=this._time,g=this._totalTime,y=this._startTime,b=this._timeScale,_=this._rawPrevTime,x=this._paused,w=this._cycle;if(e>=f-1e-7)this._locked||(this._totalTime=f,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(n=!0,u="onComplete",c=!!this._timeline.autoRemoveChildren,0===this._duration&&(0>=e&&e>=-1e-7||0>_||_===a)&&_!==e&&this._first&&(c=!0,_>a&&(u="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:a,this._yoyo&&0!==(1&this._cycle)?this._time=e=0:(this._time=m,e=m+1e-4);else if(1e-7>e)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==v||0===m&&_!==a&&(_>0||0>e&&_>=0)&&!this._locked)&&(u="onReverseComplete",n=this._reversed),0>e)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(c=n=!0,u="onReverseComplete"):_>=0&&this._first&&(c=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=m||!t||e||this._rawPrevTime===e?e:a,0===e&&n)for(i=this._first;i&&0===i._startTime;)i._duration||(n=!1),i=i._next;e=0,this._initted||(c=!0)}else if(0===m&&0>_&&(c=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(h=m+this._repeatDelay,this._cycle=this._totalTime/h>>0,0!==this._cycle&&this._cycle===this._totalTime/h&&e>=g&&this._cycle--,this._time=this._totalTime-this._cycle*h,this._yoyo&&0!==(1&this._cycle)&&(this._time=m-this._time),this._time>m?(this._time=m,e=m+1e-4):this._time<0?this._time=e=0:e=this._time)),this._hasPause&&!this._forcingPlayhead&&!t){if(e=this._time,e>=v)for(i=this._first;i&&i._startTime<=e&&!p;)i._duration||"isPause"!==i.data||i.ratio||0===i._startTime&&0===this._rawPrevTime||(p=i),i=i._next;else for(i=this._last;i&&i._startTime>=e&&!p;)i._duration||"isPause"===i.data&&i._rawPrevTime>0&&(p=i),i=i._prev;p&&(this._time=e=p._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==w&&!this._locked){var T=this._yoyo&&0!==(1&w),M=T===(this._yoyo&&0!==(1&this._cycle)),S=this._totalTime,E=this._cycle,P=this._rawPrevTime,A=this._time;if(this._totalTime=w*m,this._cycle<w?T=!T:this._totalTime+=m,this._time=v,this._rawPrevTime=0===m?_-1e-4:_,this._cycle=w,this._locked=!0,v=T?0:m,this.render(v,t,0===m),t||this._gc||this.vars.onRepeat&&this._callback("onRepeat"),v!==this._time)return;if(M&&(v=T?m+1e-4:-1e-4,this.render(v,!0,!1)),this._locked=!1,this._paused&&!x)return;this._time=A,this._totalTime=S,this._cycle=E,this._rawPrevTime=P}if(!(this._time!==v&&this._first||r||c||p))return void(g!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate")));if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==g&&e>0&&(this._active=!0),0===g&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||t||this._callback("onStart")),d=this._time,d>=v)for(i=this._first;i&&(o=i._next,d===this._time&&(!this._paused||x));)(i._active||i._startTime<=this._time&&!i._paused&&!i._gc)&&(p===i&&this.pause(),i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,r):i.render((e-i._startTime)*i._timeScale,t,r)),i=o;else for(i=this._last;i&&(o=i._prev,d===this._time&&(!this._paused||x));){if(i._active||i._startTime<=v&&!i._paused&&!i._gc){if(p===i){for(p=i._prev;p&&p.endTime()>this._time;)p.render(p._reversed?p.totalDuration()-(e-p._startTime)*p._timeScale:(e-p._startTime)*p._timeScale,t,r),p=p._prev;p=null,this.pause()}i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,r):i.render((e-i._startTime)*i._timeScale,t,r)}i=o}this._onUpdate&&(t||(s.length&&l(),this._callback("onUpdate"))),u&&(this._locked||this._gc||(y===this._startTime||b!==this._timeScale)&&(0===this._time||f>=this.totalDuration())&&(n&&(s.length&&l(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[u]&&this._callback(u)))},h.getActive=function(e,t,r){null==e&&(e=!0),null==t&&(t=!0),null==r&&(r=!1);var i,n,a=[],o=this.getChildren(e,t,r),s=0,l=o.length;for(i=0;l>i;i++)n=o[i],n.isActive()&&(a[s++]=n);return a},h.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,r=this.getLabelsArray(),i=r.length;for(t=0;i>t;t++)if(r[t].time>e)return r[t].name;return null},h.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),r=t.length;--r>-1;)if(t[r].time<e)return t[r].name;return null},h.getLabelsArray=function(){var e,t=[],r=0;for(e in this._labels)t[r++]={time:this._labels[e],name:e};return t.sort(function(e,t){return e.time-t.time}),t},h.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()},h.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},h.totalDuration=function(t){return arguments.length?-1!==this._repeat&&t?this.timeScale(this.totalDuration()/t):this:(this._dirty&&(e.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},h.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),e>this._duration&&(e=this._duration),this._yoyo&&0!==(1&this._cycle)?e=this._duration-e+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(e+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(e,t)):this._time},h.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},h.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},h.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},h.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},n},!0),function(){var e=180/Math.PI,t=[],i=[],n=[],a={},o=r._gsDefine.globals,s=function(e,t,r,i){r===i&&(r=i-(i-t)/1e6),e===t&&(t=e+(r-e)/1e6),this.a=e,this.b=t,this.c=r,this.d=i,this.da=i-e,this.ca=r-e,this.ba=t-e},l=",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",u=function(e,t,r,i){
var n={a:e},a={},o={},s={c:i},l=(e+t)/2,u=(t+r)/2,c=(r+i)/2,h=(l+u)/2,p=(u+c)/2,d=(p-h)/8;return n.b=l+(e-l)/4,a.b=h+d,n.c=a.a=(n.b+a.b)/2,a.c=o.a=(h+p)/2,o.b=p-d,s.b=c+(i-c)/4,o.c=s.a=(o.b+s.b)/2,[n,a,o,s]},c=function(e,r,a,o,s){var l,c,h,p,d,f,m,v,g,y,b,_,x,w=e.length-1,T=0,M=e[0].a;for(l=0;w>l;l++)d=e[T],c=d.a,h=d.d,p=e[T+1].d,s?(b=t[l],_=i[l],x=(_+b)*r*.25/(o?.5:n[l]||.5),f=h-(h-c)*(o?.5*r:0!==b?x/b:0),m=h+(p-h)*(o?.5*r:0!==_?x/_:0),v=h-(f+((m-f)*(3*b/(b+_)+.5)/4||0))):(f=h-(h-c)*r*.5,m=h+(p-h)*r*.5,v=h-(f+m)/2),f+=v,m+=v,d.c=g=f,d.b=0!==l?M:M=d.a+.6*(d.c-d.a),d.da=h-c,d.ca=g-c,d.ba=M-c,a?(y=u(c,M,g,h),e.splice(T,1,y[0],y[1],y[2],y[3]),T+=4):T++,M=m;d=e[T],d.b=M,d.c=M+.4*(d.d-M),d.da=d.d-d.a,d.ca=d.c-d.a,d.ba=M-d.a,a&&(y=u(d.a,M,d.c,d.d),e.splice(T,1,y[0],y[1],y[2],y[3]))},h=function(e,r,n,a){var o,l,u,c,h,p,d=[];if(a)for(e=[a].concat(e),l=e.length;--l>-1;)"string"==typeof(p=e[l][r])&&"="===p.charAt(1)&&(e[l][r]=a[r]+Number(p.charAt(0)+p.substr(2)));if(o=e.length-2,0>o)return d[0]=new s(e[0][r],0,0,e[-1>o?0:1][r]),d;for(l=0;o>l;l++)u=e[l][r],c=e[l+1][r],d[l]=new s(u,0,0,c),n&&(h=e[l+2][r],t[l]=(t[l]||0)+(c-u)*(c-u),i[l]=(i[l]||0)+(h-c)*(h-c));return d[l]=new s(e[l][r],0,0,e[l+1][r]),d},p=function(e,r,o,s,u,p){var d,f,m,v,g,y,b,_,x={},w=[],T=p||e[0];u="string"==typeof u?","+u+",":l,null==r&&(r=1);for(f in e[0])w.push(f);if(e.length>1){for(_=e[e.length-1],b=!0,d=w.length;--d>-1;)if(f=w[d],Math.abs(T[f]-_[f])>.05){b=!1;break}b&&(e=e.concat(),p&&e.unshift(p),e.push(e[1]),p=e[e.length-3])}for(t.length=i.length=n.length=0,d=w.length;--d>-1;)f=w[d],a[f]=-1!==u.indexOf(","+f+","),x[f]=h(e,f,a[f],p);for(d=t.length;--d>-1;)t[d]=Math.sqrt(t[d]),i[d]=Math.sqrt(i[d]);if(!s){for(d=w.length;--d>-1;)if(a[f])for(m=x[w[d]],y=m.length-1,v=0;y>v;v++)g=m[v+1].da/i[v]+m[v].da/t[v]||0,n[v]=(n[v]||0)+g*g;for(d=n.length;--d>-1;)n[d]=Math.sqrt(n[d])}for(d=w.length,v=o?4:1;--d>-1;)f=w[d],m=x[f],c(m,r,o,s,a[f]),b&&(m.splice(0,v),m.splice(m.length-v,v));return x},d=function(e,t,r){t=t||"soft";var i,n,a,o,l,u,c,h,p,d,f,m={},v="cubic"===t?3:2,g="soft"===t,y=[];if(g&&r&&(e=[r].concat(e)),null==e||e.length<v+1)throw"invalid Bezier data";for(p in e[0])y.push(p);for(u=y.length;--u>-1;){for(p=y[u],m[p]=l=[],d=0,h=e.length,c=0;h>c;c++)i=null==r?e[c][p]:"string"==typeof(f=e[c][p])&&"="===f.charAt(1)?r[p]+Number(f.charAt(0)+f.substr(2)):Number(f),g&&c>1&&h-1>c&&(l[d++]=(i+l[d-2])/2),l[d++]=i;for(h=d-v+1,d=0,c=0;h>c;c+=v)i=l[c],n=l[c+1],a=l[c+2],o=2===v?0:l[c+3],l[d++]=f=3===v?new s(i,n,a,o):new s(i,(2*n+i)/3,(2*n+a)/3,a);l.length=d}return m},f=function(e,t,r){for(var i,n,a,o,s,l,u,c,h,p,d,f=1/r,m=e.length;--m>-1;)for(p=e[m],a=p.a,o=p.d-a,s=p.c-a,l=p.b-a,i=n=0,c=1;r>=c;c++)u=f*c,h=1-u,i=n-(n=(u*u*o+3*h*(u*s+h*l))*u),d=m*r+c-1,t[d]=(t[d]||0)+i*i},m=function(e,t){t=t>>0||6;var r,i,n,a,o=[],s=[],l=0,u=0,c=t-1,h=[],p=[];for(r in e)f(e[r],o,t);for(n=o.length,i=0;n>i;i++)l+=Math.sqrt(o[i]),a=i%t,p[a]=l,a===c&&(u+=l,a=i/t>>0,h[a]=p,s[a]=u,l=0,p=[]);return{length:u,lengths:s,segments:h}},v=r._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.7",API:2,global:!0,init:function(e,t,r){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._mod={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var i,n,a,o,s,l=t.values||[],u={},c=l[0],h=t.autoRotate||r.vars.orientToBezier;this._autoRotate=h?h instanceof Array?h:[["x","y","rotation",h===!0?0:Number(h)||0]]:null;for(i in c)this._props.push(i);for(a=this._props.length;--a>-1;)i=this._props[a],this._overwriteProps.push(i),n=this._func[i]="function"==typeof e[i],u[i]=n?e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]():parseFloat(e[i]),s||u[i]!==l[0][i]&&(s=u);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?p(l,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,s):d(l,t.type,u),this._segCount=this._beziers[i].length,this._timeRes){var f=m(this._beziers,this._timeRes);this._length=f.length,this._lengths=f.lengths,this._segments=f.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(h=this._autoRotate)for(this._initialRotations=[],h[0]instanceof Array||(this._autoRotate=h=[h]),a=h.length;--a>-1;){for(o=0;3>o;o++)i=h[a][o],this._func[i]="function"==typeof e[i]?e[i.indexOf("set")||"function"!=typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]:!1;i=h[a][2],this._initialRotations[a]=(this._func[i]?this._func[i].call(this._target):this._target[i])||0,this._overwriteProps.push(i)}return this._startRatio=r.vars.runBackwards?1:0,!0},set:function(t){var r,i,n,a,o,s,l,u,c,h,p=this._segCount,d=this._func,f=this._target,m=t!==this._startRatio;if(this._timeRes){if(c=this._lengths,h=this._curSeg,t*=this._length,n=this._li,t>this._l2&&p-1>n){for(u=p-1;u>n&&(this._l2=c[++n])<=t;);this._l1=c[n-1],this._li=n,this._curSeg=h=this._segments[n],this._s2=h[this._s1=this._si=0]}else if(t<this._l1&&n>0){for(;n>0&&(this._l1=c[--n])>=t;);0===n&&t<this._l1?this._l1=0:n++,this._l2=c[n],this._li=n,this._curSeg=h=this._segments[n],this._s1=h[(this._si=h.length-1)-1]||0,this._s2=h[this._si]}if(r=n,t-=this._l1,n=this._si,t>this._s2&&n<h.length-1){for(u=h.length-1;u>n&&(this._s2=h[++n])<=t;);this._s1=h[n-1],this._si=n}else if(t<this._s1&&n>0){for(;n>0&&(this._s1=h[--n])>=t;);0===n&&t<this._s1?this._s1=0:n++,this._s2=h[n],this._si=n}s=(n+(t-this._s1)/(this._s2-this._s1))*this._prec||0}else r=0>t?0:t>=1?p-1:p*t>>0,s=(t-r*(1/p))*p;for(i=1-s,n=this._props.length;--n>-1;)a=this._props[n],o=this._beziers[a][r],l=(s*s*o.da+3*i*(s*o.ca+i*o.ba))*s+o.a,this._mod[a]&&(l=this._mod[a](l,f)),d[a]?f[a](l):f[a]=l;if(this._autoRotate){var v,g,y,b,_,x,w,T=this._autoRotate;for(n=T.length;--n>-1;)a=T[n][2],x=T[n][3]||0,w=T[n][4]===!0?1:e,o=this._beziers[T[n][0]],v=this._beziers[T[n][1]],o&&v&&(o=o[r],v=v[r],g=o.a+(o.b-o.a)*s,b=o.b+(o.c-o.b)*s,g+=(b-g)*s,b+=(o.c+(o.d-o.c)*s-b)*s,y=v.a+(v.b-v.a)*s,_=v.b+(v.c-v.b)*s,y+=(_-y)*s,_+=(v.c+(v.d-v.c)*s-_)*s,l=m?Math.atan2(_-y,b-g)*w+x:this._initialRotations[n],this._mod[a]&&(l=this._mod[a](l,f)),d[a]?f[a](l):f[a]=l)}}}),g=v.prototype;v.bezierThrough=p,v.cubicToQuadratic=u,v._autoCSS=!0,v.quadraticToCubic=function(e,t,r){return new s(e,(2*t+e)/3,(2*t+r)/3,r)},v._cssRegister=function(){var e=o.CSSPlugin;if(e){var t=e._internals,r=t._parseToProxy,i=t._setPluginRatio,n=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,a,o,s,l){t instanceof Array&&(t={values:t}),l=new v;var u,c,h,p=t.values,d=p.length-1,f=[],m={};if(0>d)return s;for(u=0;d>=u;u++)h=r(e,p[u],o,s,l,d!==u),f[u]=h.end;for(c in t)m[c]=t[c];return m.values=f,s=new n(e,"bezier",0,0,h.pt,2),s.data=h,s.plugin=l,s.setRatio=i,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(u=m.autoRotate===!0?0:Number(m.autoRotate),m.autoRotate=null!=h.end.left?[["left","top","rotation",u,!1]]:null!=h.end.x?[["x","y","rotation",u,!1]]:!1),m.autoRotate&&(o._transform||o._enableTransforms(!1),h.autoRotate=o._target._gsTransform,h.proxy.rotation=h.autoRotate.rotation||0,o._overwriteProps.push("rotation")),l._onInitTween(h.proxy,m,o._tween),s}})}},g._mod=function(e){for(var t,r=this._overwriteProps,i=r.length;--i>-1;)t=e[r[i]],t&&"function"==typeof t&&(this._mod[r[i]]=t)},g._kill=function(e){var t,r,i=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],r=i.length;--r>-1;)i[r]===t&&i.splice(r,1);if(i=this._autoRotate)for(r=i.length;--r>-1;)e[i[r][2]]&&i.splice(r,1);return this._super._kill.call(this,e)}}(),r._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(e,t){var i,n,a,o,s=function(){e.call(this,"css"),this._overwriteProps.length=0,this.setRatio=s.prototype.setRatio},l=r._gsDefine.globals,u={},c=s.prototype=new e("css");c.constructor=s,s.version="1.19.0",s.API=2,s.defaultTransformPerspective=0,s.defaultSkewType="compensated",s.defaultSmoothOrigin=!0,c="px",s.suffixMap={top:c,right:c,bottom:c,left:c,width:c,height:c,fontSize:c,padding:c,margin:c,perspective:c,lineHeight:""};var h,p,d,f,m,v,g,y,b=/(?:\-|\.|\b)(\d|\.|e\-)+/g,_=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,x=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,w=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,T=/(?:\d|\-|\+|=|#|\.)*/g,M=/opacity *= *([^)]*)/i,S=/opacity:([^;]*)/i,E=/alpha\(opacity *=.+?\)/i,P=/^(rgb|hsl)/,A=/([A-Z])/g,C=/-([a-z])/gi,O=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,k=function(e,t){return t.toUpperCase()},L=/(?:Left|Right|Width)/i,R=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,I=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,D=/,(?=[^\)]*(?:\(|$))/gi,F=/[\s,\(]/i,N=Math.PI/180,B=180/Math.PI,G={},j=document,V=function(e){return j.createElementNS?j.createElementNS("http://www.w3.org/1999/xhtml",e):j.createElement(e)},U=V("div"),z=V("img"),H=s._internals={_specialProps:u},W=navigator.userAgent,X=function(){var e=W.indexOf("Android"),t=V("a");return d=-1!==W.indexOf("Safari")&&-1===W.indexOf("Chrome")&&(-1===e||Number(W.substr(e+8,1))>3),m=d&&Number(W.substr(W.indexOf("Version/")+8,1))<6,f=-1!==W.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(W)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(W))&&(v=parseFloat(RegExp.$1)),t?(t.style.cssText="top:1px;opacity:.55;",/^0.55/.test(t.style.opacity)):!1}(),Y=function(e){return M.test("string"==typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},q=function(e){window.console&&console.log(e)},K="",$="",Z=function(e,t){t=t||U;var r,i,n=t.style;if(void 0!==n[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),r=["O","Moz","ms","Ms","Webkit"],i=5;--i>-1&&void 0===n[r[i]+e];);return i>=0?($=3===i?"ms":r[i],K="-"+$.toLowerCase()+"-",$+e):null},Q=j.defaultView?j.defaultView.getComputedStyle:function(){},J=s.getStyle=function(e,t,r,i,n){var a;return X||"opacity"!==t?(!i&&e.style[t]?a=e.style[t]:(r=r||Q(e))?a=r[t]||r.getPropertyValue(t)||r.getPropertyValue(t.replace(A,"-$1").toLowerCase()):e.currentStyle&&(a=e.currentStyle[t]),null==n||a&&"none"!==a&&"auto"!==a&&"auto auto"!==a?a:n):Y(e)},ee=H.convertToPixels=function(e,r,i,n,a){if("px"===n||!n)return i;if("auto"===n||!i)return 0;var o,l,u,c=L.test(r),h=e,p=U.style,d=0>i,f=1===i;if(d&&(i=-i),f&&(i*=100),"%"===n&&-1!==r.indexOf("border"))o=i/100*(c?e.clientWidth:e.clientHeight);else{if(p.cssText="border:0 solid red;position:"+J(e,"position")+";line-height:0;","%"!==n&&h.appendChild&&"v"!==n.charAt(0)&&"rem"!==n)p[c?"borderLeftWidth":"borderTopWidth"]=i+n;else{if(h=e.parentNode||j.body,l=h._gsCache,u=t.ticker.frame,l&&c&&l.time===u)return l.width*i/100;p[c?"width":"height"]=i+n}h.appendChild(U),o=parseFloat(U[c?"offsetWidth":"offsetHeight"]),h.removeChild(U),c&&"%"===n&&s.cacheWidths!==!1&&(l=h._gsCache=h._gsCache||{},l.time=u,l.width=o/i*100),0!==o||a||(o=ee(e,r,i,n,!0))}return f&&(o/=100),d?-o:o},te=H.calculateOffset=function(e,t,r){if("absolute"!==J(e,"position",r))return 0;var i="left"===t?"Left":"Top",n=J(e,"margin"+i,r);return e["offset"+i]-(ee(e,t,parseFloat(n),n.replace(T,""))||0)},re=function(e,t){var r,i,n,a={};if(t=t||Q(e,null))if(r=t.length)for(;--r>-1;)n=t[r],(-1===n.indexOf("-transform")||Ce===n)&&(a[n.replace(C,k)]=t.getPropertyValue(n));else for(r in t)(-1===r.indexOf("Transform")||Ae===r)&&(a[r]=t[r]);else if(t=e.currentStyle||e.style)for(r in t)"string"==typeof r&&void 0===a[r]&&(a[r.replace(C,k)]=t[r]);return X||(a.opacity=Y(e)),i=Ue(e,t,!1),a.rotation=i.rotation,a.skewX=i.skewX,a.scaleX=i.scaleX,a.scaleY=i.scaleY,a.x=i.x,a.y=i.y,ke&&(a.z=i.z,a.rotationX=i.rotationX,a.rotationY=i.rotationY,a.scaleZ=i.scaleZ),a.filters&&delete a.filters,a},ie=function(e,t,r,i,n){var a,o,s,l={},u=e.style;for(o in r)"cssText"!==o&&"length"!==o&&isNaN(o)&&(t[o]!==(a=r[o])||n&&n[o])&&-1===o.indexOf("Origin")&&("number"==typeof a||"string"==typeof a)&&(l[o]="auto"!==a||"left"!==o&&"top"!==o?""!==a&&"auto"!==a&&"none"!==a||"string"!=typeof t[o]||""===t[o].replace(w,"")?a:0:te(e,o),void 0!==u[o]&&(s=new ye(u,o,u[o],s)));if(i)for(o in i)"className"!==o&&(l[o]=i[o]);return{difs:l,firstMPT:s}},ne={width:["Left","Right"],height:["Top","Bottom"]},ae=["marginLeft","marginRight","marginTop","marginBottom"],oe=function(e,t,r){if("svg"===(e.nodeName+"").toLowerCase())return(r||Q(e))[t]||0;if(e.getBBox&&Ge(e))return e.getBBox()[t]||0;var i=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),n=ne[t],a=n.length;for(r=r||Q(e,null);--a>-1;)i-=parseFloat(J(e,"padding"+n[a],r,!0))||0,i-=parseFloat(J(e,"border"+n[a]+"Width",r,!0))||0;return i},se=function(e,t){if("contain"===e||"auto"===e||"auto auto"===e)return e+" ";(null==e||""===e)&&(e="0 0");var r,i=e.split(" "),n=-1!==e.indexOf("left")?"0%":-1!==e.indexOf("right")?"100%":i[0],a=-1!==e.indexOf("top")?"0%":-1!==e.indexOf("bottom")?"100%":i[1];if(i.length>3&&!t){for(i=e.split(", ").join(",").split(","),e=[],r=0;r<i.length;r++)e.push(se(i[r]));return e.join(",")}return null==a?a="center"===n?"50%":"0":"center"===a&&(a="50%"),("center"===n||isNaN(parseFloat(n))&&-1===(n+"").indexOf("="))&&(n="50%"),e=n+" "+a+(i.length>2?" "+i[2]:""),t&&(t.oxp=-1!==n.indexOf("%"),t.oyp=-1!==a.indexOf("%"),t.oxr="="===n.charAt(1),t.oyr="="===a.charAt(1),t.ox=parseFloat(n.replace(w,"")),t.oy=parseFloat(a.replace(w,"")),t.v=e),t||e},le=function(e,t){return"function"==typeof e&&(e=e(y,g)),"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},ue=function(e,t){return"function"==typeof e&&(e=e(y,g)),null==e?t:"string"==typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},ce=function(e,t,r,i){var n,a,o,s,l,u=1e-6;return"function"==typeof e&&(e=e(y,g)),null==e?s=t:"number"==typeof e?s=e:(n=360,a=e.split("_"),l="="===e.charAt(1),o=(l?parseInt(e.charAt(0)+"1",10)*parseFloat(a[0].substr(2)):parseFloat(a[0]))*(-1===e.indexOf("rad")?1:B)-(l?0:t),a.length&&(i&&(i[r]=t+o),-1!==e.indexOf("short")&&(o%=n,o!==o%(n/2)&&(o=0>o?o+n:o-n)),-1!==e.indexOf("_cw")&&0>o?o=(o+9999999999*n)%n-(o/n|0)*n:-1!==e.indexOf("ccw")&&o>0&&(o=(o-9999999999*n)%n-(o/n|0)*n)),s=t+o),u>s&&s>-u&&(s=0),s},he={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},pe=function(e,t,r){return e=0>e?e+1:e>1?e-1:e,255*(1>6*e?t+(r-t)*e*6:.5>e?r:2>3*e?t+(r-t)*(2/3-e)*6:t)+.5|0},de=s.parseColor=function(e,t){var r,i,n,a,o,s,l,u,c,h,p;if(e)if("number"==typeof e)r=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),he[e])r=he[e];else if("#"===e.charAt(0))4===e.length&&(i=e.charAt(1),n=e.charAt(2),a=e.charAt(3),e="#"+i+i+n+n+a+a),e=parseInt(e.substr(1),16),r=[e>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(r=p=e.match(b),t){if(-1!==e.indexOf("="))return e.match(_)}else o=Number(r[0])%360/360,s=Number(r[1])/100,l=Number(r[2])/100,n=.5>=l?l*(s+1):l+s-l*s,i=2*l-n,r.length>3&&(r[3]=Number(e[3])),r[0]=pe(o+1/3,i,n),r[1]=pe(o,i,n),r[2]=pe(o-1/3,i,n);else r=e.match(b)||he.transparent;r[0]=Number(r[0]),r[1]=Number(r[1]),r[2]=Number(r[2]),r.length>3&&(r[3]=Number(r[3]))}else r=he.black;return t&&!p&&(i=r[0]/255,n=r[1]/255,a=r[2]/255,u=Math.max(i,n,a),c=Math.min(i,n,a),l=(u+c)/2,u===c?o=s=0:(h=u-c,s=l>.5?h/(2-u-c):h/(u+c),o=u===i?(n-a)/h+(a>n?6:0):u===n?(a-i)/h+2:(i-n)/h+4,o*=60),r[0]=o+.5|0,r[1]=100*s+.5|0,r[2]=100*l+.5|0),r},fe=function(e,t){var r,i,n,a=e.match(me)||[],o=0,s=a.length?"":e;for(r=0;r<a.length;r++)i=a[r],n=e.substr(o,e.indexOf(i,o)-o),o+=n.length+i.length,i=de(i,t),3===i.length&&i.push(1),s+=n+(t?"hsla("+i[0]+","+i[1]+"%,"+i[2]+"%,"+i[3]:"rgba("+i.join(","))+")";return s+e.substr(o)},me="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(c in he)me+="|"+c+"\\b";me=new RegExp(me+")","gi"),s.colorStringFilter=function(e){var t,r=e[0]+e[1];me.test(r)&&(t=-1!==r.indexOf("hsl(")||-1!==r.indexOf("hsla("),e[0]=fe(e[0],t),e[1]=fe(e[1],t)),me.lastIndex=0},t.defaultStringFilter||(t.defaultStringFilter=s.colorStringFilter);var ve=function(e,t,r,i){if(null==e)return function(e){return e};var n,a=t?(e.match(me)||[""])[0]:"",o=e.split(a).join("").match(x)||[],s=e.substr(0,e.indexOf(o[0])),l=")"===e.charAt(e.length-1)?")":"",u=-1!==e.indexOf(" ")?" ":",",c=o.length,h=c>0?o[0].replace(b,""):"";return c?n=t?function(e){var t,p,d,f;if("number"==typeof e)e+=h;else if(i&&D.test(e)){for(f=e.replace(D,"|").split("|"),d=0;d<f.length;d++)f[d]=n(f[d]);return f.join(",")}if(t=(e.match(me)||[a])[0],p=e.split(t).join("").match(x)||[],d=p.length,c>d--)for(;++d<c;)p[d]=r?p[(d-1)/2|0]:o[d];return s+p.join(u)+u+t+l+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,a,p;if("number"==typeof e)e+=h;else if(i&&D.test(e)){for(a=e.replace(D,"|").split("|"),p=0;p<a.length;p++)a[p]=n(a[p]);return a.join(",")}if(t=e.match(x)||[],p=t.length,c>p--)for(;++p<c;)t[p]=r?t[(p-1)/2|0]:o[p];return s+t.join(u)+l}:function(e){return e}},ge=function(e){return e=e.split(","),function(t,r,i,n,a,o,s){var l,u=(r+"").split(" ");for(s={},l=0;4>l;l++)s[e[l]]=u[l]=u[l]||u[(l-1)/2>>0];return n.parse(t,s,a,o)}},ye=(H._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,r,i,n,a,o=this.data,s=o.proxy,l=o.firstMPT,u=1e-6;l;)t=s[l.v],l.r?t=Math.round(t):u>t&&t>-u&&(t=0),l.t[l.p]=t,l=l._next;if(o.autoRotate&&(o.autoRotate.rotation=o.mod?o.mod(s.rotation,this.t):s.rotation),1===e||0===e)for(l=o.firstMPT,a=1===e?"e":"b";l;){if(r=l.t,r.type){if(1===r.type){for(n=r.xs0+r.s+r.xs1,i=1;i<r.l;i++)n+=r["xn"+i]+r["xs"+(i+1)];r[a]=n}}else r[a]=r.s+r.xs0;l=l._next}},function(e,t,r,i,n){this.t=e,this.p=t,this.v=r,this.r=n,i&&(i._prev=this,this._next=i)}),be=(H._parseToProxy=function(e,t,r,i,n,a){var o,s,l,u,c,h=i,p={},d={},f=r._transform,m=G;for(r._transform=null,G=t,i=c=r.parse(e,t,i,n),G=m,a&&(r._transform=f,h&&(h._prev=null,h._prev&&(h._prev._next=null)));i&&i!==h;){if(i.type<=1&&(s=i.p,d[s]=i.s+i.c,p[s]=i.s,a||(u=new ye(i,"s",s,u,i.r),i.c=0),1===i.type))for(o=i.l;--o>0;)l="xn"+o,s=i.p+"_"+l,d[s]=i.data[l],p[s]=i[l],a||(u=new ye(i,l,s,u,i.rxp[l]));i=i._next}return{proxy:p,end:d,firstMPT:u,pt:c}},H.CSSPropTween=function(e,t,r,n,a,s,l,u,c,h,p){this.t=e,this.p=t,this.s=r,this.c=n,this.n=l||t,e instanceof be||o.push(this.n),this.r=u,this.type=s||0,c&&(this.pr=c,i=!0),this.b=void 0===h?r:h,this.e=void 0===p?r+n:p,a&&(this._next=a,a._prev=this)}),_e=function(e,t,r,i,n,a){var o=new be(e,t,r,i-r,n,-1,a);return o.b=r,o.e=o.xs0=i,o},xe=s.parseComplex=function(e,t,r,i,n,a,o,l,u,c){r=r||a||"","function"==typeof i&&(i=i(y,g)),o=new be(e,t,0,0,o,c?2:1,null,!1,l,r,i),i+="",n&&me.test(i+r)&&(i=[r,i],s.colorStringFilter(i),r=i[0],i=i[1]);var p,d,f,m,v,x,w,T,M,S,E,P,A,C=r.split(", ").join(",").split(" "),O=i.split(", ").join(",").split(" "),k=C.length,L=h!==!1;for((-1!==i.indexOf(",")||-1!==r.indexOf(","))&&(C=C.join(" ").replace(D,", ").split(" "),O=O.join(" ").replace(D,", ").split(" "),k=C.length),k!==O.length&&(C=(a||"").split(" "),k=C.length),o.plugin=u,o.setRatio=c,me.lastIndex=0,p=0;k>p;p++)if(m=C[p],v=O[p],T=parseFloat(m),T||0===T)o.appendXtra("",T,le(v,T),v.replace(_,""),L&&-1!==v.indexOf("px"),!0);else if(n&&me.test(m))P=v.indexOf(")")+1,P=")"+(P?v.substr(P):""),A=-1!==v.indexOf("hsl")&&X,m=de(m,A),v=de(v,A),M=m.length+v.length>6,M&&!X&&0===v[3]?(o["xs"+o.l]+=o.l?" transparent":"transparent",o.e=o.e.split(O[p]).join("transparent")):(X||(M=!1),A?o.appendXtra(M?"hsla(":"hsl(",m[0],le(v[0],m[0]),",",!1,!0).appendXtra("",m[1],le(v[1],m[1]),"%,",!1).appendXtra("",m[2],le(v[2],m[2]),M?"%,":"%"+P,!1):o.appendXtra(M?"rgba(":"rgb(",m[0],v[0]-m[0],",",!0,!0).appendXtra("",m[1],v[1]-m[1],",",!0).appendXtra("",m[2],v[2]-m[2],M?",":P,!0),M&&(m=m.length<4?1:m[3],o.appendXtra("",m,(v.length<4?1:v[3])-m,P,!1))),me.lastIndex=0;else if(x=m.match(b)){if(w=v.match(_),!w||w.length!==x.length)return o;for(f=0,d=0;d<x.length;d++)E=x[d],S=m.indexOf(E,f),o.appendXtra(m.substr(f,S-f),Number(E),le(w[d],E),"",L&&"px"===m.substr(S+E.length,2),0===d),f=S+E.length;o["xs"+o.l]+=m.substr(f)}else o["xs"+o.l]+=o.l||o["xs"+o.l]?" "+v:v;if(-1!==i.indexOf("=")&&o.data){for(P=o.xs0+o.data.s,p=1;p<o.l;p++)P+=o["xs"+p]+o.data["xn"+p];o.e=P+o["xs"+p]}return o.l||(o.type=-1,o.xs0=o.e),o.xfirst||o},we=9;for(c=be.prototype,c.l=c.pr=0;--we>0;)c["xn"+we]=0,c["xs"+we]="";c.xs0="",c._next=c._prev=c.xfirst=c.data=c.plugin=c.setRatio=c.rxp=null,c.appendXtra=function(e,t,r,i,n,a){var o=this,s=o.l;return o["xs"+s]+=a&&(s||o["xs"+s])?" "+e:e||"",r||0===s||o.plugin?(o.l++,o.type=o.setRatio?2:1,o["xs"+o.l]=i||"",s>0?(o.data["xn"+s]=t+r,o.rxp["xn"+s]=n,o["xn"+s]=t,o.plugin||(o.xfirst=new be(o,"xn"+s,t,r,o.xfirst||o,0,o.n,n,o.pr),o.xfirst.xs0=0),o):(o.data={s:t+r},o.rxp={},o.s=t,o.c=r,o.r=n,o)):(o["xs"+s]+=t+(i||""),o)};var Te=function(e,t){t=t||{},this.p=t.prefix?Z(e)||e:e,u[e]=u[this.p]=this,this.format=t.formatter||ve(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.pr=t.priority||0},Me=H._registerComplexSpecialProp=function(e,t,r){"object"!=typeof t&&(t={parser:r});var i,n,a=e.split(","),o=t.defaultValue;for(r=r||[o],i=0;i<a.length;i++)t.prefix=0===i&&t.prefix,t.defaultValue=r[i]||o,n=new Te(a[i],t)},Se=H._registerPluginProp=function(e){if(!u[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Me(e,{parser:function(e,r,i,n,a,o,s){var c=l.com.greensock.plugins[t];return c?(c._cssRegister(),u[i].parse(e,r,i,n,a,o,s)):(q("Error: "+t+" js file not loaded."),a)}})}};c=Te.prototype,c.parseComplex=function(e,t,r,i,n,a){var o,s,l,u,c,h,p=this.keyword;if(this.multi&&(D.test(r)||D.test(t)?(s=t.replace(D,"|").split("|"),l=r.replace(D,"|").split("|")):p&&(s=[t],l=[r])),l){for(u=l.length>s.length?l.length:s.length,o=0;u>o;o++)t=s[o]=s[o]||this.dflt,r=l[o]=l[o]||this.dflt,p&&(c=t.indexOf(p),h=r.indexOf(p),c!==h&&(-1===h?s[o]=s[o].split(p).join(""):-1===c&&(s[o]+=" "+p)));t=s.join(", "),r=l.join(", ")}return xe(e,this.p,t,r,this.clrs,this.dflt,i,this.pr,n,a)},c.parse=function(e,t,r,i,n,o){return this.parseComplex(e.style,this.format(J(e,this.p,a,!1,this.dflt)),this.format(t),n,o)},s.registerSpecialProp=function(e,t,r){Me(e,{parser:function(e,i,n,a,o,s){var l=new be(e,n,0,0,o,2,n,!1,r);return l.plugin=s,l.setRatio=t(e,i,a._tween,n),l},priority:r})},s.useSVGTransformAttr=d||f;var Ee,Pe="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Ae=Z("transform"),Ce=K+"transform",Oe=Z("transformOrigin"),ke=null!==Z("perspective"),Le=H.Transform=function(){this.perspective=parseFloat(s.defaultTransformPerspective)||0,this.force3D=s.defaultForce3D!==!1&&ke?s.defaultForce3D||"auto":!1},Re=window.SVGElement,Ie=function(e,t,r){var i,n=j.createElementNS("http://www.w3.org/2000/svg",e),a=/([a-z])([A-Z])/g;for(i in r)n.setAttributeNS(null,i.replace(a,"$1-$2").toLowerCase(),r[i]);return t.appendChild(n),n},De=j.documentElement,Fe=function(){var e,t,r,i=v||/Android/i.test(W)&&!window.chrome;return j.createElementNS&&!i&&(e=Ie("svg",De),t=Ie("rect",e,{width:100,height:50,x:100}),r=t.getBoundingClientRect().width,t.style[Oe]="50% 50%",t.style[Ae]="scaleX(0.5)",i=r===t.getBoundingClientRect().width&&!(f&&ke),De.removeChild(e)),i}(),Ne=function(e,t,r,i,n,a){var o,l,u,c,h,p,d,f,m,v,g,y,b,_,x=e._gsTransform,w=Ve(e,!0);x&&(b=x.xOrigin,_=x.yOrigin),(!i||(o=i.split(" ")).length<2)&&(d=e.getBBox(),t=se(t).split(" "),o=[(-1!==t[0].indexOf("%")?parseFloat(t[0])/100*d.width:parseFloat(t[0]))+d.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*d.height:parseFloat(t[1]))+d.y]),r.xOrigin=c=parseFloat(o[0]),r.yOrigin=h=parseFloat(o[1]),i&&w!==je&&(p=w[0],d=w[1],f=w[2],m=w[3],v=w[4],g=w[5],y=p*m-d*f,l=c*(m/y)+h*(-f/y)+(f*g-m*v)/y,u=c*(-d/y)+h*(p/y)-(p*g-d*v)/y,c=r.xOrigin=o[0]=l,h=r.yOrigin=o[1]=u),x&&(a&&(r.xOffset=x.xOffset,r.yOffset=x.yOffset,x=r),n||n!==!1&&s.defaultSmoothOrigin!==!1?(l=c-b,u=h-_,x.xOffset+=l*w[0]+u*w[2]-l,x.yOffset+=l*w[1]+u*w[3]-u):x.xOffset=x.yOffset=0),a||e.setAttribute("data-svg-origin",o.join(" "))},Be=function(e){try{return e.getBBox()}catch(e){}},Ge=function(e){return!!(Re&&e.getBBox&&e.getCTM&&Be(e)&&(!e.parentNode||e.parentNode.getBBox&&e.parentNode.getCTM))},je=[1,0,0,1,0,0],Ve=function(e,t){var r,i,n,a,o,s,l=e._gsTransform||new Le,u=1e5,c=e.style;if(Ae?i=J(e,Ce,null,!0):e.currentStyle&&(i=e.currentStyle.filter.match(R),i=i&&4===i.length?[i[0].substr(4),Number(i[2].substr(4)),Number(i[1].substr(4)),i[3].substr(4),l.x||0,l.y||0].join(","):""),r=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,r&&Ae&&((s="none"===Q(e).display)||!e.parentNode)&&(s&&(a=c.display,c.display="block"),e.parentNode||(o=1,De.appendChild(e)),i=J(e,Ce,null,!0),r=!i||"none"===i||"matrix(1, 0, 0, 1, 0, 0)"===i,a?c.display=a:s&&Xe(c,"display"),o&&De.removeChild(e)),(l.svg||e.getBBox&&Ge(e))&&(r&&-1!==(c[Ae]+"").indexOf("matrix")&&(i=c[Ae],r=0),n=e.getAttribute("transform"),r&&n&&(-1!==n.indexOf("matrix")?(i=n,r=0):-1!==n.indexOf("translate")&&(i="matrix(1,0,0,1,"+n.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",r=0))),r)return je;for(n=(i||"").match(b)||[],we=n.length;--we>-1;)a=Number(n[we]),n[we]=(o=a-(a|=0))?(o*u+(0>o?-.5:.5)|0)/u+a:a;return t&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n},Ue=H.getTransform=function(e,r,i,n){if(e._gsTransform&&i&&!n)return e._gsTransform;var a,o,l,u,c,h,p=i?e._gsTransform||new Le:new Le,d=p.scaleX<0,f=2e-5,m=1e5,v=ke?parseFloat(J(e,Oe,r,!1,"0 0 0").split(" ")[2])||p.zOrigin||0:0,g=parseFloat(s.defaultTransformPerspective)||0;if(p.svg=!(!e.getBBox||!Ge(e)),p.svg&&(Ne(e,J(e,Oe,r,!1,"50% 50%")+"",p,e.getAttribute("data-svg-origin")),Ee=s.useSVGTransformAttr||Fe),a=Ve(e),a!==je){if(16===a.length){var y,b,_,x,w,T=a[0],M=a[1],S=a[2],E=a[3],P=a[4],A=a[5],C=a[6],O=a[7],k=a[8],L=a[9],R=a[10],I=a[12],D=a[13],F=a[14],N=a[11],G=Math.atan2(C,R);p.zOrigin&&(F=-p.zOrigin,I=k*F-a[12],D=L*F-a[13],F=R*F+p.zOrigin-a[14]),p.rotationX=G*B,G&&(x=Math.cos(-G),w=Math.sin(-G),y=P*x+k*w,b=A*x+L*w,_=C*x+R*w,k=P*-w+k*x,L=A*-w+L*x,R=C*-w+R*x,N=O*-w+N*x,P=y,A=b,C=_),G=Math.atan2(-S,R),p.rotationY=G*B,G&&(x=Math.cos(-G),w=Math.sin(-G),y=T*x-k*w,b=M*x-L*w,_=S*x-R*w,L=M*w+L*x,R=S*w+R*x,N=E*w+N*x,T=y,M=b,S=_),G=Math.atan2(M,T),p.rotation=G*B,G&&(x=Math.cos(-G),w=Math.sin(-G),T=T*x+P*w,b=M*x+A*w,A=M*-w+A*x,C=S*-w+C*x,M=b),p.rotationX&&Math.abs(p.rotationX)+Math.abs(p.rotation)>359.9&&(p.rotationX=p.rotation=0,p.rotationY=180-p.rotationY),p.scaleX=(Math.sqrt(T*T+M*M)*m+.5|0)/m,p.scaleY=(Math.sqrt(A*A+L*L)*m+.5|0)/m,p.scaleZ=(Math.sqrt(C*C+R*R)*m+.5|0)/m,p.rotationX||p.rotationY?p.skewX=0:(p.skewX=P||A?Math.atan2(P,A)*B+p.rotation:p.skewX||0,Math.abs(p.skewX)>90&&Math.abs(p.skewX)<270&&(d?(p.scaleX*=-1,p.skewX+=p.rotation<=0?180:-180,p.rotation+=p.rotation<=0?180:-180):(p.scaleY*=-1,p.skewX+=p.skewX<=0?180:-180))),p.perspective=N?1/(0>N?-N:N):0,p.x=I,p.y=D,p.z=F,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*T-p.yOrigin*P),p.y-=p.yOrigin-(p.yOrigin*M-p.xOrigin*A))}else if(!ke||n||!a.length||p.x!==a[4]||p.y!==a[5]||!p.rotationX&&!p.rotationY){var j=a.length>=6,V=j?a[0]:1,U=a[1]||0,z=a[2]||0,H=j?a[3]:1;p.x=a[4]||0,p.y=a[5]||0,l=Math.sqrt(V*V+U*U),u=Math.sqrt(H*H+z*z),c=V||U?Math.atan2(U,V)*B:p.rotation||0,h=z||H?Math.atan2(z,H)*B+c:p.skewX||0,Math.abs(h)>90&&Math.abs(h)<270&&(d?(l*=-1,h+=0>=c?180:-180,c+=0>=c?180:-180):(u*=-1,h+=0>=h?180:-180)),p.scaleX=l,p.scaleY=u,p.rotation=c,p.skewX=h,ke&&(p.rotationX=p.rotationY=p.z=0,p.perspective=g,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*V+p.yOrigin*z),p.y-=p.yOrigin-(p.xOrigin*U+p.yOrigin*H))}p.zOrigin=v;for(o in p)p[o]<f&&p[o]>-f&&(p[o]=0)}return i&&(e._gsTransform=p,p.svg&&(Ee&&e.style[Ae]?t.delayedCall(.001,function(){Xe(e.style,Ae)}):!Ee&&e.getAttribute("transform")&&t.delayedCall(.001,function(){e.removeAttribute("transform")}))),p},ze=function(e){var t,r,i=this.data,n=-i.rotation*N,a=n+i.skewX*N,o=1e5,s=(Math.cos(n)*i.scaleX*o|0)/o,l=(Math.sin(n)*i.scaleX*o|0)/o,u=(Math.sin(a)*-i.scaleY*o|0)/o,c=(Math.cos(a)*i.scaleY*o|0)/o,h=this.t.style,p=this.t.currentStyle;if(p){r=l,l=-u,u=-r,t=p.filter,h.filter="";var d,f,m=this.t.offsetWidth,g=this.t.offsetHeight,y="absolute"!==p.position,b="progid:DXImageTransform.Microsoft.Matrix(M11="+s+", M12="+l+", M21="+u+", M22="+c,_=i.x+m*i.xPercent/100,x=i.y+g*i.yPercent/100;if(null!=i.ox&&(d=(i.oxp?m*i.ox*.01:i.ox)-m/2,f=(i.oyp?g*i.oy*.01:i.oy)-g/2,_+=d-(d*s+f*l),x+=f-(d*u+f*c)),y?(d=m/2,f=g/2,b+=", Dx="+(d-(d*s+f*l)+_)+", Dy="+(f-(d*u+f*c)+x)+")"):b+=", sizingMethod='auto expand')",h.filter=-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?t.replace(I,b):b+" "+t,(0===e||1===e)&&1===s&&0===l&&0===u&&1===c&&(y&&-1===b.indexOf("Dx=0, Dy=0")||M.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf("gradient("&&t.indexOf("Alpha"))&&h.removeAttribute("filter")),!y){var w,S,E,P=8>v?1:-1;for(d=i.ieOffsetX||0,f=i.ieOffsetY||0,i.ieOffsetX=Math.round((m-((0>s?-s:s)*m+(0>l?-l:l)*g))/2+_),i.ieOffsetY=Math.round((g-((0>c?-c:c)*g+(0>u?-u:u)*m))/2+x),we=0;4>we;we++)S=ae[we],w=p[S],r=-1!==w.indexOf("px")?parseFloat(w):ee(this.t,S,parseFloat(w),w.replace(T,""))||0,E=r!==i[S]?2>we?-i.ieOffsetX:-i.ieOffsetY:2>we?d-i.ieOffsetX:f-i.ieOffsetY,h[S]=(i[S]=Math.round(r-E*(0===we||2===we?1:P)))+"px"}}},He=H.set3DTransformRatio=H.setTransformRatio=function(e){var t,r,i,n,a,o,s,l,u,c,h,p,d,m,v,g,y,b,_,x,w,T,M,S=this.data,E=this.t.style,P=S.rotation,A=S.rotationX,C=S.rotationY,O=S.scaleX,k=S.scaleY,L=S.scaleZ,R=S.x,I=S.y,D=S.z,F=S.svg,B=S.perspective,G=S.force3D;if(!(((1!==e&&0!==e||"auto"!==G||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&G||D||B||C||A||1!==L)&&(!Ee||!F)&&ke))return void(P||S.skewX||F?(P*=N,T=S.skewX*N,M=1e5,t=Math.cos(P)*O,n=Math.sin(P)*O,r=Math.sin(P-T)*-k,a=Math.cos(P-T)*k,T&&"simple"===S.skewType&&(y=Math.tan(T-S.skewY*N),y=Math.sqrt(1+y*y),r*=y,a*=y,S.skewY&&(y=Math.tan(S.skewY*N),y=Math.sqrt(1+y*y),t*=y,n*=y)),F&&(R+=S.xOrigin-(S.xOrigin*t+S.yOrigin*r)+S.xOffset,I+=S.yOrigin-(S.xOrigin*n+S.yOrigin*a)+S.yOffset,Ee&&(S.xPercent||S.yPercent)&&(m=this.t.getBBox(),R+=.01*S.xPercent*m.width,I+=.01*S.yPercent*m.height),m=1e-6,m>R&&R>-m&&(R=0),m>I&&I>-m&&(I=0)),_=(t*M|0)/M+","+(n*M|0)/M+","+(r*M|0)/M+","+(a*M|0)/M+","+R+","+I+")",F&&Ee?this.t.setAttribute("transform","matrix("+_):E[Ae]=(S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) matrix(":"matrix(")+_):E[Ae]=(S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) matrix(":"matrix(")+O+",0,0,"+k+","+R+","+I+")");if(f&&(m=1e-4,m>O&&O>-m&&(O=L=2e-5),m>k&&k>-m&&(k=L=2e-5),!B||S.z||S.rotationX||S.rotationY||(B=0)),P||S.skewX)P*=N,v=t=Math.cos(P),g=n=Math.sin(P),S.skewX&&(P-=S.skewX*N,v=Math.cos(P),g=Math.sin(P),"simple"===S.skewType&&(y=Math.tan((S.skewX-S.skewY)*N),y=Math.sqrt(1+y*y),v*=y,g*=y,S.skewY&&(y=Math.tan(S.skewY*N),y=Math.sqrt(1+y*y),t*=y,n*=y))),r=-g,a=v;else{if(!(C||A||1!==L||B||F))return void(E[Ae]=(S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) translate3d(":"translate3d(")+R+"px,"+I+"px,"+D+"px)"+(1!==O||1!==k?" scale("+O+","+k+")":""));t=a=1,r=n=0}u=1,i=o=s=l=c=h=0,p=B?-1/B:0,d=S.zOrigin,m=1e-6,x=",",w="0",P=C*N,P&&(v=Math.cos(P),g=Math.sin(P),s=-g,c=p*-g,i=t*g,o=n*g,u=v,p*=v,t*=v,n*=v),P=A*N,P&&(v=Math.cos(P),g=Math.sin(P),y=r*v+i*g,b=a*v+o*g,l=u*g,h=p*g,i=r*-g+i*v,o=a*-g+o*v,u*=v,p*=v,r=y,a=b),1!==L&&(i*=L,o*=L,u*=L,p*=L),1!==k&&(r*=k,a*=k,l*=k,h*=k),1!==O&&(t*=O,n*=O,s*=O,c*=O),(d||F)&&(d&&(R+=i*-d,I+=o*-d,D+=u*-d+d),F&&(R+=S.xOrigin-(S.xOrigin*t+S.yOrigin*r)+S.xOffset,I+=S.yOrigin-(S.xOrigin*n+S.yOrigin*a)+S.yOffset),m>R&&R>-m&&(R=w),m>I&&I>-m&&(I=w),m>D&&D>-m&&(D=0)),_=S.xPercent||S.yPercent?"translate("+S.xPercent+"%,"+S.yPercent+"%) matrix3d(":"matrix3d(",_+=(m>t&&t>-m?w:t)+x+(m>n&&n>-m?w:n)+x+(m>s&&s>-m?w:s),_+=x+(m>c&&c>-m?w:c)+x+(m>r&&r>-m?w:r)+x+(m>a&&a>-m?w:a),A||C||1!==L?(_+=x+(m>l&&l>-m?w:l)+x+(m>h&&h>-m?w:h)+x+(m>i&&i>-m?w:i),
_+=x+(m>o&&o>-m?w:o)+x+(m>u&&u>-m?w:u)+x+(m>p&&p>-m?w:p)+x):_+=",0,0,0,0,1,0,",_+=R+x+I+x+D+x+(B?1+-D/B:1)+")",E[Ae]=_};c=Le.prototype,c.x=c.y=c.z=c.skewX=c.skewY=c.rotation=c.rotationX=c.rotationY=c.zOrigin=c.xPercent=c.yPercent=c.xOffset=c.yOffset=0,c.scaleX=c.scaleY=c.scaleZ=1,Me("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,r,i,n,o,l){if(i._lastParsedTransform===l)return n;i._lastParsedTransform=l;var u;"function"==typeof l[r]&&(u=l[r],l[r]=t);var c,h,p,d,f,m,v,b,_,x=e._gsTransform,w=e.style,T=1e-6,M=Pe.length,S=l,E={},P="transformOrigin",A=Ue(e,a,!0,S.parseTransform),C=S.transform&&("function"==typeof S.transform?S.transform(y,g):S.transform);if(i._transform=A,C&&"string"==typeof C&&Ae)h=U.style,h[Ae]=C,h.display="block",h.position="absolute",j.body.appendChild(U),c=Ue(U,null,!1),A.svg&&(m=A.xOrigin,v=A.yOrigin,c.x-=A.xOffset,c.y-=A.yOffset,(S.transformOrigin||S.svgOrigin)&&(C={},Ne(e,se(S.transformOrigin),C,S.svgOrigin,S.smoothOrigin,!0),m=C.xOrigin,v=C.yOrigin,c.x-=C.xOffset-A.xOffset,c.y-=C.yOffset-A.yOffset),(m||v)&&(b=Ve(U,!0),c.x-=m-(m*b[0]+v*b[2]),c.y-=v-(m*b[1]+v*b[3]))),j.body.removeChild(U),c.perspective||(c.perspective=A.perspective),null!=S.xPercent&&(c.xPercent=ue(S.xPercent,A.xPercent)),null!=S.yPercent&&(c.yPercent=ue(S.yPercent,A.yPercent));else if("object"==typeof S){if(c={scaleX:ue(null!=S.scaleX?S.scaleX:S.scale,A.scaleX),scaleY:ue(null!=S.scaleY?S.scaleY:S.scale,A.scaleY),scaleZ:ue(S.scaleZ,A.scaleZ),x:ue(S.x,A.x),y:ue(S.y,A.y),z:ue(S.z,A.z),xPercent:ue(S.xPercent,A.xPercent),yPercent:ue(S.yPercent,A.yPercent),perspective:ue(S.transformPerspective,A.perspective)},f=S.directionalRotation,null!=f)if("object"==typeof f)for(h in f)S[h]=f[h];else S.rotation=f;"string"==typeof S.x&&-1!==S.x.indexOf("%")&&(c.x=0,c.xPercent=ue(S.x,A.xPercent)),"string"==typeof S.y&&-1!==S.y.indexOf("%")&&(c.y=0,c.yPercent=ue(S.y,A.yPercent)),c.rotation=ce("rotation"in S?S.rotation:"shortRotation"in S?S.shortRotation+"_short":"rotationZ"in S?S.rotationZ:A.rotation-A.skewY,A.rotation-A.skewY,"rotation",E),ke&&(c.rotationX=ce("rotationX"in S?S.rotationX:"shortRotationX"in S?S.shortRotationX+"_short":A.rotationX||0,A.rotationX,"rotationX",E),c.rotationY=ce("rotationY"in S?S.rotationY:"shortRotationY"in S?S.shortRotationY+"_short":A.rotationY||0,A.rotationY,"rotationY",E)),c.skewX=ce(S.skewX,A.skewX-A.skewY),(c.skewY=ce(S.skewY,A.skewY))&&(c.skewX+=c.skewY,c.rotation+=c.skewY)}for(ke&&null!=S.force3D&&(A.force3D=S.force3D,d=!0),A.skewType=S.skewType||A.skewType||s.defaultSkewType,p=A.force3D||A.z||A.rotationX||A.rotationY||c.z||c.rotationX||c.rotationY||c.perspective,p||null==S.scale||(c.scaleZ=1);--M>-1;)_=Pe[M],C=c[_]-A[_],(C>T||-T>C||null!=S[_]||null!=G[_])&&(d=!0,n=new be(A,_,A[_],C,n),_ in E&&(n.e=E[_]),n.xs0=0,n.plugin=o,i._overwriteProps.push(n.n));return C=S.transformOrigin,A.svg&&(C||S.svgOrigin)&&(m=A.xOffset,v=A.yOffset,Ne(e,se(C),c,S.svgOrigin,S.smoothOrigin),n=_e(A,"xOrigin",(x?A:c).xOrigin,c.xOrigin,n,P),n=_e(A,"yOrigin",(x?A:c).yOrigin,c.yOrigin,n,P),(m!==A.xOffset||v!==A.yOffset)&&(n=_e(A,"xOffset",x?m:A.xOffset,A.xOffset,n,P),n=_e(A,"yOffset",x?v:A.yOffset,A.yOffset,n,P)),C=Ee?null:"0px 0px"),(C||ke&&p&&A.zOrigin)&&(Ae?(d=!0,_=Oe,C=(C||J(e,_,a,!1,"50% 50%"))+"",n=new be(w,_,0,0,n,-1,P),n.b=w[_],n.plugin=o,ke?(h=A.zOrigin,C=C.split(" "),A.zOrigin=(C.length>2&&(0===h||"0px"!==C[2])?parseFloat(C[2]):h)||0,n.xs0=n.e=C[0]+" "+(C[1]||"50%")+" 0px",n=new be(A,"zOrigin",0,0,n,-1,n.n),n.b=h,n.xs0=n.e=A.zOrigin):n.xs0=n.e=C):se(C+"",A)),d&&(i._transformType=A.svg&&Ee||!p&&3!==this._transformType?2:3),u&&(l[r]=u),n},prefix:!0}),Me("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Me("borderRadius",{defaultValue:"0px",parser:function(e,t,r,i,o){t=this.format(t);var s,l,u,c,h,p,d,f,m,v,g,y,b,_,x,w,T=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],M=e.style;for(m=parseFloat(e.offsetWidth),v=parseFloat(e.offsetHeight),s=t.split(" "),l=0;l<T.length;l++)this.p.indexOf("border")&&(T[l]=Z(T[l])),h=c=J(e,T[l],a,!1,"0px"),-1!==h.indexOf(" ")&&(c=h.split(" "),h=c[0],c=c[1]),p=u=s[l],d=parseFloat(h),y=h.substr((d+"").length),b="="===p.charAt(1),b?(f=parseInt(p.charAt(0)+"1",10),p=p.substr(2),f*=parseFloat(p),g=p.substr((f+"").length-(0>f?1:0))||""):(f=parseFloat(p),g=p.substr((f+"").length)),""===g&&(g=n[r]||y),g!==y&&(_=ee(e,"borderLeft",d,y),x=ee(e,"borderTop",d,y),"%"===g?(h=_/m*100+"%",c=x/v*100+"%"):"em"===g?(w=ee(e,"borderLeft",1,"em"),h=_/w+"em",c=x/w+"em"):(h=_+"px",c=x+"px"),b&&(p=parseFloat(h)+f+g,u=parseFloat(c)+f+g)),o=xe(M,T[l],h+" "+c,p+" "+u,!1,"0px",o);return o},prefix:!0,formatter:ve("0px 0px 0px 0px",!1,!0)}),Me("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,r,i,n){return xe(e.style,r,this.format(J(e,r,a,!1,"0px 0px")),this.format(t),!1,"0px",n)},prefix:!0,formatter:ve("0px 0px",!1,!0)}),Me("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,r,i,n,o){var s,l,u,c,h,p,d="background-position",f=a||Q(e,null),m=this.format((f?v?f.getPropertyValue(d+"-x")+" "+f.getPropertyValue(d+"-y"):f.getPropertyValue(d):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),g=this.format(t);if(-1!==m.indexOf("%")!=(-1!==g.indexOf("%"))&&g.split(",").length<2&&(p=J(e,"backgroundImage").replace(O,""),p&&"none"!==p)){for(s=m.split(" "),l=g.split(" "),z.setAttribute("src",p),u=2;--u>-1;)m=s[u],c=-1!==m.indexOf("%"),c!==(-1!==l[u].indexOf("%"))&&(h=0===u?e.offsetWidth-z.width:e.offsetHeight-z.height,s[u]=c?parseFloat(m)/100*h+"px":parseFloat(m)/h*100+"%");m=s.join(" ")}return this.parseComplex(e.style,m,g,n,o)},formatter:se}),Me("backgroundSize",{defaultValue:"0 0",formatter:function(e){return e+="",se(-1===e.indexOf(" ")?e+" "+e:e)}}),Me("perspective",{defaultValue:"0px",prefix:!0}),Me("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Me("transformStyle",{prefix:!0}),Me("backfaceVisibility",{prefix:!0}),Me("userSelect",{prefix:!0}),Me("margin",{parser:ge("marginTop,marginRight,marginBottom,marginLeft")}),Me("padding",{parser:ge("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Me("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,r,i,n,o){var s,l,u;return 9>v?(l=e.currentStyle,u=8>v?" ":",",s="rect("+l.clipTop+u+l.clipRight+u+l.clipBottom+u+l.clipLeft+")",t=this.format(t).split(",").join(u)):(s=this.format(J(e,this.p,a,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,s,t,n,o)}}),Me("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Me("autoRound,strictUnits",{parser:function(e,t,r,i,n){return n}}),Me("border",{defaultValue:"0px solid #000",parser:function(e,t,r,i,n,o){var s=J(e,"borderTopWidth",a,!1,"0px"),l=this.format(t).split(" "),u=l[0].replace(T,"");return"px"!==u&&(s=parseFloat(s)/ee(e,"borderTopWidth",1,u)+u),this.parseComplex(e.style,this.format(s+" "+J(e,"borderTopStyle",a,!1,"solid")+" "+J(e,"borderTopColor",a,!1,"#000")),l.join(" "),n,o)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(me)||["#000"])[0]}}),Me("borderWidth",{parser:ge("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Me("float,cssFloat,styleFloat",{parser:function(e,t,r,i,n){var a=e.style,o="cssFloat"in a?"cssFloat":"styleFloat";return new be(a,o,0,0,n,-1,r,!1,0,a[o],t)}});var We=function(e){var t,r=this.t,i=r.filter||J(this.data,"filter")||"",n=this.s+this.c*e|0;100===n&&(-1===i.indexOf("atrix(")&&-1===i.indexOf("radient(")&&-1===i.indexOf("oader(")?(r.removeAttribute("filter"),t=!J(this.data,"filter")):(r.filter=i.replace(E,""),t=!0)),t||(this.xn1&&(r.filter=i=i||"alpha(opacity="+n+")"),-1===i.indexOf("pacity")?0===n&&this.xn1||(r.filter=i+" alpha(opacity="+n+")"):r.filter=i.replace(M,"opacity="+n))};Me("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,r,i,n,o){var s=parseFloat(J(e,"opacity",a,!1,"1")),l=e.style,u="autoAlpha"===r;return"string"==typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+s),u&&1===s&&"hidden"===J(e,"visibility",a)&&0!==t&&(s=0),X?n=new be(l,"opacity",s,t-s,n):(n=new be(l,"opacity",100*s,100*(t-s),n),n.xn1=u?1:0,l.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=e,n.plugin=o,n.setRatio=We),u&&(n=new be(l,"visibility",0,0,n,-1,null,!1,0,0!==s?"inherit":"hidden",0===t?"hidden":"inherit"),n.xs0="inherit",i._overwriteProps.push(n.n),i._overwriteProps.push(r)),n}});var Xe=function(e,t){t&&(e.removeProperty?(("ms"===t.substr(0,2)||"webkit"===t.substr(0,6))&&(t="-"+t),e.removeProperty(t.replace(A,"-$1").toLowerCase())):e.removeAttribute(t))},Ye=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,r=this.t.style;t;)t.v?r[t.p]=t.v:Xe(r,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Me("className",{parser:function(e,t,r,n,o,s,l){var u,c,h,p,d,f=e.getAttribute("class")||"",m=e.style.cssText;if(o=n._classNamePT=new be(e,r,0,0,o,2),o.setRatio=Ye,o.pr=-11,i=!0,o.b=f,c=re(e,a),h=e._gsClassPT){for(p={},d=h.data;d;)p[d.p]=1,d=d._next;h.setRatio(1)}return e._gsClassPT=o,o.e="="!==t.charAt(1)?t:f.replace(new RegExp("(?:\\s|^)"+t.substr(2)+"(?![\\w-])"),"")+("+"===t.charAt(0)?" "+t.substr(2):""),e.setAttribute("class",o.e),u=ie(e,c,re(e),l,p),e.setAttribute("class",f),o.data=u.firstMPT,e.style.cssText=m,o=o.xfirst=n.parse(e,u.difs,o,s)}});var qe=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,r,i,n,a,o=this.t.style,s=u.transform.parse;if("all"===this.e)o.cssText="",n=!0;else for(t=this.e.split(" ").join("").split(","),i=t.length;--i>-1;)r=t[i],u[r]&&(u[r].parse===s?n=!0:r="transformOrigin"===r?Oe:u[r].p),Xe(o,r);n&&(Xe(o,Ae),a=this.t._gsTransform,a&&(a.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Me("clearProps",{parser:function(e,t,r,n,a){return a=new be(e,r,0,0,a,2),a.setRatio=qe,a.e=t,a.pr=-10,a.data=n._tween,i=!0,a}}),c="bezier,throwProps,physicsProps,physics2D".split(","),we=c.length;we--;)Se(c[we]);c=s.prototype,c._firstPT=c._lastParsedTransform=c._transform=null,c._onInitTween=function(e,t,r,l){if(!e.nodeType)return!1;this._target=g=e,this._tween=r,this._vars=t,y=l,h=t.autoRound,i=!1,n=t.suffixMap||s.suffixMap,a=Q(e,""),o=this._overwriteProps;var c,f,v,b,_,x,w,T,M,E=e.style;if(p&&""===E.zIndex&&(c=J(e,"zIndex",a),("auto"===c||""===c)&&this._addLazySet(E,"zIndex",0)),"string"==typeof t&&(b=E.cssText,c=re(e,a),E.cssText=b+";"+t,c=ie(e,c,re(e)).difs,!X&&S.test(t)&&(c.opacity=parseFloat(RegExp.$1)),t=c,E.cssText=b),this._firstPT=f=t.className?u.className.parse(e,t.className,"className",this,null,null,t):this.parse(e,t,null),this._transformType){for(M=3===this._transformType,Ae?d&&(p=!0,""===E.zIndex&&(w=J(e,"zIndex",a),("auto"===w||""===w)&&this._addLazySet(E,"zIndex",0)),m&&this._addLazySet(E,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(M?"visible":"hidden"))):E.zoom=1,v=f;v&&v._next;)v=v._next;T=new be(e,"transform",0,0,null,2),this._linkCSSP(T,null,v),T.setRatio=Ae?He:ze,T.data=this._transform||Ue(e,a,!0),T.tween=r,T.pr=-1,o.pop()}if(i){for(;f;){for(x=f._next,v=b;v&&v.pr>f.pr;)v=v._next;(f._prev=v?v._prev:_)?f._prev._next=f:b=f,(f._next=v)?v._prev=f:_=f,f=x}this._firstPT=b}return!0},c.parse=function(e,t,r,i){var o,s,l,c,p,d,f,m,v,b,_=e.style;for(o in t)d=t[o],"function"==typeof d&&(d=d(y,g)),s=u[o],s?r=s.parse(e,d,o,this,r,i,t):(p=J(e,o,a)+"",v="string"==typeof d,"color"===o||"fill"===o||"stroke"===o||-1!==o.indexOf("Color")||v&&P.test(d)?(v||(d=de(d),d=(d.length>3?"rgba(":"rgb(")+d.join(",")+")"),r=xe(_,o,p,d,!0,"transparent",r,0,i)):v&&F.test(d)?r=xe(_,o,p,d,!0,null,r,0,i):(l=parseFloat(p),f=l||0===l?p.substr((l+"").length):"",(""===p||"auto"===p)&&("width"===o||"height"===o?(l=oe(e,o,a),f="px"):"left"===o||"top"===o?(l=te(e,o,a),f="px"):(l="opacity"!==o?0:1,f="")),b=v&&"="===d.charAt(1),b?(c=parseInt(d.charAt(0)+"1",10),d=d.substr(2),c*=parseFloat(d),m=d.replace(T,"")):(c=parseFloat(d),m=v?d.replace(T,""):""),""===m&&(m=o in n?n[o]:f),d=c||0===c?(b?c+l:c)+m:t[o],f!==m&&""!==m&&(c||0===c)&&l&&(l=ee(e,o,l,f),"%"===m?(l/=ee(e,o,100,"%")/100,t.strictUnits!==!0&&(p=l+"%")):"em"===m||"rem"===m||"vw"===m||"vh"===m?l/=ee(e,o,1,m):"px"!==m&&(c=ee(e,o,c,m),m="px"),b&&(c||0===c)&&(d=c+l+m)),b&&(c+=l),!l&&0!==l||!c&&0!==c?void 0!==_[o]&&(d||d+""!="NaN"&&null!=d)?(r=new be(_,o,c||l||0,0,r,-1,o,!1,0,p,d),r.xs0="none"!==d||"display"!==o&&-1===o.indexOf("Style")?d:p):q("invalid "+o+" tween value: "+t[o]):(r=new be(_,o,l,c-l,r,0,o,h!==!1&&("px"===m||"zIndex"===o),0,p,d),r.xs0=m))),i&&r&&!r.plugin&&(r.plugin=i);return r},c.setRatio=function(e){var t,r,i,n=this._firstPT,a=1e-6;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||this._tween._rawPrevTime===-1e-6)for(;n;){if(t=n.c*e+n.s,n.r?t=Math.round(t):a>t&&t>-a&&(t=0),n.type)if(1===n.type)if(i=n.l,2===i)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2;else if(3===i)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3;else if(4===i)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4;else if(5===i)n.t[n.p]=n.xs0+t+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4+n.xn4+n.xs5;else{for(r=n.xs0+t+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n.t[n.p]=r}else-1===n.type?n.t[n.p]=n.xs0:n.setRatio&&n.setRatio(e);else n.t[n.p]=t+n.xs0;n=n._next}else for(;n;)2!==n.type?n.t[n.p]=n.b:n.setRatio(e),n=n._next;else for(;n;){if(2!==n.type)if(n.r&&-1!==n.type)if(t=Math.round(n.s+n.c),n.type){if(1===n.type){for(i=n.l,r=n.xs0+t+n.xs1,i=1;i<n.l;i++)r+=n["xn"+i]+n["xs"+(i+1)];n.t[n.p]=r}}else n.t[n.p]=t+n.xs0;else n.t[n.p]=n.e;else n.setRatio(e);n=n._next}},c._enableTransforms=function(e){this._transform=this._transform||Ue(this._target,a,!0),this._transformType=this._transform.svg&&Ee||!e&&3!==this._transformType?2:3};var Ke=function(){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};c._addLazySet=function(e,t,r){var i=this._firstPT=new be(e,t,0,0,this._firstPT,2);i.e=r,i.setRatio=Ke,i.data=this},c._linkCSSP=function(e,t,r,i){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,i=!0),r?r._next=e:i||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=r),e},c._mod=function(e){for(var t=this._firstPT;t;)"function"==typeof e[t.p]&&e[t.p]===Math.round&&(t.r=1),t=t._next},c._kill=function(t){var r,i,n,a=t;if(t.autoAlpha||t.alpha){a={};for(i in t)a[i]=t[i];a.opacity=1,a.autoAlpha&&(a.visibility=1)}for(t.className&&(r=this._classNamePT)&&(n=r.xfirst,n&&n._prev?this._linkCSSP(n._prev,r._next,n._prev._prev):n===this._firstPT&&(this._firstPT=r._next),r._next&&this._linkCSSP(r._next,r._next._next,n._prev),this._classNamePT=null),r=this._firstPT;r;)r.plugin&&r.plugin!==i&&r.plugin._kill&&(r.plugin._kill(t),i=r.plugin),r=r._next;return e.prototype._kill.call(this,a)};var $e=function(e,t,r){var i,n,a,o;if(e.slice)for(n=e.length;--n>-1;)$e(e[n],t,r);else for(i=e.childNodes,n=i.length;--n>-1;)a=i[n],o=a.type,a.style&&(t.push(re(a)),r&&r.push(a)),1!==o&&9!==o&&11!==o||!a.childNodes.length||$e(a,t,r)};return s.cascadeTo=function(e,r,i){var n,a,o,s,l=t.to(e,r,i),u=[l],c=[],h=[],p=[],d=t._internals.reservedProps;for(e=l._targets||l.target,$e(e,c,p),l.render(r,!0,!0),$e(e,h),l.render(0,!0,!0),l._enabled(!0),n=p.length;--n>-1;)if(a=ie(p[n],c[n],h[n]),a.firstMPT){a=a.difs;for(o in i)d[o]&&(a[o]=i[o]);s={};for(o in a)s[o]=c[n][o];u.push(t.fromTo(p[n],r,s,a))}return u},e.activate([s]),s},!0),function(){var e=r._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(e,t,r){return this._tween=r,!0}}),t=function(e){for(;e;)e.f||e.blob||(e.m=Math.round),e=e._next},i=e.prototype;i._onInitAllProps=function(){for(var e,r,i,n=this._tween,a=n.vars.roundProps.join?n.vars.roundProps:n.vars.roundProps.split(","),o=a.length,s={},l=n._propLookup.roundProps;--o>-1;)s[a[o]]=Math.round;for(o=a.length;--o>-1;)for(e=a[o],r=n._firstPT;r;)i=r._next,r.pg?r.t._mod(s):r.n===e&&(2===r.f&&r.t?t(r.t._firstPT):(this._add(r.t,e,r.s,r.c),i&&(i._prev=r._prev),r._prev?r._prev._next=i:n._firstPT===r&&(n._firstPT=i),r._next=r._prev=null,n._propLookup[e]=l)),r=i;return!1},i._add=function(e,t,r,i){this._addTween(e,t,r,r+i,t,Math.round),this._overwriteProps.push(t)}}(),function(){r._gsDefine.plugin({propName:"attr",API:2,version:"0.6.0",init:function(e,t,r,i){var n,a;if("function"!=typeof e.setAttribute)return!1;for(n in t)a=t[n],"function"==typeof a&&(a=a(i,e)),this._addTween(e,"setAttribute",e.getAttribute(n)+"",a+"",n,!1,n),this._overwriteProps.push(n);return!0}})}(),r._gsDefine.plugin({propName:"directionalRotation",version:"0.3.0",API:2,init:function(e,t,r,i){"object"!=typeof t&&(t={rotation:t}),this.finals={};var n,a,o,s,l,u,c=t.useRadians===!0?2*Math.PI:360,h=1e-6;for(n in t)"useRadians"!==n&&(s=t[n],"function"==typeof s&&(s=s(i,e)),u=(s+"").split("_"),a=u[0],o=parseFloat("function"!=typeof e[n]?e[n]:e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]()),s=this.finals[n]="string"==typeof a&&"="===a.charAt(1)?o+parseInt(a.charAt(0)+"1",10)*Number(a.substr(2)):Number(a)||0,l=s-o,u.length&&(a=u.join("_"),-1!==a.indexOf("short")&&(l%=c,l!==l%(c/2)&&(l=0>l?l+c:l-c)),-1!==a.indexOf("_cw")&&0>l?l=(l+9999999999*c)%c-(l/c|0)*c:-1!==a.indexOf("ccw")&&l>0&&(l=(l-9999999999*c)%c-(l/c|0)*c)),(l>h||-h>l)&&(this._addTween(e,n,o,o+l,n),this._overwriteProps.push(n)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}})._autoCSS=!0,r._gsDefine("easing.Back",["easing.Ease"],function(e){var t,i,n,a=r.GreenSockGlobals||r,o=a.com.greensock,s=2*Math.PI,l=Math.PI/2,u=o._class,c=function(t,r){var i=u("easing."+t,function(){},!0),n=i.prototype=new e;return n.constructor=i,n.getRatio=r,i},h=e.register||function(){},p=function(e,t,r,i){var n=u("easing."+e,{easeOut:new t,easeIn:new r,easeInOut:new i},!0);return h(n,e),n},d=function(e,t,r){this.t=e,this.v=t,r&&(this.next=r,r.prev=this,this.c=r.v-t,this.gap=r.t-e)},f=function(t,r){var i=u("easing."+t,function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1},!0),n=i.prototype=new e;return n.constructor=i,n.getRatio=r,n.config=function(e){return new i(e)},i},m=p("Back",f("BackOut",function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1}),f("BackIn",function(e){return e*e*((this._p1+1)*e-this._p1)}),f("BackInOut",function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)})),v=u("easing.SlowMo",function(e,t,r){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=r===!0},!0),g=v.prototype=new e;return g.constructor=v,g.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},v.ease=new v(.7,.7),g.config=v.config=function(e,t,r){return new v(e,t,r)},t=u("easing.SteppedEase",function(e){e=e||1,this._p1=1/e,this._p2=e+1},!0),g=t.prototype=new e,g.constructor=t,g.getRatio=function(e){return 0>e?e=0:e>=1&&(e=.999999999),(this._p2*e>>0)*this._p1},g.config=t.config=function(e){return new t(e)},i=u("easing.RoughEase",function(t){t=t||{};for(var r,i,n,a,o,s,l=t.taper||"none",u=[],c=0,h=0|(t.points||20),p=h,f=t.randomize!==!1,m=t.clamp===!0,v=t.template instanceof e?t.template:null,g="number"==typeof t.strength?.4*t.strength:.4;--p>-1;)r=f?Math.random():1/h*p,i=v?v.getRatio(r):r,"none"===l?n=g:"out"===l?(a=1-r,n=a*a*g):"in"===l?n=r*r*g:.5>r?(a=2*r,n=a*a*.5*g):(a=2*(1-r),n=a*a*.5*g),f?i+=Math.random()*n-.5*n:p%2?i+=.5*n:i-=.5*n,m&&(i>1?i=1:0>i&&(i=0)),u[c++]={x:r,y:i};for(u.sort(function(e,t){return e.x-t.x}),s=new d(1,1,null),p=h;--p>-1;)o=u[p],s=new d(o.x,o.y,s);this._prev=new d(0,0,0!==s.t?s:s.next)},!0),g=i.prototype=new e,g.constructor=i,g.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},g.config=function(e){return new i(e)},i.ease=new i,p("Bounce",c("BounceOut",function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}),c("BounceIn",function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:2/2.75>e?1-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)}),c("BounceInOut",function(e){var t=.5>e;return e=t?1-2*e:2*e-1,e=1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5})),p("Circ",c("CircOut",function(e){return Math.sqrt(1-(e-=1)*e)}),c("CircIn",function(e){return-(Math.sqrt(1-e*e)-1)}),c("CircInOut",function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)})),n=function(t,r,i){var n=u("easing."+t,function(e,t){this._p1=e>=1?e:1,this._p2=(t||i)/(1>e?e:1),this._p3=this._p2/s*(Math.asin(1/this._p1)||0),this._p2=s/this._p2},!0),a=n.prototype=new e;return a.constructor=n,a.getRatio=r,a.config=function(e,t){return new n(e,t)},n},p("Elastic",n("ElasticOut",function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1},.3),n("ElasticIn",function(e){return-(this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2))},.3),n("ElasticInOut",function(e){return(e*=2)<1?-.5*this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2):this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1},.45)),p("Expo",c("ExpoOut",function(e){return 1-Math.pow(2,-10*e)}),c("ExpoIn",function(e){return Math.pow(2,10*(e-1))-.001}),c("ExpoInOut",function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))})),p("Sine",c("SineOut",function(e){return Math.sin(e*l)}),c("SineIn",function(e){return-Math.cos(e*l)+1}),c("SineInOut",function(e){return-.5*(Math.cos(Math.PI*e)-1)})),u("easing.EaseLookup",{find:function(t){return e.map[t]}},!0),h(a.SlowMo,"SlowMo","ease,"),h(i,"RoughEase","ease,"),h(t,"SteppedEase","ease,"),m},!0)}),r._gsDefine&&r._gsQueue.pop()(),function(e,r){"use strict";var i={},n=e.GreenSockGlobals=e.GreenSockGlobals||e;if(!n.TweenLite){var a,o,s,l,u,c=function(e){var t,r=e.split("."),i=n;for(t=0;t<r.length;t++)i[r[t]]=i=i[r[t]]||{};return i},h=c("com.greensock"),p=1e-10,d=function(e){var t,r=[],i=e.length;for(t=0;t!==i;r.push(e[t++]));return r},f=function(){},m=function(){var e=Object.prototype.toString,t=e.call([]);return function(r){return null!=r&&(r instanceof Array||"object"==typeof r&&!!r.push&&e.call(r)===t)}}(),v={},g=function(a,o,s,l){this.sc=v[a]?v[a].sc:[],v[a]=this,this.gsClass=null,this.func=s;var u=[];this.check=function(h){for(var p,d,f,m,y,b=o.length,_=b;--b>-1;)(p=v[o[b]]||new g(o[b],[])).gsClass?(u[b]=p.gsClass,_--):h&&p.sc.push(this);if(0===_&&s){if(d=("com.greensock."+a).split("."),f=d.pop(),m=c(d.join("."))[f]=this.gsClass=s.apply(s,u),l)if(n[f]=i[f]=m,y="undefined"!=typeof t&&t.exports,!y&&"function"==typeof define&&define.amd)define((e.GreenSockAMDPath?e.GreenSockAMDPath+"/":"")+a.split(".").pop(),[],function(){return m});else if(y)if(a===r){t.exports=i[r]=m;for(b in i)m[b]=i[b]}else i[r]&&(i[r][f]=m);for(b=0;b<this.sc.length;b++)this.sc[b].check()}},this.check(!0)},y=e._gsDefine=function(e,t,r,i){return new g(e,t,r,i)},b=h._class=function(e,t,r){return t=t||function(){},y(e,[],function(){return t},r),t};y.globals=n;var _=[0,0,1,1],x=b("easing.Ease",function(e,t,r,i){this._func=e,this._type=r||0,this._power=i||0,this._params=t?_.concat(t):_},!0),w=x.map={},T=x.register=function(e,t,r,i){for(var n,a,o,s,l=t.split(","),u=l.length,c=(r||"easeIn,easeOut,easeInOut").split(",");--u>-1;)for(a=l[u],n=i?b("easing."+a,null,!0):h.easing[a]||{},o=c.length;--o>-1;)s=c[o],w[a+"."+s]=w[s+a]=n[s]=e.getRatio?e:e[s]||new e};for(s=x.prototype,s._calcEnd=!1,s.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,r=this._power,i=1===t?1-e:2===t?e:.5>e?2*e:2*(1-e);return 1===r?i*=i:2===r?i*=i*i:3===r?i*=i*i*i:4===r&&(i*=i*i*i*i),1===t?1-i:2===t?i:.5>e?i/2:1-i/2},a=["Linear","Quad","Cubic","Quart","Quint,Strong"],o=a.length;--o>-1;)s=a[o]+",Power"+o,T(new x(null,null,1,o),s,"easeOut",!0),T(new x(null,null,2,o),s,"easeIn"+(0===o?",easeNone":"")),T(new x(null,null,3,o),s,"easeInOut");w.linear=h.easing.Linear.easeIn,w.swing=h.easing.Quad.easeInOut;var M=b("events.EventDispatcher",function(e){this._listeners={},this._eventTarget=e||this});s=M.prototype,s.addEventListener=function(e,t,r,i,n){n=n||0;var a,o,s=this._listeners[e],c=0;for(this!==l||u||l.wake(),null==s&&(this._listeners[e]=s=[]),o=s.length;--o>-1;)a=s[o],a.c===t&&a.s===r?s.splice(o,1):0===c&&a.pr<n&&(c=o+1);s.splice(c,0,{c:t,s:r,up:i,pr:n})},s.removeEventListener=function(e,t){var r,i=this._listeners[e];if(i)for(r=i.length;--r>-1;)if(i[r].c===t)return void i.splice(r,1)},s.dispatchEvent=function(e){var t,r,i,n=this._listeners[e];if(n)for(t=n.length,t>1&&(n=n.slice(0)),r=this._eventTarget;--t>-1;)i=n[t],i&&(i.up?i.c.call(i.s||r,{type:e,target:r}):i.c.call(i.s||r))};var S=e.requestAnimationFrame,E=e.cancelAnimationFrame,P=Date.now||function(){return(new Date).getTime()},A=P();for(a=["ms","moz","webkit","o"],o=a.length;--o>-1&&!S;)S=e[a[o]+"RequestAnimationFrame"],E=e[a[o]+"CancelAnimationFrame"]||e[a[o]+"CancelRequestAnimationFrame"];b("Ticker",function(e,t){var r,i,n,a,o,s=this,c=P(),h=t!==!1&&S?"auto":!1,d=500,m=33,v="tick",g=function(e){var t,l,u=P()-A;u>d&&(c+=u-m),A+=u,s.time=(A-c)/1e3,t=s.time-o,(!r||t>0||e===!0)&&(s.frame++,o+=t+(t>=a?.004:a-t),l=!0),e!==!0&&(n=i(g)),l&&s.dispatchEvent(v)};M.call(s),s.time=s.frame=0,s.tick=function(){g(!0)},s.lagSmoothing=function(e,t){d=e||1/p,m=Math.min(t,d,0)},s.sleep=function(){null!=n&&(h&&E?E(n):clearTimeout(n),i=f,n=null,s===l&&(u=!1))},s.wake=function(e){null!==n?s.sleep():e?c+=-A+(A=P()):s.frame>10&&(A=P()-d+5),i=0===r?f:h&&S?S:function(e){return setTimeout(e,1e3*(o-s.time)+1|0)},s===l&&(u=!0),g(2)},s.fps=function(e){return arguments.length?(r=e,a=1/(r||60),o=this.time+a,void s.wake()):r},s.useRAF=function(e){return arguments.length?(s.sleep(),h=e,void s.fps(r)):h},s.fps(e),setTimeout(function(){"auto"===h&&s.frame<5&&"hidden"!==document.visibilityState&&s.useRAF(!1)},1500)}),s=h.Ticker.prototype=new h.events.EventDispatcher,s.constructor=h.Ticker;var C=b("core.Animation",function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=t.immediateRender===!0,this.data=t.data,this._reversed=t.reversed===!0,q){u||l.wake();var r=this.vars.useFrames?Y:q;r.add(this,r._time),this.vars.paused&&this.paused(!0)}});l=C.ticker=new h.Ticker,s=C.prototype,s._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;var O=function(){u&&P()-A>2e3&&l.wake(),setTimeout(O,2e3)};O(),s.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},s.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},s.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},s.seek=function(e,t){return this.totalTime(Number(e),t!==!1)},s.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,t!==!1,!0)},s.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},s.render=function(){},s.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,(this._gc||!this.timeline)&&this._enabled(!0),this},s.isActive=function(){var e,t=this._timeline,r=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime())>=r&&e<r+this.totalDuration()/this._timeScale},s._enabled=function(e,t){return u||l.wake(),this._gc=!e,this._active=this.isActive(),t!==!0&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(){return this._enabled(!1,!1)},s.kill=function(e,t){return this._kill(e,t),this},s._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},s._swapSelfInParams=function(e){for(var t=e.length,r=e.concat();--t>-1;)"{self}"===e[t]&&(r[t]=this);return r},s._callback=function(e){var t=this.vars,r=t[e],i=t[e+"Params"],n=t[e+"Scope"]||t.callbackScope||this,a=i?i.length:0;switch(a){case 0:r.call(n);break;case 1:r.call(n,i[0]);break;case 2:r.call(n,i[0],i[1]);break;default:r.apply(n,i)}},s.eventCallback=function(e,t,r,i){if("on"===(e||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[e];null==t?delete n[e]:(n[e]=t,n[e+"Params"]=m(r)&&-1!==r.join("").indexOf("{self}")?this._swapSelfInParams(r):r,n[e+"Scope"]=i),"onUpdate"===e&&(this._onUpdate=t)}return this},s.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},s.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},s.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},s.totalTime=function(e,t,r){if(u||l.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>e&&!r&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var i=this._totalDuration,n=this._timeline;if(e>i&&!r&&(e=i),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?i-e:e)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)for(;n._timeline;)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),(this._totalTime!==e||0===this._duration)&&(D.length&&$(),this.render(e,t,!1),D.length&&$())}return this},s.progress=s.totalProgress=function(e,t){var r=this.duration();return arguments.length?this.totalTime(r*e,t):r?this._time/r:this.ratio},s.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},s.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},s.timeScale=function(e){if(!arguments.length)return this._timeScale;if(e=e||p,this._timeline&&this._timeline.smoothChildTiming){var t=this._pauseTime,r=t||0===t?t:this._timeline.totalTime();this._startTime=r-(r-this._startTime)*this._timeScale/e}return this._timeScale=e,this._uncache(!1)},s.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},s.paused=function(e){if(!arguments.length)return this._paused;var t,r,i=this._timeline;return e!=this._paused&&i&&(u||e||l.wake(),t=i.rawTime(),r=t-this._pauseTime,!e&&i.smoothChildTiming&&(this._startTime+=r,
this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==r&&this._initted&&this.duration()&&(t=i.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var k=b("core.SimpleTimeline",function(e){C.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0});s=k.prototype=new C,s.constructor=k,s.kill()._gc=!1,s._first=s._last=s._recent=null,s._sortChildren=!1,s.add=s.insert=function(e,t){var r,i;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=e._startTime+(this.rawTime()-e._startTime)/e._timeScale),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),r=this._last,this._sortChildren)for(i=e._startTime;r&&r._startTime>i;)r=r._prev;return r?(e._next=r._next,r._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=r,this._recent=e,this._timeline&&this._uncache(!0),this},s._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},s.render=function(e,t,r){var i,n=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;n;)i=n._next,(n._active||e>=n._startTime&&!n._paused)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(e-n._startTime)*n._timeScale,t,r):n.render((e-n._startTime)*n._timeScale,t,r)),n=i},s.rawTime=function(){return u||l.wake(),this._totalTime};var L=b("TweenLite",function(t,r,i){if(C.call(this,r,i),this.render=L.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:L.selector(t)||t;var n,a,o,s=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?X[L.defaultOverwrite]:"number"==typeof l?l>>0:X[l],(s||t instanceof Array||t.push&&m(t))&&"number"!=typeof t[0])for(this._targets=o=d(t),this._propLookup=[],this._siblings=[],n=0;n<o.length;n++)a=o[n],a?"string"!=typeof a?a.length&&a!==e&&a[0]&&(a[0]===e||a[0].nodeType&&a[0].style&&!a.nodeType)?(o.splice(n--,1),this._targets=o=o.concat(d(a))):(this._siblings[n]=Z(a,this,!1),1===l&&this._siblings[n].length>1&&J(a,this,null,1,this._siblings[n])):(a=o[n--]=L.selector(a),"string"==typeof a&&o.splice(n+1,1)):o.splice(n--,1);else this._propLookup={},this._siblings=Z(t,this,!1),1===l&&this._siblings.length>1&&J(t,this,null,1,this._siblings);(this.vars.immediateRender||0===r&&0===this._delay&&this.vars.immediateRender!==!1)&&(this._time=-p,this.render(Math.min(0,-this._delay)))},!0),R=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)},I=function(e,t){var r,i={};for(r in e)W[r]||r in t&&"transform"!==r&&"x"!==r&&"y"!==r&&"width"!==r&&"height"!==r&&"className"!==r&&"border"!==r||!(!U[r]||U[r]&&U[r]._autoCSS)||(i[r]=e[r],delete e[r]);e.css=i};s=L.prototype=new C,s.constructor=L,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=s._lazy=!1,L.version="1.19.0",L.defaultEase=s._ease=new x(null,null,1,1),L.defaultOverwrite="auto",L.ticker=l,L.autoSleep=120,L.lagSmoothing=function(e,t){l.lagSmoothing(e,t)},L.selector=e.$||e.jQuery||function(t){var r=e.$||e.jQuery;return r?(L.selector=r,r(t)):"undefined"==typeof document?t:document.querySelectorAll?document.querySelectorAll(t):document.getElementById("#"===t.charAt(0)?t.substr(1):t)};var D=[],F={},N=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,B=function(e){for(var t,r=this._firstPT,i=1e-6;r;)t=r.blob?e?this.join(""):this.start:r.c*e+r.s,r.m?t=r.m(t,this._target||r.t):i>t&&t>-i&&(t=0),r.f?r.fp?r.t[r.p](r.fp,t):r.t[r.p](t):r.t[r.p]=t,r=r._next},G=function(e,t,r,i){var n,a,o,s,l,u,c,h=[e,t],p=0,d="",f=0;for(h.start=e,r&&(r(h),e=h[0],t=h[1]),h.length=0,n=e.match(N)||[],a=t.match(N)||[],i&&(i._next=null,i.blob=1,h._firstPT=h._applyPT=i),l=a.length,s=0;l>s;s++)c=a[s],u=t.substr(p,t.indexOf(c,p)-p),d+=u||!s?u:",",p+=u.length,f?f=(f+1)%5:"rgba("===u.substr(-5)&&(f=1),c===n[s]||n.length<=s?d+=c:(d&&(h.push(d),d=""),o=parseFloat(n[s]),h.push(o),h._firstPT={_next:h._firstPT,t:h,p:h.length-1,s:o,c:("="===c.charAt(1)?parseInt(c.charAt(0)+"1",10)*parseFloat(c.substr(2)):parseFloat(c)-o)||0,f:0,m:f&&4>f?Math.round:0}),p+=c.length;return d+=t.substr(p),d&&h.push(d),h.setRatio=B,h},j=function(e,t,r,i,n,a,o,s,l){"function"==typeof i&&(i=i(l||0,e));var u,c,h="get"===r?e[t]:r,p=typeof e[t],d="string"==typeof i&&"="===i.charAt(1),f={t:e,p:t,s:h,f:"function"===p,pg:0,n:n||t,m:a?"function"==typeof a?a:Math.round:0,pr:0,c:d?parseInt(i.charAt(0)+"1",10)*parseFloat(i.substr(2)):parseFloat(i)-h||0};return"number"!==p&&("function"===p&&"get"===r&&(c=t.indexOf("set")||"function"!=typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),f.s=h=o?e[c](o):e[c]()),"string"==typeof h&&(o||isNaN(h))?(f.fp=o,u=G(h,i,s||L.defaultStringFilter,f),f={t:u,p:"setRatio",s:0,c:1,f:2,pg:0,n:n||t,pr:0,m:0}):d||(f.s=parseFloat(h),f.c=parseFloat(i)-f.s||0)),f.c?((f._next=this._firstPT)&&(f._next._prev=f),this._firstPT=f,f):void 0},V=L._internals={isArray:m,isSelector:R,lazyTweens:D,blobDif:G},U=L._plugins={},z=V.tweenLookup={},H=0,W=V.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1},X={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},Y=C._rootFramesTimeline=new k,q=C._rootTimeline=new k,K=30,$=V.lazyRender=function(){var e,t=D.length;for(F={};--t>-1;)e=D[t],e&&e._lazy!==!1&&(e.render(e._lazy[0],e._lazy[1],!0),e._lazy=!1);D.length=0};q._startTime=l.time,Y._startTime=l.frame,q._active=Y._active=!0,setTimeout($,1),C._updateRoot=L.render=function(){var e,t,r;if(D.length&&$(),q.render((l.time-q._startTime)*q._timeScale,!1,!1),Y.render((l.frame-Y._startTime)*Y._timeScale,!1,!1),D.length&&$(),l.frame>=K){K=l.frame+(parseInt(L.autoSleep,10)||120);for(r in z){for(t=z[r].tweens,e=t.length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete z[r]}if(r=q._first,(!r||r._paused)&&L.autoSleep&&!Y._first&&1===l._listeners.tick.length){for(;r&&r._paused;)r=r._next;r||l.sleep()}}},l.addEventListener("tick",C._updateRoot);var Z=function(e,t,r){var i,n,a=e._gsTweenID;if(z[a||(e._gsTweenID=a="t"+H++)]||(z[a]={target:e,tweens:[]}),t&&(i=z[a].tweens,i[n=i.length]=t,r))for(;--n>-1;)i[n]===t&&i.splice(n,1);return z[a].tweens},Q=function(e,t,r,i){var n,a,o=e.vars.onOverwrite;return o&&(n=o(e,t,r,i)),o=L.onOverwrite,o&&(a=o(e,t,r,i)),n!==!1&&a!==!1},J=function(e,t,r,i,n){var a,o,s,l;if(1===i||i>=4){for(l=n.length,a=0;l>a;a++)if((s=n[a])!==t)s._gc||s._kill(null,e,t)&&(o=!0);else if(5===i)break;return o}var u,c=t._startTime+p,h=[],d=0,f=0===t._duration;for(a=n.length;--a>-1;)(s=n[a])===t||s._gc||s._paused||(s._timeline!==t._timeline?(u=u||ee(t,0,f),0===ee(s,u,f)&&(h[d++]=s)):s._startTime<=c&&s._startTime+s.totalDuration()/s._timeScale>c&&((f||!s._initted)&&c-s._startTime<=2e-10||(h[d++]=s)));for(a=d;--a>-1;)if(s=h[a],2===i&&s._kill(r,e,t)&&(o=!0),2!==i||!s._firstPT&&s._initted){if(2!==i&&!Q(s,t))continue;s._enabled(!1,!1)&&(o=!0)}return o},ee=function(e,t,r){for(var i=e._timeline,n=i._timeScale,a=e._startTime;i._timeline;){if(a+=i._startTime,n*=i._timeScale,i._paused)return-100;i=i._timeline}return a/=n,a>t?a-t:r&&a===t||!e._initted&&2*p>a-t?p:(a+=e.totalDuration()/e._timeScale/n)>t+p?0:a-t-p};s._init=function(){var e,t,r,i,n,a,o=this.vars,s=this._overwrittenProps,l=this._duration,u=!!o.immediateRender,c=o.ease;if(o.startAt){this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),n={};for(i in o.startAt)n[i]=o.startAt[i];if(n.overwrite=!1,n.immediateRender=!0,n.lazy=u&&o.lazy!==!1,n.startAt=n.delay=null,this._startAt=L.to(this.target,0,n),u)if(this._time>0)this._startAt=null;else if(0!==l)return}else if(o.runBackwards&&0!==l)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{0!==this._time&&(u=!1),r={};for(i in o)W[i]&&"autoCSS"!==i||(r[i]=o[i]);if(r.overwrite=0,r.data="isFromStart",r.lazy=u&&o.lazy!==!1,r.immediateRender=u,this._startAt=L.to(this.target,0,r),u){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=c=c?c instanceof x?c:"function"==typeof c?new x(c,o.easeParams):w[c]||L.defaultEase:L.defaultEase,o.easeParams instanceof Array&&c.config&&(this._ease=c.config.apply(c,o.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(a=this._targets.length,e=0;a>e;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],s?s[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,s,0);if(t&&L._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),o.runBackwards)for(r=this._firstPT;r;)r.s+=r.c,r.c=-r.c,r=r._next;this._onUpdate=o.onUpdate,this._initted=!0},s._initProps=function(t,r,i,n,a){var o,s,l,u,c,h;if(null==t)return!1;F[t._gsTweenID]&&$(),this.vars.css||t.style&&t!==e&&t.nodeType&&U.css&&this.vars.autoCSS!==!1&&I(this.vars,t);for(o in this.vars)if(h=this.vars[o],W[o])h&&(h instanceof Array||h.push&&m(h))&&-1!==h.join("").indexOf("{self}")&&(this.vars[o]=h=this._swapSelfInParams(h,this));else if(U[o]&&(u=new U[o])._onInitTween(t,this.vars[o],this,a)){for(this._firstPT=c={_next:this._firstPT,t:u,p:"setRatio",s:0,c:1,f:1,n:o,pg:1,pr:u._priority,m:0},s=u._overwriteProps.length;--s>-1;)r[u._overwriteProps[s]]=this._firstPT;(u._priority||u._onInitAllProps)&&(l=!0),(u._onDisable||u._onEnable)&&(this._notifyPluginsOfEnabled=!0),c._next&&(c._next._prev=c)}else r[o]=j.call(this,t,o,"get",h,o,0,null,this.vars.stringFilter,a);return n&&this._kill(n,t)?this._initProps(t,r,i,n,a):this._overwrite>1&&this._firstPT&&i.length>1&&J(t,this,r,this._overwrite,i)?(this._kill(r,t),this._initProps(t,r,i,n,a)):(this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration)&&(F[t._gsTweenID]=!0),l)},s.render=function(e,t,r){var i,n,a,o,s=this._time,l=this._duration,u=this._rawPrevTime;if(e>=l-1e-7)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(i=!0,n="onComplete",r=r||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||r)&&(this._startTime===this._timeline._duration&&(e=0),(0>u||0>=e&&e>=-1e-7||u===p&&"isPause"!==this.data)&&u!==e&&(r=!0,u>p&&(n="onReverseComplete")),this._rawPrevTime=o=!t||e||u===e?e:p);else if(1e-7>e)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==s||0===l&&u>0)&&(n="onReverseComplete",i=this._reversed),0>e&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||r)&&(u>=0&&(u!==p||"isPause"!==this.data)&&(r=!0),this._rawPrevTime=o=!t||e||u===e?e:p)),this._initted||(r=!0);else if(this._totalTime=this._time=e,this._easeType){var c=e/l,h=this._easeType,d=this._easePower;(1===h||3===h&&c>=.5)&&(c=1-c),3===h&&(c*=2),1===d?c*=c:2===d?c*=c*c:3===d?c*=c*c*c:4===d&&(c*=c*c*c*c),this.ratio=1===h?1-c:2===h?c:.5>e/l?c/2:1-c/2}else this.ratio=this._ease.getRatio(e/l);if(this._time!==s||r){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!r&&this._firstPT&&(this.vars.lazy!==!1&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=s,this._rawPrevTime=u,D.push(this),void(this._lazy=[e,t]);this._time&&!i?this.ratio=this._ease.getRatio(this._time/l):i&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._lazy!==!1&&(this._lazy=!1),this._active||!this._paused&&this._time!==s&&e>=0&&(this._active=!0),0===s&&(this._startAt&&(e>=0?this._startAt.render(e,t,r):n||(n="_dummyGS")),this.vars.onStart&&(0!==this._time||0===l)&&(t||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(0>e&&this._startAt&&e!==-1e-4&&this._startAt.render(e,t,r),t||(this._time!==s||i||r)&&this._callback("onUpdate")),n&&(!this._gc||r)&&(0>e&&this._startAt&&!this._onUpdate&&e!==-1e-4&&this._startAt.render(e,t,r),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[n]&&this._callback(n),0===l&&this._rawPrevTime===p&&o!==p&&(this._rawPrevTime=0))}},s._kill=function(e,t,r){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!=typeof t?t||this._targets||this.target:L.selector(t)||t;var i,n,a,o,s,l,u,c,h,p=r&&this._time&&r._startTime===this._startTime&&this._timeline===r._timeline;if((m(t)||R(t))&&"number"!=typeof t[0])for(i=t.length;--i>-1;)this._kill(e,t[i],r)&&(l=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(t===this._targets[i]){s=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[i]=e?this._overwrittenProps[i]||{}:"all";break}}else{if(t!==this.target)return!1;s=this._propLookup,n=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(s){if(u=e||s,c=e!==n&&"all"!==n&&e!==s&&("object"!=typeof e||!e._tempKill),r&&(L.onOverwrite||this.vars.onOverwrite)){for(a in u)s[a]&&(h||(h=[]),h.push(a));if((h||!e)&&!Q(this,r,t,h))return!1}for(a in u)(o=s[a])&&(p&&(o.f?o.t[o.p](o.s):o.t[o.p]=o.s,l=!0),o.pg&&o.t._kill(u)&&(l=!0),o.pg&&0!==o.t._overwriteProps.length||(o._prev?o._prev._next=o._next:o===this._firstPT&&(this._firstPT=o._next),o._next&&(o._next._prev=o._prev),o._next=o._prev=null),delete s[a]),c&&(n[a]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},s.invalidate=function(){return this._notifyPluginsOfEnabled&&L._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],C.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-p,this.render(Math.min(0,-this._delay))),this},s._enabled=function(e,t){if(u||l.wake(),e&&this._gc){var r,i=this._targets;if(i)for(r=i.length;--r>-1;)this._siblings[r]=Z(i[r],this,!0);else this._siblings=Z(this.target,this,!0)}return C.prototype._enabled.call(this,e,t),this._notifyPluginsOfEnabled&&this._firstPT?L._onPluginEvent(e?"_onEnable":"_onDisable",this):!1},L.to=function(e,t,r){return new L(e,t,r)},L.from=function(e,t,r){return r.runBackwards=!0,r.immediateRender=0!=r.immediateRender,new L(e,t,r)},L.fromTo=function(e,t,r,i){return i.startAt=r,i.immediateRender=0!=i.immediateRender&&0!=r.immediateRender,new L(e,t,i)},L.delayedCall=function(e,t,r,i,n){return new L(t,0,{delay:e,onComplete:t,onCompleteParams:r,callbackScope:i,onReverseComplete:t,onReverseCompleteParams:r,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},L.set=function(e,t){return new L(e,0,t)},L.getTweensOf=function(e,t){if(null==e)return[];e="string"!=typeof e?e:L.selector(e)||e;var r,i,n,a;if((m(e)||R(e))&&"number"!=typeof e[0]){for(r=e.length,i=[];--r>-1;)i=i.concat(L.getTweensOf(e[r],t));for(r=i.length;--r>-1;)for(a=i[r],n=r;--n>-1;)a===i[n]&&i.splice(r,1)}else for(i=Z(e).concat(),r=i.length;--r>-1;)(i[r]._gc||t&&!i[r].isActive())&&i.splice(r,1);return i},L.killTweensOf=L.killDelayedCallsTo=function(e,t,r){"object"==typeof t&&(r=t,t=!1);for(var i=L.getTweensOf(e,t),n=i.length;--n>-1;)i[n]._kill(r,e)};var te=b("plugins.TweenPlugin",function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=te.prototype},!0);if(s=te.prototype,te.version="1.19.0",te.API=2,s._firstPT=null,s._addTween=j,s.setRatio=B,s._kill=function(e){var t,r=this._overwriteProps,i=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=r.length;--t>-1;)null!=e[r[t]]&&r.splice(t,1);for(;i;)null!=e[i.n]&&(i._next&&(i._next._prev=i._prev),i._prev?(i._prev._next=i._next,i._prev=null):this._firstPT===i&&(this._firstPT=i._next)),i=i._next;return!1},s._mod=s._roundProps=function(e){for(var t,r=this._firstPT;r;)t=e[this._propName]||null!=r.n&&e[r.n.split(this._propName+"_").join("")],t&&"function"==typeof t&&(2===r.f?r.t._applyPT.m=t:r.m=t),r=r._next},L._onPluginEvent=function(e,t){var r,i,n,a,o,s=t._firstPT;if("_onInitAllProps"===e){for(;s;){for(o=s._next,i=n;i&&i.pr>s.pr;)i=i._next;(s._prev=i?i._prev:a)?s._prev._next=s:n=s,(s._next=i)?i._prev=s:a=s,s=o}s=t._firstPT=n}for(;s;)s.pg&&"function"==typeof s.t[e]&&s.t[e]()&&(r=!0),s=s._next;return r},te.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===te.API&&(U[(new e[t])._propName]=e[t]);return!0},y.plugin=function(e){if(!(e&&e.propName&&e.init&&e.API))throw"illegal plugin definition.";var t,r=e.propName,i=e.priority||0,n=e.overwriteProps,a={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},o=b("plugins."+r.charAt(0).toUpperCase()+r.substr(1)+"Plugin",function(){te.call(this,r,i),this._overwriteProps=n||[]},e.global===!0),s=o.prototype=new te(r);s.constructor=o,o.API=e.API;for(t in a)"function"==typeof e[t]&&(s[a[t]]=e[t]);return o.version=e.version,te.activate([o]),o},a=e._gsQueue){for(o=0;o<a.length;o++)a[o]();for(s in v)v[s].func||e.console.log("GSAP encountered missing dependency: "+s)}u=!1}}("undefined"!=typeof t&&t.exports&&"undefined"!=typeof e?e:this||window,"TweenMax")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t){(function(e){function r(e){return e.split("")}function i(e){return I.test(e)}function n(e){return i(e)?a(e):r(e)}function a(e){return e.match(R)||[]}function o(e,t,r){var i=-1,n=e.length;0>t&&(t=-t>n?0:n+t),r=r>n?n:r,0>r&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(n);++i<n;)a[i]=e[i+t];return a}function s(e){if("string"==typeof e)return e;if(h(e))return U?U.call(e):"";var t=e+"";return"0"==t&&1/e==-f?"-0":t}function l(e,t,r){var i=e.length;return r=void 0===r?i:r,!t&&r>=i?e:o(e,t,r)}function u(e){return function(t){t=p(t);var r=i(t)?n(t):void 0,a=r?r[0]:t.charAt(0),o=r?l(r,1).join(""):t.slice(1);return a[e]()+o}}function c(e){return!!e&&"object"==typeof e}function h(e){return"symbol"==typeof e||c(e)&&G.call(e)==m}function p(e){return null==e?"":s(e)}function d(e){return z(p(e).toLowerCase())}var f=1/0,m="[object Symbol]",v="\\ud800-\\udfff",g="\\u0300-\\u036f\\ufe20-\\ufe23",y="\\u20d0-\\u20f0",b="\\ufe0e\\ufe0f",_="["+v+"]",x="["+g+y+"]",w="\\ud83c[\\udffb-\\udfff]",T="(?:"+x+"|"+w+")",M="[^"+v+"]",S="(?:\\ud83c[\\udde6-\\uddff]){2}",E="[\\ud800-\\udbff][\\udc00-\\udfff]",P="\\u200d",A=T+"?",C="["+b+"]?",O="(?:"+P+"(?:"+[M,S,E].join("|")+")"+C+A+")*",k=C+A+O,L="(?:"+[M+x+"?",x,S,E,_].join("|")+")",R=RegExp(w+"(?="+w+")|"+L+k,"g"),I=RegExp("["+P+v+g+y+b+"]"),D="object"==typeof e&&e&&e.Object===Object&&e,F="object"==typeof self&&self&&self.Object===Object&&self,N=D||F||Function("return this")(),B=Object.prototype,G=B.toString,j=N.Symbol,V=j?j.prototype:void 0,U=V?V.toString:void 0,z=u("toUpperCase");t.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(e,t){function r(e,t,r){var i=-1,n=e.length;0>t&&(t=-t>n?0:n+t),r=r>n?n:r,0>r&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(n);++i<n;)a[i]=e[i+t];return a}function i(e,t){return t=null==t?g:t,!!t&&("number"==typeof e||P.test(e))&&e>-1&&e%1==0&&t>e}function n(e,t,r){if(!c(r))return!1;var n=typeof t;return("number"==n?s(r)&&i(t,r.length):"string"==n&&t in r)?o(r[t],e):!1}function a(e,t,i){t=(i?n(e,t,i):void 0===t)?1:L(f(t),0);var a=e?e.length:0;if(!a||1>t)return[];for(var o=0,s=0,l=Array(k(a/t));a>o;)l[s++]=r(e,o,o+=t);return l}function o(e,t){return e===t||e!==e&&t!==t}function s(e){return null!=e&&u(e.length)&&!l(e)}function l(e){var t=c(e)?O.call(e):"";return t==_||t==x}function u(e){return"number"==typeof e&&e>-1&&e%1==0&&g>=e}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){return!!e&&"object"==typeof e}function p(e){return"symbol"==typeof e||h(e)&&O.call(e)==w}function d(e){if(!e)return 0===e?e:0;if(e=m(e),e===v||e===-v){var t=0>e?-1:1;return t*y}return e===e?e:0}function f(e){var t=d(e),r=t%1;return t===t?r?t-r:t:0}function m(e){if("number"==typeof e)return e;if(p(e))return b;if(c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(T,"");var r=S.test(e);return r||E.test(e)?A(e.slice(2),r?2:8):M.test(e)?b:+e}var v=1/0,g=9007199254740991,y=1.7976931348623157e308,b=0/0,_="[object Function]",x="[object GeneratorFunction]",w="[object Symbol]",T=/^\s+|\s+$/g,M=/^[-+]0x[0-9a-f]+$/i,S=/^0b[01]+$/i,E=/^0o[0-7]+$/i,P=/^(?:0|[1-9]\d*)$/,A=parseInt,C=Object.prototype,O=C.toString,k=Math.ceil,L=Math.max;t.exports=a},{}],20:[function(e,t){(function(e){function r(e,t,r){function n(t){var r=m,i=v;return m=v=void 0,M=t,y=e.apply(i,r)}function a(e){return M=e,b=setTimeout(c,t),S?n(e):y}function l(e){var r=e-T,i=e-M,n=t-r;return E?x(n,g-i):n}function u(e){var r=e-T,i=e-M;return void 0===T||r>=t||0>r||E&&i>=g}function c(){var e=w();return u(e)?h(e):void(b=setTimeout(c,l(e)))}function h(e){return b=void 0,P&&m?n(e):(m=v=void 0,y)}function p(){void 0!==b&&clearTimeout(b),M=0,m=T=v=b=void 0}function d(){return void 0===b?y:h(w())}function f(){var e=w(),r=u(e);if(m=arguments,v=this,T=e,r){if(void 0===b)return a(T);if(E)return b=setTimeout(c,t),n(T)}return void 0===b&&(b=setTimeout(c,t)),y}var m,v,g,y,b,T,M=0,S=!1,E=!1,P=!0;if("function"!=typeof e)throw new TypeError(s);return t=o(t)||0,i(r)&&(S=!!r.leading,E="maxWait"in r,g=E?_(o(r.maxWait)||0,t):g,P="trailing"in r?!!r.trailing:P),f.cancel=p,f.flush=d,f}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function n(e){return!!e&&"object"==typeof e}function a(e){return"symbol"==typeof e||n(e)&&b.call(e)==u}function o(e){if("number"==typeof e)return e;if(a(e))return l;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var r=p.test(e);return r||d.test(e)?f(e.slice(2),r?2:8):h.test(e)?l:+e}var s="Expected a function",l=0/0,u="[object Symbol]",c=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,d=/^0o[0-7]+$/i,f=parseInt,m="object"==typeof e&&e&&e.Object===Object&&e,v="object"==typeof self&&self&&self.Object===Object&&self,g=m||v||Function("return this")(),y=Object.prototype,b=y.toString,_=Math.max,x=Math.min,w=function(){return g.Date.now()};t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(e,t){!function(e){function r(){this._listeners=[],this.dispatchCount=0}function i(e){e.sort(function(e,t){return e=e.p,t=t.p,e>t?1:e>t?-1:0})}function n(e,t,r,n){if(!e)throw u;r=r||0;for(var a,o,s,l=this._listeners,h=l.length;h--;)if(a=l[h],a.f===e&&a.c===t)return!1;"function"==typeof r&&(o=r,r=n,s=4),l.unshift({f:e,c:t,p:r,r:o||e,a:c.call(arguments,s||3),j:0}),i(l)}function a(t,r,i,a){if(!t)throw u;var o=this,s=function(){return o.remove.call(o,t,r),t.apply(r,c.call(arguments,0))};a=c.call(arguments,0),1===a.length&&a.push(e),a.splice(2,0,s),n.apply(o,a)}function o(e,t){if(!e)return this._listeners.length=0,!0;for(var r,i=this._listeners,n=i.length;n--;)if(r=i[n],r.f===e&&(!t||r.c===t))return r.j=0,i.splice(n,1),!0;return!1}function s(e){e=c.call(arguments,0),this.dispatchCount++;for(var t,r,i=this.dispatchCount,n=this._listeners,a=n.length;a--;)if(t=n[a],t&&t.j<i&&(t.j=i,t.r.apply(t.c,t.a.concat(e))===!1)){r=t;break}for(n=this._listeners,a=n.length;a--;)n[a].j=0;return r}var l=r.prototype;l.add=n,l.addOnce=a,l.remove=o,l.dispatch=s;var u="Callback function is missing!",c=Array.prototype.slice;"undefined"!=typeof t&&(t.exports=r)}()},{}],22:[function(e,t){!function(e,t){e(function(){"use strict";function e(e,t){return null!=e&&null!=t&&e.toLowerCase()===t.toLowerCase()}function r(e,t){var r,i,n=e.length;if(!n||!t)return!1;for(r=t.toLowerCase(),i=0;n>i;++i)if(r===e[i].toLowerCase())return!0;return!1}function i(e){for(var t in e)s.call(e,t)&&(e[t]=new RegExp(e[t],"i"))}function n(e,t){this.ua=e||"",this._cache={},this.maxPhoneWidth=t||600}var a={};a.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell.*Streak|Dell.*Aero|Dell.*Venue|DELL.*Venue Pro|Dell Flash|Dell Smoke|Dell Mini 3iX|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b",Samsung:"\\bSamsung\\b|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",
NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo 3DS",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y|SM-T280",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI)\\b",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP612|SOT31",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris [E|M]10)|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]","UC Browser":"UC Browser[VER]",MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},a.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var o,s=Object.prototype.hasOwnProperty;return a.FALLBACK_PHONE="UnknownPhone",a.FALLBACK_TABLET="UnknownTablet",a.FALLBACK_MOBILE="UnknownMobile",o="isArray"in Array?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},function(){var e,t,r,n,l,u,c=a.mobileDetectRules;for(e in c.props)if(s.call(c.props,e)){for(t=c.props[e],o(t)||(t=[t]),l=t.length,n=0;l>n;++n)r=t[n],u=r.indexOf("[VER]"),u>=0&&(r=r.substring(0,u)+"([\\w._\\+]+)"+r.substring(u+5)),t[n]=new RegExp(r,"i");c.props[e]=t}i(c.oss),i(c.phones),i(c.tablets),i(c.uas),i(c.utils),c.oss0={WindowsPhoneOS:c.oss.WindowsPhoneOS,WindowsMobileOS:c.oss.WindowsMobileOS}}(),a.findMatch=function(e,t){for(var r in e)if(s.call(e,r)&&e[r].test(t))return r;return null},a.findMatches=function(e,t){var r=[];for(var i in e)s.call(e,i)&&e[i].test(t)&&r.push(i);return r},a.getVersionStr=function(e,t){var r,i,n,o,l=a.mobileDetectRules.props;if(s.call(l,e))for(r=l[e],n=r.length,i=0;n>i;++i)if(o=r[i].exec(t),null!==o)return o[1];return null},a.getVersion=function(e,t){var r=a.getVersionStr(e,t);return r?a.prepareVersionNo(r):0/0},a.prepareVersionNo=function(e){var t;return t=e.split(/[a-z._ \/\-]/i),1===t.length&&(e=t[0]),t.length>1&&(e=t[0]+".",t.shift(),e+=t.join("")),Number(e)},a.isMobileFallback=function(e){return a.detectMobileBrowsers.fullPattern.test(e)||a.detectMobileBrowsers.shortPattern.test(e.substr(0,4))},a.isTabletFallback=function(e){return a.detectMobileBrowsers.tabletPattern.test(e)},a.prepareDetectionCache=function(e,r,i){if(e.mobile===t){var o,s,l;return(s=a.findMatch(a.mobileDetectRules.tablets,r))?(e.mobile=e.tablet=s,void(e.phone=null)):(o=a.findMatch(a.mobileDetectRules.phones,r))?(e.mobile=e.phone=o,void(e.tablet=null)):void(a.isMobileFallback(r)?(l=n.isPhoneSized(i),l===t?(e.mobile=a.FALLBACK_MOBILE,e.tablet=e.phone=null):l?(e.mobile=e.phone=a.FALLBACK_PHONE,e.tablet=null):(e.mobile=e.tablet=a.FALLBACK_TABLET,e.phone=null)):a.isTabletFallback(r)?(e.mobile=e.tablet=a.FALLBACK_TABLET,e.phone=null):e.mobile=e.tablet=e.phone=null)}},a.mobileGrade=function(e){var t=null!==e.mobile();return e.os("iOS")&&e.version("iPad")>=4.3||e.os("iOS")&&e.version("iPhone")>=3.1||e.os("iOS")&&e.version("iPod")>=3.1||e.version("Android")>2.1&&e.is("Webkit")||e.version("Windows Phone OS")>=7||e.is("BlackBerry")&&e.version("BlackBerry")>=6||e.match("Playbook.*Tablet")||e.version("webOS")>=1.4&&e.match("Palm|Pre|Pixi")||e.match("hp.*TouchPad")||e.is("Firefox")&&e.version("Firefox")>=12||e.is("Chrome")&&e.is("AndroidOS")&&e.version("Android")>=4||e.is("Skyfire")&&e.version("Skyfire")>=4.1&&e.is("AndroidOS")&&e.version("Android")>=2.3||e.is("Opera")&&e.version("Opera Mobi")>11&&e.is("AndroidOS")||e.is("MeeGoOS")||e.is("Tizen")||e.is("Dolfin")&&e.version("Bada")>=2||(e.is("UC Browser")||e.is("Dolfin"))&&e.version("Android")>=2.3||e.match("Kindle Fire")||e.is("Kindle")&&e.version("Kindle")>=3||e.is("AndroidOS")&&e.is("NookTablet")||e.version("Chrome")>=11&&!t||e.version("Safari")>=5&&!t||e.version("Firefox")>=4&&!t||e.version("MSIE")>=7&&!t||e.version("Opera")>=10&&!t?"A":e.os("iOS")&&e.version("iPad")<4.3||e.os("iOS")&&e.version("iPhone")<3.1||e.os("iOS")&&e.version("iPod")<3.1||e.is("Blackberry")&&e.version("BlackBerry")>=5&&e.version("BlackBerry")<6||e.version("Opera Mini")>=5&&e.version("Opera Mini")<=6.5&&(e.version("Android")>=2.3||e.is("iOS"))||e.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||e.version("Opera Mobi")>=11&&e.is("SymbianOS")?"B":(e.version("BlackBerry")<5||e.match("MSIEMobile|Windows CE.*Mobile")||e.version("Windows Mobile")<=5.2,"C")},a.detectOS=function(e){return a.findMatch(a.mobileDetectRules.oss0,e)||a.findMatch(a.mobileDetectRules.oss,e)},a.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},n.prototype={constructor:n,mobile:function(){return a.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return a.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return a.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===t&&(this._cache.userAgent=a.findMatch(a.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===t&&(this._cache.userAgents=a.findMatches(a.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===t&&(this._cache.os=a.detectOS(this.ua)),this._cache.os},version:function(e){return a.getVersion(e,this.ua)},versionStr:function(e){return a.getVersionStr(e,this.ua)},is:function(t){return r(this.userAgents(),t)||e(t,this.os())||e(t,this.phone())||e(t,this.tablet())||r(a.findMatches(a.mobileDetectRules.utils,this.ua),t)},match:function(e){return e instanceof RegExp||(e=new RegExp(e,"i")),e.test(this.ua)},isPhoneSized:function(e){return n.isPhoneSized(e||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===t&&(this._cache.grade=a.mobileGrade(this)),this._cache.grade}},n.isPhoneSized="undefined"!=typeof window&&window.screen?function(e){return 0>e?t:a.getDeviceSmallerSide()<=e}:function(){},n._impl=a,n.version="1.3.5 2016-11-14",n})}(function(){if("undefined"!=typeof t&&t.exports)return function(e){t.exports=e()};if("function"==typeof define&&define.amd)return define;if("undefined"!=typeof window)return function(e){window.MobileDetect=e()};throw new Error("unknown environment")}())},{}],23:[function(e,t){!function(){"use strict";var e="undefined"!=typeof t&&t.exports,r="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,i=function(){for(var e,t,r=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,n=r.length,a={};n>i;i++)if(e=r[i],e&&e[1]in document){for(i=0,t=e.length;t>i;i++)a[r[0][i]]=e[i];return a}return!1}(),n={request:function(e){var t=i.requestFullscreen;e=e||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[t]():e[t](r&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[i.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},raw:i};return i?(Object.defineProperties(n,{isFullscreen:{get:function(){return Boolean(document[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[i.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(document[i.fullscreenEnabled])}}}),void(e?t.exports=n:window.screenfull=n)):void(e?t.exports=!1:window.screenfull=!1)}()},{}],24:[function(e,t,r){(function(e){var i={distributions:{BOX:1,SPHERE:2,DISC:3},valueOverLifetimeLength:4};"function"==typeof define&&define.amd?define("spe",i):"undefined"!=typeof r&&"undefined"!=typeof t&&(t.exports=i),i.TypedArrayHelper=function(e,t,r,i){"use strict";this.componentSize=r||1,this.size=t||1,this.TypedArrayConstructor=e||Float32Array,this.array=new e(t*this.componentSize),this.indexOffset=i||0},i.TypedArrayHelper.constructor=i.TypedArrayHelper,i.TypedArrayHelper.prototype.setSize=function(e,t){"use strict";var r=this.array.length;return t||(e*=this.componentSize),r>e?this.shrink(e):e>r?this.grow(e):void console.info("TypedArray is already of size:",e+".","Will not resize.");

},i.TypedArrayHelper.prototype.shrink=function(e){"use strict";return this.array=this.array.subarray(0,e),this.size=e,this},i.TypedArrayHelper.prototype.grow=function(e){"use strict";var t=this.array,r=new this.TypedArrayConstructor(e);return r.set(t),this.array=r,this.size=e,this},i.TypedArrayHelper.prototype.splice=function(e,t){"use strict";e*=this.componentSize,t*=this.componentSize;for(var r=[],i=this.array,n=i.length,a=0;n>a;++a)(e>a||a>=t)&&r.push(i[a]);return this.setFromArray(0,r),this},i.TypedArrayHelper.prototype.setFromArray=function(e,t){"use strict";var r=t.length,i=e+r;return i>this.array.length?this.grow(i):i<this.array.length&&this.shrink(i),this.array.set(t,this.indexOffset+e),this},i.TypedArrayHelper.prototype.setVec2=function(e,t){"use strict";return this.setVec2Components(e,t.x,t.y)},i.TypedArrayHelper.prototype.setVec2Components=function(e,t,r){"use strict";var i=this.array,n=this.indexOffset+e*this.componentSize;return i[n]=t,i[n+1]=r,this},i.TypedArrayHelper.prototype.setVec3=function(e,t){"use strict";return this.setVec3Components(e,t.x,t.y,t.z)},i.TypedArrayHelper.prototype.setVec3Components=function(e,t,r,i){"use strict";var n=this.array,a=this.indexOffset+e*this.componentSize;return n[a]=t,n[a+1]=r,n[a+2]=i,this},i.TypedArrayHelper.prototype.setVec4=function(e,t){"use strict";return this.setVec4Components(e,t.x,t.y,t.z,t.w)},i.TypedArrayHelper.prototype.setVec4Components=function(e,t,r,i,n){"use strict";var a=this.array,o=this.indexOffset+e*this.componentSize;return a[o]=t,a[o+1]=r,a[o+2]=i,a[o+3]=n,this},i.TypedArrayHelper.prototype.setMat3=function(e,t){"use strict";return this.setFromArray(this.indexOffset+e*this.componentSize,t.elements)},i.TypedArrayHelper.prototype.setMat4=function(e,t){"use strict";return this.setFromArray(this.indexOffset+e*this.componentSize,t.elements)},i.TypedArrayHelper.prototype.setColor=function(e,t){"use strict";return this.setVec3Components(e,t.r,t.g,t.b)},i.TypedArrayHelper.prototype.setNumber=function(e,t){"use strict";return this.array[this.indexOffset+e*this.componentSize]=t,this},i.TypedArrayHelper.prototype.getValueAtIndex=function(e){"use strict";return this.array[this.indexOffset+e]},i.TypedArrayHelper.prototype.getComponentValueAtIndex=function(e){"use strict";return this.array.subarray(this.indexOffset+e*this.componentSize)},i.ShaderAttribute=function(e,t,r){"use strict";var n=i.ShaderAttribute.typeSizeMap;this.type="string"==typeof e&&n.hasOwnProperty(e)?e:"f",this.componentSize=n[this.type],this.arrayType=r||Float32Array,this.typedArray=null,this.bufferAttribute=null,this.dynamicBuffer=!!t,this.updateMin=0,this.updateMax=0},i.ShaderAttribute.constructor=i.ShaderAttribute,i.ShaderAttribute.typeSizeMap={f:1,v2:2,v3:3,v4:4,c:3,m3:9,m4:16},i.ShaderAttribute.prototype.setUpdateRange=function(e,t){"use strict";this.updateMin=Math.min(e*this.componentSize,this.updateMin*this.componentSize),this.updateMax=Math.max(t*this.componentSize,this.updateMax*this.componentSize)},i.ShaderAttribute.prototype.flagUpdate=function(){"use strict";var e=this.bufferAttribute,t=e.updateRange;t.offset=this.updateMin,t.count=Math.min(this.updateMax-this.updateMin+this.componentSize,this.typedArray.array.length),e.needsUpdate=!0},i.ShaderAttribute.prototype.resetUpdateRange=function(){"use strict";this.updateMin=0,this.updateMax=0},i.ShaderAttribute.prototype.resetDynamic=function(){"use strict";this.bufferAttribute.dynamic=this.dynamicBuffer},i.ShaderAttribute.prototype.splice=function(e,t){"use strict";this.typedArray.splice(e,t),this.forceUpdateAll()},i.ShaderAttribute.prototype.forceUpdateAll=function(){"use strict";this.bufferAttribute.array=this.typedArray.array,this.bufferAttribute.updateRange.offset=0,this.bufferAttribute.updateRange.count=-1,this.bufferAttribute.dynamic=!1,this.bufferAttribute.needsUpdate=!0},i.ShaderAttribute.prototype._ensureTypedArray=function(e){"use strict";null!==this.typedArray&&this.typedArray.size===e*this.componentSize||(null!==this.typedArray&&this.typedArray.size!==e?this.typedArray.setSize(e):null===this.typedArray&&(this.typedArray=new i.TypedArrayHelper(this.arrayType,e,this.componentSize)))},i.ShaderAttribute.prototype._createBufferAttribute=function(t){"use strict";return this._ensureTypedArray(t),null!==this.bufferAttribute?(this.bufferAttribute.array=this.typedArray.array,void(this.bufferAttribute.needsUpdate=!0)):(this.bufferAttribute=new e.BufferAttribute(this.typedArray.array,this.componentSize),void(this.bufferAttribute.dynamic=this.dynamicBuffer))},i.ShaderAttribute.prototype.getLength=function(){"use strict";return null===this.typedArray?0:this.typedArray.array.length},i.shaderChunks={defines:["#define PACKED_COLOR_SIZE 256.0","#define PACKED_COLOR_DIVISOR 255.0"].join("\n"),uniforms:["uniform float deltaTime;","uniform float runTime;","uniform sampler2D texture;","uniform vec4 textureAnimation;","uniform float scale;"].join("\n"),attributes:["attribute vec4 acceleration;","attribute vec3 velocity;","attribute vec4 rotation;","attribute vec3 rotationCenter;","attribute vec4 params;","attribute vec4 size;","attribute vec4 angle;","attribute vec4 color;","attribute vec4 opacity;"].join("\n"),varyings:["varying vec4 vColor;","#ifdef SHOULD_ROTATE_TEXTURE","    varying float vAngle;","#endif","#ifdef SHOULD_CALCULATE_SPRITE","    varying vec4 vSpriteSheet;","#endif"].join("\n"),branchAvoidanceFunctions:["float when_gt(float x, float y) {","    return max(sign(x - y), 0.0);","}","float when_lt(float x, float y) {","    return min( max(1.0 - sign(x - y), 0.0), 1.0 );","}","float when_eq( float x, float y ) {","    return 1.0 - abs( sign( x - y ) );","}","float when_ge(float x, float y) {","  return 1.0 - when_lt(x, y);","}","float when_le(float x, float y) {","  return 1.0 - when_gt(x, y);","}","float and(float a, float b) {","    return a * b;","}","float or(float a, float b) {","    return min(a + b, 1.0);","}"].join("\n"),unpackColor:["vec3 unpackColor( in float hex ) {","   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );","   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;","   return c;","}"].join("\n"),unpackRotationAxis:["vec3 unpackRotationAxis( in float hex ) {","   vec3 c = vec3( 0.0 );","   float r = mod( (hex / PACKED_COLOR_SIZE / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float g = mod( (hex / PACKED_COLOR_SIZE), PACKED_COLOR_SIZE );","   float b = mod( hex, PACKED_COLOR_SIZE );","   c.r = r / PACKED_COLOR_DIVISOR;","   c.g = g / PACKED_COLOR_DIVISOR;","   c.b = b / PACKED_COLOR_DIVISOR;","   c *= vec3( 2.0 );","   c -= vec3( 1.0 );","   return c;","}"].join("\n"),floatOverLifetime:["float getFloatOverLifetime( in float positionInTime, in vec4 attr ) {","    highp float value = 0.0;","    float deltaAge = positionInTime * float( VALUE_OVER_LIFETIME_LENGTH - 1 );","    float fIndex = 0.0;","    float shouldApplyValue = 0.0;","    value += attr[ 0 ] * when_eq( deltaAge, 0.0 );","","    for( int i = 0; i < VALUE_OVER_LIFETIME_LENGTH - 1; ++i ) {","       fIndex = float( i );","       shouldApplyValue = and( when_gt( deltaAge, fIndex ), when_le( deltaAge, fIndex + 1.0 ) );","       value += shouldApplyValue * mix( attr[ i ], attr[ i + 1 ], deltaAge - fIndex );","    }","","    return value;","}"].join("\n"),colorOverLifetime:["vec3 getColorOverLifetime( in float positionInTime, in vec3 color1, in vec3 color2, in vec3 color3, in vec3 color4 ) {","    vec3 value = vec3( 0.0 );","    value.x = getFloatOverLifetime( positionInTime, vec4( color1.x, color2.x, color3.x, color4.x ) );","    value.y = getFloatOverLifetime( positionInTime, vec4( color1.y, color2.y, color3.y, color4.y ) );","    value.z = getFloatOverLifetime( positionInTime, vec4( color1.z, color2.z, color3.z, color4.z ) );","    return value;","}"].join("\n"),paramFetchingFunctions:["float getAlive() {","   return params.x;","}","float getAge() {","   return params.y;","}","float getMaxAge() {","   return params.z;","}","float getWiggle() {","   return params.w;","}"].join("\n"),forceFetchingFunctions:["vec4 getPosition( in float age ) {","   return modelViewMatrix * vec4( position, 1.0 );","}","vec3 getVelocity( in float age ) {","   return velocity * age;","}","vec3 getAcceleration( in float age ) {","   return acceleration.xyz * age;","}"].join("\n"),rotationFunctions:["#ifdef SHOULD_ROTATE_PARTICLES","   mat4 getRotationMatrix( in vec3 axis, in float angle) {","       axis = normalize(axis);","       float s = sin(angle);","       float c = cos(angle);","       float oc = 1.0 - c;","","       return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,","                   oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,","                   oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,","                   0.0,                                0.0,                                0.0,                                1.0);","   }","","   vec3 getRotation( in vec3 pos, in float positionInTime ) {","      if( rotation.y == 0.0 ) {","           return pos;","      }","","      vec3 axis = unpackRotationAxis( rotation.x );","      vec3 center = rotationCenter;","      vec3 translated;","      mat4 rotationMatrix;","      float angle = 0.0;","      angle += when_eq( rotation.z, 0.0 ) * rotation.y;","      angle += when_gt( rotation.z, 0.0 ) * mix( 0.0, rotation.y, positionInTime );","      translated = rotationCenter - pos;","      rotationMatrix = getRotationMatrix( axis, angle );","      return center - vec3( rotationMatrix * vec4( translated, 0.0 ) );","   }","#endif"].join("\n"),rotateTexture:["    vec2 vUv = vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y );","","    #ifdef SHOULD_ROTATE_TEXTURE","       float x = gl_PointCoord.x - 0.5;","       float y = 1.0 - gl_PointCoord.y - 0.5;","       float c = cos( -vAngle );","       float s = sin( -vAngle );","       vUv = vec2( c * x + s * y + 0.5, c * y - s * x + 0.5 );","    #endif","","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = vSpriteSheet.x;","        float framesY = vSpriteSheet.y;","        float columnNorm = vSpriteSheet.z;","        float rowNorm = vSpriteSheet.w;","        vUv.x = gl_PointCoord.x * framesX + columnNorm;","        vUv.y = 1.0 - (gl_PointCoord.y * framesY + rowNorm);","    #endif","","    vec4 rotatedTexture = texture2D( texture, vUv );"].join("\n")},i.shaders={vertex:[i.shaderChunks.defines,i.shaderChunks.uniforms,i.shaderChunks.attributes,i.shaderChunks.varyings,e.ShaderChunk.common,e.ShaderChunk.logdepthbuf_pars_vertex,i.shaderChunks.branchAvoidanceFunctions,i.shaderChunks.unpackColor,i.shaderChunks.unpackRotationAxis,i.shaderChunks.floatOverLifetime,i.shaderChunks.colorOverLifetime,i.shaderChunks.paramFetchingFunctions,i.shaderChunks.forceFetchingFunctions,i.shaderChunks.rotationFunctions,"void main() {","    highp float age = getAge();","    highp float alive = getAlive();","    highp float maxAge = getMaxAge();","    highp float positionInTime = (age / maxAge);","    highp float isAlive = when_gt( alive, 0.0 );","    #ifdef SHOULD_WIGGLE_PARTICLES","        float wiggleAmount = positionInTime * getWiggle();","        float wiggleSin = isAlive * sin( wiggleAmount );","        float wiggleCos = isAlive * cos( wiggleAmount );","    #endif","    vec3 vel = getVelocity( age );","    vec3 accel = getAcceleration( age );","    vec3 force = vec3( 0.0 );","    vec3 pos = vec3( position );","    float drag = 1.0 - (positionInTime * 0.5) * acceleration.w;","    force += vel;","    force *= drag;","    force += accel * age;","    pos += force;","    #ifdef SHOULD_WIGGLE_PARTICLES","        pos.x += wiggleSin;","        pos.y += wiggleCos;","        pos.z += wiggleSin;","    #endif","    #ifdef SHOULD_ROTATE_PARTICLES","        pos = getRotation( pos, positionInTime );","    #endif","    vec4 mvPos = modelViewMatrix * vec4( pos, 1.0 );","    highp float pointSize = getFloatOverLifetime( positionInTime, size ) * isAlive;","    #ifdef HAS_PERSPECTIVE","        float perspective = scale / length( mvPos.xyz );","    #else","        float perspective = 1.0;","    #endif","    float pointSizePerspective = pointSize * perspective;","    #ifdef COLORIZE","       vec3 c = isAlive * getColorOverLifetime(","           positionInTime,","           unpackColor( color.x ),","           unpackColor( color.y ),","           unpackColor( color.z ),","           unpackColor( color.w )","       );","    #else","       vec3 c = vec3(1.0);","    #endif","    float o = isAlive * getFloatOverLifetime( positionInTime, opacity );","    vColor = vec4( c, o );","    #ifdef SHOULD_ROTATE_TEXTURE","        vAngle = isAlive * getFloatOverLifetime( positionInTime, angle );","    #endif","    #ifdef SHOULD_CALCULATE_SPRITE","        float framesX = textureAnimation.x;","        float framesY = textureAnimation.y;","        float loopCount = textureAnimation.w;","        float totalFrames = textureAnimation.z;","        float frameNumber = mod( (positionInTime * loopCount) * totalFrames, totalFrames );","        float column = floor(mod( frameNumber, framesX ));","        float row = floor( (frameNumber - column) / framesX );","        float columnNorm = column / framesX;","        float rowNorm = row / framesY;","        vSpriteSheet.x = 1.0 / framesX;","        vSpriteSheet.y = 1.0 / framesY;","        vSpriteSheet.z = columnNorm;","        vSpriteSheet.w = rowNorm;","    #endif","    gl_PointSize = pointSizePerspective;","    gl_Position = projectionMatrix * mvPos;",e.ShaderChunk.logdepthbuf_vertex,"}"].join("\n"),fragment:[i.shaderChunks.uniforms,e.ShaderChunk.common,e.ShaderChunk.fog_pars_fragment,e.ShaderChunk.logdepthbuf_pars_fragment,i.shaderChunks.varyings,i.shaderChunks.branchAvoidanceFunctions,"void main() {","    vec3 outgoingLight = vColor.xyz;","    ","    #ifdef ALPHATEST","       if ( vColor.w < float(ALPHATEST) ) discard;","    #endif",i.shaderChunks.rotateTexture,e.ShaderChunk.logdepthbuf_fragment,"    outgoingLight = vColor.xyz * rotatedTexture.xyz;","    gl_FragColor = vec4( outgoingLight.xyz, rotatedTexture.w * vColor.w );",e.ShaderChunk.fog_fragment,"}"].join("\n")},i.utils={types:{BOOLEAN:"boolean",STRING:"string",NUMBER:"number",OBJECT:"object"},ensureTypedArg:function(e,t,r){"use strict";return typeof e===t?e:r},ensureArrayTypedArg:function(e,t,r){"use strict";if(Array.isArray(e)){for(var i=e.length-1;i>=0;--i)if(typeof e[i]!==t)return r;return e}return this.ensureTypedArg(e,t,r)},ensureInstanceOf:function(e,t,r){"use strict";return void 0!==t&&e instanceof t?e:r},ensureArrayInstanceOf:function(e,t,r){"use strict";if(Array.isArray(e)){for(var i=e.length-1;i>=0;--i)if(void 0!==t&&e[i]instanceof t==0)return r;return e}return this.ensureInstanceOf(e,t,r)},ensureValueOverLifetimeCompliance:function(e,t,r){"use strict";t=t||3,r=r||3,Array.isArray(e._value)===!1&&(e._value=[e._value]),Array.isArray(e._spread)===!1&&(e._spread=[e._spread]);var i=this.clamp(e._value.length,t,r),n=this.clamp(e._spread.length,t,r),a=Math.max(i,n);e._value.length!==a&&(e._value=this.interpolateArray(e._value,a)),e._spread.length!==a&&(e._spread=this.interpolateArray(e._spread,a))},interpolateArray:function(e,t){"use strict";for(var r=e.length,i=["function"==typeof e[0].clone?e[0].clone():e[0]],n=(r-1)/(t-1),a=1;t-1>a;++a){var o=a*n,s=Math.floor(o),l=Math.ceil(o),u=o-s;i[a]=this.lerpTypeAgnostic(e[s],e[l],u)}return i.push("function"==typeof e[r-1].clone?e[r-1].clone():e[r-1]),i},clamp:function(e,t,r){"use strict";return Math.max(t,Math.min(e,r))},zeroToEpsilon:function(e,t){"use strict";var r=1e-5,i=e;return i=t?Math.random()*r*10:r,0>e&&e>-r&&(i=-i),i},lerpTypeAgnostic:function(t,r,i){"use strict";var n,a=this.types;return typeof t===a.NUMBER&&typeof r===a.NUMBER?t+(r-t)*i:t instanceof e.Vector2&&r instanceof e.Vector2?(n=t.clone(),n.x=this.lerp(t.x,r.x,i),n.y=this.lerp(t.y,r.y,i),n):t instanceof e.Vector3&&r instanceof e.Vector3?(n=t.clone(),n.x=this.lerp(t.x,r.x,i),n.y=this.lerp(t.y,r.y,i),n.z=this.lerp(t.z,r.z,i),n):t instanceof e.Vector4&&r instanceof e.Vector4?(n=t.clone(),n.x=this.lerp(t.x,r.x,i),n.y=this.lerp(t.y,r.y,i),n.z=this.lerp(t.z,r.z,i),n.w=this.lerp(t.w,r.w,i),n):t instanceof e.Color&&r instanceof e.Color?(n=t.clone(),n.r=this.lerp(t.r,r.r,i),n.g=this.lerp(t.g,r.g,i),n.b=this.lerp(t.b,r.b,i),n):void console.warn("Invalid argument types, or argument types do not match:",t,r)},lerp:function(e,t,r){"use strict";return e+(t-e)*r},roundToNearestMultiple:function(e,t){"use strict";var r=0;return 0===t?e:(r=Math.abs(e)%t,0===r?e:0>e?-(Math.abs(e)-r):e+t-r)},arrayValuesAreEqual:function(e){"use strict";for(var t=0;t<e.length-1;++t)if(e[t]!==e[t+1])return!1;return!0},randomFloat:function(e,t){"use strict";return e+t*(Math.random()-.5)},randomVector3:function(e,t,r,i,n){"use strict";var a=r.x+(Math.random()*i.x-.5*i.x),o=r.y+(Math.random()*i.y-.5*i.y),s=r.z+(Math.random()*i.z-.5*i.z);n&&(a=.5*-n.x+this.roundToNearestMultiple(a,n.x),o=.5*-n.y+this.roundToNearestMultiple(o,n.y),s=.5*-n.z+this.roundToNearestMultiple(s,n.z)),e.typedArray.setVec3Components(t,a,o,s)},randomColor:function(e,t,r,i){"use strict";var n=r.r+Math.random()*i.x,a=r.g+Math.random()*i.y,o=r.b+Math.random()*i.z;n=this.clamp(n,0,1),a=this.clamp(a,0,1),o=this.clamp(o,0,1),e.typedArray.setVec3Components(t,n,a,o)},randomColorAsHex:function(){"use strict";var t=new e.Color;return function(e,r,i,n){for(var a=i.length,o=[],s=0;a>s;++s){var l=n[s];t.copy(i[s]),t.r+=Math.random()*l.x-.5*l.x,t.g+=Math.random()*l.y-.5*l.y,t.b+=Math.random()*l.z-.5*l.z,t.r=this.clamp(t.r,0,1),t.g=this.clamp(t.g,0,1),t.b=this.clamp(t.b,0,1),o.push(t.getHex())}e.typedArray.setVec4Components(r,o[0],o[1],o[2],o[3])}}(),randomVector3OnSphere:function(e,t,r,i,n,a,o){"use strict";var s=2*Math.random()-1,l=6.2832*Math.random(),u=Math.sqrt(1-s*s),c=this.randomFloat(i,n),h=0,p=0,d=0;o&&(c=Math.round(c/o)*o),h=u*Math.cos(l)*c,p=u*Math.sin(l)*c,d=s*c,h*=a.x,p*=a.y,d*=a.z,h+=r.x,p+=r.y,d+=r.z,e.typedArray.setVec3Components(t,h,p,d)},seededRandom:function(e){var t=1e4*Math.sin(e);return t-(0|t)},randomVector3OnDisc:function(e,t,r,i,n,a,o){"use strict";var s=6.2832*Math.random(),l=Math.abs(this.randomFloat(i,n)),u=0,c=0,h=0;o&&(l=Math.round(l/o)*o),u=Math.cos(s)*l,c=Math.sin(s)*l,u*=a.x,c*=a.y,u+=r.x,c+=r.y,h+=r.z,e.typedArray.setVec3Components(t,u,c,h)},randomDirectionVector3OnSphere:function(){"use strict";var t=new e.Vector3;return function(e,r,i,n,a,o,s,l){t.copy(o),t.x-=i,t.y-=n,t.z-=a,t.normalize().multiplyScalar(-this.randomFloat(s,l)),e.typedArray.setVec3Components(r,t.x,t.y,t.z)}}(),randomDirectionVector3OnDisc:function(){"use strict";var t=new e.Vector3;return function(e,r,i,n,a,o,s,l){t.copy(o),t.x-=i,t.y-=n,t.z-=a,t.normalize().multiplyScalar(-this.randomFloat(s,l)),e.typedArray.setVec3Components(r,t.x,t.y,0)}}(),getPackedRotationAxis:function(){"use strict";var t=new e.Vector3,r=new e.Vector3,i=new e.Color,n=new e.Vector3(1,1,1);return function(e,a){return t.copy(e).normalize(),r.copy(a).normalize(),t.x+=.5*-a.x+Math.random()*a.x,t.y+=.5*-a.y+Math.random()*a.y,t.z+=.5*-a.z+Math.random()*a.z,t.normalize().add(n).multiplyScalar(.5),i.setRGB(t.x,t.y,t.z),i.getHex()}}()},i.Group=function(t){"use strict";var r=i.utils,n=r.types;t=r.ensureTypedArg(t,n.OBJECT,{}),t.texture=r.ensureTypedArg(t.texture,n.OBJECT,{}),this.uuid=e.Math.generateUUID(),this.fixedTimeStep=r.ensureTypedArg(t.fixedTimeStep,n.NUMBER,.016),this.texture=r.ensureInstanceOf(t.texture.value,e.Texture,null),this.textureFrames=r.ensureInstanceOf(t.texture.frames,e.Vector2,new e.Vector2(1,1)),this.textureFrameCount=r.ensureTypedArg(t.texture.frameCount,n.NUMBER,this.textureFrames.x*this.textureFrames.y),this.textureLoop=r.ensureTypedArg(t.texture.loop,n.NUMBER,1),this.textureFrames.max(new e.Vector2(1,1)),this.hasPerspective=r.ensureTypedArg(t.hasPerspective,n.BOOLEAN,!0),this.colorize=r.ensureTypedArg(t.colorize,n.BOOLEAN,!0),this.maxParticleCount=r.ensureTypedArg(t.maxParticleCount,n.NUMBER,null),this.blending=r.ensureTypedArg(t.blending,n.NUMBER,e.AdditiveBlending),this.transparent=r.ensureTypedArg(t.transparent,n.BOOLEAN,!0),this.alphaTest=parseFloat(r.ensureTypedArg(t.alphaTest,n.NUMBER,0)),this.depthWrite=r.ensureTypedArg(t.depthWrite,n.BOOLEAN,!1),this.depthTest=r.ensureTypedArg(t.depthTest,n.BOOLEAN,!0),this.fog=r.ensureTypedArg(t.fog,n.BOOLEAN,!0),this.scale=r.ensureTypedArg(t.scale,n.NUMBER,300),this.emitters=[],this.emitterIDs=[],this._pool=[],this._poolCreationSettings=null,this._createNewWhenPoolEmpty=0,this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!1,this.particleCount=0,this.uniforms={texture:{type:"t",value:this.texture},textureAnimation:{type:"v4",value:new e.Vector4(this.textureFrames.x,this.textureFrames.y,this.textureFrameCount,Math.max(Math.abs(this.textureLoop),1))},fogColor:{type:"c",value:null},fogNear:{type:"f",value:10},fogFar:{type:"f",value:200},fogDensity:{type:"f",value:.5},deltaTime:{type:"f",value:0},runTime:{type:"f",value:0},scale:{type:"f",value:this.scale}},this.defines={HAS_PERSPECTIVE:this.hasPerspective,COLORIZE:this.colorize,VALUE_OVER_LIFETIME_LENGTH:i.valueOverLifetimeLength,SHOULD_ROTATE_TEXTURE:!1,SHOULD_ROTATE_PARTICLES:!1,SHOULD_WIGGLE_PARTICLES:!1,SHOULD_CALCULATE_SPRITE:this.textureFrames.x>1||this.textureFrames.y>1},this.attributes={position:new i.ShaderAttribute("v3",!0),acceleration:new i.ShaderAttribute("v4",!0),velocity:new i.ShaderAttribute("v3",!0),rotation:new i.ShaderAttribute("v4",!0),rotationCenter:new i.ShaderAttribute("v3",!0),params:new i.ShaderAttribute("v4",!0),size:new i.ShaderAttribute("v4",!0),angle:new i.ShaderAttribute("v4",!0),color:new i.ShaderAttribute("v4",!0),opacity:new i.ShaderAttribute("v4",!0)},this.attributeKeys=Object.keys(this.attributes),this.attributeCount=this.attributeKeys.length,this.material=new e.ShaderMaterial({uniforms:this.uniforms,vertexShader:i.shaders.vertex,fragmentShader:i.shaders.fragment,blending:this.blending,transparent:this.transparent,alphaTest:this.alphaTest,depthWrite:this.depthWrite,depthTest:this.depthTest,defines:this.defines,fog:this.fog}),this.geometry=new e.BufferGeometry,this.mesh=new e.Points(this.geometry,this.material),null===this.maxParticleCount&&console.warn("SPE.Group: No maxParticleCount specified. Adding emitters after rendering will probably cause errors.")},i.Group.constructor=i.Group,i.Group.prototype._updateDefines=function(){"use strict";var e,t=this.emitters,r=t.length-1,i=this.defines;for(r;r>=0;--r)e=t[r],i.SHOULD_CALCULATE_SPRITE||(i.SHOULD_ROTATE_TEXTURE=i.SHOULD_ROTATE_TEXTURE||!!Math.max(Math.max.apply(null,e.angle.value),Math.max.apply(null,e.angle.spread))),i.SHOULD_ROTATE_PARTICLES=i.SHOULD_ROTATE_PARTICLES||!!Math.max(e.rotation.angle,e.rotation.angleSpread),i.SHOULD_WIGGLE_PARTICLES=i.SHOULD_WIGGLE_PARTICLES||!!Math.max(e.wiggle.value,e.wiggle.spread);this.material.needsUpdate=!0},i.Group.prototype._applyAttributesToGeometry=function(){"use strict";var e,t,r=this.attributes,i=this.geometry,n=i.attributes;for(var a in r)r.hasOwnProperty(a)&&(e=r[a],t=n[a],t?t.array=e.typedArray.array:i.addAttribute(a,e.bufferAttribute),e.bufferAttribute.needsUpdate=!0);this.geometry.setDrawRange(0,this.particleCount)},i.Group.prototype.addEmitter=function(e){"use strict";if(e instanceof i.Emitter==0)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",e);if(this.emitterIDs.indexOf(e.uuid)>-1)return void console.error("Emitter already exists in this group. Will not add again.");if(null!==e.group)return void console.error("Emitter already belongs to another group. Will not add to requested group.");var t=this.attributes,r=this.particleCount,n=r+e.particleCount;this.particleCount=n,null!==this.maxParticleCount&&this.particleCount>this.maxParticleCount&&console.warn("SPE.Group: maxParticleCount exceeded. Requesting",this.particleCount,"particles, can support only",this.maxParticleCount),e._calculatePPSValue(e.maxAge._value+e.maxAge._spread),e._setBufferUpdateRanges(this.attributeKeys),e._setAttributeOffset(r),e.group=this,e.attributes=this.attributes;for(var a in t)t.hasOwnProperty(a)&&t[a]._createBufferAttribute(null!==this.maxParticleCount?this.maxParticleCount:this.particleCount);for(var o=r;n>o;++o)e._assignPositionValue(o),e._assignForceValue(o,"velocity"),e._assignForceValue(o,"acceleration"),e._assignAbsLifetimeValue(o,"opacity"),e._assignAbsLifetimeValue(o,"size"),e._assignAngleValue(o),e._assignRotationValue(o),e._assignParamsValue(o),e._assignColorValue(o);return this._applyAttributesToGeometry(),this.emitters.push(e),this.emitterIDs.push(e.uuid),this._updateDefines(e),this.material.needsUpdate=!0,this.geometry.needsUpdate=!0,this._attributesNeedRefresh=!0,this},i.Group.prototype.removeEmitter=function(e){"use strict";var t=this.emitterIDs.indexOf(e.uuid);if(e instanceof i.Emitter==0)return void console.error("`emitter` argument must be instance of SPE.Emitter. Was provided with:",e);if(-1===t)return void console.error("Emitter does not exist in this group. Will not remove.");for(var r=e.attributeOffset,n=r+e.particleCount,a=this.attributes.params.typedArray,o=r;n>o;++o)a.array[4*o]=0,a.array[4*o+1]=0;this.emitters.splice(t,1),this.emitterIDs.splice(t,1);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&this.attributes[s].splice(r,n);this.particleCount-=e.particleCount,e._onRemove(),this._attributesNeedRefresh=!0},i.Group.prototype.getFromPool=function(){"use strict";var e=this._pool,t=this._createNewWhenPoolEmpty;return e.length?e.pop():t?new i.Emitter(this._poolCreationSettings):null},i.Group.prototype.releaseIntoPool=function(e){"use strict";return e instanceof i.Emitter==0?void console.error("Argument is not instanceof SPE.Emitter:",e):(e.reset(),this._pool.unshift(e),this)},i.Group.prototype.getPool=function(){"use strict";return this._pool},i.Group.prototype.addPool=function(e,t,r){"use strict";var n;this._poolCreationSettings=t,this._createNewWhenPoolEmpty=!!r;for(var a=0;e>a;++a)n=new i.Emitter(Array.isArray(t)?t[a]:t),this.addEmitter(n),this.releaseIntoPool(n);return this},i.Group.prototype._triggerSingleEmitter=function(t){"use strict";var r=this.getFromPool(),i=this;return null===r?void console.log("SPE.Group pool ran out."):(t instanceof e.Vector3&&(r.position.value.copy(t),r.position.value=r.position.value),r.enable(),setTimeout(function(){r.disable(),i.releaseIntoPool(r)},1e3*Math.max(r.duration,r.maxAge.value+r.maxAge.spread)),this)},i.Group.prototype.triggerPoolEmitter=function(e,t){"use strict";if("number"==typeof e&&e>1)for(var r=0;e>r;++r)this._triggerSingleEmitter(t);else this._triggerSingleEmitter(t);return this},i.Group.prototype._updateUniforms=function(e){"use strict";this.uniforms.runTime.value+=e,this.uniforms.deltaTime.value=e},i.Group.prototype._resetBufferRanges=function(){"use strict";var e=this.attributeKeys,t=this.attributeCount-1,r=this.attributes;for(t;t>=0;--t)r[e[t]].resetUpdateRange()},i.Group.prototype._updateBuffers=function(e){"use strict";var t,r,i,n=this.attributeKeys,a=this.attributeCount-1,o=this.attributes,s=e.bufferUpdateRanges;for(a;a>=0;--a)t=n[a],r=s[t],i=o[t],i.setUpdateRange(r.min,r.max),i.flagUpdate()},i.Group.prototype.tick=function(e){"use strict";var t,r=this.emitters,i=r.length,n=e||this.fixedTimeStep,a=this.attributeKeys,o=this.attributes;if(this._updateUniforms(n),this._resetBufferRanges(),0!==i||this._attributesNeedRefresh!==!1||this._attributesNeedDynamicReset!==!1){for(var s,t=0;i>t;++t)s=r[t],s.tick(n),this._updateBuffers(s);if(this._attributesNeedDynamicReset===!0){for(t=this.attributeCount-1;t>=0;--t)o[a[t]].resetDynamic();this._attributesNeedDynamicReset=!1}if(this._attributesNeedRefresh===!0){for(t=this.attributeCount-1;t>=0;--t)o[a[t]].forceUpdateAll();this._attributesNeedRefresh=!1,this._attributesNeedDynamicReset=!0}}},i.Group.prototype.dispose=function(){"use strict";return this.geometry.dispose(),this.material.dispose(),this},i.Emitter=function(t){"use strict";var r=i.utils,n=r.types,a=i.valueOverLifetimeLength;t=r.ensureTypedArg(t,n.OBJECT,{}),t.position=r.ensureTypedArg(t.position,n.OBJECT,{}),t.velocity=r.ensureTypedArg(t.velocity,n.OBJECT,{}),t.acceleration=r.ensureTypedArg(t.acceleration,n.OBJECT,{}),t.radius=r.ensureTypedArg(t.radius,n.OBJECT,{}),t.drag=r.ensureTypedArg(t.drag,n.OBJECT,{}),t.rotation=r.ensureTypedArg(t.rotation,n.OBJECT,{}),t.color=r.ensureTypedArg(t.color,n.OBJECT,{}),t.opacity=r.ensureTypedArg(t.opacity,n.OBJECT,{}),t.size=r.ensureTypedArg(t.size,n.OBJECT,{}),t.angle=r.ensureTypedArg(t.angle,n.OBJECT,{}),t.wiggle=r.ensureTypedArg(t.wiggle,n.OBJECT,{}),t.maxAge=r.ensureTypedArg(t.maxAge,n.OBJECT,{}),t.onParticleSpawn&&console.warn("onParticleSpawn has been removed. Please set properties directly to alter values at runtime."),this.uuid=e.Math.generateUUID(),this.type=r.ensureTypedArg(t.type,n.NUMBER,i.distributions.BOX),this.position={_value:r.ensureInstanceOf(t.position.value,e.Vector3,new e.Vector3),_spread:r.ensureInstanceOf(t.position.spread,e.Vector3,new e.Vector3),_spreadClamp:r.ensureInstanceOf(t.position.spreadClamp,e.Vector3,new e.Vector3),_distribution:r.ensureTypedArg(t.position.distribution,n.NUMBER,this.type),_randomise:r.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1),_radius:r.ensureTypedArg(t.position.radius,n.NUMBER,10),_radiusScale:r.ensureInstanceOf(t.position.radiusScale,e.Vector3,new e.Vector3(1,1,1)),_distributionClamp:r.ensureTypedArg(t.position.distributionClamp,n.NUMBER,0)},this.velocity={_value:r.ensureInstanceOf(t.velocity.value,e.Vector3,new e.Vector3),_spread:r.ensureInstanceOf(t.velocity.spread,e.Vector3,new e.Vector3),_distribution:r.ensureTypedArg(t.velocity.distribution,n.NUMBER,this.type),_randomise:r.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.acceleration={_value:r.ensureInstanceOf(t.acceleration.value,e.Vector3,new e.Vector3),_spread:r.ensureInstanceOf(t.acceleration.spread,e.Vector3,new e.Vector3),_distribution:r.ensureTypedArg(t.acceleration.distribution,n.NUMBER,this.type),_randomise:r.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.drag={_value:r.ensureTypedArg(t.drag.value,n.NUMBER,0),_spread:r.ensureTypedArg(t.drag.spread,n.NUMBER,0),_randomise:r.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.wiggle={_value:r.ensureTypedArg(t.wiggle.value,n.NUMBER,0),_spread:r.ensureTypedArg(t.wiggle.spread,n.NUMBER,0)},this.rotation={_axis:r.ensureInstanceOf(t.rotation.axis,e.Vector3,new e.Vector3(0,1,0)),_axisSpread:r.ensureInstanceOf(t.rotation.axisSpread,e.Vector3,new e.Vector3),_angle:r.ensureTypedArg(t.rotation.angle,n.NUMBER,0),_angleSpread:r.ensureTypedArg(t.rotation.angleSpread,n.NUMBER,0),_static:r.ensureTypedArg(t.rotation["static"],n.BOOLEAN,!1),_center:r.ensureInstanceOf(t.rotation.center,e.Vector3,this.position._value.clone()),_randomise:r.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.maxAge={_value:r.ensureTypedArg(t.maxAge.value,n.NUMBER,2),_spread:r.ensureTypedArg(t.maxAge.spread,n.NUMBER,0)},this.color={_value:r.ensureArrayInstanceOf(t.color.value,e.Color,new e.Color),_spread:r.ensureArrayInstanceOf(t.color.spread,e.Vector3,new e.Vector3),_randomise:r.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.opacity={_value:r.ensureArrayTypedArg(t.opacity.value,n.NUMBER,1),_spread:r.ensureArrayTypedArg(t.opacity.spread,n.NUMBER,0),_randomise:r.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.size={_value:r.ensureArrayTypedArg(t.size.value,n.NUMBER,1),_spread:r.ensureArrayTypedArg(t.size.spread,n.NUMBER,0),_randomise:r.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.angle={_value:r.ensureArrayTypedArg(t.angle.value,n.NUMBER,0),_spread:r.ensureArrayTypedArg(t.angle.spread,n.NUMBER,0),
_randomise:r.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)},this.particleCount=r.ensureTypedArg(t.particleCount,n.NUMBER,100),this.duration=r.ensureTypedArg(t.duration,n.NUMBER,null),this.isStatic=r.ensureTypedArg(t.isStatic,n.BOOLEAN,!1),this.activeMultiplier=r.ensureTypedArg(t.activeMultiplier,n.NUMBER,1),this.direction=r.ensureTypedArg(t.direction,n.NUMBER,1),this.alive=r.ensureTypedArg(t.alive,n.BOOLEAN,!0),this.particlesPerSecond=0,this.activationIndex=0,this.attributeOffset=0,this.attributeEnd=0,this.age=0,this.activeParticleCount=0,this.group=null,this.attributes=null,this.paramsArray=null,this.resetFlags={position:r.ensureTypedArg(t.position.randomise,n.BOOLEAN,!1)||r.ensureTypedArg(t.radius.randomise,n.BOOLEAN,!1),velocity:r.ensureTypedArg(t.velocity.randomise,n.BOOLEAN,!1),acceleration:r.ensureTypedArg(t.acceleration.randomise,n.BOOLEAN,!1)||r.ensureTypedArg(t.drag.randomise,n.BOOLEAN,!1),rotation:r.ensureTypedArg(t.rotation.randomise,n.BOOLEAN,!1),rotationCenter:r.ensureTypedArg(t.rotation.randomise,n.BOOLEAN,!1),size:r.ensureTypedArg(t.size.randomise,n.BOOLEAN,!1),color:r.ensureTypedArg(t.color.randomise,n.BOOLEAN,!1),opacity:r.ensureTypedArg(t.opacity.randomise,n.BOOLEAN,!1),angle:r.ensureTypedArg(t.angle.randomise,n.BOOLEAN,!1)},this.updateFlags={},this.updateCounts={},this.updateMap={maxAge:"params",position:"position",velocity:"velocity",acceleration:"acceleration",drag:"acceleration",wiggle:"params",rotation:"rotation",size:"size",color:"color",opacity:"opacity",angle:"angle"};for(var o in this.updateMap)this.updateMap.hasOwnProperty(o)&&(this.updateCounts[this.updateMap[o]]=0,this.updateFlags[this.updateMap[o]]=!1,this._createGetterSetters(this[o],o));this.bufferUpdateRanges={},this.attributeKeys=null,this.attributeCount=0,r.ensureValueOverLifetimeCompliance(this.color,a,a),r.ensureValueOverLifetimeCompliance(this.opacity,a,a),r.ensureValueOverLifetimeCompliance(this.size,a,a),r.ensureValueOverLifetimeCompliance(this.angle,a,a)},i.Emitter.constructor=i.Emitter,i.Emitter.prototype._createGetterSetters=function(e,t){"use strict";var r=this;for(var n in e)if(e.hasOwnProperty(n)){var a=n.replace("_","");Object.defineProperty(e,a,{get:function(e){return function(){return this[e]}}(n),set:function(e){return function(n){var a=r.updateMap[t],o=this[e],s=i.valueOverLifetimeLength;"_rotationCenter"===e?(r.updateFlags.rotationCenter=!0,r.updateCounts.rotationCenter=0):"_randomise"===e?r.resetFlags[a]=n:(r.updateFlags[a]=!0,r.updateCounts[a]=0),r.group._updateDefines(),this[e]=n,Array.isArray(o)&&i.utils.ensureValueOverLifetimeCompliance(r[t],s,s)}}(n)})}},i.Emitter.prototype._setBufferUpdateRanges=function(e){"use strict";this.attributeKeys=e,this.attributeCount=e.length;for(var t=this.attributeCount-1;t>=0;--t)this.bufferUpdateRanges[e[t]]={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}},i.Emitter.prototype._calculatePPSValue=function(e){"use strict";var t=this.particleCount;this.particlesPerSecond=this.duration?t/(e<this.duration?e:this.duration):t/e},i.Emitter.prototype._setAttributeOffset=function(e){this.attributeOffset=e,this.activationIndex=e,this.activationEnd=e+this.particleCount},i.Emitter.prototype._assignValue=function(e,t){"use strict";switch(e){case"position":this._assignPositionValue(t);break;case"velocity":case"acceleration":this._assignForceValue(t,e);break;case"size":case"opacity":this._assignAbsLifetimeValue(t,e);break;case"angle":this._assignAngleValue(t);break;case"params":this._assignParamsValue(t);break;case"rotation":this._assignRotationValue(t);break;case"color":this._assignColorValue(t)}},i.Emitter.prototype._assignPositionValue=function(e){"use strict";var t=i.distributions,r=i.utils,n=this.position,a=this.attributes.position,o=n._value,s=n._spread,l=n._distribution;switch(l){case t.BOX:r.randomVector3(a,e,o,s,n._spreadClamp);break;case t.SPHERE:r.randomVector3OnSphere(a,e,o,n._radius,n._spread.x,n._radiusScale,n._spreadClamp.x,n._distributionClamp||this.particleCount);break;case t.DISC:r.randomVector3OnDisc(a,e,o,n._radius,n._spread.x,n._radiusScale,n._spreadClamp.x)}},i.Emitter.prototype._assignForceValue=function(e,t){"use strict";var r,n,a,o,s,l=i.distributions,u=i.utils,c=this[t],h=c._value,p=c._spread,d=c._distribution;switch(d){case l.BOX:u.randomVector3(this.attributes[t],e,h,p);break;case l.SPHERE:r=this.attributes.position.typedArray.array,s=3*e,n=r[s],a=r[s+1],o=r[s+2],u.randomDirectionVector3OnSphere(this.attributes[t],e,n,a,o,this.position._value,c._value.x,c._spread.x);break;case l.DISC:r=this.attributes.position.typedArray.array,s=3*e,n=r[s],a=r[s+1],o=r[s+2],u.randomDirectionVector3OnDisc(this.attributes[t],e,n,a,o,this.position._value,c._value.x,c._spread.x)}if("acceleration"===t){var f=u.clamp(u.randomFloat(this.drag._value,this.drag._spread),0,1);this.attributes.acceleration.typedArray.array[4*e+3]=f}},i.Emitter.prototype._assignAbsLifetimeValue=function(e,t){"use strict";var r,n=this.attributes[t].typedArray,a=this[t],o=i.utils;o.arrayValuesAreEqual(a._value)&&o.arrayValuesAreEqual(a._spread)?(r=Math.abs(o.randomFloat(a._value[0],a._spread[0])),n.setVec4Components(e,r,r,r,r)):n.setVec4Components(e,Math.abs(o.randomFloat(a._value[0],a._spread[0])),Math.abs(o.randomFloat(a._value[1],a._spread[1])),Math.abs(o.randomFloat(a._value[2],a._spread[2])),Math.abs(o.randomFloat(a._value[3],a._spread[3])))},i.Emitter.prototype._assignAngleValue=function(e){"use strict";var t,r=this.attributes.angle.typedArray,n=this.angle,a=i.utils;a.arrayValuesAreEqual(n._value)&&a.arrayValuesAreEqual(n._spread)?(t=a.randomFloat(n._value[0],n._spread[0]),r.setVec4Components(e,t,t,t,t)):r.setVec4Components(e,a.randomFloat(n._value[0],n._spread[0]),a.randomFloat(n._value[1],n._spread[1]),a.randomFloat(n._value[2],n._spread[2]),a.randomFloat(n._value[3],n._spread[3]))},i.Emitter.prototype._assignParamsValue=function(e){"use strict";this.attributes.params.typedArray.setVec4Components(e,this.isStatic?1:0,0,Math.abs(i.utils.randomFloat(this.maxAge._value,this.maxAge._spread)),i.utils.randomFloat(this.wiggle._value,this.wiggle._spread))},i.Emitter.prototype._assignRotationValue=function(e){"use strict";this.attributes.rotation.typedArray.setVec3Components(e,i.utils.getPackedRotationAxis(this.rotation._axis,this.rotation._axisSpread),i.utils.randomFloat(this.rotation._angle,this.rotation._angleSpread),this.rotation._static?0:1),this.attributes.rotationCenter.typedArray.setVec3(e,this.rotation._center)},i.Emitter.prototype._assignColorValue=function(e){"use strict";i.utils.randomColorAsHex(this.attributes.color,e,this.color._value,this.color._spread)},i.Emitter.prototype._resetParticle=function(e){"use strict";for(var t,r,i=this.resetFlags,n=this.updateFlags,a=this.updateCounts,o=this.attributeKeys,s=this.attributeCount-1;s>=0;--s)t=o[s],r=n[t],i[t]!==!0&&r!==!0||(this._assignValue(t,e),this._updateAttributeUpdateRange(t,e),r===!0&&a[t]===this.particleCount?(n[t]=!1,a[t]=0):1==r&&++a[t])},i.Emitter.prototype._updateAttributeUpdateRange=function(e,t){"use strict";var r=this.bufferUpdateRanges[e];r.min=Math.min(t,r.min),r.max=Math.max(t,r.max)},i.Emitter.prototype._resetBufferRanges=function(){"use strict";var e,t=this.bufferUpdateRanges,r=this.bufferUpdateKeys,i=this.bufferUpdateCount-1;for(i;i>=0;--i)e=r[i],t[e].min=Number.POSITIVE_INFINITY,t[e].max=Number.NEGATIVE_INFINITY},i.Emitter.prototype._onRemove=function(){"use strict";this.particlesPerSecond=0,this.attributeOffset=0,this.activationIndex=0,this.activeParticleCount=0,this.group=null,this.attributes=null,this.paramsArray=null,this.age=0},i.Emitter.prototype._decrementParticleCount=function(){"use strict";--this.activeParticleCount},i.Emitter.prototype._incrementParticleCount=function(){"use strict";++this.activeParticleCount},i.Emitter.prototype._checkParticleAges=function(e,t,r,i){"use strict";for(var n,a,o,s,l=t-1;l>=e;--l)n=4*l,s=r[n],0!==s&&(o=r[n+1],a=r[n+2],1===this.direction?(o+=i,o>=a&&(o=0,s=0,this._decrementParticleCount())):(o-=i,0>=o&&(o=a,s=0,this._decrementParticleCount())),r[n]=s,r[n+1]=o,this._updateAttributeUpdateRange("params",l))},i.Emitter.prototype._activateParticles=function(e,t,r,i){"use strict";for(var n,a,o=this.direction,s=e;t>s;++s)n=4*s,0!=r[n]&&1!==this.particleCount||(this._incrementParticleCount(),r[n]=1,this._resetParticle(s),a=i*(s-e),r[n+1]=-1===o?r[n+2]-a:a,this._updateAttributeUpdateRange("params",s))},i.Emitter.prototype.tick=function(e){"use strict";if(!this.isStatic){null===this.paramsArray&&(this.paramsArray=this.attributes.params.typedArray.array);var t=this.attributeOffset,r=t+this.particleCount,i=this.paramsArray,n=this.particlesPerSecond*this.activeMultiplier*e,a=this.activationIndex;if(this._resetBufferRanges(),this._checkParticleAges(t,r,i,e),this.alive===!1)return void(this.age=0);if(null!==this.duration&&this.age>this.duration)return this.alive=!1,void(this.age=0);var o=1===this.particleCount?a:0|a,s=Math.min(o+n,this.activationEnd),l=s-this.activationIndex|0,u=l>0?e/l:0;this._activateParticles(o,s,i,u),this.activationIndex+=n,this.activationIndex>r&&(this.activationIndex=t),this.age+=e}},i.Emitter.prototype.reset=function(e){"use strict";if(this.age=0,this.alive=!1,e===!0){for(var t,r=this.attributeOffset,i=r+this.particleCount,n=this.paramsArray,a=this.attributes.params.bufferAttribute,o=i-1;o>=r;--o)t=4*o,n[t]=0,n[t+1]=0;a.updateRange.offset=0,a.updateRange.count=-1,a.needsUpdate=!0}return this},i.Emitter.prototype.enable=function(){"use strict";return this.alive=!0,this},i.Emitter.prototype.disable=function(){"use strict";return this.alive=!1,this},i.Emitter.prototype.remove=function(){"use strict";return null!==this.group?this.group.removeEmitter(this):console.error("Emitter does not belong to a group, cannot remove."),this}}).call(this,e("three"))},{three:27}],25:[function(e,t,r){!function(e,i){"object"==typeof r&&"undefined"!=typeof t?t.exports=i():"function"==typeof define&&define.amd?define(i):e.sono=i()}(this,function(){"use strict";function e(e){if("string"!=typeof e)return"";if("data:"===e.slice(0,5)){var t=e.match(/data:audio\/(ogg|mp3|opus|wav|m4a)/i);if(t&&t.length>1)return t[1].toLowerCase()}e=e.split("?")[0],e=e.slice(e.lastIndexOf("/")+1);var r=e.split(".");return 1===r.length||""===r[0]&&2===r.length?"":r.pop().toLowerCase()}function t(t){var r=void 0;if(Array.isArray(t))for(var i=0;i<t.length;i++){r=t[i];var n=e(r);if(te.indexOf(n)>-1)break}else"object"===("undefined"==typeof t?"undefined":Z(t))&&Object.keys(t).some(function(i){r=t[i];var n=e(r);return te.indexOf(n)>-1});return r||t}function r(e){return!!(e&&window.AudioBuffer&&e instanceof window.AudioBuffer)}function i(e){return!!(e&&window.ArrayBuffer&&e instanceof window.ArrayBuffer)}function n(e){return!!(e&&window.HTMLMediaElement&&e instanceof window.HTMLMediaElement)}function a(e){return!!(e&&"function"==typeof e.getAudioTracks&&e.getAudioTracks().length&&window.MediaStreamTrack&&e.getAudioTracks()[0]instanceof window.MediaStreamTrack)}function o(e){return!(!e||"string"!=typeof e||"sine"!==e&&"square"!==e&&"sawtooth"!==e&&"triangle"!==e)}function s(e){return!!(e&&"object"===("undefined"==typeof e?"undefined":Z(e))&&e.bufferSize&&e.channels&&e.callback)}function l(e){return!(!e||"string"!=typeof e||!(e.indexOf(".")>-1||"data:"===e.slice(0,5)))}function u(e){if(!e||n(e))return!1;var t=e.src||e.url||e.data||e;return l(t)||i(t)||Array.isArray(t)&&l(t[0])}function c(e,t){function r(e){var t=12*(Math.log(e/440)/Math.log(2));return Math.round(t)+69}function i(e){return 440*Math.pow(2,(e-69)/12)}function n(e,t){return Math.floor(1200*Math.log(e/i(t))/Math.log(2))}function a(e,t){return e?s.fftSize!==l?!0:t&&e instanceof Uint8Array?!0:!t&&e instanceof Float32Array:!0}function o(e,t){return e?new Float32Array(t):new Uint8Array(t)}t=t||{};var s=e.createAnalyser(),l=t.fftSize||512,u=!!t["float"],c=!!t["float"],h=void 0,p=void 0;s.fftSize=l,s.smoothingTimeConstant=t.smoothing||t.smoothingTimeConstant||s.smoothingTimeConstant,s.minDecibels=t.minDecibels||s.minDecibels,s.maxDecibels=t.maxDecibels||s.maxDecibels;var d=new Blob(["onmessage=function(e){var data=e.data;var f=new Float32Array(data.b);for(var i=0;i<f.length;i++){data.sum+=f[i]}data.sum/=f.length;postMessage(Math.max(1.0-(data.sum/data.numSamples*-1.0),0))};"]),f=new Blob(["onmessage=function(e){var data=e.data;var sampleRate=data.sampleRate;var buf=new Float32Array(data.b);var SIZE=buf.length;var MAX_SAMPLES=Math.floor(SIZE/2);var best_offset=-1;var best_correlation=0;var rms=0;var foundGoodCorrelation=false;var correlations=new Array(MAX_SAMPLES);for(var i=0;i<SIZE;i++){var val=buf[i];rms+=val*val}rms=Math.sqrt(rms/SIZE);if (rms<0.01){postMessage(-1)}else{var lastCorrelation=1;for(var offset=0;offset<MAX_SAMPLES;offset++){var correlation=0;for(var i=0;i<MAX_SAMPLES;i++){correlation+=Math.abs((buf[i])-(buf[i+offset]))}correlation=1-(correlation/MAX_SAMPLES);correlations[offset]=correlation;if ((correlation>0.9)&&(correlation>lastCorrelation)){foundGoodCorrelation=true;if (correlation>best_correlation){best_correlation=correlation;best_offset=offset}}else if (foundGoodCorrelation){var shift=(correlations[best_offset+1]-correlations[best_offset-1])/correlations[best_offset];postMessage(sampleRate/(best_offset+(8*shift)))}lastCorrelation=correlation}if (best_correlation>0.01){postMessage(sampleRate/best_offset)}else{postMessage(-1)}}};"]),m=URL.createObjectURL(d),v=new Worker(m),g=URL.createObjectURL(f),y=new Worker(g),b=null,_=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],x=null,w={hertz:null,note:null,noteIndex:null,detuneCents:null,detune:null};return v.onmessage=function(e){b&&b(e.data)},y.onmessage=function(e){if(x){var t=e.data;if(-1!==t){var i=r(t),a=n(t,i);w.hertz=t,w.noteIndex=i%12,w.note=_[i%12],w.detuneCents=a,w.detune=0===a?"":0>a?"flat":"sharp"}x(w)}},s.getWaveform=function(e){return arguments.length||(e=c),a(h,e)&&(l=s.fftSize,c=e,h=o(e,l)),e&&this.getFloatTimeDomainData?this.getFloatTimeDomainData(h):this.getByteTimeDomainData(h),h},s.getPitch=function(t){x=x||t;var r=new Float32Array(s.fftSize);r.set(s.getWaveform(!0)),y.postMessage({sampleRate:e.sampleRate,b:r.buffer},[r.buffer])},s.getFrequencies=function(e){return arguments.length||(e=u),a(p,e)&&(l=s.fftSize,u=e,p=o(e,s.frequencyBinCount)),e?this.getFloatFrequencyData(p):this.getByteFrequencyData(p),p},s.getAmplitude=function(e){b=b||e;var t=new Float32Array(s.fftSize);t.set(s.getFrequencies(!0)),v.postMessage({sum:0,length:t.byteLength,numSamples:s.fftSize/2,b:t.buffer},[t.buffer])},s.update=function(){s.getWaveform(),s.getFrequencies()},Object.defineProperties(s,{smoothing:{get:function(){return s.smoothingTimeConstant},set:function(e){s.smoothingTimeConstant=e}}}),s}function h(e,t){return arguments.length<2&&(t=0),"number"!=typeof e||isNaN(e)?t:e}function p(e,t){t=h(t,1);var r=e.createWaveShaper(),i=new Float32Array(oe);return r.update=function(e){if(t=e,0>=t)return t=0,void(this.curve=null);for(var r=100*e,n=Math.PI/180,a=void 0,o=0;oe>o;o++)a=2*o/oe-1,i[o]=(3+r)*a*20*n/(Math.PI+r*Math.abs(a));this.curve=i},Object.defineProperties(r,{amount:{get:function(){return t},set:function(e){this.update(e)}}}),"undefined"!=typeof t&&r.update(t),r}function d(e,t){t=t||{};var r=e.createGain(),i=e.createDelay(),n=e.createGain(),a=e.createGain();i.delayTime.value=h(t.delayTime,.5),n.gain.value=h(t.feedback,.5),r.connect(i),r.connect(a),i.connect(n),n.connect(i),n.connect(a);var o=r;return o.name="Echo",o._output=a,Object.defineProperties(o,{delay:{get:function(){return i.delayTime.value},set:function(e){i.delayTime.value=e}},feedback:{get:function(){return n.gain.value},set:function(e){n.gain.value=e}}}),o}function f(){function e(){}function t(){return{value:1,defaultValue:1,linearRampToValueAtTime:e,setValueAtTime:e,exponentialRampToValueAtTime:e,setTargetAtTime:e,setValueCurveAtTime:e,cancelScheduledValues:e}}function r(){return{connect:e,disconnect:e,frequencyBinCount:0,smoothingTimeConstant:0,fftSize:0,minDecibels:0,maxDecibels:0,getByteTimeDomainData:e,getByteFrequencyData:e,getFloatTimeDomainData:e,getFloatFrequencyData:e,gain:t(),panningModel:0,setPosition:e,setOrientation:e,setVelocity:e,distanceModel:0,refDistance:0,maxDistance:0,rolloffFactor:0,coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,type:0,frequency:t(),Q:t(),detune:t(),delayTime:t(),buffer:0,threshold:t(),knee:t(),ratio:t(),attack:t(),release:t(),reduction:t(),oversample:0,curve:0,sampleRate:1,length:0,duration:0,numberOfChannels:0,getChannelData:function(){return[]},copyFromChannel:e,copyToChannel:e,dopplerFactor:0,speedOfSound:0,start:e}}var i=Date.now();return window.Uint8Array||(window.Uint8Array=window.Float32Array=Array),{createAnalyser:r,createBuffer:r,createBiquadFilter:r,createChannelMerger:r,createChannelSplitter:r,createDynamicsCompressor:r,createConvolver:r,createDelay:r,createGain:r,createOscillator:r,createPanner:r,createScriptProcessor:r,createWaveShaper:r,listener:r(),get currentTime(){return(Date.now()-i)/1e3}}}function m(e){function t(e){var t=Math.log(n/i)/Math.LN2,r=Math.pow(2,t*(e-1));return n*r}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=40,n=e.sampleRate/2,a=e.createBiquadFilter();return a.type=r.type,a.set=function(e,t,r){return"undefined"!=typeof e&&"number"==typeof e&&(a.frequency.value=e),"undefined"!=typeof t&&"number"==typeof t&&(a.Q.value=t),"undefined"!=typeof r&&"number"==typeof r&&(a.gain.value=r),a},a.setByPercent=function(e,r,i){return a.set(t(e),r,i)},a.set(r.frequency,r.q,r.gain)}function v(e,t){var r=e.createGain(),i=e.createDelay(),n=e.createGain(),a=e.createOscillator(),o=e.createGain(),s=e.createGain();i.delayTime.value=h(t.delay,.005),n.gain.value=h(t.feedback,.5),a.type="sine",a.frequency.value=h(t.frequency,.002),o.gain.value=h(t.gain,.25),r.connect(s),r.connect(i),i.connect(s),i.connect(n),n.connect(r),a.connect(o),o.connect(i.delayTime),a.start(0);var l=r;return l.name="Flanger",l._output=s,Object.defineProperties(l,{delay:{get:function(){return i.delayTime.value},set:function(e){i.delayTime.value=e}},lfoFrequency:{get:function(){return a.frequency.value},set:function(e){a.frequency.value=e}},lfoGain:{get:function(){return o.gain.value},set:function(e){o.gain.value=e}},feedback:{get:function(){return n.gain.value},set:function(e){n.gain.value=e}}}),l}function g(e,t){var r=e.createGain(),i=e.createChannelSplitter(2),n=e.createChannelMerger(2),a=e.createGain(),o=e.createGain(),s=e.createOscillator(),l=e.createGain(),u=e.createGain(),c=e.createDelay(),p=e.createDelay(),d=e.createGain();a.gain.value=o.gain.value=h(t.feedback,.5),c.delayTime.value=p.delayTime.value=h(t.delay,.003),s.type="sine",s.frequency.value=h(t.frequency,.5),l.gain.value=h(t.gain,.005),u.gain.value=0-l.gain.value,r.connect(i),i.connect(c,0),i.connect(p,1),c.connect(a),p.connect(o),a.connect(p),o.connect(c),c.connect(n,0,0),p.connect(n,0,1),n.connect(d),r.connect(d),s.connect(l),s.connect(u),l.connect(c.delayTime),u.connect(p.delayTime),s.start(0);var f=r;return f.name="StereoFlanger",f._output=d,Object.defineProperties(f,{delay:{get:function(){return c.delayTime.value},set:function(e){c.delayTime.value=p.delayTime.value=e}},lfoFrequency:{get:function(){return s.frequency.value},set:function(e){s.frequency.value=e}},lfoGain:{get:function(){return l.gain.value},set:function(e){l.gain.value=u.gain.value=e}},feedback:{get:function(){return a.gain.value},set:function(e){a.gain.value=o.gain.value=e}}}),f}function y(e,t){return t=t||{},t.stereo?new g(e,t):new v(e,t)}function b(e){function t(e,t){var r=e.x,i=e.y,n=e.z,a=t.x,o=t.y,s=t.z;e.x=i*s-n*o,e.y=n*a-r*s,e.z=r*o-i*a}function r(e){if(0===e.x&&0===e.y&&0===e.z)return e;var t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),r=1/t;return e.x*=r,e.y*=r,e.z*=r,e}function i(e,i){var n=o.get(i.x,i.y,i.z);t(n,s),t(n,i),r(n),r(i),e.setOrientation(i.x,i.y,i.z,n.x,n.y,n.z),o.dispose(i),o.dispose(n)}function n(e,t){e.setPosition(t.x,t.y,t.z),o.dispose(t)}var a=e.createPanner();a.panningModel=b.defaults.panningModel,a.distanceModel=b.defaults.distanceModel,a.refDistance=b.defaults.refDistance,a.maxDistance=b.defaults.maxDistance,a.rolloffFactor=b.defaults.rolloffFactor,a.coneInnerAngle=b.defaults.coneInnerAngle,a.coneOuterAngle=b.defaults.coneOuterAngle,a.coneOuterGain=b.defaults.coneOuterGain,a.setPosition(0,0,1),a.setOrientation(0,0,0);var o={pool:[],get:function(e,t,r){var i=this.pool.length?this.pool.pop():{x:0,y:0,z:0};return"undefined"!=typeof e&&isNaN(e)&&"x"in e&&"y"in e&&"z"in e?(i.x=h(e.x),i.y=h(e.y),i.z=h(e.z)):(i.x=h(e),i.y=h(t),i.z=h(r)),i},dispose:function(e){this.pool.push(e)}},s=o.get(0,1,0),l=Math.PI/4,u=Math.PI/2;return a.set=function(e,t,r){var i=o.get(e,t,r);1===arguments.length&&i.x&&(e=i.x,e>1&&(e=1),-1>e&&(e=-1),e*=l,r=e+u,r>u&&(r=Math.PI-r),i.x=Math.sin(e),i.z=Math.sin(r)),n(a,i)},a.setSourcePosition=function(e,t,r){n(a,o.get(e,t,r))},a.setSourceOrientation=function(e,t,r){i(a,o.get(e,t,r))},a.setListenerPosition=function(t,r,i){n(e.listener,o.get(t,r,i))},a.setListenerOrientation=function(t,r,n){i(e.listener,o.get(t,r,n))},a.getDefaults=function(){return b.defaults},a.setDefaults=function(e){Object.keys(e).forEach(function(t){b.defaults[t]=e[t]})},a}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=h(t.stages,8),i=[],n=void 0,a=e.createGain(),o=e.createGain(),s=e.createOscillator(),l=e.createGain(),u=e.createGain();o.gain.value=h(t.feedback,.5),s.type="sine",s.frequency.value=h(t.frequency,.5),l.gain.value=h(t.gain,300);for(var c=0;r>c;c++)n=e.createBiquadFilter(),n.type="allpass",n.frequency.value=1e3*c,c>0&&i[c-1].connect(n),l.connect(n.frequency),i.push(n);var p=i[0],d=i[i.length-1];a.connect(p),a.connect(u),d.connect(u),d.connect(o),o.connect(p),s.connect(l),s.start(0);var f=a;return f.name="Phaser",f._output=u,Object.defineProperties(f,{lfoFrequency:{get:function(){return s.frequency.value},set:function(e){s.frequency.value=e}},lfoGain:{get:function(){return l.gain.value},set:function(e){l.gain.value=e}},feedback:{get:function(){return o.gain.value},set:function(e){o.gain.value=e}}}),f}function x(e,t){function r(e,t){for(var r=new Float32Array(t),i=0,n=0;n<e.length;n++)r.set(e[n],i),i+=e[n].length;return r}function i(){if(!s.length)return e.createBuffer(2,o,e.sampleRate);var t=s.length*o,i=e.createBuffer(2,t,e.sampleRate);return i.getChannelData(0).set(r(s,t)),i.getChannelData(1).set(r(l,t)),i}function n(){d&&(d.onaudioprocess=null,h.disconnect(),d.disconnect())}function a(){n(),d=e.createScriptProcessor(o,2,2),h.connect(d),d.connect(e.destination),d.connect(p),d.onaudioprocess=function(e){var r=e.inputBuffer.getChannelData(0),i=e.inputBuffer.getChannelData(1);if(t){var n=e.outputBuffer.getChannelData(0),a=e.outputBuffer.getChannelData(1);n.set(r),a.set(i)}f.isRecording&&(s.push(new Float32Array(r)),l.push(new Float32Array(i)))}}var o=4096,s=[],l=[],u=0,c=0,h=e.createGain(),p=e.createGain(),d=void 0,f=h;return f.name="Recorder",f._output=p,f.isRecording=!1,f.start=function(){a(),s.length=0,l.length=0,u=e.currentTime,c=0,this.isRecording=!0},f.stop=function(){return c=e.currentTime,this.isRecording=!1,n(),i()},f.getDuration=function(){return this.isRecording?e.currentTime-u:c-u},f}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.sampleRate,i=h(t.time,1),n=h(t.decay,5),a=!!t.reverse,o=void 0,s=void 0,l=e.createGain(),u=e.createConvolver(),c=e.createGain();l.connect(u),l.connect(c),u.connect(c);var p=l;return p.name="Reverb",p._output=c,p.update=function(t){if("undefined"!=typeof t.time&&(i=t.time,o=Math.floor(r*i),s=o?e.createBuffer(2,o,r):null),"undefined"!=typeof t.decay&&(n=t.decay),"undefined"!=typeof t.reverse&&(a=t.reverse),!s)return void(u.buffer=null);for(var l=s.getChannelData(0),c=s.getChannelData(1),h=void 0,p=void 0,d=0;o>d;d++)h=a?o-d:d,p=Math.pow(1-h/o,n),l[d]=(2*Math.random()-1)*p,c[d]=(2*Math.random()-1)*p;u.buffer=s},p.update({time:i,decay:n,reverse:a}),Object.defineProperties(p,{time:{get:function(){return i},set:function(e){e!==i&&this.update({time:e})}},decay:{get:function(){return n},set:function(e){e!==n&&this.update({decay:e})}},reverse:{get:function(){return a},set:function(e){e!==a&&this.update({reverse:!!e})}}}),p}function T(e){function t(e,t){var r=e._output||e;r.disconnect(),r.connect(t)}function r(e){var r=Y.length,i=r?Y[r-1]:q;i&&t(i,e),X=e}function i(){if(q){for(var e=void 0,i=void 0,n=0;n<Y.length;n++)e=Y[n],i=0===n?q:Y[n-1],t(i,e);X&&r(X)}}function n(e){return e?Y.indexOf(e)>-1:!1}function a(e){return e?n(e)?e:(Y.push(e),i(),e):null}function o(e){if(!e)return null;if(!n(e))return e;for(var t=Y.length,r=0;t>r;r++)if(e===Y[r]){Y.splice(r,1);break}var a=e._output||e;return a.disconnect(),i(),e}function s(e,t){t=!!t;var r=n(e);return arguments.length>1&&r===t?W:(r?o(e):a(e),W)}function l(){for(;Y.length;)Y.pop().disconnect();return i(),W}function u(){l(),e=null,X=null,Y=[],q&&q.disconnect(),q=null}function h(t){return a(new c(e,t))}function v(t){var r=e.createDynamicsCompressor();return r.update=function(e){r.threshold.value="undefined"!=typeof e.threshold?e.threshold:-24,r.knee.value="undefined"!=typeof e.knee?e.knee:30,r.ratio.value="undefined"!=typeof e.ratio?e.ratio:12,r.attack.value="undefined"!=typeof e.attack?e.attack:3e-4,r.release.value="undefined"!=typeof e.release?e.release:.25},r.update(t||{}),a(r)}function g(t){var r=e.createConvolver();return r.buffer=t,a(r)}function T(t){var r=e.createDelay();return"undefined"!=typeof t&&(r.delayTime.value=t),a(r)}function M(t){return a(new d(e,t))}function S(t){return a(new p(e,t))}function E(t,r,i,n){return a(new m(e,{type:t,frequency:r,q:i,gain:n}))}function P(e,t){return E("lowpass",{frequency:e,q:t})}function A(e,t){return E("highpass",{frequency:e,q:t})}function C(e,t){return E("bandpass",{frequency:e,q:t})}function O(e,t){return E("lowshelf",{frequency:e,q:0,gain:t})}function k(e,t){return E("highshelf",{frequency:e,q:0,gain:t})}function L(e,t,r){return E("peaking",{frequency:e,q:t,gain:r})}function R(e,t,r){return E("notch",{frequency:e,q:t,gain:r})}function I(e,t){return E("allpass",{frequency:e,q:t})}function D(t){return a(new y(e,t))}function F(t){var r=e.createGain();return"undefined"!=typeof t&&(r.gain.value=t),r}function N(){return a(new b(e))}function B(t){return a(new _(e,t))}function G(t){return a(new x(e,t))}function j(t,r,i){return a(new w(e,t,r,i))}function V(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.bufferSize||1024,i="undefined"==typeof t.inputChannels?0:t.inputChannels,n="undefined"==typeof t.outputChannels?1:t.outputChannels,o=e.createScriptProcessor(r,i,n),s=t.thisArg||t.context||o,l=t.callback||function(){};return o.onaudioprocess=l.bind(s),a(o)}function U(e){return q=e,i(),e}function z(e){return r(e),e}e=e||new f;var H=new b(e),W=null,X=void 0,Y=[],q=void 0;return W={context:e,nodeList:Y,panning:H,has:n,add:a,remove:o,toggle:s,removeAll:l,destroy:u,setSource:U,setDestination:z,analyser:h,compressor:v,convolver:g,delay:T,echo:M,distortion:S,filter:E,lowpass:P,highpass:A,bandpass:C,lowshelf:O,highshelf:k,peaking:L,notch:R,allpass:I,flanger:D,gain:F,panner:N,phaser:B,recorder:G,reverb:j,script:V},Object.freeze(W)}function M(e,t){function r(e,t){var r=void 0;return e||0===e?(m.some(function(t){return t===e||t.id===e?(r=t,!0):!1}),r&&t?t(r):r):r}function i(e){return r(e,function(e){return m.splice(m.indexOf(e),1)}),b}function n(e){return e.gain.disconnect(),e.gain.connect(g),m.push(e),e.once("destroy",i),b}function a(e,t){return m.forEach(function(r){return r.play(e,t)}),b}function o(){return m.forEach(function(e){e.playing&&e.pause()}),b}function s(){return m.forEach(function(e){e.paused&&e.play()}),b}function l(){return m.forEach(function(e){return e.stop()}),b}function u(e){return m.forEach(function(t){return t.seek(e)}),b}function c(){return y=b.volume,b.volume=0,b}function h(){return b.volume=y||1,b}function p(e){return b.volume=e,b}function d(t,r){if(e){var i=g.gain,n=e.currentTime;i.cancelScheduledValues(n),i.setValueAtTime(i.value,n),i.linearRampToValueAtTime(t,n+r)}else m.forEach(function(e){e.fade(t,r)});return b}function f(){for(;m.length;)m.pop().destroy()}var m=[],v=new T(e),g=v.gain(),y=1,b=null;return e&&(v.setSource(g),v.setDestination(t||e.destination)),b={add:n,find:r,remove:i,play:a,pause:o,resume:s,stop:l,seek:u,setVolume:p,mute:c,unMute:h,fade:d,destroy:f},Object.defineProperties(b,{effect:{value:v},gain:{value:g},sounds:{value:m},volume:{get:function(){return g.gain.value},set:function(t){isNaN(t)||(t=Math.min(Math.max(t,0),1),e?(g.gain.cancelScheduledValues(e.currentTime),g.gain.value=t,g.gain.setValueAtTime(t,e.currentTime)):g.gain.value=t,m.forEach(function(e){e.context||(e.groupVolume=t)}))}}}),b}function S(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function E(e){return"function"==typeof e}function P(e){return"number"==typeof e}function A(e){return"object"==typeof e&&null!==e}function C(e){return void 0===e}function O(e){function t(){m.off("error"),m.off("progress"),m.off("complete"),m.off("loaded"),x&&"function"==typeof x.removeEventListener&&(x.removeEventListener("canplaythrough",s),x.removeEventListener("error",n)),b&&(b.removeEventListener("progress",i),b.removeEventListener("load",o),b.removeEventListener("error",n))}function r(e){m.emit("progress",1),m.emit("loaded",e),m.emit("complete",e),t()}function i(e){e.lengthComputable&&(v=e.loaded/e.total,m.emit("progress",v))}function n(r){window.clearTimeout(_);var i=r;x&&x.error&&(i="Media Error: "+f[x.error.code]+" "+e),b&&(i="XHR Error: "+b.status+" "+b.statusText+" "+e),m.emit("error",i),t()}function a(e){g.decodeAudioData(e,function(e){x=e,b=null,v=1,r(e)},n)}function o(){a(b.response)}function s(){window.clearTimeout(_),x&&(v=1,r(x))}function l(){t(),b&&4!==b.readyState&&b.abort(),b=null,window.clearTimeout(_)}function u(){l(),b=null,x=null,g=null}function c(){return e instanceof window.ArrayBuffer?void a(e):(b=new XMLHttpRequest,b.open("GET",e,!0),b.responseType="arraybuffer",b.addEventListener("progress",i),b.addEventListener("load",o),b.addEventListener("error",n),void b.send())}function h(){x&&x.tagName||(x=document.createElement("audio")),y||(window.clearTimeout(_),_=window.setTimeout(s,2e3),x.addEventListener("canplaythrough",s,!1)),x.addEventListener("error",n,!1),x.preload="auto",x.src=e,x.load(),y&&r(x)}function p(){g?c():h()}function d(t){e=t,p()}var f=["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"],m=new ue,v=0,g=void 0,y=void 0,b=void 0,_=void 0,x=void 0,w={on:m.on.bind(m),once:m.once.bind(m),off:m.off.bind(m),load:d,start:p,cancel:l,destroy:u};return Object.defineProperties(w,{data:{get:function(){return x}},progress:{get:function(){return v}},audioContext:{set:function(e){g=e}},isTouchLocked:{set:function(e){y=e}}}),Object.freeze(w)}function k(e,t,r){function i(){return!g&&t&&(g=t.createBufferSource(),g.buffer=e),g}function n(){if(g){g.onended=null;try{g.disconnect(),g.stop(0)}catch(e){}g=null}d=!1,f=0,v=!1,y=0}function a(){var e=t.currentTime-y;n(),f=e,v=!1,d=!0}function o(){n(),c=!0,"function"==typeof h&&h(u)}function s(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!v){for(e=e?t.currentTime+e:0,r&&(f=0),f&&(r=f);r>u.duration;)r%=u.duration;i(),g.onended=o,g.start(e,r),g.loop=p,g.playbackRate.value=m,y=t.currentTime-r,c=!1,d=!1,f=0,v=!0}}function l(){n(),e=null,t=null,h=null,g=null}var u={},c=!1,h=r,p=!1,d=!1,f=0,m=1,v=!1,g=null,y=0;return Object.defineProperties(u,{play:{value:s},pause:{value:a},stop:{value:n},destroy:{value:l},currentTime:{get:function(){if(f)return f;if(y){var e=t.currentTime-y;return e>u.duration&&(e%=u.duration),e}return 0}},duration:{get:function(){return e?e.duration:0}},ended:{get:function(){return c}},loop:{get:function(){return p},set:function(e){p=!!e,g&&(g.loop=p)}},paused:{get:function(){return d}},playbackRate:{get:function(){return m},set:function(e){m=e,g&&(g.playbackRate.value=m)}},playing:{get:function(){return v}},progress:{get:function(){return u.duration?u.currentTime/u.duration:0}},sourceNode:{get:function(){return i();

}}}),Object.freeze(u)}function L(e,t,r){function i(){return!x&&t&&(x=t.createMediaElementSource(e)),x}function n(t){e.src=t,e.load(),d=!1,y=!1,_=!1}function a(){e.removeEventListener("canplaythrough",a),_&&e.play()}function o(){return g?(e.currentTime=0,e.currentTime>0&&e.load(),void e.play()):(d=!0,y=!1,_=!1,void("function"==typeof f&&f(p)))}function s(t,r){clearTimeout(m),e.volume=T*w,e.playbackRate=b,r&&(e.currentTime=r),t?m=setTimeout(s,t):e.play(),d=!1,y=!1,_=!0,e.removeEventListener("ended",o),e.addEventListener("ended",o,!1),e.readyState<1&&(e.removeEventListener("canplaythrough",a),e.addEventListener("canplaythrough",a,!1),e.load(),e.play())}function l(){clearTimeout(m),e&&(e.pause(),_=!1,y=!0)}function u(){if(clearTimeout(m),e){e.pause();try{e.currentTime=0,e.currentTime>0&&e.load()}catch(t){}_=!1,y=!1}}function c(e,r){function i(e,t){v=window.setTimeout(function(){return p.volume=p.volume+.2*(e-p.volume),Math.abs(p.volume-e)>.05?void i(e,t):void(p.volume=e)},1e3*t)}return t?p:(window.clearTimeout(v),i(e,r/10),p)}function h(){e.removeEventListener("ended",o),e.removeEventListener("canplaythrough",a),u(),e=null,t=null,f=null,x=null}var p={},d=!1,f=r,m=void 0,v=void 0,g=!1,y=!1,b=1,_=!1,x=null,w=1,T=1;return Object.defineProperties(p,{play:{value:s},pause:{value:l},stop:{value:u},load:{value:n},fade:{value:c},destroy:{value:h},currentTime:{get:function(){return e?e.currentTime:0}},duration:{get:function(){return e?e.duration:0}},ended:{get:function(){return d}},loop:{get:function(){return g},set:function(e){g=!!e}},paused:{get:function(){return y}},playbackRate:{get:function(){return b},set:function(t){b=t,e&&(e.playbackRate=b)}},playing:{get:function(){return _}},progress:{get:function(){return e&&e.duration?e.currentTime/e.duration:0}},sourceNode:{get:function(){return i()}},volume:{get:function(){return T},set:function(t){window.clearTimeout(v),T=t,e&&(e.volume=T*w)}},groupVolume:{get:function(){return w},set:function(t){w=t,e&&(e.volume=T*w)}}}),Object.freeze(p)}function R(e,t){function r(){return!h&&t&&(h=t.createMediaStreamSource(e),navigator.mozGetUserMedia&&(window.mozHack=h)),h}function i(e){e=e?t.currentTime+e:0,r(),h.start(e),p=t.currentTime-u,s=!1,c=!0,l=!1,u=0}function n(){if(h){try{h.stop(0)}catch(e){}h=null}s=!0,l=!1,u=0,c=!1,p=0}function a(){var e=t.currentTime-p;n(),u=e,c=!1,l=!0}function o(){n(),t=null,h=null,e=null,window.mozHack=null}var s=!1,l=!1,u=0,c=!1,h=null,p=0,d={play:i,pause:a,stop:n,destroy:o,duration:0,progress:0};return Object.defineProperties(d,{currentTime:{get:function(){return u?u:p?t.currentTime-p:0}},ended:{get:function(){return s}},paused:{get:function(){return l}},playing:{get:function(){return c}},sourceNode:{get:function(){return r()}}}),Object.freeze(d)}function I(e,t){function r(){return!h&&t&&(h=t.createOscillator(),h.type=e,h.frequency.value=d),h}function i(e){e=e||0,e&&(e=t.currentTime+e),r(),h.start(e),p=u?t.currentTime-u:t.currentTime,s=!1,c=!0,l=!1,u=0}function n(){if(h){try{h.stop(0)}catch(e){}h=null}s=!0,l=!1,u=0,c=!1,p=0}function a(){var e=t.currentTime-p;n(),u=e,c=!1,l=!0}function o(){n(),t=null,h=null}var s=!1,l=!1,u=0,c=!1,h=null,p=0,d=200,f=null;return f={play:i,pause:a,stop:n,destroy:o},Object.defineProperties(f,{currentTime:{get:function(){return u?u:p?t.currentTime-p:0}},duration:{value:0},ended:{get:function(){return s}},frequency:{get:function(){return d},set:function(e){d=e,h&&(h.frequency.value=e)}},paused:{get:function(){return l}},playing:{get:function(){return c}},progress:{value:0},sourceNode:{get:function(){return r()}}}),Object.freeze(f)}function D(e,t){function r(){return!m&&t&&(m=t.createScriptProcessor(l,0,u)),m}function i(){r(),m.onaudioprocess=h,v=t.currentTime-d,c=!1,p=!1,d=0,f=!0}function n(e){for(var t=e.outputBuffer,r=0;r<t.numberOfChannels;r++)for(var i=t.getChannelData(r),n=0;n<i.length;n++)i[n]=0}function a(){m&&(m.onaudioprocess=n),c=!0,p=!1,d=0,f=!1,v=0}function o(){var e=t.currentTime-v;a(),d=e,f=!1,p=!0}function s(){a(),t=null,h=null,m=null}var l=e.bufferSize||1024,u=e.channels||1,c=!1,h=e.callback.bind(e.thisArg||this),p=!1,d=0,f=!1,m=null,v=0,g=null;return g={play:i,pause:o,stop:a,destroy:s,duration:0,progress:0},Object.defineProperties(g,{currentTime:{get:function(){return d?d:v?t.currentTime-v:0}},ended:{get:function(){return c}},paused:{get:function(){return p}},playing:{get:function(){return f}},sourceNode:{get:function(){return r()}}}),Object.freeze(g)}function F(){var e=void 0,t=void 0;return function(r,i){if(!window.Float32Array||!window.AudioBuffer)return[];var n=e===r,a=t&&t.length===i;if(n&&a)return t;if(t&&t.length===i||(t=new Float32Array(i)),!r)return t;e=r;for(var o=Math.floor(e.length/i),s=5,l=Math.max(Math.floor(o/s),1),u=0,c=0;c<e.numberOfChannels;c++)for(var h=e.getChannelData(c),p=0;i>p;p++)for(var d=p*o,f=d+o;f>d;d+=l){var m=h[d];0>m&&(m=-m),m>t[p]&&(t[p]=m),m>u&&(u=m)}for(var v=1/u,g=0;g<t.length;g++)t[g]*=v;return t}}function N(e,t){function r(t){if(h=t,ae.isAudioBuffer(h))_=new k(h,e,function(){return x.emit("ended",x)});else if(ae.isMediaElement(h))_=new L(h,e,function(){return x.emit("ended",x)});else if(ae.isMediaStream(h))_=new R(h,e);else if(ae.isOscillatorType(h&&h.type||h))_=new I(h.type||h,e);else{if(!ae.isScriptConfig(h))throw new Error("Cannot detect data type: "+h);_=new D(h,e)}p.setSource(_.sourceNode),x.emit("ready",x),b&&b()}function i(t){var i=ae.getSupportedFile(t.src||t.url||t.data||t);return _&&h&&h.tagName?_.load(i):(v=v||new O(i),v.audioContext=t.asMediaElement?null:e,v.isTouchLocked=m,v.once("loaded",function(e){r(e),x.emit("loaded",x)})),x}function n(t,r){return!_||m?(b=function(){_&&n(t,r)},x):(b=null,p.setSource(_.sourceNode),e||(x.volume=d.gain.value),_.play(t,r),_.hasOwnProperty("loop")&&(_.loop=g),x.emit("play",x),x)}function a(){return _&&_.pause(),x.emit("pause",x),x}function o(e){return _&&_.stop(e||0),x.emit("stop",x),x}function s(e){return _&&(_.stop(),n(0,_.duration*e)),x}function l(t,r){if(!_)return x;var i=d.gain;if(e){var n=e.currentTime;i.cancelScheduledValues(n),i.setValueAtTime(i.value,n),i.linearRampToValueAtTime(t,n+r)}else"function"==typeof _.fade&&(_.fade(t,r),i.value=t);return x}function u(){_&&_.destroy(),p&&p.destroy(),d&&d.disconnect(),v&&v.destroy(),x.off("loaded"),x.off("ended"),d=null,e=null,h=null,b=null,_=null,p=null,v=null,f=null,x.emit("destroy",x),x.off("destroy")}var c=void 0,h=void 0,p=new T(e),d=p.gain(),f=F(),m=!1,v=void 0,g=!1,y=1,b=void 0,_=void 0,x=null;return e&&(p.setDestination(d),d.connect(t||e.destination)),x=Object.create(ue.prototype,{_events:{value:{}},constructor:{value:N},play:{value:n},pause:{value:a},load:{value:i},seek:{value:s},stop:{value:o},fade:{value:l},destroy:{value:u},context:{value:e},currentTime:{get:function(){return _?_.currentTime:0},set:function(e){_&&_.stop(),n(0,e)}},data:{get:function(){return h},set:function(e){e&&r(e)}},duration:{get:function(){return _?_.duration:0}},effect:{value:p},ended:{get:function(){return!!_&&_.ended}},frequency:{get:function(){return _?_.frequency:0},set:function(e){_&&_.hasOwnProperty("frequency")&&(_.frequency=e)}},gain:{value:d},id:{get:function(){return c},set:function(e){c=e}},isTouchLocked:{set:function(e){m=e,v&&(v.isTouchLocked=e),!e&&b&&b()}},loader:{get:function(){return v}},loop:{get:function(){return g},set:function(e){g=!!e,_&&_.hasOwnProperty("loop")&&_.loop!==g&&(_.loop=g)}},paused:{get:function(){return!!_&&_.paused}},playing:{get:function(){return!!_&&_.playing}},playbackRate:{get:function(){return y},set:function(e){y=e,_&&(_.playbackRate=y)}},progress:{get:function(){return _?_.progress:0}},sourceNode:{get:function(){return _?_.sourceNode:null}},volume:{get:function(){return e?d.gain.value:_&&_.hasOwnProperty("volume")?_.volume:1},set:function(t){if(!isNaN(t)){t=Math.min(Math.max(t,0),1);var r=d.gain;if(e){var i=e.currentTime;r.cancelScheduledValues(i),r.value=t,r.setValueAtTime(t,i)}else r.value=t,_&&_.hasOwnProperty("volume")&&(_.volume=t)}}},groupVolume:{get:function(){return _.groupVolume},set:function(e){_&&_.hasOwnProperty("groupVolume")&&(_.groupVolume=e)}},waveform:{value:function(e){return h||x.once("ready",function(){return f(h,e)}),f(h,e)}},userData:{value:{}}}),Object.freeze(x)}function B(e,t){function r(){n.length&&(s=n.slice(0).sort(function(e,t){return t.duration-e.duration})[0])}var i=new M(e,t),n=i.sounds,a=1,o=!1,s=void 0,l=i.add;i.add=function(e){return l(e),r(),i};var u=i.rmeove;return i.remove=function(e){return u(e),r(),i},Object.defineProperties(i,{currentTime:{get:function(){return s?s.currentTime:0},set:function(e){this.stop(),this.play(0,e)}},duration:{get:function(){return s?s.duration:0}},loop:{get:function(){return o},set:function(e){o=!!e,n.forEach(function(e){e.loop=o})}},paused:{get:function(){return!!s&&s.paused}},progress:{get:function(){return s?s.progress:0}},playbackRate:{get:function(){return a},set:function(e){a=e,n.forEach(function(e){e.playbackRate=a})}},playing:{get:function(){return!!s&&s.playing}}}),i}function G(e,t,r){function i(){return a?(navigator.getUserMedia({audio:!0},function(t){s=t,e(s)},function(e){t&&"PermissionDeniedError"===e.name||"PERMISSION_DENIED"===e?t():r(e.message||e)}),o):o}function n(){return s&&(s.stop(),s=null),o}navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,r=r||function(){};var a=!!navigator.getUserMedia,o={},s=null;return Object.defineProperties(o,{connect:{value:i},disconnect:{value:n},isSupported:{value:a},stream:{get:function(){return s}}}),Object.freeze(o)}function j(e){function t(){u?(y.fillStyle=u,y.fillRect(p,d,v,g)):y.clearRect(p,d,v,g),y.lineWidth=c,b=null,"function"!=typeof l&&(y.strokeStyle=l,y.beginPath())}function r(e,t,r){if("function"==typeof l){var i=l(e,t,r);i!==b&&(b=i,y.stroke(),y.strokeStyle=b,y.beginPath())}}function i(e,t,r){return"function"==typeof f?f(e,t,r):e}function n(t,r){return t&&"function"==typeof t.waveform?t.waveform(r):t?t:e.waveform?e.waveform:e.sound?e.sound.waveform(r):null}function a(e){if(t(),"circular"===s){var a=n(e,360),l=Math.floor(a.length*h),u=he/l,f=void 0,m=void 0,b=void 0,P=void 0;for(_=0;l>_;_++){var A=i(a[_],_,l);r(_,l,A),f=_*u-ce,P=Math.cos(f),b=Math.sin(f),"fill"===o&&(x=S+M*P,w=E+M*b,y.moveTo(x,w)),m=M+(T-M)*A,x=S+m*P,w=E+m*b,"line"===o&&0===_&&y.moveTo(x,w),y.lineTo(x,w)}"line"===o&&y.closePath()}else{var C=n(e,v),O=Math.min(C.length,v-c/2);for(O=Math.floor(O*h),_=0;O>_;_++){var k=i(C[_],_,O);r(_,O,k),"line"===o&&_>0&&y.lineTo(x,w),x=p+_,w=d+g-Math.round(g*k),w=Math.floor(Math.min(w,d+g-c/2)),"fill"===o?(y.moveTo(x,w),y.lineTo(x,d+g)):y.lineTo(x,w)}}y.stroke()}var o=e.style||"fill",s=e.shape||"linear",l=e.color||0,u=e.bgColor,c=e.lineWidth||1,h=e.percent||1,p=e.x||0,d=e.y||0,f=e.transform,m=e.canvas,v=e.width||m&&m.width,g=e.height||m&&m.height,y=null,b=void 0,_=void 0,x=void 0,w=void 0,T=void 0,M=void 0,S=void 0,E=void 0;return m||e.context||(m=document.createElement("canvas"),v=v||m.width,g=g||m.height,m.width=g,m.height=g),"circular"===s&&(T=e.radius||Math.min(g/2,v/2),M=e.innerRadius||T/2,S=p+v/2,E=d+g/2),y=e.context||m.getContext("2d"),a.canvas=m,(e.waveform||e.sound)&&a(),a}function V(){if(pe)return pe;var e=44100,t=window.AudioContext||window.webkitAudioContext;if(pe=t?new t:null,/(iPhone|iPad)/i.test(navigator.userAgent)&&pe.sampleRate!==e){var r=pe.createBuffer(1,1,e),i=pe.createBufferSource();i.buffer=r,i.connect(pe.destination),i.start(0),i.disconnect(),pe.close(),pe=t?new t:null}var n=pe&&"suspended"===pe.state;return n&&"function"==typeof pe.resume&&window.setTimeout(function(){pe.resume()},1e3),pe}function U(e,t,r){if(de)return de;e=e||2,r=r||44100,t=r||e;var i=window.OfflineAudioContext||window.webkitOfflineAudioContext;return de=i?new i(e,t,r):null}function z(e){if(!pe)return e;for(var t=e.numberOfChannels,r=pe.createBuffer(t,e.length,e.sampleRate),i=0;t>i;i++)r.getChannelData(i).set(e.getChannelData(i));return r}function H(e){for(var t=e.numberOfChannels,r=0;t>r;r++)Array.prototype.reverse.call(e.getChannelData(r));return e}function W(e,t,r,i,n){pe&&(e.setValueAtTime(t,pe.currentTime),n?e.linearRampToValueAtTime(r,pe.currentTime+i):e.exponentialRampToValueAtTime(r,pe.currentTime+i))}function X(e){if(!pe)return 0;var t=40,r=pe.sampleRate/2,i=Math.log(r/t)/Math.LN2,n=Math.pow(2,i*(e-1));return r*n}function Y(e,t,r){return new G(e,t,r)}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",r=Math.floor(e/60),i=Math.floor(e%3600%60),n=(10>r?"0"+r:r)+t,a=10>i?"0"+i:i;return n+a}function K(){function e(e){return x.find(e)}function t(e){var t=new B(b,x.gain);return e&&e.forEach(function(e){return t.add(e)}),t}function r(e){var t=e&&e.webAudio===!1?null:b,r=new N(t,x.gain);return r.isTouchLocked=T,e&&(r.id=e.id||e.name||"",r.loop=!!e.loop,r.volume=e.volume),x.add(r),r}function i(e,t){var i=r(e).load(e);return t&&t.add(i.loader),i}function n(e){var t=e.src||e.url||e.data||e,r=void 0,n=void 0;if(ae.containsURL(t))r=i(e),n=r.loader;else{if(!Array.isArray(t)||!ae.containsURL(t[0].src||t[0].url)){var a="sono.load: No audio file URLs found in config.";if(!e.onError)throw new Error(a);return e.onError("[ERROR] "+a),null}r=[],n=new O.Group,t.forEach(function(e){return r.push(i(e,n))})}return e.onProgress&&n.on("progress",function(t){return e.onProgress(t)}),e.onComplete&&n.once("complete",function(){n.off("progress"),e.onComplete(r)}),n.once("error",function(t){n.off("error"),e.onError?e.onError(t):console.error.call(console,"[ERROR] sono.load: "+t)}),n.start(),r}function a(e){if(ae.containsURL(e))return n(e);var t=r(e);return t.data=e.data||e,t}function o(e){return x.find(e,function(e){return e.destroy()}),w}function s(){return x.destroy(),w}function l(){return x.mute(),w}function u(){return x.unMute(),w}function c(e,t){return x.fade(e,t),w}function h(){return x.pause(),w}function p(){return x.resume(),w}function d(){return x.stop(),w}function f(e,t,r){return x.find(e,function(e){return e.play(t,r)}),w}function m(e){return x.find(e,function(e){return e.pause()}),w}function v(e){return x.find(e,function(e){return e.stop()}),w}function g(){var e="sono "+y,t="Supported:"+w.isSupported+" WebAudioAPI:"+w.hasWebAudio+" TouchLocked:"+T+" State:"+(b&&b.state)+" Extensions:"+ae.extensions;if(navigator.userAgent.indexOf("Chrome")>-1){var r=["%c ♫ "+e+" ♫ %c "+t+" ","color: #FFFFFF; background: #379F7A","color: #1F1C0D; background: #E0FBAC"];console.log.apply(console,r)}else window.console&&window.console.log.call&&console.log.call(console,e+" "+t)}var y="0.1.82",b=fe.getContext(),_=b?b.destination:null,x=new M(b,_),w=null,T=!1;return T=$.handleTouchLock(b,function(){T=!1,x.sounds.forEach(function(e){return e.isTouchLocked=!1})}),w={createSound:a,destroySound:o,destroyAll:s,getSound:e,createGroup:t,file:ae,load:n,mute:l,unMute:u,fade:c,pauseAll:h,resumeAll:p,stopAll:d,play:f,pause:m,stop:v,log:g,canPlay:ae.canPlay,context:b,getOfflineContext:fe.getOfflineContext,effect:x.effect,extensions:ae.extensions,hasWebAudio:!!b,isSupported:ae.extensions.length>0,gain:x.gain,utils:fe,VERSION:y,Sound:N,Group:M},Object.defineProperties(w,{isTouchLocked:{get:function(){return T}},sounds:{get:function(){return x.sounds.slice(0)}},volume:{get:function(){return x.volume},set:function(e){x.volume=e}}}),Object.freeze(w)}var $={};$.handlePageVisibility=function(e,t){function r(){document[i]?e():t()}var i=void 0,n=void 0;"undefined"!=typeof document.hidden?(i="hidden",n="visibilitychange"):"undefined"!=typeof document.mozHidden?(i="mozHidden",n="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(i="msHidden",n="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(i="webkitHidden",n="webkitvisibilitychange"),"undefined"!=typeof n&&document.addEventListener(n,r,!1)},$.handleTouchLock=function(e,t){function r(){e&&"suspended"===e.state?e.resume().then(function(){var i=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=i,n.connect(e.destination),n.start(0),n.stop(0),n.disconnect(),document.body.removeEventListener("touchend",r),t()}):(document.body.removeEventListener("touchend",r),t())}var i=navigator.userAgent,n=!!i.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone|SymbianOS/i);return n&&document.body.addEventListener("touchend",r,!1),n};var Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},J=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ee=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},te=[],re={},ie=[{ext:"ogg",type:'audio/ogg; codecs="vorbis"'},{ext:"mp3",type:"audio/mpeg;"},{ext:"opus",type:'audio/ogg; codecs="opus"'},{ext:"wav",type:'audio/wav; codecs="1"'},{ext:"m4a",type:"audio/x-m4a;"},{ext:"m4a",type:"audio/aac;"}],ne=document.createElement("audio");ne&&(ie.forEach(function(e){var t=!!ne.canPlayType(e.type);t&&-1===te.indexOf(e.ext)&&te.push(e.ext),re[e.ext]=t}),ne=null);var ae={canPlay:re,containsURL:u,extensions:te,getFileExtension:e,getSupportedFile:t,isAudioBuffer:r,isMediaElement:n,isMediaStream:a,isOscillatorType:o,isScriptConfig:s,isURL:l},oe=22050;b.defaults={panningModel:"HRTF",distanceModel:"linear",refDistance:1,maxDistance:1e3,rolloffFactor:1,coneInnerAngle:360,coneOuterAngle:0,coneOuterGain:0},M.Effect=T;var se=S;S.EventEmitter=S,S.prototype._events=void 0,S.prototype._maxListeners=void 0,S.defaultMaxListeners=10,S.prototype.setMaxListeners=function(e){if(!P(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},S.prototype.emit=function(e){var t,r,i,n,a,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||A(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(r=this._events[e],C(r))return!1;if(E(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:n=Array.prototype.slice.call(arguments,1),r.apply(this,n)}else if(A(r))for(n=Array.prototype.slice.call(arguments,1),o=r.slice(),i=o.length,a=0;i>a;a++)o[a].apply(this,n);return!0},S.prototype.addListener=function(e,t){var r;if(!E(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,E(t.listener)?t.listener:t),this._events[e]?A(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,A(this._events[e])&&!this._events[e].warned&&(r=C(this._maxListeners)?S.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},S.prototype.on=S.prototype.addListener,S.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!E(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},S.prototype.removeListener=function(e,t){var r,i,n,a;if(!E(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],n=r.length,i=-1,r===t||E(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(A(r)){for(a=n;a-->0;)if(r[a]===t||r[a].listener&&r[a].listener===t){i=a;break}if(0>i)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},S.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],E(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},S.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?E(this._events[e])?[this._events[e]]:this._events[e].slice():[]},S.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(E(t))return 1;if(t)return t.length}return 0},S.listenerCount=function(e,t){return e.listenerCount(t)};var le=se.EventEmitter,ue=function(e){function t(){return Q(this,t),ee(this,e.call(this))}return J(t,e),t.prototype.off=function(e,t){return t?this.removeListener(e,t):e?this.removeAllListeners(e):this.removeAllListeners()},t}(le);O.Group=function(){function e(e){var t=u+e;s.emit("progress",t/c)}function t(){u++,n(),s.emit("progress",u/c),i()}function r(e){console.error.call(console,e),n(),s.emit("error",e),i()}function i(){return 0===l.length?(h=null,void s.emit("complete")):(h=l.pop(),h.on("progress",e),h.once("loaded",t),h.once("error",r),void h.start())}function n(){h.off("progress",e),h.off("loaded",t),h.off("error",r)}function a(e){return l.push(e),c++,e}function o(){c=l.length,i()}var s=new ue,l=[],u=0,c=0,h=void 0;return Object.freeze({on:s.on.bind(s),once:s.once.bind(s),off:s.off.bind(s),add:a,start:o})},N.__source={BufferSource:k,MediaSource:L,MicrophoneSource:R,OscillatorSource:I,ScriptSource:D};var ce=Math.PI/2,he=2*Math.PI,pe=void 0,de=void 0,fe=Object.freeze({getContext:V,getOfflineContext:U,cloneBuffer:z,reverseBuffer:H,ramp:W,getFrequency:X,microphone:Y,timeCode:q,waveformer:j}),me=new K;return me})},{}],26:[function(e,t){t.exports=function(e){function t(t,r){function i(){return 2*Math.PI/60/60*I.autoRotateSpeed}function n(){return Math.pow(.95,I.zoomSpeed)}function a(e){U.theta-=e}function o(e){U.phi-=e}function s(t){I.object instanceof e.PerspectiveCamera?z/=t:I.object instanceof e.OrthographicCamera?(I.object.zoom=Math.max(I.minZoom,Math.min(I.maxZoom,I.object.zoom*t)),I.object.updateProjectionMatrix(),W=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),I.enableZoom=!1)}function l(t){I.object instanceof e.PerspectiveCamera?z*=t:I.object instanceof e.OrthographicCamera?(I.object.zoom=Math.max(I.minZoom,Math.min(I.maxZoom,I.object.zoom/t)),I.object.updateProjectionMatrix(),W=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),I.enableZoom=!1)}function u(e){X.set(e.clientX,e.clientY)}function c(e){Q.set(e.clientX,e.clientY)}function h(e){K.set(e.clientX,e.clientY)}function p(e){Y.set(e.clientX,e.clientY),q.subVectors(Y,X);var t=I.domElement===document?I.domElement.body:I.domElement;a(2*Math.PI*q.x/t.clientWidth*I.rotateSpeed),o(2*Math.PI*q.y/t.clientHeight*I.rotateSpeed),X.copy(Y),I.update()}function d(e){J.set(e.clientX,e.clientY),ee.subVectors(J,Q),ee.y>0?s(n()):ee.y<0&&l(n()),Q.copy(J),I.update()}function f(e){$.set(e.clientX,e.clientY),Z.subVectors($,K),ie(Z.x,Z.y),K.copy($),I.update()}function m(){}function v(e){e.deltaY<0?l(n()):e.deltaY>0&&s(n()),I.update()}function g(e){switch(e.keyCode){case I.keys.UP:ie(0,I.keyPanSpeed),I.update();break;case I.keys.BOTTOM:ie(0,-I.keyPanSpeed),I.update();break;case I.keys.LEFT:ie(I.keyPanSpeed,0),I.update();break;case I.keys.RIGHT:ie(-I.keyPanSpeed,0),I.update()}}function y(e){X.set(e.touches[0].pageX,e.touches[0].pageY)}function b(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);Q.set(0,i)}function _(e){K.set(e.touches[0].pageX,e.touches[0].pageY)}function x(e){Y.set(e.touches[0].pageX,e.touches[0].pageY),q.subVectors(Y,X);var t=I.domElement===document?I.domElement.body:I.domElement;a(2*Math.PI*q.x/t.clientWidth*I.rotateSpeed),o(2*Math.PI*q.y/t.clientHeight*I.rotateSpeed),X.copy(Y),I.update()}function w(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);J.set(0,i),ee.subVectors(J,Q),ee.y>0?l(n()):ee.y<0&&s(n()),Q.copy(J),I.update()}function T(e){$.set(e.touches[0].pageX,e.touches[0].pageY),Z.subVectors($,K),ie(Z.x,Z.y),K.copy($),I.update()}function M(){}function S(e){if(I.enabled!==!1){if(e.preventDefault(),e.button===I.mouseButtons.ORBIT){if(I.enableRotate===!1)return;u(e),G=B.ROTATE}else if(e.button===I.mouseButtons.ZOOM){if(I.enableZoom===!1)return;c(e),G=B.DOLLY}else if(e.button===I.mouseButtons.PAN){if(I.enablePan===!1)return;h(e),G=B.PAN}G!==B.NONE&&(document.addEventListener("mousemove",E,!1),document.addEventListener("mouseup",P,!1),I.dispatchEvent(F))}}function E(e){if(I.enabled!==!1)if(e.preventDefault(),G===B.ROTATE){if(I.enableRotate===!1)return;p(e)}else if(G===B.DOLLY){if(I.enableZoom===!1)return;d(e)}else if(G===B.PAN){if(I.enablePan===!1)return;f(e)}}function P(e){I.enabled!==!1&&(m(e),document.removeEventListener("mousemove",E,!1),document.removeEventListener("mouseup",P,!1),I.dispatchEvent(N),G=B.NONE)}function A(e){I.enabled===!1||I.enableZoom===!1||G!==B.NONE&&G!==B.ROTATE||(e.preventDefault(),e.stopPropagation(),v(e),I.dispatchEvent(F),I.dispatchEvent(N))}function C(e){I.enabled!==!1&&I.enableKeys!==!1&&I.enablePan!==!1&&g(e)}function O(e){if(I.enabled!==!1){switch(e.touches.length){case 1:if(I.enableRotate===!1)return;y(e),G=B.TOUCH_ROTATE;break;case 2:if(I.enableZoom===!1)return;b(e),G=B.TOUCH_DOLLY;break;case 3:if(I.enablePan===!1)return;_(e),G=B.TOUCH_PAN;break;default:G=B.NONE}G!==B.NONE&&I.dispatchEvent(F)}}function k(e){if(I.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(I.enableRotate===!1)return;if(G!==B.TOUCH_ROTATE)return;x(e);break;case 2:if(I.enableZoom===!1)return;if(G!==B.TOUCH_DOLLY)return;w(e);break;case 3:if(I.enablePan===!1)return;if(G!==B.TOUCH_PAN)return;T(e);break;default:G=B.NONE}}function L(e){I.enabled!==!1&&(M(e),I.dispatchEvent(N),G=B.NONE)}function R(e){e.preventDefault()}this.object=t,this.domElement=void 0!==r?r:document,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return V.phi},this.getAzimuthalAngle=function(){return V.theta},this.reset=function(){I.target.copy(I.target0),I.object.position.copy(I.position0),I.object.zoom=I.zoom0,I.object.updateProjectionMatrix(),I.dispatchEvent(D),I.update(),G=B.NONE},this.update=function(){var r=new e.Vector3,n=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),o=n.clone().inverse(),s=new e.Vector3,l=new e.Quaternion;return function(){var e=I.object.position;return r.copy(e).sub(I.target),r.applyQuaternion(n),V.setFromVector3(r),I.autoRotate&&G===B.NONE&&a(i()),V.theta+=U.theta,V.phi+=U.phi,V.theta=Math.max(I.minAzimuthAngle,Math.min(I.maxAzimuthAngle,V.theta)),V.phi=Math.max(I.minPolarAngle,Math.min(I.maxPolarAngle,V.phi)),V.makeSafe(),V.radius*=z,V.radius=Math.max(I.minDistance,Math.min(I.maxDistance,V.radius)),I.target.add(H),r.setFromSpherical(V),r.applyQuaternion(o),e.copy(I.target).add(r),I.object.lookAt(I.target),I.enableDamping===!0?(U.theta*=1-I.dampingFactor,U.phi*=1-I.dampingFactor):U.set(0,0,0),z=1,H.set(0,0,0),W||s.distanceToSquared(I.object.position)>j||8*(1-l.dot(I.object.quaternion))>j?(I.dispatchEvent(D),s.copy(I.object.position),l.copy(I.object.quaternion),W=!1,!0):!1}}(),this.dispose=function(){I.domElement.removeEventListener("contextmenu",R,!1),I.domElement.removeEventListener("mousedown",S,!1),I.domElement.removeEventListener("wheel",A,!1),I.domElement.removeEventListener("touchstart",O,!1),I.domElement.removeEventListener("touchend",L,!1),I.domElement.removeEventListener("touchmove",k,!1),document.removeEventListener("mousemove",E,!1),document.removeEventListener("mouseup",P,!1),window.removeEventListener("keydown",C,!1)};var I=this,D={type:"change"},F={type:"start"},N={type:"end"},B={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},G=B.NONE,j=1e-6,V=new e.Spherical,U=new e.Spherical,z=1,H=new e.Vector3,W=!1,X=new e.Vector2,Y=new e.Vector2,q=new e.Vector2,K=new e.Vector2,$=new e.Vector2,Z=new e.Vector2,Q=new e.Vector2,J=new e.Vector2,ee=new e.Vector2,te=function(){var t=new e.Vector3;return function(e,r){t.setFromMatrixColumn(r,0),t.multiplyScalar(-e),H.add(t)}}(),re=function(){var t=new e.Vector3;return function(e,r){t.setFromMatrixColumn(r,1),t.multiplyScalar(e),H.add(t)}}(),ie=function(){var t=new e.Vector3;return function(r,i){var n=I.domElement===document?I.domElement.body:I.domElement;if(I.object instanceof e.PerspectiveCamera){var a=I.object.position;t.copy(a).sub(I.target);var o=t.length();o*=Math.tan(I.object.fov/2*Math.PI/180),te(2*r*o/n.clientHeight,I.object.matrix),re(2*i*o/n.clientHeight,I.object.matrix)}else I.object instanceof e.OrthographicCamera?(te(r*(I.object.right-I.object.left)/I.object.zoom/n.clientWidth,I.object.matrix),re(i*(I.object.top-I.object.bottom)/I.object.zoom/n.clientHeight,I.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),I.enablePan=!1)}}();I.domElement.addEventListener("contextmenu",R,!1),I.domElement.addEventListener("mousedown",S,!1),I.domElement.addEventListener("wheel",A,!1),I.domElement.addEventListener("touchstart",O,!1),I.domElement.addEventListener("touchend",L,!1),I.domElement.addEventListener("touchmove",k,!1),window.addEventListener("keydown",C,!1),this.update()}return t.prototype=Object.create(e.EventDispatcher.prototype),t.prototype.constructor=t,Object.defineProperties(t.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),
!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),t}},{}],27:[function(e,t,r){!function(e,i){"object"==typeof r&&"undefined"!=typeof t?i(r):"function"==typeof define&&define.amd?define(["exports"],i):i(e.THREE=e.THREE||{})}(this,function(e){"use strict";function t(){}function r(e,t){this.x=e||0,this.y=t||0}function i(e,t,a,o,s,l,u,c,h,p){Object.defineProperty(this,"id",{value:n()}),this.uuid=No.generateUUID(),this.name="",this.sourceFile="",this.image=void 0!==e?e:i.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:i.DEFAULT_MAPPING,this.wrapS=void 0!==a?a:Ca,this.wrapT=void 0!==o?o:Ca,this.magFilter=void 0!==s?s:Da,this.minFilter=void 0!==l?l:Na,this.anisotropy=void 0!==h?h:1,this.format=void 0!==u?u:Ja,this.type=void 0!==c?c:Ga,this.offset=new r(0,0),this.repeat=new r(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==p?p:Po,this.version=0,this.onUpdate=null}function n(){return Bo++}function a(e,t,r,i){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==i?i:1}function o(e,t,r){this.uuid=No.generateUUID(),this.width=e,this.height=t,this.scissor=new a(0,0,e,t),this.scissorTest=!1,this.viewport=new a(0,0,e,t),r=r||{},void 0===r.minFilter&&(r.minFilter=Da),this.texture=new i(void 0,void 0,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.depthBuffer=void 0!==r.depthBuffer?r.depthBuffer:!0,this.stencilBuffer=void 0!==r.stencilBuffer?r.stencilBuffer:!0,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function s(e,t,r){o.call(this,e,t,r),this.activeCubeFace=0,this.activeMipMapLevel=0}function l(e,t,r,i){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==i?i:1}function u(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}function c(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function h(e,t,r,n,a,o,s,l,u,c){e=void 0!==e?e:[],t=void 0!==t?t:_a,i.call(this,e,t,r,n,a,o,s,l,u,c),this.flipY=!1}function p(){this.seq=[],this.map={}}function d(e,t,r){var i=e[0];if(0>=i||i>0)return e;var n=t*r,a=Vo[n];if(void 0===a&&(a=new Float32Array(n),Vo[n]=a),0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=r,e[o].toArray(a,s)}return a}function f(e,t){var r=Uo[t];void 0===r&&(r=new Int32Array(t),Uo[t]=r);for(var i=0;i!==t;++i)r[i]=e.allocTextureUnit();return r}function m(e,t){e.uniform1f(this.addr,t)}function v(e,t){e.uniform1i(this.addr,t)}function g(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function y(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function b(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function _(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function x(e,t){e.uniformMatrix3fv(this.addr,!1,t.elements||t)}function w(e,t){e.uniformMatrix4fv(this.addr,!1,t.elements||t)}function T(e,t,r){var i=r.allocTextureUnit();e.uniform1i(this.addr,i),r.setTexture2D(t||Go,i)}function M(e,t,r){var i=r.allocTextureUnit();e.uniform1i(this.addr,i),r.setTextureCube(t||jo,i)}function S(e,t){e.uniform2iv(this.addr,t)}function E(e,t){e.uniform3iv(this.addr,t)}function P(e,t){e.uniform4iv(this.addr,t)}function A(e){switch(e){case 5126:return m;case 35664:return g;case 35665:return y;case 35666:return b;case 35674:return _;case 35675:return x;case 35676:return w;case 35678:return T;case 35680:return M;case 5124:case 35670:return v;case 35667:case 35671:return S;case 35668:case 35672:return E;case 35669:case 35673:return P}}function C(e,t){e.uniform1fv(this.addr,t)}function O(e,t){e.uniform1iv(this.addr,t)}function k(e,t){e.uniform2fv(this.addr,d(t,this.size,2))}function L(e,t){e.uniform3fv(this.addr,d(t,this.size,3))}function R(e,t){e.uniform4fv(this.addr,d(t,this.size,4))}function I(e,t){e.uniformMatrix2fv(this.addr,!1,d(t,this.size,4))}function D(e,t){e.uniformMatrix3fv(this.addr,!1,d(t,this.size,9))}function F(e,t){e.uniformMatrix4fv(this.addr,!1,d(t,this.size,16))}function N(e,t,r){var i=t.length,n=f(r,i);e.uniform1iv(this.addr,n);for(var a=0;a!==i;++a)r.setTexture2D(t[a]||Go,n[a])}function B(e,t,r){var i=t.length,n=f(r,i);e.uniform1iv(this.addr,n);for(var a=0;a!==i;++a)r.setTextureCube(t[a]||jo,n[a])}function G(e){switch(e){case 5126:return C;case 35664:return k;case 35665:return L;case 35666:return R;case 35674:return I;case 35675:return D;case 35676:return F;case 35678:return N;case 35680:return B;case 5124:case 35670:return O;case 35667:case 35671:return S;case 35668:case 35672:return E;case 35669:case 35673:return P}}function j(e,t,r){this.id=e,this.addr=r,this.setValue=A(t.type)}function V(e,t,r){this.id=e,this.addr=r,this.size=t.size,this.setValue=G(t.type)}function U(e){this.id=e,p.call(this)}function z(e,t){e.seq.push(t),e.map[t.id]=t}function H(e,t,r){var i=e.name,n=i.length;for(zo.lastIndex=0;;){var a=zo.exec(i),o=zo.lastIndex,s=a[1],l="]"===a[2],u=a[3];if(l&&(s=0|s),void 0===u||"["===u&&o+2===n){z(r,void 0===u?new j(s,e,t):new V(s,e,t));break}var c=r.map,h=c[s];void 0===h&&(h=new U(s),z(r,h)),r=h}}function W(e,t,r){p.call(this),this.renderer=r;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n!==i;++n){var a=e.getActiveUniform(t,n),o=a.name,s=e.getUniformLocation(t,o);H(a,s,this)}}function X(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}function Y(e,t){this.min=void 0!==e?e:new r(+(1/0),+(1/0)),this.max=void 0!==t?t:new r(-(1/0),-(1/0))}function q(e,t){function i(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);a=f.createBuffer(),o=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,a),f.bufferData(f.ARRAY_BUFFER,e,f.STATIC_DRAW),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,o),f.bufferData(f.ELEMENT_ARRAY_BUFFER,t,f.STATIC_DRAW),p=f.createTexture(),d=f.createTexture(),m.bindTexture(f.TEXTURE_2D,p),f.texImage2D(f.TEXTURE_2D,0,f.RGB,16,16,0,f.RGB,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),m.bindTexture(f.TEXTURE_2D,d),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,16,16,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},l=n(s),c={vertex:f.getAttribLocation(l,"position"),uv:f.getAttribLocation(l,"uv")},h={renderType:f.getUniformLocation(l,"renderType"),map:f.getUniformLocation(l,"map"),occlusionMap:f.getUniformLocation(l,"occlusionMap"),opacity:f.getUniformLocation(l,"opacity"),color:f.getUniformLocation(l,"color"),scale:f.getUniformLocation(l,"scale"),rotation:f.getUniformLocation(l,"rotation"),screenPosition:f.getUniformLocation(l,"screenPosition")}}function n(t){var r=f.createProgram(),i=f.createShader(f.FRAGMENT_SHADER),n=f.createShader(f.VERTEX_SHADER),a="precision "+e.getPrecision()+" float;\n";return f.shaderSource(i,a+t.fragmentShader),f.shaderSource(n,a+t.vertexShader),f.compileShader(i),f.compileShader(n),f.attachShader(r,i),f.attachShader(r,n),f.linkProgram(r),r}var a,o,s,l,c,h,p,d,f=e.context,m=e.state;this.render=function(n,s,v){if(0!==t.length){var g=new u,y=v.w/v.z,b=.5*v.z,_=.5*v.w,x=16/v.w,w=new r(x*y,x),T=new u(1,1,0),M=new r(1,1),S=new Y;S.min.set(v.x,v.y),S.max.set(v.x+(v.z-16),v.y+(v.w-16)),void 0===l&&i(),f.useProgram(l),m.initAttributes(),m.enableAttribute(c.vertex),m.enableAttribute(c.uv),m.disableUnusedAttributes(),f.uniform1i(h.occlusionMap,0),f.uniform1i(h.map,1),f.bindBuffer(f.ARRAY_BUFFER,a),f.vertexAttribPointer(c.vertex,2,f.FLOAT,!1,16,0),f.vertexAttribPointer(c.uv,2,f.FLOAT,!1,16,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,o),m.disable(f.CULL_FACE),m.setDepthWrite(!1);for(var E=0,P=t.length;P>E;E++){x=16/v.w,w.set(x*y,x);var A=t[E];if(g.set(A.matrixWorld.elements[12],A.matrixWorld.elements[13],A.matrixWorld.elements[14]),g.applyMatrix4(s.matrixWorldInverse),g.applyProjection(s.projectionMatrix),T.copy(g),M.x=v.x+T.x*b+b-8,M.y=v.y+T.y*_+_-8,S.containsPoint(M)===!0){m.activeTexture(f.TEXTURE0),m.bindTexture(f.TEXTURE_2D,null),m.activeTexture(f.TEXTURE1),m.bindTexture(f.TEXTURE_2D,p),f.copyTexImage2D(f.TEXTURE_2D,0,f.RGB,M.x,M.y,16,16,0),f.uniform1i(h.renderType,0),f.uniform2f(h.scale,w.x,w.y),f.uniform3f(h.screenPosition,T.x,T.y,T.z),m.disable(f.BLEND),m.enable(f.DEPTH_TEST),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0),m.activeTexture(f.TEXTURE0),m.bindTexture(f.TEXTURE_2D,d),f.copyTexImage2D(f.TEXTURE_2D,0,f.RGBA,M.x,M.y,16,16,0),f.uniform1i(h.renderType,1),m.disable(f.DEPTH_TEST),m.activeTexture(f.TEXTURE1),m.bindTexture(f.TEXTURE_2D,p),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0),A.positionScreen.copy(T),A.customUpdateCallback?A.customUpdateCallback(A):A.updateLensFlares(),f.uniform1i(h.renderType,2),m.enable(f.BLEND);for(var C=0,O=A.lensFlares.length;O>C;C++){var k=A.lensFlares[C];k.opacity>.001&&k.scale>.001&&(T.x=k.x,T.y=k.y,T.z=k.z,x=k.size*k.scale/v.w,w.x=x*y,w.y=x,f.uniform3f(h.screenPosition,T.x,T.y,T.z),f.uniform2f(h.scale,w.x,w.y),f.uniform1f(h.rotation,k.rotation),f.uniform1f(h.opacity,k.opacity),f.uniform3f(h.color,k.color.r,k.color.g,k.color.b),m.setBlending(k.blending,k.blendEquation,k.blendSrc,k.blendDst),e.setTexture2D(k.texture,1),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0))}}}m.enable(f.CULL_FACE),m.enable(f.DEPTH_TEST),m.setDepthWrite(!0),e.resetGLState()}}}function K(e,t){function r(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);o=f.createBuffer(),s=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,o),f.bufferData(f.ARRAY_BUFFER,e,f.STATIC_DRAW),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),f.bufferData(f.ELEMENT_ARRAY_BUFFER,t,f.STATIC_DRAW),c=n(),h={position:f.getAttribLocation(c,"position"),uv:f.getAttribLocation(c,"uv")},p={uvOffset:f.getUniformLocation(c,"uvOffset"),uvScale:f.getUniformLocation(c,"uvScale"),rotation:f.getUniformLocation(c,"rotation"),scale:f.getUniformLocation(c,"scale"),color:f.getUniformLocation(c,"color"),map:f.getUniformLocation(c,"map"),opacity:f.getUniformLocation(c,"opacity"),modelViewMatrix:f.getUniformLocation(c,"modelViewMatrix"),projectionMatrix:f.getUniformLocation(c,"projectionMatrix"),fogType:f.getUniformLocation(c,"fogType"),fogDensity:f.getUniformLocation(c,"fogDensity"),fogNear:f.getUniformLocation(c,"fogNear"),fogFar:f.getUniformLocation(c,"fogFar"),fogColor:f.getUniformLocation(c,"fogColor"),alphaTest:f.getUniformLocation(c,"alphaTest")};var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=8,r.height=8;var a=r.getContext("2d");a.fillStyle="white",a.fillRect(0,0,8,8),d=new i(r),d.needsUpdate=!0}function n(){var t=f.createProgram(),r=f.createShader(f.VERTEX_SHADER),i=f.createShader(f.FRAGMENT_SHADER);return f.shaderSource(r,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),f.shaderSource(i,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),f.compileShader(r),f.compileShader(i),f.attachShader(t,r),f.attachShader(t,i),f.linkProgram(t),t}function a(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var o,s,c,h,p,d,f=e.context,m=e.state,v=new u,g=new l,y=new u;this.render=function(i,n){if(0!==t.length){void 0===c&&r(),f.useProgram(c),m.initAttributes(),m.enableAttribute(h.position),m.enableAttribute(h.uv),m.disableUnusedAttributes(),m.disable(f.CULL_FACE),m.enable(f.BLEND),f.bindBuffer(f.ARRAY_BUFFER,o),f.vertexAttribPointer(h.position,2,f.FLOAT,!1,16,0),f.vertexAttribPointer(h.uv,2,f.FLOAT,!1,16,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,s),f.uniformMatrix4fv(p.projectionMatrix,!1,n.projectionMatrix.elements),m.activeTexture(f.TEXTURE0),f.uniform1i(p.map,0);var l=0,u=0,b=i.fog;b?(f.uniform3f(p.fogColor,b.color.r,b.color.g,b.color.b),b&&b.isFog?(f.uniform1f(p.fogNear,b.near),f.uniform1f(p.fogFar,b.far),f.uniform1i(p.fogType,1),l=1,u=1):b&&b.isFogExp2&&(f.uniform1f(p.fogDensity,b.density),f.uniform1i(p.fogType,2),l=2,u=2)):(f.uniform1i(p.fogType,0),l=0,u=0);for(var _=0,x=t.length;x>_;_++){var w=t[_];w.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,w.matrixWorld),w.z=-w.modelViewMatrix.elements[14]}t.sort(a);for(var T=[],_=0,x=t.length;x>_;_++){var w=t[_],M=w.material;if(M.visible!==!1){f.uniform1f(p.alphaTest,M.alphaTest),f.uniformMatrix4fv(p.modelViewMatrix,!1,w.modelViewMatrix.elements),w.matrixWorld.decompose(v,g,y),T[0]=y.x,T[1]=y.y;var S=0;i.fog&&M.fog&&(S=u),l!==S&&(f.uniform1i(p.fogType,S),l=S),null!==M.map?(f.uniform2f(p.uvOffset,M.map.offset.x,M.map.offset.y),f.uniform2f(p.uvScale,M.map.repeat.x,M.map.repeat.y)):(f.uniform2f(p.uvOffset,0,0),f.uniform2f(p.uvScale,1,1)),f.uniform1f(p.opacity,M.opacity),f.uniform3f(p.color,M.color.r,M.color.g,M.color.b),f.uniform1f(p.rotation,M.rotation),f.uniform2fv(p.scale,T),m.setBlending(M.blending,M.blendEquation,M.blendSrc,M.blendDst),m.setDepthTest(M.depthTest),m.setDepthWrite(M.depthWrite),M.map?e.setTexture2D(M.map,0):e.setTexture2D(d,0),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0)}}m.enable(f.CULL_FACE),e.resetGLState()}}}function $(){Object.defineProperty(this,"id",{value:Z()}),this.uuid=No.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Dn,this.side=En,this.shading=On,this.vertexColors=kn,this.opacity=1,this.transparent=!1,this.blendSrc=$n,this.blendDst=Zn,this.blendEquation=Vn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=oa,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}function Z(){return Xl++}function Q(e){$.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function J(e){$.call(this),this.type="MeshDepthMaterial",this.depthPacking=Do,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function ee(e,t){this.min=void 0!==e?e:new u(+(1/0),+(1/0),+(1/0)),this.max=void 0!==t?t:new u(-(1/0),-(1/0),-(1/0))}function te(e,t){this.center=void 0!==e?e:new u,this.radius=void 0!==t?t:0}function re(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function ie(e,t){this.normal=void 0!==e?e:new u(1,0,0),this.constant=void 0!==t?t:0}function ne(e,t,r,i,n,a){this.planes=[void 0!==e?e:new ie,void 0!==t?t:new ie,void 0!==r?r:new ie,void 0!==i?i:new ie,void 0!==n?n:new ie,void 0!==a?a:new ie]}function ae(e,t,i,n){function s(t,r,i,n){var a=t.geometry,o=null,s=M,l=t.customDepthMaterial;if(i&&(s=S,l=t.customDistanceMaterial),l)o=l;else{var u=!1;r.morphTargets&&(a&&a.isBufferGeometry?u=a.morphAttributes&&a.morphAttributes.position&&a.morphAttributes.position.length>0:a&&a.isGeometry&&(u=a.morphTargets&&a.morphTargets.length>0));var c=t.isSkinnedMesh&&r.skinning,h=0;u&&(h|=x),c&&(h|=w),o=s[h]}if(e.localClippingEnabled&&r.clipShadows===!0&&0!==r.clippingPlanes.length){var p=o.uuid,d=r.uuid,f=E[p];void 0===f&&(f={},E[p]=f);var m=f[d];void 0===m&&(m=o.clone(),f[d]=m),o=m}o.visible=r.visible,o.wireframe=r.wireframe;var v=r.side;return B.renderSingleSided&&v==An&&(v=En),B.renderReverseSided&&(v===En?v=Pn:v===Pn&&(v=En)),o.side=v,o.clipShadows=r.clipShadows,o.clippingPlanes=r.clippingPlanes,o.wireframeLinewidth=r.wireframeLinewidth,o.linewidth=r.linewidth,i&&void 0!==o.uniforms.lightPos&&o.uniforms.lightPos.value.copy(n),o}function l(e,t,r){if(e.visible!==!1){var i=0!==(e.layers.mask&t.layers.mask);if(i&&(e.isMesh||e.isLine||e.isPoints)&&e.castShadow&&(e.frustumCulled===!1||d.intersectsObject(e)===!0)){var n=e.material;n.visible===!0&&(e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),_.push(e))}for(var a=e.children,o=0,s=a.length;s>o;o++)l(a[o],t,r)}}var h=e.context,p=e.state,d=new ne,f=new c,m=t.shadows,v=new r,g=new r(n.maxTextureSize,n.maxTextureSize),y=new u,b=new u,_=[],x=1,w=2,T=(x|w)+1,M=new Array(T),S=new Array(T),E={},P=[new u(1,0,0),new u(-1,0,0),new u(0,0,1),new u(0,0,-1),new u(0,1,0),new u(0,-1,0)],A=[new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,1,0),new u(0,0,1),new u(0,0,-1)],C=[new a,new a,new a,new a,new a,new a],O=new J;O.depthPacking=Fo,O.clipping=!0;for(var k=Wl.distanceRGBA,L=Ho.clone(k.uniforms),R=0;R!==T;++R){var I=0!==(R&x),D=0!==(R&w),F=O.clone();F.morphTargets=I,F.skinning=D,M[R]=F;var N=new Q({defines:{USE_SHADOWMAP:""},uniforms:L,vertexShader:k.vertexShader,fragmentShader:k.fragmentShader,morphTargets:I,skinning:D,clipping:!0});S[R]=N}var B=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Mn,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,r){if(B.enabled!==!1&&(B.autoUpdate!==!1||B.needsUpdate!==!1)&&0!==m.length){p.clearColor(1,1,1,1),p.disable(h.BLEND),p.setDepthTest(!0),p.setScissorTest(!1);for(var n,a,u=0,c=m.length;c>u;u++){var x=m[u],w=x.shadow;if(void 0!==w){var T=w.camera;if(v.copy(w.mapSize),v.min(g),x&&x.isPointLight){n=6,a=!0;var M=v.x,S=v.y;C[0].set(2*M,S,M,S),C[1].set(0,S,M,S),C[2].set(3*M,S,M,S),C[3].set(M,S,M,S),C[4].set(3*M,0,M,S),C[5].set(M,0,M,S),v.x*=4,v.y*=2}else n=1,a=!1;if(null===w.map){var E={minFilter:La,magFilter:La,format:Ja};w.map=new o(v.x,v.y,E),T.updateProjectionMatrix()}w&&w.isSpotLightShadow&&w.update(x);var O=w.map,k=w.matrix;b.setFromMatrixPosition(x.matrixWorld),T.position.copy(b),e.setRenderTarget(O),e.clear();for(var L=0;n>L;L++){if(a){y.copy(T.position),y.add(P[L]),T.up.copy(A[L]),T.lookAt(y);var R=C[L];p.viewport(R)}else y.setFromMatrixPosition(x.target.matrixWorld),T.lookAt(y);T.updateMatrixWorld(),T.matrixWorldInverse.getInverse(T.matrixWorld),k.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.multiply(T.projectionMatrix),k.multiply(T.matrixWorldInverse),f.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),d.setFromMatrix(f),_.length=0,l(t,r,T);for(var I=0,D=_.length;D>I;I++){var F=_[I],N=i.update(F),G=F.material;if(G&&G.isMultiMaterial)for(var j=N.groups,V=G.materials,U=0,z=j.length;z>U;U++){var H=j[U],W=V[H.materialIndex];if(W.visible===!0){var X=s(F,W,a,b);e.renderBufferDirect(T,null,N,X,F,H)}}else{var X=s(F,G,a,b);e.renderBufferDirect(T,null,N,X,F,null)}}}}else console.warn("THREE.WebGLShadowMap:",x,"has no shadow.")}var Y=e.getClearColor(),q=e.getClearAlpha();e.setClearColor(Y,q),B.needsUpdate=!1}}}function oe(e,t){this.origin=void 0!==e?e:new u,this.direction=void 0!==t?t:new u}function se(e,t,r,i){this._x=e||0,this._y=t||0,this._z=r||0,this._order=i||se.DefaultOrder}function le(){this.mask=1}function ue(){function e(){n.setFromEuler(i,!1)}function t(){i.setFromQuaternion(n,void 0,!1)}Object.defineProperty(this,"id",{value:ce()}),this.uuid=No.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ue.DefaultUp.clone();var r=new u,i=new se,n=new l,a=new u(1,1,1);i.onChange(e),n.onChange(t),Object.defineProperties(this,{position:{enumerable:!0,value:r},rotation:{enumerable:!0,value:i},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:a},modelViewMatrix:{value:new c},normalMatrix:{value:new re}}),this.matrix=new c,this.matrixWorld=new c,this.matrixAutoUpdate=ue.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new le,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}function ce(){return Yl++}function he(e,t){this.start=void 0!==e?e:new u,this.end=void 0!==t?t:new u}function pe(e,t,r){this.a=void 0!==e?e:new u,this.b=void 0!==t?t:new u,this.c=void 0!==r?r:new u}function de(e,t,r,i,n,a){this.a=e,this.b=t,this.c=r,this.normal=i&&i.isVector3?i:new u,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new X,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==a?a:0}function fe(e){$.call(this),this.type="MeshBasicMaterial",this.color=new X(16777215),this.map=null,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ha,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function me(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=No.generateUUID(),this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=r===!0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function ve(e,t){return new me(new Int8Array(e),t)}function ge(e,t){return new me(new Uint8Array(e),t)}function ye(e,t){return new me(new Uint8ClampedArray(e),t)}function be(e,t){return new me(new Int16Array(e),t)}function _e(e,t){return new me(new Uint16Array(e),t)}function xe(e,t){return new me(new Int32Array(e),t)}function we(e,t){return new me(new Uint32Array(e),t)}function Te(e,t){return new me(new Float32Array(e),t)}function Me(e,t){return new me(new Float64Array(e),t)}function Se(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new me(e,t).setDynamic(!0)}function Ee(){Object.defineProperty(this,"id",{value:Pe()}),this.uuid=No.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Pe(){return ql++}function Ae(){Object.defineProperty(this,"id",{value:Pe()}),this.uuid=No.generateUUID(),this.name="",this.type="DirectGeometry",this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ce(){Object.defineProperty(this,"id",{value:Pe()}),this.uuid=No.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Oe(e,t){ue.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Ce,this.material=void 0!==t?t:new fe({color:16777215*Math.random()}),this.drawMode=Mo,this.updateMorphTargets()}function ke(e,t,r,i,n,a){function o(e,t,r){var i=0;return i+=(e+1)*(t+1)*2,i+=(e+1)*(r+1)*2,i+=(r+1)*(t+1)*2}function s(e,t,r){var i=0;return i+=e*t*2,i+=e*r*2,i+=r*t*2,6*i}function l(e,t,r,i,n,a,o,s,l,h,p){for(var w=a/l,T=o/h,M=a/2,S=o/2,E=s/2,P=l+1,A=h+1,C=0,O=0,k=new u,L=0;A>L;L++)for(var R=L*T-S,I=0;P>I;I++){var D=I*w-M;k[e]=D*i,k[t]=R*n,k[r]=E,f[g]=k.x,f[g+1]=k.y,f[g+2]=k.z,k[e]=0,k[t]=0,k[r]=s>0?1:-1,m[g]=k.x,m[g+1]=k.y,m[g+2]=k.z,v[y]=I/l,v[y+1]=1-L/h,g+=3,y+=2,C+=1}for(L=0;h>L;L++)for(I=0;l>I;I++){var F=_+I+P*L,N=_+I+P*(L+1),B=_+(I+1)+P*(L+1),G=_+(I+1)+P*L;d[b]=F,d[b+1]=N,d[b+2]=G,d[b+3]=N,d[b+4]=B,d[b+5]=G,b+=6,O+=6}c.addGroup(x,O,p),x+=O,_+=C}Ce.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:a};var c=this;i=Math.floor(i)||1,n=Math.floor(n)||1,a=Math.floor(a)||1;var h=o(i,n,a),p=s(i,n,a),d=new(p>65535?Uint32Array:Uint16Array)(p),f=new Float32Array(3*h),m=new Float32Array(3*h),v=new Float32Array(2*h),g=0,y=0,b=0,_=0,x=0;l("z","y","x",-1,-1,r,t,e,a,n,0),l("z","y","x",1,-1,r,t,-e,a,n,1),l("x","z","y",1,1,e,r,t,i,a,2),l("x","z","y",1,-1,e,r,-t,i,a,3),l("x","y","z",1,-1,e,t,r,i,n,4),l("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(new me(d,1)),this.addAttribute("position",new me(f,3)),this.addAttribute("normal",new me(m,3)),this.addAttribute("uv",new me(v,2))}function Le(e,t,r,i){Ce.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};for(var n=e/2,a=t/2,o=Math.floor(r)||1,s=Math.floor(i)||1,l=o+1,u=s+1,c=e/o,h=t/s,p=new Float32Array(l*u*3),d=new Float32Array(l*u*3),f=new Float32Array(l*u*2),m=0,v=0,g=0;u>g;g++)for(var y=g*h-a,b=0;l>b;b++){var _=b*c-n;p[m]=_,p[m+1]=-y,d[m+2]=1,f[v]=b/o,f[v+1]=1-g/s,m+=3,v+=2}m=0;for(var x=new(p.length/3>65535?Uint32Array:Uint16Array)(o*s*6),g=0;s>g;g++)for(var b=0;o>b;b++){var w=b+l*g,T=b+l*(g+1),M=b+1+l*(g+1),S=b+1+l*g;x[m]=w,x[m+1]=T,x[m+2]=S,x[m+3]=T,x[m+4]=M,x[m+5]=S,m+=6}this.setIndex(new me(x,1)),this.addAttribute("position",new me(p,3)),this.addAttribute("normal",new me(d,3)),this.addAttribute("uv",new me(f,2))}function Re(){ue.call(this),this.type="Camera",this.matrixWorldInverse=new c,this.projectionMatrix=new c}function Ie(e,t,r,i){Re.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function De(e,t,r,i,n,a){Re.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=void 0!==n?n:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Fe(e,t,r){function i(e){s=e}function n(r){r.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(l=e.UNSIGNED_INT,u=4):(l=e.UNSIGNED_SHORT,u=2)}function a(t,i){e.drawElements(s,i,l,t*u),r.calls++,r.vertices+=i,s===e.TRIANGLES&&(r.faces+=i/3)}function o(i,n,a){var o=t.get("ANGLE_instanced_arrays");return null===o?void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(o.drawElementsInstancedANGLE(s,a,l,n*u,i.maxInstancedCount),r.calls++,r.vertices+=a*i.maxInstancedCount,void(s===e.TRIANGLES&&(r.faces+=i.maxInstancedCount*a/3)))}var s,l,u;return{setMode:i,setIndex:n,render:a,renderInstances:o}}function Ne(e,t,r){function i(e){o=e}function n(t,i){e.drawArrays(o,t,i),r.calls++,r.vertices+=i,o===e.TRIANGLES&&(r.faces+=i/3)}function a(i){var n=t.get("ANGLE_instanced_arrays");if(null===n)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var a=i.attributes.position,s=0;a&&a.isInterleavedBufferAttribute?(s=a.data.count,n.drawArraysInstancedANGLE(o,0,s,i.maxInstancedCount)):(s=a.count,n.drawArraysInstancedANGLE(o,0,s,i.maxInstancedCount)),r.calls++,r.vertices+=s*i.maxInstancedCount,o===e.TRIANGLES&&(r.faces+=i.maxInstancedCount*s/3)}var o;return{setMode:i,render:n,renderInstances:a}}function Be(){var e={};return{get:function(t){
if(void 0!==e[t.id])return e[t.id];var i;switch(t.type){case"DirectionalLight":i={direction:new u,color:new X,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"SpotLight":i={position:new u,direction:new u,color:new X,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"PointLight":i={position:new u,color:new X,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"HemisphereLight":i={direction:new u,skyColor:new X,groundColor:new X}}return e[t.id]=i,i}}}function Ge(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}function je(e,t,r){var i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)===!1&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),Ge(r)),i}function Ve(e){switch(e){case Po:return["Linear","( value )"];case Ao:return["sRGB","( value )"];case Oo:return["RGBE","( value )"];case Lo:return["RGBM","( value, 7.0 )"];case Ro:return["RGBM","( value, 16.0 )"];case Io:return["RGBD","( value, 256.0 )"];case Co:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Ue(e,t){var r=Ve(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function ze(e,t){var r=Ve(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function He(e,t){var r;switch(t){case ma:r="Linear";break;case va:r="Reinhard";break;case ga:r="Uncharted2";break;case ya:r="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function We(e,t,r){e=e||{};var i=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&r.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&r.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&r.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return i.filter(qe).join("\n")}function Xe(e){var t=[];for(var r in e){var i=e[r];i!==!1&&t.push("#define "+r+" "+i)}return t.join("\n")}function Ye(e,t){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;i>n;n++){var a=e.getActiveAttrib(t,n),o=a.name;r[o]=e.getAttribLocation(t,o)}return r}function qe(e){return""!==e}function Ke(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function $e(e){function t(e,t){var r=Ul[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return $e(r)}var r=/#include +<([\w\d.]+)>/g;return e.replace(r,t)}function Ze(e){function t(e,t,r,i){for(var n="",a=parseInt(t);a<parseInt(r);a++)n+=i.replace(/\[ i \]/g,"[ "+a+" ]");return n}var r=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(r,t)}function Qe(e,t,r,i){var n=e.context,a=r.extensions,o=r.defines,s=r.__webglShader.vertexShader,l=r.__webglShader.fragmentShader,u="SHADOWMAP_TYPE_BASIC";i.shadowMapType===Mn?u="SHADOWMAP_TYPE_PCF":i.shadowMapType===Sn&&(u="SHADOWMAP_TYPE_PCF_SOFT");var c="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(i.envMap){switch(r.envMap.mapping){case _a:case xa:c="ENVMAP_TYPE_CUBE";break;case Sa:case Ea:c="ENVMAP_TYPE_CUBE_UV";break;case wa:case Ta:c="ENVMAP_TYPE_EQUIREC";break;case Ma:c="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case xa:case Ta:h="ENVMAP_MODE_REFRACTION"}switch(r.combine){case ha:p="ENVMAP_BLENDING_MULTIPLY";break;case pa:p="ENVMAP_BLENDING_MIX";break;case da:p="ENVMAP_BLENDING_ADD"}}var d,f,m=e.gammaFactor>0?e.gammaFactor:1,v=We(a,i,e.extensions),g=Xe(o),y=n.createProgram();r.isRawShaderMaterial?(d=[g,"\n"].filter(qe).join("\n"),f=[v,g,"\n"].filter(qe).join("\n")):(d=["precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,g,i.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+i.maxBones,i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+h:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.useVertexTexture?"#define BONE_TEXTURE":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+u:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(qe).join("\n"),f=[v,"precision "+i.precision+" float;","precision "+i.precision+" int;","#define SHADER_NAME "+r.__webglShader.name,g,i.alphaTest?"#define ALPHATEST "+i.alphaTest:"","#define GAMMA_FACTOR "+m,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+c:"",i.envMap?"#define "+h:"",i.envMap?"#define "+p:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.vertexColors?"#define USE_COLOR":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+i.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(i.numClippingPlanes-i.numClipIntersection),i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+u:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",i.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",i.toneMapping!==fa?"#define TONE_MAPPING":"",i.toneMapping!==fa?Ul.tonemapping_pars_fragment:"",i.toneMapping!==fa?He("toneMapping",i.toneMapping):"",i.outputEncoding||i.mapEncoding||i.envMapEncoding||i.emissiveMapEncoding?Ul.encodings_pars_fragment:"",i.mapEncoding?Ue("mapTexelToLinear",i.mapEncoding):"",i.envMapEncoding?Ue("envMapTexelToLinear",i.envMapEncoding):"",i.emissiveMapEncoding?Ue("emissiveMapTexelToLinear",i.emissiveMapEncoding):"",i.outputEncoding?ze("linearToOutputTexel",i.outputEncoding):"",i.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(qe).join("\n")),s=$e(s,i),s=Ke(s,i),l=$e(l,i),l=Ke(l,i),r.isShaderMaterial||(s=Ze(s),l=Ze(l));var b=d+s,_=f+l,x=je(n,n.VERTEX_SHADER,b),w=je(n,n.FRAGMENT_SHADER,_);n.attachShader(y,x),n.attachShader(y,w),void 0!==r.index0AttributeName?n.bindAttribLocation(y,0,r.index0AttributeName):i.morphTargets===!0&&n.bindAttribLocation(y,0,"position"),n.linkProgram(y);var T=n.getProgramInfoLog(y),M=n.getShaderInfoLog(x),S=n.getShaderInfoLog(w),E=!0,P=!0;n.getProgramParameter(y,n.LINK_STATUS)===!1?(E=!1,console.error("THREE.WebGLProgram: shader error: ",n.getError(),"gl.VALIDATE_STATUS",n.getProgramParameter(y,n.VALIDATE_STATUS),"gl.getProgramInfoLog",T,M,S)):""!==T?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",T):(""===M||""===S)&&(P=!1),P&&(this.diagnostics={runnable:E,material:r,programLog:T,vertexShader:{log:M,prefix:d},fragmentShader:{log:S,prefix:f}}),n.deleteShader(x),n.deleteShader(w);var A;this.getUniforms=function(){return void 0===A&&(A=new W(n,y,e)),A};var C;return this.getAttributes=function(){return void 0===C&&(C=Ye(n,y)),C},this.destroy=function(){n.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Kl++,this.code=t,this.usedTimes=1,this.program=y,this.vertexShader=x,this.fragmentShader=w,this}function Je(e,t){function r(e){if(t.floatVertexTextures&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var r=t.maxVertexUniforms,i=Math.floor((r-20)/4),n=i;return void 0!==e&&e&&e.isSkinnedMesh&&(n=Math.min(e.skeleton.bones.length,n),n<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+n+" (try OpenGL instead of ANGLE)")),n}function i(e,t){var r;return e?e&&e.isTexture?r=e.encoding:e&&e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),r=e.texture.encoding):r=Po,r===Po&&t&&(r=Co),r}var n=[],a={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];this.getParameters=function(n,o,s,l,u,c){var h=a[n.type],p=r(c),d=e.getPrecision();null!==n.precision&&(d=t.getMaxPrecision(n.precision),d!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",d,"instead."));var f=e.getCurrentRenderTarget(),m={shaderID:h,precision:d,supportsVertexTextures:t.vertexTextures,outputEncoding:i(f?f.texture:null,e.gammaOutput),map:!!n.map,mapEncoding:i(n.map,e.gammaInput),envMap:!!n.envMap,envMapMode:n.envMap&&n.envMap.mapping,envMapEncoding:i(n.envMap,e.gammaInput),envMapCubeUV:!!n.envMap&&(n.envMap.mapping===Sa||n.envMap.mapping===Ea),lightMap:!!n.lightMap,aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:i(n.emissiveMap,e.gammaInput),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,combine:n.combine,vertexColors:n.vertexColors,fog:!!s,useFog:n.fog,fogExp:s&&s.isFogExp2,flatShading:n.shading===Cn,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:n.skinning,maxBones:p,useVertexTexture:t.floatVertexTextures&&c&&c.skeleton&&c.skeleton.useVertexTexture,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numHemiLights:o.hemi.length,numClippingPlanes:l,numClipIntersection:u,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&o.shadows.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:n.side===An,flipSided:n.side===Pn,depthPacking:void 0!==n.depthPacking?n.depthPacking:!1};return m},this.getProgramCode=function(e,t){var r=[];if(t.shaderID?r.push(t.shaderID):(r.push(e.fragmentShader),r.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)r.push(i),r.push(e.defines[i]);for(var n=0;n<o.length;n++)r.push(t[o[n]]);return r.join()},this.acquireProgram=function(t,r,i){for(var a,o=0,s=n.length;s>o;o++){var l=n[o];if(l.code===i){a=l,++a.usedTimes;break}}return void 0===a&&(a=new Qe(e,i,t,r),n.push(a)),a},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n}function et(e,t,r){function i(e){var n=e.target,s=l[n.id];null!==s.index&&a(s.index),o(s.attributes),n.removeEventListener("dispose",i),delete l[n.id];var u=t.get(n);u.wireframe&&a(u.wireframe),t["delete"](n);var c=t.get(s);c.wireframe&&a(c.wireframe),t["delete"](s),r.memory.geometries--}function n(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function a(t){var r=n(t);void 0!==r&&(e.deleteBuffer(r),s(t))}function o(e){for(var t in e)a(e[t])}function s(e){t["delete"](e.isInterleavedBufferAttribute?e.data:e)}var l={};return{get:function(e){var t=e.geometry;if(void 0!==l[t.id])return l[t.id];t.addEventListener("dispose",i);var n;return t.isBufferGeometry?n=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Ce).setFromObject(e)),n=t._bufferGeometry),l[t.id]=n,r.memory.geometries++,n}}}function tt(e,t,r){function i(t){var r=u.get(t);t.geometry.isGeometry&&r.updateFromObject(t);var i=r.index,a=r.attributes;null!==i&&n(i,e.ELEMENT_ARRAY_BUFFER);for(var o in a)n(a[o],e.ARRAY_BUFFER);var s=r.morphAttributes;for(var o in s)for(var l=s[o],c=0,h=l.length;h>c;c++)n(l[c],e.ARRAY_BUFFER);return r}function n(e,r){var i=e.isInterleavedBufferAttribute?e.data:e,n=t.get(i);void 0===n.__webglBuffer?a(n,i,r):n.version!==i.version&&o(n,i,r)}function a(t,r,i){t.__webglBuffer=e.createBuffer(),e.bindBuffer(i,t.__webglBuffer);var n=r.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;e.bufferData(i,r.array,n),t.version=r.version}function o(t,r,i){e.bindBuffer(i,t.__webglBuffer),r.dynamic===!1?e.bufferData(i,r.array,e.STATIC_DRAW):-1===r.updateRange.count?e.bufferSubData(i,0,r.array):0===r.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,r.updateRange.offset*r.array.BYTES_PER_ELEMENT,r.array.subarray(r.updateRange.offset,r.updateRange.offset+r.updateRange.count)),r.updateRange.count=0),t.version=r.version}function s(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}function l(r){var i=t.get(r);if(void 0!==i.wireframe)return i.wireframe;var a=[],o=r.index,s=r.attributes,l=s.position;if(null!==o)for(var u=o.array,c=0,h=u.length;h>c;c+=3){var p=u[c+0],d=u[c+1],f=u[c+2];a.push(p,d,d,f,f,p)}else for(var u=s.position.array,c=0,h=u.length/3-1;h>c;c+=3){var p=c+0,d=c+1,f=c+2;a.push(p,d,d,f,f,p)}var m=l.count>65535?Uint32Array:Uint16Array,v=new me(new m(a),1);return n(v,e.ELEMENT_ARRAY_BUFFER),i.wireframe=v,v}var u=new et(e,t,r);return{getAttributeBuffer:s,getWireframeAttribute:l,update:i}}function rt(e,t,r,i,n,a,o){function s(e,t){if(e.width>t||e.height>t){var r=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=Math.floor(e.width*r),i.height=Math.floor(e.height*r);var n=i.getContext("2d");return n.drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function l(e){return No.isPowerOfTwo(e.width)&&No.isPowerOfTwo(e.height)}function u(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");t.width=No.nearestPowerOfTwo(e.width),t.height=No.nearestPowerOfTwo(e.height);var r=t.getContext("2d");return r.drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}function c(e){return e.wrapS!==Ca||e.wrapT!==Ca?!0:e.minFilter!==La&&e.minFilter!==Da?!0:!1}function h(t){return t===La||t===Ra||t===Ia?e.NEAREST:e.LINEAR}function p(e){var t=e.target;t.removeEventListener("dispose",p),f(t),P.textures--}function d(e){var t=e.target;t.removeEventListener("dispose",d),m(t),P.textures--}function f(t){var r=i.get(t);if(t.image&&r.__image__webglTextureCube)e.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture)}i["delete"](t)}function m(t){var r=i.get(t),n=i.get(t.texture);if(t){if(void 0!==n.__webglTexture&&e.deleteTexture(n.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t&&t.isWebGLRenderTargetCube)for(var a=0;6>a;a++)e.deleteFramebuffer(r.__webglFramebuffer[a]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[a]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer);i["delete"](t.texture),i["delete"](t)}}function v(t,n){var a=i.get(t);if(t.version>0&&a.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(o.complete!==!1)return void _(a,t,n);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}r.activeTexture(e.TEXTURE0+n),r.bindTexture(e.TEXTURE_2D,a.__webglTexture)}function g(t,o){var u=i.get(t);if(6===t.image.length)if(t.version>0&&u.__version!==t.version){u.__image__webglTextureCube||(t.addEventListener("dispose",p),u.__image__webglTextureCube=e.createTexture(),P.textures++),r.activeTexture(e.TEXTURE0+o),r.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var c=t&&t.isCompressedTexture,h=t.image[0]&&t.image[0].isDataTexture,d=[],f=0;6>f;f++)d[f]=c||h?h?t.image[f].image:t.image[f]:s(t.image[f],n.maxCubemapSize);var m=d[0],v=l(m),g=a(t.format),y=a(t.type);b(e.TEXTURE_CUBE_MAP,t,v);for(var f=0;6>f;f++)if(c)for(var _,x=d[f].mipmaps,w=0,T=x.length;T>w;w++)_=x[w],t.format!==Ja&&t.format!==Qa?r.getCompressedTextureFormats().indexOf(g)>-1?r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,w,g,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,w,g,_.width,_.height,0,g,y,_.data);else h?r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,g,d[f].width,d[f].height,0,g,y,d[f].data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,g,g,y,d[f]);t.generateMipmaps&&v&&e.generateMipmap(e.TEXTURE_CUBE_MAP),u.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(e.TEXTURE0+o),r.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)}function y(t,n){r.activeTexture(e.TEXTURE0+n),r.bindTexture(e.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)}function b(r,o,s){var l;if(s?(e.texParameteri(r,e.TEXTURE_WRAP_S,a(o.wrapS)),e.texParameteri(r,e.TEXTURE_WRAP_T,a(o.wrapT)),e.texParameteri(r,e.TEXTURE_MAG_FILTER,a(o.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,a(o.minFilter))):(e.texParameteri(r,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(r,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),(o.wrapS!==Ca||o.wrapT!==Ca)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",o),e.texParameteri(r,e.TEXTURE_MAG_FILTER,h(o.magFilter)),e.texParameteri(r,e.TEXTURE_MIN_FILTER,h(o.minFilter)),o.minFilter!==La&&o.minFilter!==Da&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",o)),l=t.get("EXT_texture_filter_anisotropic")){if(o.type===Wa&&null===t.get("OES_texture_float_linear"))return;if(o.type===Xa&&null===t.get("OES_texture_half_float_linear"))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(e.texParameterf(r,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,n.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function _(t,i,o){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",p),t.__webglTexture=e.createTexture(),P.textures++),r.activeTexture(e.TEXTURE0+o),r.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment);var h=s(i.image,n.maxTextureSize);c(i)&&l(h)===!1&&(h=u(h));var d=l(h),f=a(i.format),m=a(i.type);b(e.TEXTURE_2D,i,d);var v,g=i.mipmaps;if(i&&i.isDepthTexture){var y=e.DEPTH_COMPONENT;if(i.type===Wa){if(!A)throw new Error("Float Depth Texture only supported in WebGL2.0");y=e.DEPTH_COMPONENT32F}else A&&(y=e.DEPTH_COMPONENT16);i.format===no&&(y=e.DEPTH_STENCIL),r.texImage2D(e.TEXTURE_2D,0,y,h.width,h.height,0,f,m,null)}else if(i&&i.isDataTexture)if(g.length>0&&d){for(var _=0,x=g.length;x>_;_++)v=g[_],r.texImage2D(e.TEXTURE_2D,_,f,v.width,v.height,0,f,m,v.data);i.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,f,h.width,h.height,0,f,m,h.data);else if(i&&i.isCompressedTexture)for(var _=0,x=g.length;x>_;_++)v=g[_],i.format!==Ja&&i.format!==Qa?r.getCompressedTextureFormats().indexOf(f)>-1?r.compressedTexImage2D(e.TEXTURE_2D,_,f,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(e.TEXTURE_2D,_,f,v.width,v.height,0,f,m,v.data);else if(g.length>0&&d){for(var _=0,x=g.length;x>_;_++)v=g[_],r.texImage2D(e.TEXTURE_2D,_,f,f,m,v);i.generateMipmaps=!1}else r.texImage2D(e.TEXTURE_2D,0,f,f,m,h);i.generateMipmaps&&d&&e.generateMipmap(e.TEXTURE_2D),t.__version=i.version,i.onUpdate&&i.onUpdate(i)}function x(t,n,o,s){var l=a(n.texture.format),u=a(n.texture.type);r.texImage2D(s,0,l,n.width,n.height,0,l,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,o,s,i.get(n.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function w(t,r){e.bindRenderbuffer(e.RENDERBUFFER,t),r.depthBuffer&&!r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):r.depthBuffer&&r.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,r.width,r.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function T(t,r){var n=r&&r.isWebGLRenderTargetCube;if(n)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),v(r.depthTexture,0);var a=i.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===io)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(r.depthTexture.format!==no)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}function M(t){var r=i.get(t),n=t&&t.isWebGLRenderTargetCube;if(t.depthTexture){if(n)throw new Error("target.depthTexture not supported in Cube render targets");T(r.__webglFramebuffer,t)}else if(n){r.__webglDepthbuffer=[];for(var a=0;6>a;a++)e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[a]),r.__webglDepthbuffer[a]=e.createRenderbuffer(),w(r.__webglDepthbuffer[a],t)}else e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),w(r.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}function S(t){var n=i.get(t),a=i.get(t.texture);t.addEventListener("dispose",d),a.__webglTexture=e.createTexture(),P.textures++;var o=t&&t.isWebGLRenderTargetCube,s=l(t);if(o){n.__webglFramebuffer=[];for(var u=0;6>u;u++)n.__webglFramebuffer[u]=e.createFramebuffer()}else n.__webglFramebuffer=e.createFramebuffer();if(o){r.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture),b(e.TEXTURE_CUBE_MAP,t.texture,s);for(var u=0;6>u;u++)x(n.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);t.texture.generateMipmaps&&s&&e.generateMipmap(e.TEXTURE_CUBE_MAP),r.bindTexture(e.TEXTURE_CUBE_MAP,null)}else r.bindTexture(e.TEXTURE_2D,a.__webglTexture),b(e.TEXTURE_2D,t.texture,s),x(n.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&s&&e.generateMipmap(e.TEXTURE_2D),r.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&M(t)}function E(t){var n=t.texture;if(n.generateMipmaps&&l(t)&&n.minFilter!==La&&n.minFilter!==Da){var a=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=i.get(n).__webglTexture;r.bindTexture(a,o),e.generateMipmap(a),r.bindTexture(a,null)}}var P=o.memory,A="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;this.setTexture2D=v,this.setTextureCube=g,this.setTextureCubeDynamic=y,this.setupRenderTarget=S,this.updateRenderTargetMipmap=E}function it(){var e={};return{get:function(t){var r=t.uuid,i=e[r];return void 0===i&&(i={},e[r]=i),i},"delete":function(t){delete e[t.uuid]},clear:function(){e={}}}}function nt(e,t,r){function i(){var t=!1,r=new a,i=null,n=new a;return{setMask:function(r){i===r||t||(e.colorMask(r,r,r,r),i=r)},setLocked:function(e){t=e},setClear:function(t,i,a,o){r.set(t,i,a,o),n.equals(r)===!1&&(e.clearColor(t,i,a,o),n.copy(r))},reset:function(){t=!1,i=null,n.set(0,0,0,1)}}}function n(){var t=!1,r=null,i=null,n=null;return{setTest:function(t){t?d(e.DEPTH_TEST):f(e.DEPTH_TEST)},setMask:function(i){r===i||t||(e.depthMask(i),r=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case ia:e.depthFunc(e.NEVER);break;case na:e.depthFunc(e.ALWAYS);break;case aa:e.depthFunc(e.LESS);break;case oa:e.depthFunc(e.LEQUAL);break;case sa:e.depthFunc(e.EQUAL);break;case la:e.depthFunc(e.GEQUAL);break;case ua:e.depthFunc(e.GREATER);break;case ca:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);i=t}},setLocked:function(e){t=e},setClear:function(t){n!==t&&(e.clearDepth(t),n=t)},reset:function(){t=!1,r=null,i=null,n=null}}}function o(){var t=!1,r=null,i=null,n=null,a=null,o=null,s=null,l=null,u=null;return{setTest:function(t){t?d(e.STENCIL_TEST):f(e.STENCIL_TEST)},setMask:function(i){r===i||t||(e.stencilMask(i),r=i)},setFunc:function(t,r,o){(i!==t||n!==r||a!==o)&&(e.stencilFunc(t,r,o),i=t,n=r,a=o)},setOp:function(t,r,i){(o!==t||s!==r||l!==i)&&(e.stencilOp(t,r,i),o=t,s=r,l=i)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,r=null,i=null,n=null,a=null,o=null,s=null,l=null,u=null}}}function s(t,r,i){var n=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var o=0;i>o;o++)e.texImage2D(r+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n);return a}function l(){D(0,0,0,1),F(1),N(0),d(e.DEPTH_TEST),_(oa),S(!1),E(yn),d(e.CULL_FACE),d(e.BLEND),v(Dn)}function u(){for(var e=0,t=W.length;t>e;e++)W[e]=0}function c(r){if(W[r]=1,0===X[r]&&(e.enableVertexAttribArray(r),X[r]=1),0!==Y[r]){var i=t.get("ANGLE_instanced_arrays");i.vertexAttribDivisorANGLE(r,0),Y[r]=0}}function h(t,r,i){W[t]=1,0===X[t]&&(e.enableVertexAttribArray(t),X[t]=1),Y[t]!==r&&(i.vertexAttribDivisorANGLE(t,r),Y[t]=r)}function p(){for(var t=0,r=X.length;t!==r;++t)X[t]!==W[t]&&(e.disableVertexAttribArray(t),X[t]=0)}function d(t){q[t]!==!0&&(e.enable(t),q[t]=!0)}function f(t){q[t]!==!1&&(e.disable(t),q[t]=!1)}function m(){if(null===K&&(K=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var r=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),i=0;i<r.length;i++)K.push(r[i]);return K}function v(t,i,n,a,o,s,l,u){t!==In?d(e.BLEND):f(e.BLEND),(t!==$||u!==ie)&&(t===Fn?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===Nn?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===Bn?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),$=t,ie=u),t===Gn?(o=o||i,s=s||n,l=l||a,(i!==Z||o!==ee)&&(e.blendEquationSeparate(r(i),r(o)),Z=i,ee=o),(n!==Q||a!==J||s!==te||l!==re)&&(e.blendFuncSeparate(r(n),r(a),r(s),r(l)),Q=n,J=a,te=s,re=l)):(Z=null,Q=null,J=null,ee=null,te=null,re=null)}function g(e){V.setMask(e)}function y(e){U.setTest(e)}function b(e){U.setMask(e)}function _(e){U.setFunc(e)}function x(e){z.setTest(e)}function w(e){z.setMask(e)}function T(e,t,r){z.setFunc(e,t,r)}function M(e,t,r){z.setOp(e,t,r)}function S(t){ne!==t&&(e.frontFace(t?e.CW:e.CCW),ne=t)}function E(t){t!==gn?(d(e.CULL_FACE),t!==ae&&e.cullFace(t===yn?e.BACK:t===bn?e.FRONT:e.FRONT_AND_BACK)):f(e.CULL_FACE),ae=t}function P(t){t!==oe&&(e.lineWidth(t),oe=t)}function A(t,r,i){t?(d(e.POLYGON_OFFSET_FILL),(se!==r||le!==i)&&(e.polygonOffset(r,i),se=r,le=i)):f(e.POLYGON_OFFSET_FILL)}function C(){return ue}function O(t){ue=t,t?d(e.SCISSOR_TEST):f(e.SCISSOR_TEST)}function k(t){void 0===t&&(t=e.TEXTURE0+ce-1),he!==t&&(e.activeTexture(t),he=t)}function L(t,r){null===he&&k();var i=pe[he];void 0===i&&(i={type:void 0,texture:void 0},pe[he]=i),(i.type!==t||i.texture!==r)&&(e.bindTexture(t,r||me[t]),i.type=t,i.texture=r)}function R(){try{e.compressedTexImage2D.apply(e,arguments);

}catch(t){console.error(t)}}function I(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error(t)}}function D(e,t,r,i){V.setClear(e,t,r,i)}function F(e){U.setClear(e)}function N(e){z.setClear(e)}function B(t){de.equals(t)===!1&&(e.scissor(t.x,t.y,t.z,t.w),de.copy(t))}function G(t){fe.equals(t)===!1&&(e.viewport(t.x,t.y,t.z,t.w),fe.copy(t))}function j(){for(var t=0;t<X.length;t++)1===X[t]&&(e.disableVertexAttribArray(t),X[t]=0);q={},K=null,he=null,pe={},$=null,ne=null,ae=null,V.reset(),U.reset(),z.reset()}var V=new i,U=new n,z=new o,H=e.getParameter(e.MAX_VERTEX_ATTRIBS),W=new Uint8Array(H),X=new Uint8Array(H),Y=new Uint8Array(H),q={},K=null,$=null,Z=null,Q=null,J=null,ee=null,te=null,re=null,ie=!1,ne=null,ae=null,oe=null,se=null,le=null,ue=null,ce=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),he=null,pe={},de=new a,fe=new a,me={};return me[e.TEXTURE_2D]=s(e.TEXTURE_2D,e.TEXTURE_2D,1),me[e.TEXTURE_CUBE_MAP]=s(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:V,depth:U,stencil:z},init:l,initAttributes:u,enableAttribute:c,enableAttributeAndDivisor:h,disableUnusedAttributes:p,enable:d,disable:f,getCompressedTextureFormats:m,setBlending:v,setColorWrite:g,setDepthTest:y,setDepthWrite:b,setDepthFunc:_,setStencilTest:x,setStencilWrite:w,setStencilFunc:T,setStencilOp:M,setFlipSided:S,setCullFace:E,setLineWidth:P,setPolygonOffset:A,getScissorTest:C,setScissorTest:O,activeTexture:k,bindTexture:L,compressedTexImage2D:R,texImage2D:I,clearColor:D,clearDepth:F,clearStencil:N,scissor:B,viewport:G,reset:j}}function at(e,t,r){function i(){if(void 0!==a)return a;var r=t.get("EXT_texture_filter_anisotropic");return a=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function n(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a,o=void 0!==r.precision?r.precision:"highp",s=n(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var l=r.logarithmicDepthBuffer===!0&&!!t.get("EXT_frag_depth"),u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),f=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),g=c>0,y=!!t.get("OES_texture_float"),b=g&&y;return{getMaxAnisotropy:i,getMaxPrecision:n,precision:o,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:b}}function ot(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var i;switch(r){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=e.getExtension("WEBGL_compressed_texture_etc1");break;default:i=e.getExtension(r)}return null===i&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=i,i}}}function st(){function e(){u.value!==i&&(u.value=i,u.needsUpdate=n>0),r.numPlanes=n,r.numIntersection=0}function t(e,t,i,n){var a=null!==e?e.length:0,o=null;if(0!==a){if(o=u.value,n!==!0||null===o){var c=i+4*a,h=t.matrixWorldInverse;l.getNormalMatrix(h),(null===o||o.length<c)&&(o=new Float32Array(c));for(var p=0,d=i;p!==a;++p,d+=4)s.copy(e[p]).applyMatrix4(h,l),s.normal.toArray(o,d),o[d+3]=s.constant}u.value=o,u.needsUpdate=!0}return r.numPlanes=a,o}var r=this,i=null,n=0,a=!1,o=!1,s=new ie,l=new re,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,o){var s=0!==e.length||r||0!==n||a;return a=r,i=t(e,o,0),n=e.length,s},this.beginShadows=function(){o=!0,t(null)},this.endShadows=function(){o=!1,e()},this.setState=function(r,s,l,c,h,p){if(!a||null===r||0===r.length||o&&!l)o?t(null):e();else{var d=o?0:n,f=4*d,m=h.clippingState||null;u.value=m,m=t(r,c,f,p);for(var v=0;v!==f;++v)m[v]=i[v];h.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=d}}}function lt(e){function t(){return null===he?Se:1}function r(e,t,r,i){Y===!0&&(e*=i,t*=i,r*=i),Qe.clearColor(e,t,r,i)}function i(){Qe.init(),Qe.scissor(ge.copy(Ee).multiplyScalar(Se)),Qe.viewport(be.copy(Ae).multiplyScalar(Se)),r(xe.r,xe.g,xe.b,we)}function n(){ce=null,ve=null,me="",de=-1,Qe.reset()}function o(e){e.preventDefault(),n(),i(),et.clear()}function s(e){var t=e.target;t.removeEventListener("dispose",s),l(t)}function l(e){h(e),et["delete"](e)}function h(e){var t=et.get(e).program;e.program=void 0,void 0!==t&&ct.releaseProgram(t)}function p(e,t,r,i){var n;if(r&&r.isInstancedBufferGeometry&&(n=$e.get("ANGLE_instanced_arrays"),null===n))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0),Qe.initAttributes();var a=r.attributes,o=t.getAttributes(),s=e.defaultAttributeValues;for(var l in o){var u=o[l];if(u>=0){var c=a[l];if(void 0!==c){var h=Ye.FLOAT,p=c.array,d=c.normalized;p instanceof Float32Array?h=Ye.FLOAT:p instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):p instanceof Uint16Array?h=Ye.UNSIGNED_SHORT:p instanceof Int16Array?h=Ye.SHORT:p instanceof Uint32Array?h=Ye.UNSIGNED_INT:p instanceof Int32Array?h=Ye.INT:p instanceof Int8Array?h=Ye.BYTE:p instanceof Uint8Array&&(h=Ye.UNSIGNED_BYTE);var f=c.itemSize,m=ut.getAttributeBuffer(c);if(c.isInterleavedBufferAttribute){var v=c.data,g=v.stride,y=c.offset;v&&v.isInstancedInterleavedBuffer?(Qe.enableAttributeAndDivisor(u,v.meshPerAttribute,n),void 0===r.maxInstancedCount&&(r.maxInstancedCount=v.meshPerAttribute*v.count)):Qe.enableAttribute(u),Ye.bindBuffer(Ye.ARRAY_BUFFER,m),Ye.vertexAttribPointer(u,f,h,d,g*v.array.BYTES_PER_ELEMENT,(i*g+y)*v.array.BYTES_PER_ELEMENT)}else c.isInstancedBufferAttribute?(Qe.enableAttributeAndDivisor(u,c.meshPerAttribute,n),void 0===r.maxInstancedCount&&(r.maxInstancedCount=c.meshPerAttribute*c.count)):Qe.enableAttribute(u),Ye.bindBuffer(Ye.ARRAY_BUFFER,m),Ye.vertexAttribPointer(u,f,h,d,0,i*f*c.array.BYTES_PER_ELEMENT)}else if(void 0!==s){var b=s[l];if(void 0!==b)switch(b.length){case 2:Ye.vertexAttrib2fv(u,b);break;case 3:Ye.vertexAttrib3fv(u,b);break;case 4:Ye.vertexAttrib4fv(u,b);break;default:Ye.vertexAttrib1fv(u,b)}}}}Qe.disableUnusedAttributes()}function d(e,t){return Math.abs(t[0])-Math.abs(e[0])}function f(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.program&&t.material.program&&e.material.program!==t.material.program?e.material.program.id-t.material.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function m(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function v(e,t,r,i,n){var a,o;r.transparent?(a=re,o=++ie):(a=J,o=++ee);var s=a[o];void 0!==s?(s.id=e.id,s.object=e,s.geometry=t,s.material=r,s.z=He.z,s.group=n):(s={id:e.id,object:e,geometry:t,material:r,z:He.z,group:n},a.push(s))}function g(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),Ue.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),b(Ue)}function y(e){return Ue.center.set(0,0,0),Ue.radius=.7071067811865476,Ue.applyMatrix4(e.matrixWorld),b(Ue)}function b(e){if(!Re.intersectsSphere(e))return!1;var t=Ge.numPlanes;if(0===t)return!0;var r=ue.clippingPlanes,i=e.center,n=-e.radius,a=0;do if(r[a].distanceToPoint(i)<n)return!1;while(++a!==t);return!0}function _(e,t){if(e.visible!==!1){var r=0!==(e.layers.mask&t.layers.mask);if(r)if(e.isLight)Z.push(e);else if(e.isSprite)(e.frustumCulled===!1||y(e)===!0)&&se.push(e);else if(e.isLensFlare)le.push(e);else if(e.isImmediateRenderObject)ue.sortObjects===!0&&(He.setFromMatrixPosition(e.matrixWorld),He.applyProjection(ze)),v(e,null,e.material,He.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),e.frustumCulled===!1||g(e)===!0)){var i=e.material;if(i.visible===!0){ue.sortObjects===!0&&(He.setFromMatrixPosition(e.matrixWorld),He.applyProjection(ze));var n=ut.update(e);if(i.isMultiMaterial)for(var a=n.groups,o=i.materials,s=0,l=a.length;l>s;s++){var u=a[s],c=o[u.materialIndex];c.visible===!0&&v(e,n,c,He.z,u)}else v(e,n,i,He.z,null)}}for(var h=e.children,s=0,l=h.length;l>s;s++)_(h[s],t)}}function x(e,t,r,i){for(var n=0,a=e.length;a>n;n++){var o=e[n],s=o.object,l=o.geometry,u=void 0===i?o.material:i,c=o.group;if(s.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),s.onBeforeRender(ue,t,r,l,u,c),s.isImmediateRenderObject){T(u);var h=M(r,t.fog,u,s);me="",s.render(function(e){ue.renderBufferImmediate(e,h,u)})}else ue.renderBufferDirect(r,t.fog,l,u,s,c);s.onAfterRender(ue,t,r,l,u,c)}}function w(e,t,r){var i=et.get(e),n=ct.getParameters(e,We,t,Ge.numPlanes,Ge.numIntersection,r),a=ct.getProgramCode(e,n),o=i.program,l=!0;if(void 0===o)e.addEventListener("dispose",s);else if(o.code!==a)h(e);else{if(void 0!==n.shaderID)return;l=!1}if(l){if(n.shaderID){var u=Wl[n.shaderID];i.__webglShader={name:e.type,uniforms:Ho.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else i.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=i.__webglShader,o=ct.acquireProgram(e,n,a),i.program=o,e.program=o}var c=o.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<ue.maxMorphTargets;p++)c["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var p=0;p<ue.maxMorphNormals;p++)c["morphNormal"+p]>=0&&e.numSupportedMorphNormals++}var d=i.__webglShader.uniforms;(!e.isShaderMaterial&&!e.isRawShaderMaterial||e.clipping===!0)&&(i.numClippingPlanes=Ge.numPlanes,i.numIntersection=Ge.numIntersection,d.clippingPlanes=Ge.uniform),i.fog=t,i.lightsHash=We.hash,e.lights&&(d.ambientLightColor.value=We.ambient,d.directionalLights.value=We.directional,d.spotLights.value=We.spot,d.pointLights.value=We.point,d.hemisphereLights.value=We.hemi,d.directionalShadowMap.value=We.directionalShadowMap,d.directionalShadowMatrix.value=We.directionalShadowMatrix,d.spotShadowMap.value=We.spotShadowMap,d.spotShadowMatrix.value=We.spotShadowMatrix,d.pointShadowMap.value=We.pointShadowMap,d.pointShadowMatrix.value=We.pointShadowMatrix);var f=i.program.getUniforms(),m=W.seqWithValue(f.seq,d);i.uniformsList=m}function T(e){e.side===An?Qe.disable(Ye.CULL_FACE):Qe.enable(Ye.CULL_FACE),Qe.setFlipSided(e.side===Pn),e.transparent===!0?Qe.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):Qe.setBlending(In),Qe.setDepthFunc(e.depthFunc),Qe.setDepthTest(e.depthTest),Qe.setDepthWrite(e.depthWrite),Qe.setColorWrite(e.colorWrite),Qe.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function M(e,t,r,i){_e=0;var n=et.get(r);if(je&&(Ve||e!==ve)){var a=e===ve&&r.id===de;Ge.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,n,a)}r.needsUpdate===!1&&(void 0===n.program?r.needsUpdate=!0:r.fog&&n.fog!==t?r.needsUpdate=!0:r.lights&&n.lightsHash!==We.hash?r.needsUpdate=!0:void 0===n.numClippingPlanes||n.numClippingPlanes===Ge.numPlanes&&n.numIntersection===Ge.numIntersection||(r.needsUpdate=!0)),r.needsUpdate&&(w(r,t,i),r.needsUpdate=!1);var o=!1,s=!1,l=!1,u=n.program,c=u.getUniforms(),h=n.__webglShader.uniforms;if(u.id!==ce&&(Ye.useProgram(u.program),ce=u.id,o=!0,s=!0,l=!0),r.id!==de&&(de=r.id,s=!0),o||e!==ve){if(c.set(Ye,e,"projectionMatrix"),Ze.logarithmicDepthBuffer&&c.setValue(Ye,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),e!==ve&&(ve=e,s=!0,l=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.envMap){var p=c.map.cameraPosition;void 0!==p&&p.setValue(Ye,He.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&c.setValue(Ye,"viewMatrix",e.matrixWorldInverse),c.set(Ye,ue,"toneMappingExposure"),c.set(Ye,ue,"toneMappingWhitePoint")}if(r.skinning){c.setOptional(Ye,i,"bindMatrix"),c.setOptional(Ye,i,"bindMatrixInverse");var d=i.skeleton;d&&(Ze.floatVertexTextures&&d.useVertexTexture?(c.set(Ye,d,"boneTexture"),c.set(Ye,d,"boneTextureWidth"),c.set(Ye,d,"boneTextureHeight")):c.setOptional(Ye,d,"boneMatrices"))}return s&&(r.lights&&I(h,l),t&&r.fog&&C(h,t),(r.isMeshBasicMaterial||r.isMeshLambertMaterial||r.isMeshPhongMaterial||r.isMeshStandardMaterial||r.isMeshDepthMaterial)&&S(h,r),r.isLineBasicMaterial?E(h,r):r.isLineDashedMaterial?(E(h,r),P(h,r)):r.isPointsMaterial?A(h,r):r.isMeshLambertMaterial?O(h,r):r.isMeshPhongMaterial?k(h,r):r.isMeshPhysicalMaterial?R(h,r):r.isMeshStandardMaterial?L(h,r):r.isMeshDepthMaterial?r.displacementMap&&(h.displacementMap.value=r.displacementMap,h.displacementScale.value=r.displacementScale,h.displacementBias.value=r.displacementBias):r.isMeshNormalMaterial&&(h.opacity.value=r.opacity),W.upload(Ye,n.uniformsList,h,ue)),c.set(Ye,i,"modelViewMatrix"),c.set(Ye,i,"normalMatrix"),c.setValue(Ye,"modelMatrix",i.matrixWorld),u}function S(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var r;if(t.map?r=t.map:t.specularMap?r=t.specularMap:t.displacementMap?r=t.displacementMap:t.normalMap?r=t.normalMap:t.bumpMap?r=t.bumpMap:t.roughnessMap?r=t.roughnessMap:t.metalnessMap?r=t.metalnessMap:t.alphaMap?r=t.alphaMap:t.emissiveMap&&(r=t.emissiveMap),void 0!==r){r.isWebGLRenderTarget&&(r=r.texture);var i=r.offset,n=r.repeat;e.offsetRepeat.value.set(i.x,i.y,n.x,n.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}function E(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function P(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function A(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*Se,e.scale.value=.5*Me,e.map.value=t.map,null!==t.map){var r=t.map.offset,i=t.map.repeat;e.offsetRepeat.value.set(r.x,r.y,i.x,i.y)}}function C(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function O(e,t){t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function k(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function L(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function R(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,L(e,t)}function I(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function D(e){for(var t=0,r=0,i=e.length;i>r;r++){var n=e[r];n.castShadow&&(We.shadows[t++]=n)}We.shadows.length=t}function F(e,t){var r,i,n,a,o,s,l,u=0,h=0,p=0,d=t.matrixWorldInverse,f=0,m=0,v=0,g=0;for(r=0,i=e.length;i>r;r++)if(n=e[r],a=n.color,o=n.intensity,s=n.distance,l=n.shadow&&n.shadow.map?n.shadow.map.texture:null,n.isAmbientLight)u+=a.r*o,h+=a.g*o,p+=a.b*o;else if(n.isDirectionalLight){var y=ht.get(n);y.color.copy(n.color).multiplyScalar(n.intensity),y.direction.setFromMatrixPosition(n.matrixWorld),He.setFromMatrixPosition(n.target.matrixWorld),y.direction.sub(He),y.direction.transformDirection(d),y.shadow=n.castShadow,n.castShadow&&(y.shadowBias=n.shadow.bias,y.shadowRadius=n.shadow.radius,y.shadowMapSize=n.shadow.mapSize),We.directionalShadowMap[f]=l,We.directionalShadowMatrix[f]=n.shadow.matrix,We.directional[f++]=y}else if(n.isSpotLight){var y=ht.get(n);y.position.setFromMatrixPosition(n.matrixWorld),y.position.applyMatrix4(d),y.color.copy(a).multiplyScalar(o),y.distance=s,y.direction.setFromMatrixPosition(n.matrixWorld),He.setFromMatrixPosition(n.target.matrixWorld),y.direction.sub(He),y.direction.transformDirection(d),y.coneCos=Math.cos(n.angle),y.penumbraCos=Math.cos(n.angle*(1-n.penumbra)),y.decay=0===n.distance?0:n.decay,y.shadow=n.castShadow,n.castShadow&&(y.shadowBias=n.shadow.bias,y.shadowRadius=n.shadow.radius,y.shadowMapSize=n.shadow.mapSize),We.spotShadowMap[v]=l,We.spotShadowMatrix[v]=n.shadow.matrix,We.spot[v++]=y}else if(n.isPointLight){var y=ht.get(n);y.position.setFromMatrixPosition(n.matrixWorld),y.position.applyMatrix4(d),y.color.copy(n.color).multiplyScalar(n.intensity),y.distance=n.distance,y.decay=0===n.distance?0:n.decay,y.shadow=n.castShadow,n.castShadow&&(y.shadowBias=n.shadow.bias,y.shadowRadius=n.shadow.radius,y.shadowMapSize=n.shadow.mapSize),We.pointShadowMap[m]=l,void 0===We.pointShadowMatrix[m]&&(We.pointShadowMatrix[m]=new c),He.setFromMatrixPosition(n.matrixWorld).negate(),We.pointShadowMatrix[m].identity().setPosition(He),We.point[m++]=y}else if(n.isHemisphereLight){var y=ht.get(n);y.direction.setFromMatrixPosition(n.matrixWorld),y.direction.transformDirection(d),y.direction.normalize(),y.skyColor.copy(n.color).multiplyScalar(o),y.groundColor.copy(n.groundColor).multiplyScalar(o),We.hemi[g++]=y}We.ambient[0]=u,We.ambient[1]=h,We.ambient[2]=p,We.directional.length=f,We.spot.length=v,We.point.length=m,We.hemi.length=g,We.hash=f+","+m+","+v+","+g+","+We.shadows.length}function N(){var e=_e;return e>=Ze.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Ze.maxTextures),_e+=1,e}function B(e){var t;if(e===Aa)return Ye.REPEAT;if(e===Ca)return Ye.CLAMP_TO_EDGE;if(e===Oa)return Ye.MIRRORED_REPEAT;if(e===La)return Ye.NEAREST;if(e===Ra)return Ye.NEAREST_MIPMAP_NEAREST;if(e===Ia)return Ye.NEAREST_MIPMAP_LINEAR;if(e===Da)return Ye.LINEAR;if(e===Fa)return Ye.LINEAR_MIPMAP_NEAREST;if(e===Na)return Ye.LINEAR_MIPMAP_LINEAR;if(e===Ga)return Ye.UNSIGNED_BYTE;if(e===Ya)return Ye.UNSIGNED_SHORT_4_4_4_4;if(e===qa)return Ye.UNSIGNED_SHORT_5_5_5_1;if(e===Ka)return Ye.UNSIGNED_SHORT_5_6_5;if(e===ja)return Ye.BYTE;if(e===Va)return Ye.SHORT;if(e===Ua)return Ye.UNSIGNED_SHORT;if(e===za)return Ye.INT;if(e===Ha)return Ye.UNSIGNED_INT;if(e===Wa)return Ye.FLOAT;if(e===Xa&&(t=$e.get("OES_texture_half_float"),null!==t))return t.HALF_FLOAT_OES;if(e===Za)return Ye.ALPHA;if(e===Qa)return Ye.RGB;if(e===Ja)return Ye.RGBA;if(e===eo)return Ye.LUMINANCE;if(e===to)return Ye.LUMINANCE_ALPHA;if(e===io)return Ye.DEPTH_COMPONENT;if(e===no)return Ye.DEPTH_STENCIL;if(e===Vn)return Ye.FUNC_ADD;if(e===Un)return Ye.FUNC_SUBTRACT;if(e===zn)return Ye.FUNC_REVERSE_SUBTRACT;if(e===Xn)return Ye.ZERO;if(e===Yn)return Ye.ONE;if(e===qn)return Ye.SRC_COLOR;if(e===Kn)return Ye.ONE_MINUS_SRC_COLOR;if(e===$n)return Ye.SRC_ALPHA;if(e===Zn)return Ye.ONE_MINUS_SRC_ALPHA;if(e===Qn)return Ye.DST_ALPHA;if(e===Jn)return Ye.ONE_MINUS_DST_ALPHA;if(e===ea)return Ye.DST_COLOR;if(e===ta)return Ye.ONE_MINUS_DST_COLOR;if(e===ra)return Ye.SRC_ALPHA_SATURATE;if((e===ao||e===oo||e===so||e===lo)&&(t=$e.get("WEBGL_compressed_texture_s3tc"),null!==t)){if(e===ao)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===oo)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===so)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===lo)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===uo||e===co||e===ho||e===po)&&(t=$e.get("WEBGL_compressed_texture_pvrtc"),null!==t)){if(e===uo)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===co)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===ho)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===po)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===fo&&(t=$e.get("WEBGL_compressed_texture_etc1"),null!==t))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===Hn||e===Wn)&&(t=$e.get("EXT_blend_minmax"),null!==t)){if(e===Hn)return t.MIN_EXT;if(e===Wn)return t.MAX_EXT}return e===$a&&(t=$e.get("WEBGL_depth_texture"),null!==t)?t.UNSIGNED_INT_24_8_WEBGL:0}console.log("THREE.WebGLRenderer",mn),e=e||{};var G=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),j=void 0!==e.context?e.context:null,V=void 0!==e.alpha?e.alpha:!1,U=void 0!==e.depth?e.depth:!0,z=void 0!==e.stencil?e.stencil:!0,H=void 0!==e.antialias?e.antialias:!1,Y=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,$=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,Z=[],J=[],ee=-1,re=[],ie=-1,oe=new Float32Array(8),se=[],le=[];this.domElement=G,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ma,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ue=this,ce=null,he=null,pe=null,de=-1,me="",ve=null,ge=new a,ye=null,be=new a,_e=0,xe=new X(0),we=0,Te=G.width,Me=G.height,Se=1,Ee=new a(0,0,Te,Me),Pe=!1,Ae=new a(0,0,Te,Me),Re=new ne,Ge=new st,je=!1,Ve=!1,Ue=new te,ze=new c,He=new u,We={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Xe={calls:0,vertices:0,faces:0,points:0};this.info={render:Xe,memory:{geometries:0,textures:0},programs:null};var Ye;try{var qe={alpha:V,depth:U,stencil:z,antialias:H,premultipliedAlpha:Y,preserveDrawingBuffer:$};if(Ye=j||G.getContext("webgl",qe)||G.getContext("experimental-webgl",qe),null===Ye)throw null!==G.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Ye.getShaderPrecisionFormat&&(Ye.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),G.addEventListener("webglcontextlost",o,!1)}catch(Ke){console.error("THREE.WebGLRenderer: "+Ke)}var $e=new ot(Ye);$e.get("WEBGL_depth_texture"),$e.get("OES_texture_float"),$e.get("OES_texture_float_linear"),$e.get("OES_texture_half_float"),$e.get("OES_texture_half_float_linear"),$e.get("OES_standard_derivatives"),$e.get("ANGLE_instanced_arrays"),$e.get("OES_element_index_uint")&&(Ce.MaxIndex=4294967296);var Ze=new at(Ye,$e,e),Qe=new nt(Ye,$e,B),et=new it,lt=new rt(Ye,$e,Qe,et,Ze,B,this.info),ut=new tt(Ye,et,this.info),ct=new Je(this,Ze),ht=new Be;this.info.programs=ct.programs;var pt=new Ne(Ye,$e,Xe),dt=new Fe(Ye,$e,Xe),ft=new De(-1,1,1,-1,0,1),mt=new Ie,vt=new Oe(new Le(2,2),new fe({depthTest:!1,depthWrite:!1,fog:!1})),gt=Wl.cube,yt=new Oe(new ke(5,5,5),new Q({uniforms:gt.uniforms,vertexShader:gt.vertexShader,fragmentShader:gt.fragmentShader,side:Pn,depthTest:!1,depthWrite:!1,fog:!1}));i(),this.context=Ye,this.capabilities=Ze,this.extensions=$e,this.properties=et,this.state=Qe;var bt=new ae(this,We,ut,Ze);this.shadowMap=bt;var _t=new K(this,se),xt=new q(this,le);this.getContext=function(){return Ye},this.getContextAttributes=function(){return Ye.getContextAttributes()},this.forceContextLoss=function(){$e.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return Ze.getMaxAnisotropy()},this.getPrecision=function(){return Ze.precision},this.getPixelRatio=function(){return Se},this.setPixelRatio=function(e){void 0!==e&&(Se=e,this.setSize(Ae.z,Ae.w,!1))},this.getSize=function(){return{width:Te,height:Me}},this.setSize=function(e,t,r){Te=e,Me=t,G.width=e*Se,G.height=t*Se,r!==!1&&(G.style.width=e+"px",G.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,r,i){Qe.viewport(Ae.set(e,t,r,i))},this.setScissor=function(e,t,r,i){Qe.scissor(Ee.set(e,t,r,i))},this.setScissorTest=function(e){Qe.setScissorTest(Pe=e)},this.getClearColor=function(){return xe},this.setClearColor=function(e,t){xe.set(e),we=void 0!==t?t:1,r(xe.r,xe.g,xe.b,we)},this.getClearAlpha=function(){return we},this.setClearAlpha=function(e){we=e,r(xe.r,xe.g,xe.b,we)},this.clear=function(e,t,r){var i=0;(void 0===e||e)&&(i|=Ye.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=Ye.DEPTH_BUFFER_BIT),(void 0===r||r)&&(i|=Ye.STENCIL_BUFFER_BIT),Ye.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,r,i){this.setRenderTarget(e),this.clear(t,r,i)},this.resetGLState=n,this.dispose=function(){re=[],ie=-1,J=[],ee=-1,G.removeEventListener("webglcontextlost",o,!1)},this.renderBufferImmediate=function(e,t,r){Qe.initAttributes();var i=et.get(e);e.hasPositions&&!i.position&&(i.position=Ye.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=Ye.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=Ye.createBuffer()),e.hasColors&&!i.color&&(i.color=Ye.createBuffer());var n=t.getAttributes();if(e.hasPositions&&(Ye.bindBuffer(Ye.ARRAY_BUFFER,i.position),Ye.bufferData(Ye.ARRAY_BUFFER,e.positionArray,Ye.DYNAMIC_DRAW),Qe.enableAttribute(n.position),Ye.vertexAttribPointer(n.position,3,Ye.FLOAT,!1,0,0)),e.hasNormals){if(Ye.bindBuffer(Ye.ARRAY_BUFFER,i.normal),!r.isMeshPhongMaterial&&!r.isMeshStandardMaterial&&r.shading===Cn)for(var a=0,o=3*e.count;o>a;a+=9){var s=e.normalArray,l=(s[a+0]+s[a+3]+s[a+6])/3,u=(s[a+1]+s[a+4]+s[a+7])/3,c=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=l,s[a+1]=u,s[a+2]=c,s[a+3]=l,s[a+4]=u,s[a+5]=c,s[a+6]=l,s[a+7]=u,s[a+8]=c}Ye.bufferData(Ye.ARRAY_BUFFER,e.normalArray,Ye.DYNAMIC_DRAW),Qe.enableAttribute(n.normal),Ye.vertexAttribPointer(n.normal,3,Ye.FLOAT,!1,0,0)}e.hasUvs&&r.map&&(Ye.bindBuffer(Ye.ARRAY_BUFFER,i.uv),Ye.bufferData(Ye.ARRAY_BUFFER,e.uvArray,Ye.DYNAMIC_DRAW),Qe.enableAttribute(n.uv),Ye.vertexAttribPointer(n.uv,2,Ye.FLOAT,!1,0,0)),e.hasColors&&r.vertexColors!==kn&&(Ye.bindBuffer(Ye.ARRAY_BUFFER,i.color),Ye.bufferData(Ye.ARRAY_BUFFER,e.colorArray,Ye.DYNAMIC_DRAW),Qe.enableAttribute(n.color),Ye.vertexAttribPointer(n.color,3,Ye.FLOAT,!1,0,0)),Qe.disableUnusedAttributes(),Ye.drawArrays(Ye.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,r,i,n,a,o){T(n);var s=M(e,r,n,a),l=!1,u=i.id+"_"+s.id+"_"+n.wireframe;u!==me&&(me=u,l=!0);var c=a.morphTargetInfluences;if(void 0!==c){for(var h=[],f=0,m=c.length;m>f;f++){var v=c[f];h.push([v,f])}h.sort(d),h.length>8&&(h.length=8);for(var g=i.morphAttributes,f=0,m=h.length;m>f;f++){var v=h[f];if(oe[f]=v[0],0!==v[0]){var y=v[1];n.morphTargets===!0&&g.position&&i.addAttribute("morphTarget"+f,g.position[y]),n.morphNormals===!0&&g.normal&&i.addAttribute("morphNormal"+f,g.normal[y])}else n.morphTargets===!0&&i.removeAttribute("morphTarget"+f),n.morphNormals===!0&&i.removeAttribute("morphNormal"+f)}for(var f=h.length,b=oe.length;b>f;f++)oe[f]=0;s.getUniforms().setValue(Ye,"morphTargetInfluences",oe),l=!0}var y=i.index,_=i.attributes.position,x=1;n.wireframe===!0&&(y=ut.getWireframeAttribute(i),x=2);var w;null!==y?(w=dt,w.setIndex(y)):w=pt,l&&(p(n,s,i),null!==y&&Ye.bindBuffer(Ye.ELEMENT_ARRAY_BUFFER,ut.getAttributeBuffer(y)));var S=0;null!==y?S=y.count:void 0!==_&&(S=_.count);var E=i.drawRange.start*x,P=i.drawRange.count*x,A=null!==o?o.start*x:0,C=null!==o?o.count*x:1/0,O=Math.max(E,A),k=Math.min(S,E+P,A+C)-1,L=Math.max(0,k-O+1);if(0!==L){if(a.isMesh)if(n.wireframe===!0)Qe.setLineWidth(n.wireframeLinewidth*t()),w.setMode(Ye.LINES);else switch(a.drawMode){case Mo:w.setMode(Ye.TRIANGLES);break;case So:w.setMode(Ye.TRIANGLE_STRIP);break;case Eo:w.setMode(Ye.TRIANGLE_FAN)}else if(a.isLine){var R=n.linewidth;void 0===R&&(R=1),Qe.setLineWidth(R*t()),w.setMode(a.isLineSegments?Ye.LINES:Ye.LINE_STRIP)}else a.isPoints&&w.setMode(Ye.POINTS);i&&i.isInstancedBufferGeometry?i.maxInstancedCount>0&&w.renderInstances(i,O,L):w.render(O,L)}},this.render=function(e,t,i,n){if(void 0!==t&&t.isCamera!==!0)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");me="",de=-1,ve=null,e.autoUpdate===!0&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),ze.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Re.setFromMatrix(ze),Z.length=0,ee=-1,ie=-1,se.length=0,le.length=0,Ve=this.localClippingEnabled,je=Ge.init(this.clippingPlanes,Ve,t),_(e,t),J.length=ee+1,re.length=ie+1,ue.sortObjects===!0&&(J.sort(f),re.sort(m)),je&&Ge.beginShadows(),D(Z),bt.render(e,t),F(Z,t),je&&Ge.endShadows(),Xe.calls=0,Xe.vertices=0,Xe.faces=0,Xe.points=0,void 0===i&&(i=null),this.setRenderTarget(i);var a=e.background;if(null===a?r(xe.r,xe.g,xe.b,we):a&&a.isColor&&(r(a.r,a.g,a.b,1),n=!0),(this.autoClear||n)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),a&&a.isCubeTexture?(mt.projectionMatrix.copy(t.projectionMatrix),mt.matrixWorld.extractRotation(t.matrixWorld),mt.matrixWorldInverse.getInverse(mt.matrixWorld),yt.material.uniforms.tCube.value=a,yt.modelViewMatrix.multiplyMatrices(mt.matrixWorldInverse,yt.matrixWorld),ut.update(yt),ue.renderBufferDirect(mt,null,yt.geometry,yt.material,yt,null)):a&&a.isTexture&&(vt.material.map=a,ut.update(vt),ue.renderBufferDirect(ft,null,vt.geometry,vt.material,vt,null)),e.overrideMaterial){var o=e.overrideMaterial;x(J,e,t,o),x(re,e,t,o)}else Qe.setBlending(In),x(J,e,t),x(re,e,t);_t.render(e,t),xt.render(e,t,be),i&&lt.updateRenderTargetMipmap(i),Qe.setDepthTest(!0),Qe.setDepthWrite(!0),Qe.setColorWrite(!0)},this.setFaceCulling=function(e,t){Qe.setCullFace(e),Qe.setFlipSided(t===xn)},this.allocTextureUnit=N,this.setTexture2D=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),lt.setTexture2D(t,r)}}(),this.setTexture=function(){var e=!1;return function(t,r){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),
e=!0),lt.setTexture2D(t,r)}}(),this.setTextureCube=function(){var e=!1;return function(t,r){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?lt.setTextureCube(t,r):lt.setTextureCubeDynamic(t,r)}}(),this.getCurrentRenderTarget=function(){return he},this.setRenderTarget=function(e){he=e,e&&void 0===et.get(e).__webglFramebuffer&&lt.setupRenderTarget(e);var t,r=e&&e.isWebGLRenderTargetCube;if(e){var i=et.get(e);t=r?i.__webglFramebuffer[e.activeCubeFace]:i.__webglFramebuffer,ge.copy(e.scissor),ye=e.scissorTest,be.copy(e.viewport)}else t=null,ge.copy(Ee).multiplyScalar(Se),ye=Pe,be.copy(Ae).multiplyScalar(Se);if(pe!==t&&(Ye.bindFramebuffer(Ye.FRAMEBUFFER,t),pe=t),Qe.scissor(ge),Qe.setScissorTest(ye),Qe.viewport(be),r){var n=et.get(e.texture);Ye.framebufferTexture2D(Ye.FRAMEBUFFER,Ye.COLOR_ATTACHMENT0,Ye.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,n.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,r,i,n,a){if((e&&e.isWebGLRenderTarget)===!1)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var o=et.get(e).__webglFramebuffer;if(o){var s=!1;o!==pe&&(Ye.bindFramebuffer(Ye.FRAMEBUFFER,o),s=!0);try{var l=e.texture,u=l.format,c=l.type;if(u!==Ja&&B(u)!==Ye.getParameter(Ye.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(c===Ga||B(c)===Ye.getParameter(Ye.IMPLEMENTATION_COLOR_READ_TYPE)||c===Wa&&($e.get("OES_texture_float")||$e.get("WEBGL_color_buffer_float"))||c===Xa&&$e.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Ye.checkFramebufferStatus(Ye.FRAMEBUFFER)===Ye.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-i&&r>=0&&r<=e.height-n&&Ye.readPixels(t,r,i,n,B(u),B(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&Ye.bindFramebuffer(Ye.FRAMEBUFFER,pe)}}}}function ut(e,t){this.name="",this.color=new X(e),this.density=void 0!==t?t:25e-5}function ct(e,t,r){this.name="",this.color=new X(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3}function ht(){ue.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function pt(e,t,r,i,n){ue.call(this),this.lensFlares=[],this.positionScreen=new u,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,r,i,n)}function dt(e){$.call(this),this.type="SpriteMaterial",this.color=new X(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function ft(e){ue.call(this),this.type="Sprite",this.material=void 0!==e?e:new dt}function mt(){ue.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function vt(e,t,r,n,a,o,s,l,u,c,h,p){i.call(this,null,o,s,l,u,c,n,a,h,p),this.image={data:e,width:t,height:r},this.magFilter=void 0!==u?u:La,this.minFilter=void 0!==c?c:La,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function gt(e,t,r){if(this.useVertexTexture=void 0!==r?r:!0,this.identityMatrix=new c,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var i=Math.sqrt(4*this.bones.length);i=No.nextPowerOfTwo(Math.ceil(i)),i=Math.max(i,4),this.boneTextureWidth=i,this.boneTextureHeight=i,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new vt(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,Ja,Wa)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var n=0,a=this.bones.length;a>n;n++)this.boneInverses.push(new c)}}function yt(e){ue.call(this),this.type="Bone",this.skin=e}function bt(e,t,r){Oe.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new c,this.bindMatrixInverse=new c;var i=[];if(this.geometry&&void 0!==this.geometry.bones){for(var n,a,o=0,s=this.geometry.bones.length;s>o;++o)a=this.geometry.bones[o],n=new yt(this),i.push(n),n.name=a.name,n.position.fromArray(a.pos),n.quaternion.fromArray(a.rotq),void 0!==a.scl&&n.scale.fromArray(a.scl);for(var o=0,s=this.geometry.bones.length;s>o;++o)a=this.geometry.bones[o],-1!==a.parent&&null!==a.parent&&void 0!==i[a.parent]?i[a.parent].add(i[o]):this.add(i[o])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new gt(i,void 0,r),this.matrixWorld)}function _t(e){$.call(this),this.type="LineBasicMaterial",this.color=new X(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function xt(e,t,r){return 1===r?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new wt(e,t)):(ue.call(this),this.type="Line",this.geometry=void 0!==e?e:new Ce,void(this.material=void 0!==t?t:new _t({color:16777215*Math.random()})))}function wt(e,t){xt.call(this,e,t),this.type="LineSegments"}function Tt(e){$.call(this),this.type="PointsMaterial",this.color=new X(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function Mt(e,t){ue.call(this),this.type="Points",this.geometry=void 0!==e?e:new Ce,this.material=void 0!==t?t:new Tt({color:16777215*Math.random()})}function St(){ue.call(this),this.type="Group"}function Et(e,t,r,n,a,o,s,l,u){function c(){requestAnimationFrame(c),e.readyState>=e.HAVE_CURRENT_DATA&&(h.needsUpdate=!0)}i.call(this,e,t,r,n,a,o,s,l,u),this.generateMipmaps=!1;var h=this;c()}function Pt(e,t,r,n,a,o,s,l,u,c,h,p){i.call(this,null,o,s,l,u,c,n,a,h,p),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function At(e,t,r,n,a,o,s,l,u){i.call(this,e,t,r,n,a,o,s,l,u),this.needsUpdate=!0}function Ct(e,t,r,n,a,o,s,l,u,c){if(c=void 0!==c?c:io,c!==io&&c!==no)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i.call(this,null,n,a,o,s,l,c,r,u),this.image={width:e,height:t},this.type=void 0!==r?r:Ua,this.magFilter=void 0!==s?s:La,this.minFilter=void 0!==l?l:La,this.flipY=!1,this.generateMipmaps=!1}function Ot(e){function t(e,t){return e-t}Ce.call(this);var r=[0,0],i={},n=["a","b","c"];if(e&&e.isGeometry){for(var a=e.vertices,o=e.faces,s=0,l=new Uint32Array(6*o.length),u=0,c=o.length;c>u;u++)for(var h=o[u],p=0;3>p;p++){r[0]=h[n[p]],r[1]=h[n[(p+1)%3]],r.sort(t);var d=r.toString();void 0===i[d]&&(l[2*s]=r[0],l[2*s+1]=r[1],i[d]=!0,s++)}for(var f=new Float32Array(2*s*3),u=0,c=s;c>u;u++)for(var p=0;2>p;p++){var m=a[l[2*u+p]],v=6*u+3*p;f[v+0]=m.x,f[v+1]=m.y,f[v+2]=m.z}this.addAttribute("position",new me(f,3))}else if(e&&e.isBufferGeometry)if(null!==e.index){var g=e.index.array,a=e.attributes.position,y=e.groups,s=0;0===y.length&&e.addGroup(0,g.length);for(var l=new Uint32Array(2*g.length),b=0,_=y.length;_>b;++b)for(var x=y[b],w=x.start,T=x.count,u=w,M=w+T;M>u;u+=3)for(var p=0;3>p;p++){r[0]=g[u+p],r[1]=g[u+(p+1)%3],r.sort(t);var d=r.toString();void 0===i[d]&&(l[2*s]=r[0],l[2*s+1]=r[1],i[d]=!0,s++)}for(var f=new Float32Array(2*s*3),u=0,c=s;c>u;u++)for(var p=0;2>p;p++){var v=6*u+3*p,S=l[2*u+p];f[v+0]=a.getX(S),f[v+1]=a.getY(S),f[v+2]=a.getZ(S)}this.addAttribute("position",new me(f,3))}else{for(var a=e.attributes.position.array,s=a.length/3,E=s/3,f=new Float32Array(2*s*3),u=0,c=E;c>u;u++)for(var p=0;3>p;p++){var v=18*u+6*p,P=9*u+3*p;f[v+0]=a[P],f[v+1]=a[P+1],f[v+2]=a[P+2];var S=9*u+3*((p+1)%3);f[v+3]=a[S],f[v+4]=a[S+1],f[v+5]=a[S+2]}this.addAttribute("position",new me(f,3))}}function kt(e,t,r){Ce.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var i,n,a,o,s,l=[],u=[],c=t+1;for(i=0;r>=i;i++)for(s=i/r,n=0;t>=n;n++)o=n/t,a=e(o,s),l.push(a.x,a.y,a.z),u.push(o,s);var h,p,d,f,m=[];for(i=0;r>i;i++)for(n=0;t>n;n++)h=i*c+n,p=i*c+n+1,d=(i+1)*c+n+1,f=(i+1)*c+n,m.push(h,p,f),m.push(p,d,f);this.setIndex((m.length>65535?we:_e)(m,1)),this.addAttribute("position",Te(l,3)),this.addAttribute("uv",Te(u,2)),this.computeVertexNormals()}function Lt(e,t,r){Ee.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new kt(e,t,r)),this.mergeVertices()}function Rt(e,t,i,n){function a(e){for(var r=new u,i=new u,n=new u,a=0;a<t.length;a+=3)p(t[a+0],r),p(t[a+1],i),p(t[a+2],n),o(r,i,n,e)}function o(e,t,r,i){var n,a,o=Math.pow(2,i),s=[];for(n=0;o>=n;n++){s[n]=[];var l=e.clone().lerp(r,n/o),u=t.clone().lerp(r,n/o),c=o-n;for(a=0;c>=a;a++)s[n][a]=0===a&&n===o?l:l.clone().lerp(u,a/c)}for(n=0;o>n;n++)for(a=0;2*(o-n)-1>a;a++){var p=Math.floor(a/2);a%2===0?(h(s[n][p+1]),h(s[n+1][p]),h(s[n][p])):(h(s[n][p+1]),h(s[n+1][p+1]),h(s[n+1][p]))}}function s(e){for(var t=new u,r=0;r<g.length;r+=3)t.x=g[r+0],t.y=g[r+1],t.z=g[r+2],t.normalize().multiplyScalar(e),g[r+0]=t.x,g[r+1]=t.y,g[r+2]=t.z}function l(){for(var e=new u,t=0;t<g.length;t+=3){e.x=g[t+0],e.y=g[t+1],e.z=g[t+2];var r=m(e)/2/Math.PI+.5,i=v(e)/Math.PI+.5;y.push(r,1-i)}d(),c()}function c(){for(var e=0;e<y.length;e+=6){var t=y[e+0],r=y[e+2],i=y[e+4],n=Math.max(t,r,i),a=Math.min(t,r,i);n>.9&&.1>a&&(.2>t&&(y[e+0]+=1),.2>r&&(y[e+2]+=1),.2>i&&(y[e+4]+=1))}}function h(e){g.push(e.x,e.y,e.z)}function p(t,r){var i=3*t;r.x=e[i+0],r.y=e[i+1],r.z=e[i+2]}function d(){for(var e=new u,t=new u,i=new u,n=new u,a=new r,o=new r,s=new r,l=0,c=0;l<g.length;l+=9,c+=6){e.set(g[l+0],g[l+1],g[l+2]),t.set(g[l+3],g[l+4],g[l+5]),i.set(g[l+6],g[l+7],g[l+8]),a.set(y[c+0],y[c+1]),o.set(y[c+2],y[c+3]),s.set(y[c+4],y[c+5]),n.copy(e).add(t).add(i).divideScalar(3);var h=m(n);f(a,c+0,e,h),f(o,c+2,t,h),f(s,c+4,i,h)}}function f(e,t,r,i){0>i&&1===e.x&&(y[t]=e.x-1),0===r.x&&0===r.z&&(y[t]=i/2/Math.PI+.5)}function m(e){return Math.atan2(e.z,-e.x)}function v(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}Ce.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},i=i||1,n=n||0;var g=[],y=[];a(n),s(i),l(),this.addAttribute("position",Te(g,3)),this.addAttribute("normal",Te(g.slice(),3)),this.addAttribute("uv",Te(y,2)),this.normalizeNormals(),this.boundingSphere=new te(new u,i)}function It(e,t){var r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];Rt.call(this,r,i,e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Dt(e,t){Ee.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new It(e,t)),this.mergeVertices()}function Ft(e,t){var r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Rt.call(this,r,i,e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Nt(e,t){Ee.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ft(e,t)),this.mergeVertices()}function Bt(e,t){var r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Rt.call(this,i,n,e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Gt(e,t){Ee.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Bt(e,t)),this.mergeVertices()}function jt(e,t){var r=(1+Math.sqrt(5))/2,i=1/r,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Rt.call(this,n,a,e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Vt(e,t){Ee.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new jt(e,t)),this.mergeVertices()}function Ut(e,t,r,i){Ee.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i},this.fromBufferGeometry(new Rt(e,t,r,i)),this.mergeVertices()}function zt(e,t,i,n,a){function o(){for(p=0;t>p;p++)s(p);s(a===!1?t:0),c(),l()}function s(r){var a=e.getPointAt(r/t),o=h.normals[r],s=h.binormals[r];for(d=0;n>=d;d++){var l=d/n*Math.PI*2,u=Math.sin(l),c=-Math.cos(l);m.x=c*o.x+u*s.x,m.y=c*o.y+u*s.y,m.z=c*o.z+u*s.z,m.normalize(),y.push(m.x,m.y,m.z),f.x=a.x+i*m.x,f.y=a.y+i*m.y,f.z=a.z+i*m.z,g.push(f.x,f.y,f.z)}}function l(){for(d=1;t>=d;d++)for(p=1;n>=p;p++){var e=(n+1)*(d-1)+(p-1),r=(n+1)*d+(p-1),i=(n+1)*d+p,a=(n+1)*(d-1)+p;_.push(e,r,a),_.push(r,i,a)}}function c(){for(p=0;t>=p;p++)for(d=0;n>=d;d++)v.x=p/t,v.y=d/n,b.push(v.x,v.y)}Ce.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:a},t=t||64,i=i||1,n=n||8,a=a||!1;var h=e.computeFrenetFrames(t,a);this.tangents=h.tangents,this.normals=h.normals,this.binormals=h.binormals;var p,d,f=new u,m=new u,v=new r,g=[],y=[],b=[],_=[];o(),this.setIndex((_.length>65535?we:_e)(_,1)),this.addAttribute("position",Te(g,3)),this.addAttribute("normal",Te(y,3)),this.addAttribute("uv",Te(b,2))}function Ht(e,t,r,i,n,a){Ee.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:n},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new zt(e,t,r,i,n);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Wt(e,t,i,n,a,o){function s(e,t,r,i,n){var a=Math.cos(e),o=Math.sin(e),s=r/t*e,l=Math.cos(s);n.x=i*(2+l)*.5*a,n.y=i*(2+l)*o*.5,n.z=i*Math.sin(s)*.5}Ce.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:a,q:o},e=e||100,t=t||40,i=Math.floor(i)||64,n=Math.floor(n)||8,a=a||2,o=o||3;var l,c,h=(n+1)*(i+1),p=n*i*2*3,d=new me(new(p>65535?Uint32Array:Uint16Array)(p),1),f=new me(new Float32Array(3*h),3),m=new me(new Float32Array(3*h),3),v=new me(new Float32Array(2*h),2),g=0,y=0,b=new u,_=new u,x=new r,w=new u,T=new u,M=new u,S=new u,E=new u;for(l=0;i>=l;++l){var P=l/i*a*Math.PI*2;for(s(P,a,o,e,w),s(P+.01,a,o,e,T),S.subVectors(T,w),E.addVectors(T,w),M.crossVectors(S,E),E.crossVectors(M,S),M.normalize(),E.normalize(),c=0;n>=c;++c){var A=c/n*Math.PI*2,C=-t*Math.cos(A),O=t*Math.sin(A);b.x=w.x+(C*E.x+O*M.x),b.y=w.y+(C*E.y+O*M.y),b.z=w.z+(C*E.z+O*M.z),f.setXYZ(g,b.x,b.y,b.z),_.subVectors(b,w).normalize(),m.setXYZ(g,_.x,_.y,_.z),x.x=l/i,x.y=c/n,v.setXY(g,x.x,x.y),g++}}for(c=1;i>=c;c++)for(l=1;n>=l;l++){var k=(n+1)*(c-1)+(l-1),L=(n+1)*c+(l-1),R=(n+1)*c+l,I=(n+1)*(c-1)+l;d.setX(y,k),y++,d.setX(y,L),y++,d.setX(y,I),y++,d.setX(y,L),y++,d.setX(y,R),y++,d.setX(y,I),y++}this.setIndex(d),this.addAttribute("position",f),this.addAttribute("normal",m),this.addAttribute("uv",v)}function Xt(e,t,r,i,n,a,o){Ee.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Wt(e,t,r,i,n,a)),this.mergeVertices()}function Yt(e,t,r,i,n){Ce.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:n},e=e||100,t=t||40,r=Math.floor(r)||8,i=Math.floor(i)||6,n=n||2*Math.PI;var a,o,s=(r+1)*(i+1),l=r*i*2*3,c=new(l>65535?Uint32Array:Uint16Array)(l),h=new Float32Array(3*s),p=new Float32Array(3*s),d=new Float32Array(2*s),f=0,m=0,v=0,g=new u,y=new u,b=new u;for(a=0;r>=a;a++)for(o=0;i>=o;o++){var _=o/i*n,x=a/r*Math.PI*2;y.x=(e+t*Math.cos(x))*Math.cos(_),y.y=(e+t*Math.cos(x))*Math.sin(_),y.z=t*Math.sin(x),h[f]=y.x,h[f+1]=y.y,h[f+2]=y.z,g.x=e*Math.cos(_),g.y=e*Math.sin(_),b.subVectors(y,g).normalize(),p[f]=b.x,p[f+1]=b.y,p[f+2]=b.z,d[m]=o/i,d[m+1]=a/r,f+=3,m+=2}for(a=1;r>=a;a++)for(o=1;i>=o;o++){var w=(i+1)*a+o-1,T=(i+1)*(a-1)+o-1,M=(i+1)*(a-1)+o,S=(i+1)*a+o;c[v]=w,c[v+1]=T,c[v+2]=S,c[v+3]=T,c[v+4]=M,c[v+5]=S,v+=6}this.setIndex(new me(c,1)),this.addAttribute("position",new me(h,3)),this.addAttribute("normal",new me(p,3)),this.addAttribute("uv",new me(d,2))}function qt(e,t,r,i,n){Ee.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:n},this.fromBufferGeometry(new Yt(e,t,r,i,n))}function Kt(e,t){return"undefined"==typeof e?void(e=[]):(Ee.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),void this.computeFaceNormals())}function $t(e,t){t=t||{};var r=t.font;if((r&&r.isFont)===!1)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Ee;var i=r.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Kt.call(this,i,t),this.type="TextGeometry"}function Zt(e,t,r,i,n,a,o){Ce.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:a,thetaLength:o},e=e||50,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),i=void 0!==i?i:0,n=void 0!==n?n:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;for(var s=a+o,l=(t+1)*(r+1),c=new me(new Float32Array(3*l),3),h=new me(new Float32Array(3*l),3),p=new me(new Float32Array(2*l),2),d=0,f=[],m=new u,v=0;r>=v;v++){for(var g=[],y=v/r,b=0;t>=b;b++){var _=b/t,x=-e*Math.cos(i+_*n)*Math.sin(a+y*o),w=e*Math.cos(a+y*o),T=e*Math.sin(i+_*n)*Math.sin(a+y*o);m.set(x,w,T).normalize(),c.setXYZ(d,x,w,T),h.setXYZ(d,m.x,m.y,m.z),p.setXY(d,_,1-y),g.push(d),d++}f.push(g)}for(var M=[],v=0;r>v;v++)for(var b=0;t>b;b++){var S=f[v][b+1],E=f[v][b],P=f[v+1][b],A=f[v+1][b+1];(0!==v||a>0)&&M.push(S,E,A),(v!==r-1||s<Math.PI)&&M.push(E,P,A)}this.setIndex(new(c.count>65535?we:_e)(M,1)),this.addAttribute("position",c),this.addAttribute("normal",h),this.addAttribute("uv",p),this.boundingSphere=new te(new u,e)}function Qt(e,t,r,i,n,a,o){Ee.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Zt(e,t,r,i,n,a,o))}function Jt(e,t,i,n,a,o){Ce.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:a,thetaLength:o},e=e||20,t=t||50,a=void 0!==a?a:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8,n=void 0!==n?Math.max(1,n):1;var s,l,c,h=(i+1)*(n+1),p=i*n*2*3,d=new me(new(p>65535?Uint32Array:Uint16Array)(p),1),f=new me(new Float32Array(3*h),3),m=new me(new Float32Array(3*h),3),v=new me(new Float32Array(2*h),2),g=0,y=0,b=e,_=(t-e)/n,x=new u,w=new r;for(l=0;n>=l;l++){for(c=0;i>=c;c++)s=a+c/i*o,x.x=b*Math.cos(s),x.y=b*Math.sin(s),f.setXYZ(g,x.x,x.y,x.z),m.setXYZ(g,0,0,1),w.x=(x.x/t+1)/2,w.y=(x.y/t+1)/2,v.setXY(g,w.x,w.y),g++;b+=_}for(l=0;n>l;l++){var T=l*(i+1);for(c=0;i>c;c++){s=c+T;var M=s,S=s+i+1,E=s+i+2,P=s+1;d.setX(y,M),y++,d.setX(y,S),y++,d.setX(y,E),y++,d.setX(y,M),y++,d.setX(y,E),y++,d.setX(y,P),y++}}this.setIndex(d),this.addAttribute("position",f),this.addAttribute("normal",m),this.addAttribute("uv",v)}function er(e,t,r,i,n,a){Ee.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:n,thetaLength:a},this.fromBufferGeometry(new Jt(e,t,r,i,n,a))}function tr(e,t,r,i){Ee.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i},this.fromBufferGeometry(new Le(e,t,r,i))}function rr(e,t,i,n){Ce.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t)||12,i=i||0,n=n||2*Math.PI,n=No.clamp(n,0,2*Math.PI);var a,o,s,l=(t+1)*e.length,c=t*e.length*2*3,h=new me(new(c>65535?Uint32Array:Uint16Array)(c),1),p=new me(new Float32Array(3*l),3),d=new me(new Float32Array(2*l),2),f=0,m=0,v=1/t,g=new u,y=new r;for(o=0;t>=o;o++){var b=i+o*v*n,_=Math.sin(b),x=Math.cos(b);for(s=0;s<=e.length-1;s++)g.x=e[s].x*_,g.y=e[s].y,g.z=e[s].x*x,p.setXYZ(f,g.x,g.y,g.z),y.x=o/t,y.y=s/(e.length-1),d.setXY(f,y.x,y.y),f++}for(o=0;t>o;o++)for(s=0;s<e.length-1;s++){a=s+o*e.length;var w=a,T=a+e.length,M=a+e.length+1,S=a+1;h.setX(m,w),m++,h.setX(m,T),m++,h.setX(m,S),m++,h.setX(m,T),m++,h.setX(m,M),m++,h.setX(m,S),m++}if(this.setIndex(h),this.addAttribute("position",p),this.addAttribute("uv",d),this.computeVertexNormals(),n===2*Math.PI){var E=this.attributes.normal.array,P=new u,A=new u,C=new u;for(a=t*e.length*3,o=0,s=0;o<e.length;o++,s+=3)P.x=E[s+0],P.y=E[s+1],P.z=E[s+2],A.x=E[a+s+0],A.y=E[a+s+1],A.z=E[a+s+2],C.addVectors(P,A).normalize(),E[s+0]=E[a+s+0]=C.x,E[s+1]=E[a+s+1]=C.y,E[s+2]=E[a+s+2]=C.z}}function ir(e,t,r,i){Ee.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},this.fromBufferGeometry(new rr(e,t,r,i)),this.mergeVertices()}function nr(e,t){Ee.call(this),this.type="ShapeGeometry",Array.isArray(e)===!1&&(e=[e]),this.addShapeList(e,t),this.computeFaceNormals()}function ar(e,t){function r(e,t){return e-t}Ce.call(this),t=void 0!==t?t:1;var i,n=Math.cos(No.DEG2RAD*t),a=[0,0],o={},s=["a","b","c"];e&&e.isBufferGeometry?(i=new Ee,i.fromBufferGeometry(e)):i=e.clone(),i.mergeVertices(),i.computeFaceNormals();for(var l=i.vertices,u=i.faces,c=0,h=u.length;h>c;c++)for(var p=u[c],d=0;3>d;d++){a[0]=p[s[d]],a[1]=p[s[(d+1)%3]],a.sort(r);var f=a.toString();void 0===o[f]?o[f]={vert1:a[0],vert2:a[1],face1:c,face2:void 0}:o[f].face2=c}var m=[];for(var f in o){var v=o[f];if(void 0===v.face2||u[v.face1].normal.dot(u[v.face2].normal)<=n){var g=l[v.vert1];m.push(g.x),m.push(g.y),m.push(g.z),g=l[v.vert2],m.push(g.x),m.push(g.y),m.push(g.z)}}this.addAttribute("position",new me(new Float32Array(m),3))}function or(e,t,i,n,a,o,s,l){function c(){var e=(n+1)*(a+1);return o===!1&&(e+=(n+1)*m+n*m),e}function h(){var e=n*a*2*3;return o===!1&&(e+=n*m*3),e}function p(){var r,o,c=new u,h=new u,p=0,d=(t-e)/i;for(o=0;a>=o;o++){var m=[],v=o/a,g=v*(t-e)+e;for(r=0;n>=r;r++){var P=r/n,A=P*l+s,C=Math.sin(A),O=Math.cos(A);h.x=g*C,h.y=-v*i+S,h.z=g*O,b.setXYZ(w,h.x,h.y,h.z),c.set(C,d,O).normalize(),_.setXYZ(w,c.x,c.y,c.z),x.setXY(w,P,1-v),m.push(w),w++}M.push(m)}for(r=0;n>r;r++)for(o=0;a>o;o++){var k=M[o][r],L=M[o+1][r],R=M[o+1][r+1],I=M[o][r+1];y.setX(T,k),T++,y.setX(T,L),T++,y.setX(T,I),T++,y.setX(T,L),T++,y.setX(T,R),T++,y.setX(T,I),T++,p+=6}f.addGroup(E,p,0),E+=p}function d(i){var a,o,c,h=new r,p=new u,d=0,m=i===!0?e:t,v=i===!0?1:-1;for(o=w,a=1;n>=a;a++)b.setXYZ(w,0,S*v,0),_.setXYZ(w,0,v,0),h.x=.5,h.y=.5,x.setXY(w,h.x,h.y),w++;for(c=w,a=0;n>=a;a++){var g=a/n,M=g*l+s,P=Math.cos(M),A=Math.sin(M);p.x=m*A,p.y=S*v,p.z=m*P,b.setXYZ(w,p.x,p.y,p.z),_.setXYZ(w,0,v,0),h.x=.5*P+.5,h.y=.5*A*v+.5,x.setXY(w,h.x,h.y),w++}for(a=0;n>a;a++){var C=o+a,O=c+a;i===!0?(y.setX(T,O),T++,y.setX(T,O+1),T++,y.setX(T,C),T++):(y.setX(T,O+1),T++,y.setX(T,O),T++,y.setX(T,C),T++),d+=3}f.addGroup(E,d,i===!0?1:2),E+=d}Ce.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:l};var f=this;e=void 0!==e?e:20,t=void 0!==t?t:20,i=void 0!==i?i:100,n=Math.floor(n)||8,a=Math.floor(a)||1,o=void 0!==o?o:!1,s=void 0!==s?s:0,l=void 0!==l?l:2*Math.PI;var m=0;o===!1&&(e>0&&m++,t>0&&m++);var v=c(),g=h(),y=new me(new(g>65535?Uint32Array:Uint16Array)(g),1),b=new me(new Float32Array(3*v),3),_=new me(new Float32Array(3*v),3),x=new me(new Float32Array(2*v),2),w=0,T=0,M=[],S=i/2,E=0;p(),o===!1&&(e>0&&d(!0),t>0&&d(!1)),this.setIndex(y),this.addAttribute("position",b),this.addAttribute("normal",_),this.addAttribute("uv",x)}function sr(e,t,r,i,n,a,o,s){Ee.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new or(e,t,r,i,n,a,o,s)),this.mergeVertices()}function lr(e,t,r,i,n,a,o){sr.call(this,0,e,t,r,i,n,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:a,thetaLength:o}}function ur(e,t,r,i,n,a,o){or.call(this,0,e,t,r,i,n,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:a,thetaLength:o}}function cr(e,t,r,i){Ce.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},e=e||50,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var n=t+2,a=new Float32Array(3*n),o=new Float32Array(3*n),s=new Float32Array(2*n);o[2]=1,s[0]=.5,s[1]=.5;for(var l=0,c=3,h=2;t>=l;l++,c+=3,h+=2){var p=r+l/t*i;a[c]=e*Math.cos(p),a[c+1]=e*Math.sin(p),o[c+2]=1,s[h]=(a[c]/e+1)/2,s[h+1]=(a[c+1]/e+1)/2}for(var d=[],c=1;t>=c;c++)d.push(c,c+1,0);this.setIndex(new me(new Uint16Array(d),1)),this.addAttribute("position",new me(a,3)),this.addAttribute("normal",new me(o,3)),this.addAttribute("uv",new me(s,2)),this.boundingSphere=new te(new u,e)}function hr(e,t,r,i){Ee.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},this.fromBufferGeometry(new cr(e,t,r,i))}function pr(e,t,r,i,n,a){Ee.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:a},this.fromBufferGeometry(new ke(e,t,r,i,n,a)),this.mergeVertices()}function dr(){Q.call(this,{uniforms:Ho.merge([Hl.lights,{opacity:{value:1}}]),vertexShader:Ul.shadow_vert,fragmentShader:Ul.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}})}function fr(e){Q.call(this,e),this.type="RawShaderMaterial"}function mr(e){this.uuid=No.generateUUID(),this.type="MultiMaterial",this.materials=e instanceof Array?e:[],this.visible=!0}function vr(e){$.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new X(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function gr(e){vr.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function yr(e){$.call(this),this.type="MeshPhongMaterial",this.color=new X(16777215),this.specular=new X(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ha,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function br(e){$.call(this,e),this.type="MeshNormalMaterial",this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.morphTargets=!1,this.setValues(e)}function _r(e){$.call(this),this.type="MeshLambertMaterial",this.color=new X(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ha,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function xr(e){$.call(this),this.type="LineDashedMaterial",this.color=new X(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}function wr(e,t,r){var i=this,n=!1,a=0,o=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){o++,n===!1&&void 0!==i.onStart&&i.onStart(e,a,o),n=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(n=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)}}function Tr(e){this.manager=void 0!==e?e:eu}function Mr(e){this.manager=void 0!==e?e:eu,this._parser=null}function Sr(e){this.manager=void 0!==e?e:eu,this._parser=null}function Er(e){this.manager=void 0!==e?e:eu}function Pr(e){this.manager=void 0!==e?e:eu}function Ar(e){this.manager=void 0!==e?e:eu}function Cr(e,t){ue.call(this),this.type="Light",this.color=new X(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Or(e,t,r){Cr.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ue.DefaultUp),this.updateMatrix(),this.groundColor=new X(t)}function kr(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new r(512,512),this.map=null,this.matrix=new c}function Lr(){kr.call(this,new Ie(50,1,.5,500))}function Rr(e,t,r,i,n,a){Cr.call(this,e,t),this.type="SpotLight",this.position.copy(ue.DefaultUp),this.updateMatrix(),this.target=new ue,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==n?n:0,this.decay=void 0!==a?a:1,this.shadow=new Lr}function Ir(e,t,r,i){Cr.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==i?i:1,this.shadow=new kr(new Ie(90,1,.5,500))}function Dr(){kr.call(this,new De(-5,5,5,-5,.5,500))}function Fr(e,t){Cr.call(this,e,t),this.type="DirectionalLight",this.position.copy(ue.DefaultUp),this.updateMatrix(),this.target=new ue,this.shadow=new Dr}function Nr(e,t){Cr.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Br(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r}function Gr(e,t,r,i){Br.call(this,e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function jr(e,t,r,i){Br.call(this,e,t,r,i)}function Vr(e,t,r,i){Br.call(this,e,t,r,i)}function Ur(e,t,r,i){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=ru.convertArray(t,this.TimeBufferType),this.values=ru.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function zr(e,t,r,i){
Ur.call(this,e,t,r,i)}function Hr(e,t,r,i){Br.call(this,e,t,r,i)}function Wr(e,t,r,i){Ur.call(this,e,t,r,i)}function Xr(e,t,r,i){Ur.call(this,e,t,r,i)}function Yr(e,t,r,i){Ur.call(this,e,t,r,i)}function qr(e,t,r){Ur.call(this,e,t,r)}function Kr(e,t,r,i){Ur.call(this,e,t,r,i)}function $r(){Ur.apply(this,arguments)}function Zr(e,t,r){this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.uuid=No.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Qr(e){this.manager=void 0!==e?e:eu,this.textures={}}function Jr(e){this.manager=void 0!==e?e:eu}function ei(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function ti(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:eu,this.withCredentials=!1}function ri(e){this.manager=void 0!==e?e:eu,this.texturePath=""}function ii(){}function ni(e,t){this.v1=e,this.v2=t}function ai(){this.curves=[],this.autoClose=!1}function oi(e,t,r,i,n,a,o,s){this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s||0}function si(e){this.points=void 0===e?[]:e}function li(e,t,r,i){this.v0=e,this.v1=t,this.v2=r,this.v3=i}function ui(e,t,r){this.v0=e,this.v1=t,this.v2=r}function ci(){hi.apply(this,arguments),this.holes=[]}function hi(e){ai.call(this),this.currentPoint=new r,e&&this.fromPoints(e)}function pi(){this.subPaths=[],this.currentPath=null}function di(e){this.data=e}function fi(e){this.manager=void 0!==e?e:eu}function mi(){return void 0===ou&&(ou=new(window.AudioContext||window.webkitAudioContext)),ou}function vi(e){this.manager=void 0!==e?e:eu}function gi(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ie,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ie,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function yi(e,t,r){ue.call(this),this.type="CubeCamera";var i=90,n=1,a=new Ie(i,n,e,t);a.up.set(0,-1,0),a.lookAt(new u(1,0,0)),this.add(a);var o=new Ie(i,n,e,t);o.up.set(0,-1,0),o.lookAt(new u(-1,0,0)),this.add(o);var l=new Ie(i,n,e,t);l.up.set(0,0,1),l.lookAt(new u(0,1,0)),this.add(l);var c=new Ie(i,n,e,t);c.up.set(0,0,-1),c.lookAt(new u(0,-1,0)),this.add(c);var h=new Ie(i,n,e,t);h.up.set(0,-1,0),h.lookAt(new u(0,0,1)),this.add(h);var p=new Ie(i,n,e,t);p.up.set(0,-1,0),p.lookAt(new u(0,0,-1)),this.add(p);var d={format:Qa,magFilter:Da,minFilter:Da};this.renderTarget=new s(r,r,d),this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=this.renderTarget,i=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,r.activeCubeFace=0,e.render(t,a,r),r.activeCubeFace=1,e.render(t,o,r),r.activeCubeFace=2,e.render(t,l,r),r.activeCubeFace=3,e.render(t,c,r),r.activeCubeFace=4,e.render(t,h,r),r.texture.generateMipmaps=i,r.activeCubeFace=5,e.render(t,p,r),e.setRenderTarget(null)}}function bi(){ue.call(this),this.type="AudioListener",this.context=mi(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function _i(e){ue.call(this),this.type="Audio",this.context=e.context,this.source=this.context.createBufferSource(),this.source.onended=this.onEnded.bind(this),this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function xi(e){_i.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function wi(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Ti(e,t,r){this.binding=e,this.valueSize=r;var i,n=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":n=Array,i=this._select;break;default:i=this._lerp}this.buffer=new n(4*r),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Mi(e,t,r){this.path=t,this.parsedPath=r||Mi.parseTrackName(t),this.node=Mi.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Si(){this.uuid=No.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Ei(e,t,r){this._mixer=e,this._clip=t,this._localRoot=r||null;for(var i=t.tracks,n=i.length,a=new Array(n),o={endingStart:xo,endingEnd:xo},s=0;s!==n;++s){var l=i[s].createInterpolant(null);a[s]=l,l.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vo,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Pi(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ai(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Ci(){Ce.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Oi(e,t,r,i){this.uuid=No.generateUUID(),this.data=e,this.itemSize=t,this.offset=r,this.normalized=i===!0}function ki(e,t){this.uuid=No.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Li(e,t,r){ki.call(this,e,t),this.meshPerAttribute=r||1}function Ri(e,t,r){me.call(this,e,t),this.meshPerAttribute=r||1}function Ii(e,t,r,i){this.ray=new oe(e,t),this.near=r||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Di(e,t){return e.distance-t.distance}function Fi(e,t,r,i){if(e.visible!==!1&&(e.raycast(t,r),i===!0))for(var n=e.children,a=0,o=n.length;o>a;a++)Fi(n[a],t,r,!0)}function Ni(e){this.autoStart=void 0!==e?e:!0,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Bi(e){function t(e,t,r,i,n,a,o){var s=.5*(r-e),l=.5*(i-t);return(2*(t-r)+s+l)*o+(-3*(t-r)-2*s-l)*a+s*n+t}this.points=e;var r,i,n,a,o,s,l,c,h,p=[],d={x:0,y:0,z:0};this.initFromArray=function(e){this.points=[];for(var t=0;t<e.length;t++)this.points[t]={x:e[t][0],y:e[t][1],z:e[t][2]}},this.getPoint=function(e){return r=(this.points.length-1)*e,i=Math.floor(r),n=r-i,p[0]=0===i?i:i-1,p[1]=i,p[2]=i>this.points.length-2?this.points.length-1:i+1,p[3]=i>this.points.length-3?this.points.length-1:i+2,s=this.points[p[0]],l=this.points[p[1]],c=this.points[p[2]],h=this.points[p[3]],a=n*n,o=n*a,d.x=t(s.x,l.x,c.x,h.x,n,a,o),d.y=t(s.y,l.y,c.y,h.y,n,a,o),d.z=t(s.z,l.z,c.z,h.z,n,a,o),d},this.getControlPointsArray=function(){var e,t,r=this.points.length,i=[];for(e=0;r>e;e++)t=this.points[e],i[e]=[t.x,t.y,t.z];return i},this.getLength=function(e){var t,r,i,n,a=0,o=0,s=0,l=new u,c=new u,h=[],p=0;for(h[0]=0,e||(e=100),i=this.points.length*e,l.copy(this.points[0]),t=1;i>t;t++)r=t/i,n=this.getPoint(r),c.copy(n),p+=c.distanceTo(l),l.copy(n),a=(this.points.length-1)*r,o=Math.floor(a),o!==s&&(h[o]=p,s=o);return h[h.length]=p,{chunks:h,total:p}},this.reparametrizeByArcLength=function(e){var t,r,i,n,a,o,s,l,c=[],h=new u,p=this.getLength();for(c.push(h.copy(this.points[0]).clone()),t=1;t<this.points.length;t++){for(o=p.chunks[t]-p.chunks[t-1],s=Math.ceil(e*o/p.total),n=(t-1)/(this.points.length-1),a=t/(this.points.length-1),r=1;s-1>r;r++)i=n+r*(1/s)*(a-n),l=this.getPoint(i),c.push(h.copy(l).clone());c.push(h.copy(this.points[t]).clone())}this.points=c}}function Gi(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}function ji(e,t){Oe.call(this,e,t),this.animationsMap={},this.animationsList=[];var r=this.geometry.morphTargets.length,i="__default",n=0,a=r-1,o=r/1;this.createAnimation(i,n,a,o),this.setAnimationWeight(i,1)}function Vi(e){ue.call(this),this.material=e,this.render=function(){}}function Ui(e,t,r,i){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==r?r:16711680,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var l=new Ce,u=new Te(2*o*3,3);l.addAttribute("position",u),wt.call(this,l,new _t({color:n,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function zi(e){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new Ce,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,n=1,a=32;a>i;i++,n++){var o=i/a*Math.PI*2,s=n/a*Math.PI*2;r.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}t.addAttribute("position",new Te(r,3));var l=new _t({fog:!1});this.cone=new wt(t,l),this.add(this.cone),this.update()}function Hi(e){this.bones=this.getBoneList(e);for(var t=new Ee,r=0;r<this.bones.length;r++){var i=this.bones[r];i.parent&&i.parent.isBone&&(t.vertices.push(new u),t.vertices.push(new u),t.colors.push(new X(0,0,1)),t.colors.push(new X(0,1,0)))}t.dynamic=!0;var n=new _t({vertexColors:Rn,depthTest:!1,depthWrite:!1,transparent:!0});wt.call(this,t,n),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Wi(e,t){this.light=e,this.light.updateMatrixWorld();var r=new Zt(t,4,2),i=new fe({wireframe:!0,fog:!1});i.color.copy(this.light.color).multiplyScalar(this.light.intensity),Oe.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}function Xi(e,t){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.colors=[new X,new X];var r=new Qt(t,4,2);r.rotateX(-Math.PI/2);for(var i=0,n=8;n>i;i++)r.faces[i].color=this.colors[4>i?0:1];var a=new fe({vertexColors:Ln,wireframe:!0});this.lightSphere=new Oe(r,a),this.add(this.lightSphere),this.update()}function Yi(e,t,r,i){t=t||1,r=new X(void 0!==r?r:4473924),i=new X(void 0!==i?i:8947848);for(var n=t/2,a=2*e/t,o=[],s=[],l=0,u=0,c=-e;t>=l;l++,c+=a){o.push(-e,0,c,e,0,c),o.push(c,0,-e,c,0,e);var h=l===n?r:i;h.toArray(s,u),u+=3,h.toArray(s,u),u+=3,h.toArray(s,u),u+=3,h.toArray(s,u),u+=3}var p=new Ce;p.addAttribute("position",new Te(o,3)),p.addAttribute("color",new Te(s,3));var d=new _t({vertexColors:Rn});wt.call(this,p,d)}function qi(e,t,r,i){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==r?r:16776960,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Ce,u=new Te(2*o*3,3);l.addAttribute("position",u),wt.call(this,l,new _t({color:n,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Ki(e,t){ue.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var r=new Ce;r.addAttribute("position",new Te([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new _t({fog:!1});this.add(new xt(r,i)),r=new Ce,r.addAttribute("position",new Te([0,0,0,0,0,1],3)),this.add(new xt(r,i)),this.update()}function $i(e){function t(e,t,i){r(e,i),r(t,i)}function r(e,t){i.vertices.push(new u),i.colors.push(new X(t)),void 0===a[e]&&(a[e]=[]),a[e].push(i.vertices.length-1)}var i=new Ee,n=new _t({color:16777215,vertexColors:Ln}),a={},o=16755200,s=16711680,l=43775,c=16777215,h=3355443;t("n1","n2",o),t("n2","n4",o),t("n4","n3",o),t("n3","n1",o),t("f1","f2",o),t("f2","f4",o),t("f4","f3",o),t("f3","f1",o),t("n1","f1",o),t("n2","f2",o),t("n3","f3",o),t("n4","f4",o),t("p","n1",s),t("p","n2",s),t("p","n3",s),t("p","n4",s),t("u1","u2",l),t("u2","u3",l),t("u3","u1",l),t("c","t",c),t("p","c",h),t("cn1","cn2",h),t("cn3","cn4",h),t("cf1","cf2",h),t("cf3","cf4",h),wt.call(this,i,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Zi(e,t){var r=void 0!==t?t:8947848;this.object=e,this.box=new ee,Oe.call(this,new pr(1,1,1),new fe({color:r,wireframe:!0}))}function Qi(e,t){void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),n=new Ce;n.setIndex(new me(r,1)),n.addAttribute("position",new me(i,3)),wt.call(this,n,new _t({color:t})),void 0!==e&&this.update(e)}function Ji(e,t,r,i,n,a){ue.call(this),void 0===i&&(i=16776960),void 0===r&&(r=1),void 0===n&&(n=.2*r),void 0===a&&(a=.2*n),this.position.copy(t),this.line=new xt(su,new _t({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Oe(lu,new fe({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,n,a)}function en(e){e=e||1;var t=new Float32Array([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e]),r=new Float32Array([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1]),i=new Ce;i.addAttribute("position",new me(t,3)),i.addAttribute("color",new me(r,3));var n=new _t({vertexColors:Rn});wt.call(this,i,n)}function tn(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Please use THREE.CatmullRomCurve3."),uu.call(this,e),this.type="catmullrom",this.closed=!0}function rn(e,t,r,i,n,a){oi.call(this,e,t,r,r,i,n,a)}function nn(e,t,r,i,n,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new de(e,t,r,n,a,o)}function an(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Mt(e,t)}function on(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Mt(e,t)}function sn(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Tt(e)}function ln(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Tt(e)}function un(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Tt(e)}function cn(e,t,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new u(e,t,r)}function hn(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new wt(new ar(e.geometry),new _t({color:void 0!==t?t:16777215}))}function pn(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new wt(new Ot(e.geometry),new _t({color:void 0!==t?t:16777215}))}function dn(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function fn(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:e>0?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1]}}),void 0===Object.assign&&!function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(void 0!==i&&null!==i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}}(),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)?!0:!1},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners,i=r[e];if(void 0!==i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,r=t[e.type];if(void 0!==r){e.target=this;var i=[],n=0,a=r.length;for(n=0;a>n;n++)i[n]=r[n];for(n=0;a>n;n++)i[n].call(this,e)}}}});var mn="82",vn={LEFT:0,MIDDLE:1,RIGHT:2},gn=0,yn=1,bn=2,_n=3,xn=0,wn=1,Tn=0,Mn=1,Sn=2,En=0,Pn=1,An=2,Cn=1,On=2,kn=0,Ln=1,Rn=2,In=0,Dn=1,Fn=2,Nn=3,Bn=4,Gn=5,jn={NoBlending:In,NormalBlending:Dn,AdditiveBlending:Fn,SubtractiveBlending:Nn,MultiplyBlending:Bn,CustomBlending:Gn},Vn=100,Un=101,zn=102,Hn=103,Wn=104,Xn=200,Yn=201,qn=202,Kn=203,$n=204,Zn=205,Qn=206,Jn=207,ea=208,ta=209,ra=210,ia=0,na=1,aa=2,oa=3,sa=4,la=5,ua=6,ca=7,ha=0,pa=1,da=2,fa=0,ma=1,va=2,ga=3,ya=4,ba=300,_a=301,xa=302,wa=303,Ta=304,Ma=305,Sa=306,Ea=307,Pa={UVMapping:ba,CubeReflectionMapping:_a,CubeRefractionMapping:xa,EquirectangularReflectionMapping:wa,EquirectangularRefractionMapping:Ta,SphericalReflectionMapping:Ma,CubeUVReflectionMapping:Sa,CubeUVRefractionMapping:Ea},Aa=1e3,Ca=1001,Oa=1002,ka={RepeatWrapping:Aa,ClampToEdgeWrapping:Ca,MirroredRepeatWrapping:Oa},La=1003,Ra=1004,Ia=1005,Da=1006,Fa=1007,Na=1008,Ba={NearestFilter:La,NearestMipMapNearestFilter:Ra,NearestMipMapLinearFilter:Ia,LinearFilter:Da,LinearMipMapNearestFilter:Fa,LinearMipMapLinearFilter:Na},Ga=1009,ja=1010,Va=1011,Ua=1012,za=1013,Ha=1014,Wa=1015,Xa=1016,Ya=1017,qa=1018,Ka=1019,$a=1020,Za=1021,Qa=1022,Ja=1023,eo=1024,to=1025,ro=Ja,io=1026,no=1027,ao=2001,oo=2002,so=2003,lo=2004,uo=2100,co=2101,ho=2102,po=2103,fo=2151,mo=2200,vo=2201,go=2202,yo=2300,bo=2301,_o=2302,xo=2400,wo=2401,To=2402,Mo=0,So=1,Eo=2,Po=3e3,Ao=3001,Co=3007,Oo=3002,ko=3003,Lo=3004,Ro=3005,Io=3006,Do=3200,Fo=3201,No={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=new Array(36),i=0;return function(){for(var n=0;36>n;n++)8===n||13===n||18===n||23===n?r[n]="-":14===n?r[n]="4":(2>=i&&(i=33554432+16777216*Math.random()|0),e=15&i,i>>=4,r[n]=t[19===n?3&e|8:e]);return r.join("")}}(),clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return t>=e?0:e>=r?1:(e=(e-t)/(r-t),e*e*(3-2*e))},smootherstep:function(e,t,r){return t>=e?0:e>=r?1:(e=(e-t)/(r-t),e*e*e*(e*(6*e-15)+10))},random16:function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*No.DEG2RAD},radToDeg:function(e){return e*No.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}};r.prototype={constructor:r,isVector2:!0,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e,t;return function(i,n){return void 0===e&&(e=new r,t=new r),e.set(i,i),t.set(n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return 0>e&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromAttribute:function(e,t,r){return void 0===r&&(r=0),t=t*e.itemSize+r,this.x=e.array[t],this.y=e.array[t+1],this},rotateAround:function(e,t){var r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,a=this.y-e.y;return this.x=n*r-a*i+e.x,this.y=n*i+a*r+e.y,this}},i.DEFAULT_IMAGE=void 0,i.DEFAULT_MAPPING=ba,i.prototype={constructor:i,isTexture:!0,set needsUpdate(e){e===!0&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){function t(e){var t;return void 0!==e.toDataURL?t=e:(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=No.generateUUID()),void 0===e.images[i.uuid]&&(e.images[i.uuid]={uuid:i.uuid,url:t(i)}),r.image=i.uuid}return e.textures[this.uuid]=r,r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===ba){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case Aa:e.x=e.x-Math.floor(e.x);break;case Ca:e.x=e.x<0?0:1;break;case Oa:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Aa:e.y=e.y-Math.floor(e.y);break;case Ca:e.y=e.y<0?0:1;break;case Oa:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}},Object.assign(i.prototype,t.prototype);var Bo=0;a.prototype={constructor:a,isVector4:!0,set:function(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,r=this.y,i=this.z,n=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*n,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*n,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*n,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*n,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,i,n,a=.01,o=.1,s=e.elements,l=s[0],u=s[4],c=s[8],h=s[1],p=s[5],d=s[9],f=s[2],m=s[6],v=s[10];if(Math.abs(u-h)<a&&Math.abs(c-f)<a&&Math.abs(d-m)<a){if(Math.abs(u+h)<o&&Math.abs(c+f)<o&&Math.abs(d+m)<o&&Math.abs(l+p+v-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(l+1)/2,y=(p+1)/2,b=(v+1)/2,_=(u+h)/4,x=(c+f)/4,w=(d+m)/4;return g>y&&g>b?a>g?(r=0,i=.707106781,n=.707106781):(r=Math.sqrt(g),i=_/r,n=x/r):y>b?a>y?(r=.707106781,i=0,n=.707106781):(i=Math.sqrt(y),r=_/i,n=w/i):a>b?(r=.707106781,i=.707106781,n=0):(n=Math.sqrt(b),r=x/n,i=w/n),this.set(r,i,n,t),this}var T=Math.sqrt((m-d)*(m-d)+(c-f)*(c-f)+(h-u)*(h-u));return Math.abs(T)<.001&&(T=1),this.x=(m-d)/T,this.y=(c-f)/T,this.z=(h-u)/T,this.w=Math.acos((l+p+v-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(r,i){return void 0===e&&(e=new a,t=new a),e.set(r,r,r,r),t.set(i,i,i,i),this.clamp(e,t)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromAttribute:function(e,t,r){return void 0===r&&(r=0),t=t*e.itemSize+r,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this.w=e.array[t+3],this}},Object.assign(o.prototype,t.prototype,{isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,
this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),s.prototype=Object.create(o.prototype),s.prototype.constructor=s,s.prototype.isWebGLRenderTargetCube=!0,l.prototype={constructor:l,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if((e&&e.isEuler)===!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=Math.cos(e._x/2),i=Math.cos(e._y/2),n=Math.cos(e._z/2),a=Math.sin(e._x/2),o=Math.sin(e._y/2),s=Math.sin(e._z/2),l=e.order;return"XYZ"===l?(this._x=a*i*n+r*o*s,this._y=r*o*n-a*i*s,this._z=r*i*s+a*o*n,this._w=r*i*n-a*o*s):"YXZ"===l?(this._x=a*i*n+r*o*s,this._y=r*o*n-a*i*s,this._z=r*i*s-a*o*n,this._w=r*i*n+a*o*s):"ZXY"===l?(this._x=a*i*n-r*o*s,this._y=r*o*n+a*i*s,this._z=r*i*s+a*o*n,this._w=r*i*n-a*o*s):"ZYX"===l?(this._x=a*i*n-r*o*s,this._y=r*o*n+a*i*s,this._z=r*i*s-a*o*n,this._w=r*i*n+a*o*s):"YZX"===l?(this._x=a*i*n+r*o*s,this._y=r*o*n+a*i*s,this._z=r*i*s-a*o*n,this._w=r*i*n-a*o*s):"XZY"===l&&(this._x=a*i*n-r*o*s,this._y=r*o*n-a*i*s,this._z=r*i*s+a*o*n,this._w=r*i*n+a*o*s),t!==!1&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,i=r[0],n=r[4],a=r[8],o=r[1],s=r[5],l=r[9],u=r[2],c=r[6],h=r[10],p=i+s+h;return p>0?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(c-l)*t,this._y=(a-u)*t,this._z=(o-n)*t):i>s&&i>h?(t=2*Math.sqrt(1+i-s-h),this._w=(c-l)/t,this._x=.25*t,this._y=(n+o)/t,this._z=(a+u)/t):s>h?(t=2*Math.sqrt(1+s-i-h),this._w=(a-u)/t,this._x=(n+o)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+h-i-s),this._w=(o-n)/t,this._x=(a+u)/t,this._y=(l+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t,r=1e-6;return function(i,n){return void 0===e&&(e=new u),t=i.dot(n)+1,r>t?(t=0,Math.abs(i.x)>Math.abs(i.z)?e.set(-i.y,i.x,0):e.set(0,-i.z,i.y)):e.crossVectors(i,n),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,i=e._y,n=e._z,a=e._w,o=t._x,s=t._y,l=t._z,u=t._w;return this._x=r*u+a*o+i*l-n*s,this._y=i*u+a*s+n*o-r*l,this._z=n*u+a*l+r*s-i*o,this._w=a*u-r*o-i*s-n*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,i=this._y,n=this._z,a=this._w,o=a*e._w+r*e._x+i*e._y+n*e._z;if(0>o?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=r,this._y=i,this._z=n,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(r+this._x),this._y=.5*(i+this._y),this._z=.5*(n+this._z),this;var l=Math.atan2(s,o),u=Math.sin((1-t)*l)/s,c=Math.sin(t*l)/s;return this._w=a*u+this._w*c,this._x=r*u+this._x*c,this._y=i*u+this._y*c,this._z=n*u+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Object.assign(l,{slerp:function(e,t,r,i){return r.copy(e).slerp(t,i)},slerpFlat:function(e,t,r,i,n,a,o){var s=r[i+0],l=r[i+1],u=r[i+2],c=r[i+3],h=n[a+0],p=n[a+1],d=n[a+2],f=n[a+3];if(c!==f||s!==h||l!==p||u!==d){var m=1-o,v=s*h+l*p+u*d+c*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,v*g);m=Math.sin(m*_)/b,o=Math.sin(o*_)/b}var x=o*g;if(s=s*m+h*x,l=l*m+p*x,u=u*m+d*x,c=c*m+f*x,m===1-o){var w=1/Math.sqrt(s*s+l*l+u*u+c*c);s*=w,l*=w,u*=w,c*=w}}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),u.prototype={constructor:u,isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e;return function(t){return(t&&t.isEuler)===!1&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===e&&(e=new l),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e;return function(t,r){return void 0===e&&(e=new l),this.applyQuaternion(e.setFromAxisAngle(t,r))}}(),applyMatrix3:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this},applyMatrix4:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i+n[12],this.y=n[1]*t+n[5]*r+n[9]*i+n[13],this.z=n[2]*t+n[6]*r+n[10]*i+n[14],this},applyProjection:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements,a=1/(n[3]*t+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])*a,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])*a,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])*a,this},applyQuaternion:function(e){var t=this.x,r=this.y,i=this.z,n=e.x,a=e.y,o=e.z,s=e.w,l=s*t+a*i-o*r,u=s*r+o*t-n*i,c=s*i+n*r-a*t,h=-n*t-a*r-o*i;return this.x=l*s+h*-n+u*-o-c*-a,this.y=u*s+h*-a+c*-n-l*-o,this.z=c*s+h*-o+l*-a-u*-n,this},project:function(){var e;return function(t){return void 0===e&&(e=new c),e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyProjection(e)}}(),unproject:function(){var e;return function(t){return void 0===e&&(e=new c),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyProjection(e)}}(),transformDirection:function(e){var t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e,t;return function(r,i){return void 0===e&&(e=new u,t=new u),e.set(r,r,r),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var r=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,r))/r)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var r=this.x,i=this.y,n=this.z;return this.x=i*e.z-n*e.y,this.y=n*e.x-r*e.z,this.z=r*e.y-i*e.x,this},crossVectors:function(e,t){var r=e.x,i=e.y,n=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-n*o,this.y=n*a-r*s,this.z=r*o-i*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e;return function(t){return void 0===e&&(e=new u),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e;return function(t){return void 0===e&&(e=new u),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(No.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this},setFromMatrixColumn:function(e,t){if("number"==typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var r=e;e=t,t=r}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromAttribute:function(e,t,r){return void 0===r&&(r=0),t=t*e.itemSize+r,this.x=e.array[t],this.y=e.array[t+1],this.z=e.array[t+2],this}},c.prototype={constructor:c,isMatrix4:!0,set:function(e,t,r,i,n,a,o,s,l,u,c,h,p,d,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=r,v[12]=i,v[1]=n,v[5]=a,v[9]=o,v[13]=s,v[2]=l,v[6]=u,v[10]=c,v[14]=h,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new c).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(){var e;return function(t){void 0===e&&(e=new u);var r=this.elements,i=t.elements,n=1/e.setFromMatrixColumn(t,0).length(),a=1/e.setFromMatrixColumn(t,1).length(),o=1/e.setFromMatrixColumn(t,2).length();return r[0]=i[0]*n,r[1]=i[1]*n,r[2]=i[2]*n,r[4]=i[4]*a,r[5]=i[5]*a,r[6]=i[6]*a,r[8]=i[8]*o,r[9]=i[9]*o,r[10]=i[10]*o,this}}(),makeRotationFromEuler:function(e){(e&&e.isEuler)===!1&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,i=e.y,n=e.z,a=Math.cos(r),o=Math.sin(r),s=Math.cos(i),l=Math.sin(i),u=Math.cos(n),c=Math.sin(n);if("XYZ"===e.order){var h=a*u,p=a*c,d=o*u,f=o*c;t[0]=s*u,t[4]=-s*c,t[8]=l,t[1]=p+d*l,t[5]=h-f*l,t[9]=-o*s,t[2]=f-h*l,t[6]=d+p*l,t[10]=a*s}else if("YXZ"===e.order){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m+y*o,t[4]=g*o-v,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){var m=s*u,v=s*c,g=l*u,y=l*c;t[0]=m-y*o,t[4]=-a*c,t[8]=g+v*o,t[1]=v+g*o,t[5]=a*u,t[9]=y-m*o,t[2]=-a*l,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var h=a*u,p=a*c,d=o*u,f=o*c;t[0]=s*u,t[4]=d*l-p,t[8]=h*l+f,t[1]=s*c,t[5]=f*l+h,t[9]=p*l-d,t[2]=-l,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var b=a*s,_=a*l,x=o*s,w=o*l;t[0]=s*u,t[4]=w-b*c,t[8]=x*c+_,t[1]=c,t[5]=a*u,t[9]=-o*u,t[2]=-l*u,t[6]=_*c+x,t[10]=b-w*c}else if("XZY"===e.order){var b=a*s,_=a*l,x=o*s,w=o*l;t[0]=s*u,t[4]=-c,t[8]=l*u,t[1]=b*c+w,t[5]=a*u,t[9]=_*c-x,t[2]=x*c-_,t[6]=o*u,t[10]=w*c+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,r=e.x,i=e.y,n=e.z,a=e.w,o=r+r,s=i+i,l=n+n,u=r*o,c=r*s,h=r*l,p=i*s,d=i*l,f=n*l,m=a*o,v=a*s,g=a*l;return t[0]=1-(p+f),t[4]=c-g,t[8]=h+v,t[1]=c+g,t[5]=1-(u+f),t[9]=d-m,t[2]=h-v,t[6]=d+m,t[10]=1-(u+p),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e,t,r;return function(i,n,a){void 0===e&&(e=new u,t=new u,r=new u);var o=this.elements;return r.subVectors(i,n).normalize(),0===r.lengthSq()&&(r.z=1),e.crossVectors(a,r).normalize(),0===e.lengthSq()&&(r.z+=1e-4,e.crossVectors(a,r).normalize()),t.crossVectors(r,e),o[0]=e.x,o[4]=t.x,o[8]=r.x,o[1]=e.y,o[5]=t.y,o[9]=r.y,o[2]=e.z,o[6]=t.z,o[10]=r.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,i=t.elements,n=this.elements,a=r[0],o=r[4],s=r[8],l=r[12],u=r[1],c=r[5],h=r[9],p=r[13],d=r[2],f=r[6],m=r[10],v=r[14],g=r[3],y=r[7],b=r[11],_=r[15],x=i[0],w=i[4],T=i[8],M=i[12],S=i[1],E=i[5],P=i[9],A=i[13],C=i[2],O=i[6],k=i[10],L=i[14],R=i[3],I=i[7],D=i[11],F=i[15];return n[0]=a*x+o*S+s*C+l*R,n[4]=a*w+o*E+s*O+l*I,n[8]=a*T+o*P+s*k+l*D,n[12]=a*M+o*A+s*L+l*F,n[1]=u*x+c*S+h*C+p*R,n[5]=u*w+c*E+h*O+p*I,n[9]=u*T+c*P+h*k+p*D,n[13]=u*M+c*A+h*L+p*F,n[2]=d*x+f*S+m*C+v*R,n[6]=d*w+f*E+m*O+v*I,n[10]=d*T+f*P+m*k+v*D,n[14]=d*M+f*A+m*L+v*F,n[3]=g*x+y*S+b*C+_*R,n[7]=g*w+y*E+b*O+_*I,n[11]=g*T+y*P+b*k+_*D,n[15]=g*M+y*A+b*L+_*F,this},multiplyToArray:function(e,t,r){var i=this.elements;return this.multiplyMatrices(e,t),r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToVector3Array:function(){var e;return function(t,r,i){void 0===e&&(e=new u),void 0===r&&(r=0),void 0===i&&(i=t.length);for(var n=0,a=r;i>n;n+=3,a+=3)e.fromArray(t,a),e.applyMatrix4(this),e.toArray(t,a);return t}}(),applyToBuffer:function(){var e;return function(t,r,i){void 0===e&&(e=new u),void 0===r&&(r=0),void 0===i&&(i=t.length/t.itemSize);for(var n=0,a=r;i>n;n++,a++)e.x=t.getX(a),e.y=t.getY(a),e.z=t.getZ(a),e.applyMatrix4(this),t.setXYZ(a,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],a=e[1],o=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],p=e[14],d=e[3],f=e[7],m=e[11],v=e[15];return d*(+n*s*c-i*l*c-n*o*h+r*l*h+i*o*p-r*s*p)+f*(+t*s*p-t*l*h+n*a*h-i*a*p+i*l*u-n*s*u)+m*(+t*l*c-t*o*p-n*a*c+r*a*p+n*o*u-r*l*u)+v*(-i*o*u-t*s*c+t*o*h+i*a*c-r*a*h+r*s*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new u),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var r=this.elements,i=e.elements,n=i[0],a=i[1],o=i[2],s=i[3],l=i[4],u=i[5],c=i[6],h=i[7],p=i[8],d=i[9],f=i[10],m=i[11],v=i[12],g=i[13],y=i[14],b=i[15],_=d*y*h-g*f*h+g*c*m-u*y*m-d*c*b+u*f*b,x=v*f*h-p*y*h-v*c*m+l*y*m+p*c*b-l*f*b,w=p*g*h-v*d*h+v*u*m-l*g*m-p*u*b+l*d*b,T=v*d*c-p*g*c-v*u*f+l*g*f+p*u*y-l*d*y,M=n*_+a*x+o*w+s*T;if(0===M){var S="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t===!0)throw new Error(S);return console.warn(S),this.identity()}var E=1/M;return r[0]=_*E,r[1]=(g*f*s-d*y*s-g*o*m+a*y*m+d*o*b-a*f*b)*E,r[2]=(u*y*s-g*c*s+g*o*h-a*y*h-u*o*b+a*c*b)*E,r[3]=(d*c*s-u*f*s-d*o*h+a*f*h+u*o*m-a*c*m)*E,r[4]=x*E,r[5]=(p*y*s-v*f*s+v*o*m-n*y*m-p*o*b+n*f*b)*E,r[6]=(v*c*s-l*y*s-v*o*h+n*y*h+l*o*b-n*c*b)*E,r[7]=(l*f*s-p*c*s+p*o*h-n*f*h-l*o*m+n*c*m)*E,r[8]=w*E,r[9]=(v*d*s-p*g*s-v*a*m+n*g*m+p*a*b-n*d*b)*E,r[10]=(l*g*s-v*u*s+v*a*h-n*g*h-l*a*b+n*u*b)*E,r[11]=(p*u*s-l*d*s-p*a*h+n*d*h+l*a*m-n*u*m)*E,r[12]=T*E,r[13]=(p*g*o-v*d*o+v*a*f-n*g*f-p*a*y+n*d*y)*E,r[14]=(v*u*o-l*g*o-v*a*c+n*g*c+l*a*y-n*u*y)*E,r[15]=(l*d*o-p*u*o+p*a*c-n*d*c-l*a*f+n*u*f)*E,this},scale:function(e){var t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),i=Math.sin(t),n=1-r,a=e.x,o=e.y,s=e.z,l=n*a,u=n*o;return this.set(l*a+r,l*o-i*s,l*s+i*o,0,l*o+i*s,u*o+r,u*s-i*a,0,l*s-i*o,u*s+i*a,n*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},compose:function(e,t,r){return this.makeRotationFromQuaternion(t),this.scale(r),this.setPosition(e),this},decompose:function(){var e,t;return function(r,i,n){void 0===e&&(e=new u,t=new c);var a=this.elements,o=e.set(a[0],a[1],a[2]).length(),s=e.set(a[4],a[5],a[6]).length(),l=e.set(a[8],a[9],a[10]).length(),h=this.determinant();0>h&&(o=-o),r.x=a[12],r.y=a[13],r.z=a[14],t.elements.set(this.elements);var p=1/o,d=1/s,f=1/l;return t.elements[0]*=p,t.elements[1]*=p,t.elements[2]*=p,t.elements[4]*=d,t.elements[5]*=d,t.elements[6]*=d,t.elements[8]*=f,t.elements[9]*=f,t.elements[10]*=f,i.setFromRotationMatrix(t),n.x=o,n.y=s,n.z=l,this}}(),makeFrustum:function(e,t,r,i,n,a){var o=this.elements,s=2*n/(t-e),l=2*n/(i-r),u=(t+e)/(t-e),c=(i+r)/(i-r),h=-(a+n)/(a-n),p=-2*a*n/(a-n);return o[0]=s,o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=l,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makePerspective:function(e,t,r,i){var n=r*Math.tan(No.DEG2RAD*e*.5),a=-n,o=a*t,s=n*t;return this.makeFrustum(o,s,a,n,r,i)},makeOrthographic:function(e,t,r,i,n,a){var o=this.elements,s=1/(t-e),l=1/(r-i),u=1/(a-n),c=(t+e)*s,h=(r+i)*l,p=(a+n)*u;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*l,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*u,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,i=0;16>i;i++)if(t[i]!==r[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;16>r;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}},h.prototype=Object.create(i.prototype),h.prototype.constructor=h,h.prototype.isCubeTexture=!0,Object.defineProperty(h.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var Go=new i,jo=new h,Vo=[],Uo=[];U.prototype.setValue=function(e,t){for(var r=this.seq,i=0,n=r.length;i!==n;++i){var a=r[i];a.setValue(e,t[a.id])}};var zo=/([\w\d_]+)(\])?(\[|\.)?/g;W.prototype.setValue=function(e,t,r){var i=this.map[t];void 0!==i&&i.setValue(e,r,this.renderer)},W.prototype.set=function(e,t,r){var i=this.map[r];void 0!==i&&i.setValue(e,t[r],this.renderer)},W.prototype.setOptional=function(e,t,r){var i=t[r];void 0!==i&&this.setValue(e,r,i)},W.upload=function(e,t,r,i){for(var n=0,a=t.length;n!==a;++n){var o=t[n],s=r[o.id];s.needsUpdate!==!1&&o.setValue(e,s.value,i)}},W.seqWithValue=function(e,t){for(var r=[],i=0,n=e.length;i!==n;++i){var a=e[i];a.id in t&&r.push(a)}return r};var Ho={merge:function(e){for(var t={},r=0;r<e.length;r++){var i=this.clone(e[r]);for(var n in i)t[n]=i[n]}return t},clone:function(e){var t={};for(var r in e){t[r]={};for(var i in e[r]){var n=e[r][i];t[r][i]=n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?n.clone():Array.isArray(n)?n.slice():n}}return t}},Wo="#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",Xo="#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif\n",Yo="#ifdef ALPHATEST\n	if ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",qo="#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n	#endif\n#endif\n",Ko="#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",$o="\nvec3 transformed = vec3( position );\n",Zo="\nvec3 objectNormal = vec3( normal );\n",Qo="bool testLightInRange( const in float lightDistance, const in float cutoffDistance ) {\n	return any( bvec2( cutoffDistance == 0.0, lightDistance < cutoffDistance ) );\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n		if( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n			float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n			float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n			return distanceFalloff * maxDistanceCutoffFactor;\n#else\n			return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n		}\n		return 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	return 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n	float D = D_GGX( alpha, dotNH );\n	return F * ( G * D );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n	return specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",Jo="#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 );\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif\n",es="#if NUM_CLIPPING_PLANES > 0\n	for ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n		vec4 plane = clippingPlanes[ i ];\n		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n	}\n		\n	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n		bool clipped = true;\n		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n			vec4 plane = clippingPlanes[ i ];\n			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n		}\n		if ( clipped ) discard;\n	\n	#endif\n#endif\n",ts="#if NUM_CLIPPING_PLANES > 0\n	#if ! defined( PHYSICAL ) && ! defined( PHONG )\n		varying vec3 vViewPosition;\n	#endif\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",rs="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n	varying vec3 vViewPosition;\n#endif\n",is="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n	vViewPosition = - mvPosition.xyz;\n#endif\n",ns="#ifdef USE_COLOR\n	diffuseColor.rgb *= vColor;\n#endif",as="#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif\n",os="#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif",ss="#ifdef USE_COLOR\n	vColor.xyz = color.xyz;\n#endif",ls="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract(sin(sn) * c);\n}\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\nstruct GeometricContext {\n	vec3 position;\n	vec3 normal;\n	vec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	float distance = dot( planeNormal, point - pointOnPlane );\n	return - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\n",us="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n	vec3 absDirection = abs(direction);\n	int face = -1;\n	if( absDirection.x > absDirection.z ) {\n		if(absDirection.x > absDirection.y )\n			face = direction.x > 0.0 ? 0 : 3;\n		else\n			face = direction.y > 0.0 ? 1 : 4;\n	}\n	else {\n		if(absDirection.z > absDirection.y )\n			face = direction.z > 0.0 ? 2 : 5;\n		else\n			face = direction.y > 0.0 ? 1 : 4;\n	}\n	return face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n	float dxRoughness = dFdx(roughness);\n	float dyRoughness = dFdy(roughness);\n	vec3 dx = dFdx( vec * scale * dxRoughness );\n	vec3 dy = dFdy( vec * scale * dyRoughness );\n	float d = max( dot( dx, dx ), dot( dy, dy ) );\n	d = clamp(d, 1.0, cubeUV_rangeClamp);\n	float mipLevel = 0.5 * log2(d);\n	return vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n	float a = 16.0 * cubeUV_rcpTextureSize;\n	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n	float powScale = exp2_packed.x * exp2_packed.y;\n	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n	bool bRes = mipLevel == 0.0;\n	scale =  bRes && (scale < a) ? a : scale;\n	vec3 r;\n	vec2 offset;\n	int face = getFaceFromDirection(direction);\n	float rcpPowScale = 1.0 / powScale;\n	if( face == 0) {\n		r = vec3(direction.x, -direction.z, direction.y);\n		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n	}\n	else if( face == 1) {\n		r = vec3(direction.y, direction.x, direction.z);\n		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n	}\n	else if( face == 2) {\n		r = vec3(direction.z, direction.x, direction.y);\n		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ?  a : offset.y;\n	}\n	else if( face == 3) {\n		r = vec3(direction.x, direction.z, direction.y);\n		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n	}\n	else if( face == 4) {\n		r = vec3(direction.y, direction.x, -direction.z);\n		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n	}\n	else {\n		r = vec3(direction.z, -direction.x, direction.y);\n		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ?  0.0 : offset.y;\n	}\n	r = normalize(r);\n	float texelOffset = 0.5 * cubeUV_rcpTextureSize;\n	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n	vec2 base = offset + vec2( texelOffset );\n	return base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n	float roughnessVal = roughness* cubeUV_maxLods3;\n	float r1 = floor(roughnessVal);\n	float r2 = r1 + 1.0;\n	float t = fract(roughnessVal);\n	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n	float s = mipInfo.y;\n	float level0 = mipInfo.x;\n	float level1 = level0 + 1.0;\n	level1 = level1 > 5.0 ? 5.0 : level1;\n	level0 += min( floor( s + 0.5 ), 5.0 );\n	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n	vec4 result = mix(color10, color20, t);\n	return vec4(result.rgb, 1.0);\n}\n#endif\n",cs="#ifdef FLIP_SIDED\n	objectNormal = -objectNormal;\n#endif\nvec3 transformedNormal = normalMatrix * objectNormal;\n",hs="#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif\n",ps="#ifdef USE_DISPLACEMENTMAP\n	transformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",ds="#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",fs="#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif\n",ms="  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",vs="\nvec4 LinearToLinear( in vec4 value ) {\n  return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n  return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n  return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n  float maxComponent = max( max( value.r, value.g ), value.b );\n  float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n  return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n  return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n  float maxRGB = max( value.x, max( value.g, value.b ) );\n  float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n  M            = ceil( M * 255.0 ) / 255.0;\n  return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n    return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n    float maxRGB = max( value.x, max( value.g, value.b ) );\n    float D      = max( maxRange / maxRGB, 1.0 );\n    D            = min( floor( D ) / 255.0, 1.0 );\n    return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n  vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n  Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n  vec4 vResult;\n  vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n  float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n  vResult.w = fract(Le);\n  vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n  return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n  float Le = value.z * 255.0 + value.w;\n  vec3 Xp_Y_XYZp;\n  Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n  Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n  Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n  vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n  return vec4( max(vRGB, 0.0), 1.0 );\n}\n",gs="#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	envColor = envMapTexelToLinear( envColor );\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif\n",ys="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n	uniform float reflectivity;\n	uniform float envMapIntenstiy;\n#endif\n#ifdef USE_ENVMAP\n	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n		varying vec3 vWorldPosition;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif\n",bs="#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif\n",_s="#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif\n",xs="#ifdef USE_FOG\n	#ifdef USE_LOGDEPTHBUF_EXT\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n	#else\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n	#endif\n	#ifdef FOG_EXP2\n		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",ws="#ifdef USE_FOG\n	uniform vec3 fogColor;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",Ts="#ifdef USE_LIGHTMAP\n	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",Ms="#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",Ss="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n	vLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_DIR_LIGHTS > 0\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n		vLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		#ifdef DOUBLE_SIDED\n			vLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n		#endif\n	}\n#endif\n",Es="uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	return irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		directLight.color = directionalLight.color;\n		directLight.direction = directionalLight.direction;\n		directLight.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		vec3 lVector = pointLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		if ( testLightInRange( lightDistance, pointLight.distance ) ) {\n			directLight.color = pointLight.color;\n			directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n		vec3 lVector = spotLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		float angleCos = dot( directLight.direction, spotLight.direction );\n		if ( all( bvec2( angleCos > spotLight.coneCos, testLightInRange( lightDistance, spotLight.distance ) ) ) ) {\n			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n			directLight.color = spotLight.color;\n			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n	}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n		float dotNL = dot( geometry.normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			irradiance *= PI;\n		#endif\n		return irradiance;\n	}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n		#include <normal_flip>\n		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryVec = flipNormal * vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			vec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n		#else\n			vec4 envMapColor = vec4( 0.0 );\n		#endif\n		return PI * envMapColor.rgb * envMapIntensity;\n	}\n	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		float maxMIPLevelScalar = float( maxMIPLevel );\n		float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n	}\n	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n		#else\n			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n		#endif\n		#include <normal_flip>\n		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryReflectVec = flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			vec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n		#elif defined( ENVMAP_TYPE_EQUIREC )\n			vec2 sampleUV;\n			sampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n			sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_SPHERE )\n			vec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#endif\n		return envMapColor.rgb * envMapIntensity;\n	}\n#endif\n",Ps="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",As="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n	vec3	diffuseColor;\n	vec3	specularColor;\n	float	specularShininess;\n	float	specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )	(0)\n",Cs="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",Os="struct PhysicalMaterial {\n	vec3	diffuseColor;\n	float	specularRoughness;\n	vec3	specularColor;\n	#ifndef STANDARD\n		float clearCoat;\n		float clearCoatRoughness;\n	#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	#ifndef STANDARD\n		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n	#else\n		float clearCoatDHR = 0.0;\n	#endif\n	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	#ifndef STANDARD\n		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n	#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	#ifndef STANDARD\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		float dotNL = dotNV;\n		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n	#else\n		float clearCoatDHR = 0.0;\n	#endif\n	reflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n	#ifndef STANDARD\n		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n	#endif\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",ks="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointDirectLightIrradiance( pointLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotDirectLightIrradiance( spotLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#ifdef USE_LIGHTMAP\n		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			lightMapIrradiance *= PI;\n		#endif\n		irradiance += lightMapIrradiance;\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		}\n	#endif\n	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n	 	irradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n	#endif\n	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n	#ifndef STANDARD\n		vec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n	#else\n		vec3 clearCoatRadiance = vec3( 0.0 );\n	#endif\n		\n	RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",Ls="#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",Rs="#ifdef USE_LOGDEPTHBUF\n	uniform float logDepthBufFC;\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n#endif\n",Is="#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n	uniform float logDepthBufFC;\n#endif",Ds="#ifdef USE_LOGDEPTHBUF\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n	#else\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n	#endif\n#endif\n",Fs="#ifdef USE_MAP\n	vec4 texelColor = texture2D( map, vUv );\n	texelColor = mapTexelToLinear( texelColor );\n	diffuseColor *= texelColor;\n#endif\n",Ns="#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n",Bs="#ifdef USE_MAP\n	vec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n	diffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",Gs="#ifdef USE_MAP\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n#endif\n",js="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vUv );\n	metalnessFactor *= texelMetalness.r;\n#endif\n",Vs="#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",Us="#ifdef USE_MORPHNORMALS\n	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",zs="#ifdef USE_MORPHTARGETS\n	#ifndef USE_MORPHNORMALS\n	uniform float morphTargetInfluences[ 8 ];\n	#else\n	uniform float morphTargetInfluences[ 4 ];\n	#endif\n#endif",Hs="#ifdef USE_MORPHTARGETS\n	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n	#ifndef USE_MORPHNORMALS\n	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n	#endif\n#endif\n",Ws="#ifdef DOUBLE_SIDED\n	float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n	float flipNormal = 1.0;\n#endif\n",Xs="#ifdef FLAT_SHADED\n	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal ) * flipNormal;\n#endif\n#ifdef USE_NORMALMAP\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",Ys="#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n	}\n#endif\n",qs="vec3 packNormalToRGB( const in vec3 normal ) {\n  return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n  return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n	vec4 r = vec4( fract( v * PackFactors ), v );\n	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n  return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n  return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n  return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n  return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",Ks="#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",$s="#ifdef USE_SKINNING\n	vec4 mvPosition = modelViewMatrix * skinned;\n#else\n	vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;\n",Zs="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vUv );\n	roughnessFactor *= texelRoughness.r;\n#endif\n",Qs="#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",Js="#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n		const vec2 offset = vec2( 0.0, 1.0 );\n		vec2 texelSize = vec2( 1.0 ) / size;\n		vec2 centroidUV = floor( uv * size + 0.5 ) / size;\n		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n		vec2 f = fract( uv * size + 0.5 );\n		float a = mix( lb, lt, f.y );\n		float b = mix( rb, rt, f.y );\n		float c = mix( a, b, f.x );\n		return c;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n		bool frustumTest = all( frustumTestVec );\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			return (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			return (\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return 1.0;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		vec3 bd3D = normalize( lightToPosition );\n		float dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif\n",el="#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n#endif\n",tl="#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n#endif\n",rl="float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	DirectionalLight directionalLight;\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	SpotLight spotLight;\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	PointLight pointLight;\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#endif\n	return shadow;\n}\n",il="#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",nl="#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	#ifdef BONE_TEXTURE\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n		mat4 getBoneMatrix( const in float i ) {\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n			y = dy * ( y + 0.5 );\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n			mat4 bone = mat4( v1, v2, v3, v4 );\n			return bone;\n		}\n	#else\n		uniform mat4 boneMatrices[ MAX_BONES ];\n		mat4 getBoneMatrix( const in float i ) {\n			mat4 bone = boneMatrices[ int(i) ];\n			return bone;\n		}\n	#endif\n#endif\n",al="#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n#endif\n",ol="#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",sl="float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",ll="#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",ul="#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",cl="#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n  return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n  color *= toneMappingExposure;\n  color = max( vec3( 0.0 ), color - 0.004 );\n  return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",hl="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n#endif",pl="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n#endif\n",dl="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",fl="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	varying vec2 vUv2;\n#endif",ml="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n#endif",vl="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	vUv2 = uv2;\n#endif",gl="#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n	#ifdef USE_SKINNING\n		vec4 worldPosition = modelMatrix * skinned;\n	#else\n		vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n	#endif\n#endif\n",yl="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n	gl_FragColor.a *= opacity;\n}\n",bl="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}\n",_l="#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <logdepthbuf_fragment>\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n	#endif\n}\n",xl="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#include <begin_vertex>\n	#include <displacementmap_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n}\n",wl="uniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	#include <clipping_planes_fragment>\n	gl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n}\n",Tl="varying vec4 vWorldPosition;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <skinbase_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition;\n}\n",Ml="uniform sampler2D tEquirect;\nuniform float tFlip;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldPosition );\n	vec2 sampleUV;\n	sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",Sl="varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}\n",El="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",Pl="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n}\n",Al="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight;\n	reflectedLight.directDiffuse = vec3( 0.0 );\n	reflectedLight.directSpecular = vec3( 0.0 );\n	reflectedLight.indirectDiffuse = diffuseColor.rgb;\n	reflectedLight.indirectSpecular = vec3( 0.0 );\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <normal_flip>\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",Cl="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_ENVMAP\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	#include <envmap_vertex>\n}\n",Ol="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <emissivemap_fragment>\n	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n	#include <lightmap_fragment>\n	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n	#ifdef DOUBLE_SIDED\n		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n	#else\n		reflectedLight.directDiffuse = vLightFront;\n	#endif\n	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <normal_flip>\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",kl="#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <lights_lambert_vertex>\n	#include <shadowmap_vertex>\n}\n",Ll="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_flip>\n	#include <normal_fragment>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_template>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",Rl="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <displacementmap_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n}\n",Il="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n	uniform float clearCoat;\n	uniform float clearCoatRoughness;\n#endif\nuniform float envMapIntensity;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_flip>\n	#include <normal_fragment>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_template>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",Dl="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <displacementmap_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n}\n",Fl="uniform float opacity;\nvarying vec3 vNormal;\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	gl_FragColor = vec4( packNormalToRGB( vNormal ), opacity );\n	#include <logdepthbuf_fragment>\n}\n",Nl="varying vec3 vNormal;\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vNormal = normalize( normalMatrix * normal );\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n}\n",Bl="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",Gl="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	#include <begin_vertex>\n	#include <project_vertex>\n	#ifdef USE_SIZEATTENUATION\n		gl_PointSize = size * ( scale / - mvPosition.z );\n	#else\n		gl_PointSize = size;\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n}\n",jl="uniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	gl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0  - getShadowMask() ) );\n}\n",Vl="#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <begin_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n}\n",Ul={
alphamap_fragment:Wo,alphamap_pars_fragment:Xo,alphatest_fragment:Yo,aomap_fragment:qo,aomap_pars_fragment:Ko,begin_vertex:$o,beginnormal_vertex:Zo,bsdfs:Qo,bumpmap_pars_fragment:Jo,clipping_planes_fragment:es,clipping_planes_pars_fragment:ts,clipping_planes_pars_vertex:rs,clipping_planes_vertex:is,color_fragment:ns,color_pars_fragment:as,color_pars_vertex:os,color_vertex:ss,common:ls,cube_uv_reflection_fragment:us,defaultnormal_vertex:cs,displacementmap_pars_vertex:hs,displacementmap_vertex:ps,emissivemap_fragment:ds,emissivemap_pars_fragment:fs,encodings_fragment:ms,encodings_pars_fragment:vs,envmap_fragment:gs,envmap_pars_fragment:ys,envmap_pars_vertex:bs,envmap_vertex:_s,fog_fragment:xs,fog_pars_fragment:ws,lightmap_fragment:Ts,lightmap_pars_fragment:Ms,lights_lambert_vertex:Ss,lights_pars:Es,lights_phong_fragment:Ps,lights_phong_pars_fragment:As,lights_physical_fragment:Cs,lights_physical_pars_fragment:Os,lights_template:ks,logdepthbuf_fragment:Ls,logdepthbuf_pars_fragment:Rs,logdepthbuf_pars_vertex:Is,logdepthbuf_vertex:Ds,map_fragment:Fs,map_pars_fragment:Ns,map_particle_fragment:Bs,map_particle_pars_fragment:Gs,metalnessmap_fragment:js,metalnessmap_pars_fragment:Vs,morphnormal_vertex:Us,morphtarget_pars_vertex:zs,morphtarget_vertex:Hs,normal_flip:Ws,normal_fragment:Xs,normalmap_pars_fragment:Ys,packing:qs,premultiplied_alpha_fragment:Ks,project_vertex:$s,roughnessmap_fragment:Zs,roughnessmap_pars_fragment:Qs,shadowmap_pars_fragment:Js,shadowmap_pars_vertex:el,shadowmap_vertex:tl,shadowmask_pars_fragment:rl,skinbase_vertex:il,skinning_pars_vertex:nl,skinning_vertex:al,skinnormal_vertex:ol,specularmap_fragment:sl,specularmap_pars_fragment:ll,tonemapping_fragment:ul,tonemapping_pars_fragment:cl,uv_pars_fragment:hl,uv_pars_vertex:pl,uv_vertex:dl,uv2_pars_fragment:fl,uv2_pars_vertex:ml,uv2_vertex:vl,worldpos_vertex:gl,cube_frag:yl,cube_vert:bl,depth_frag:_l,depth_vert:xl,distanceRGBA_frag:wl,distanceRGBA_vert:Tl,equirect_frag:Ml,equirect_vert:Sl,linedashed_frag:El,linedashed_vert:Pl,meshbasic_frag:Al,meshbasic_vert:Cl,meshlambert_frag:Ol,meshlambert_vert:kl,meshphong_frag:Ll,meshphong_vert:Rl,meshphysical_frag:Il,meshphysical_vert:Dl,normal_frag:Fl,normal_vert:Nl,points_frag:Bl,points_vert:Gl,shadow_frag:jl,shadow_vert:Vl};X.prototype={constructor:X,isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(){function e(e,t,r){return 0>r&&(r+=1),r>1&&(r-=1),1/6>r?e+6*(t-e)*r:.5>r?t:2/3>r?e+6*(t-e)*(2/3-r):e}return function(t,r,i){if(t=No.euclideanModulo(t,1),r=No.clamp(r,0,1),i=No.clamp(i,0,1),0===r)this.r=this.g=this.b=i;else{var n=.5>=i?i*(1+r):i+r-i*r,a=2*i-n;this.r=e(a,n,t+1/3),this.g=e(a,n,t),this.b=e(a,n,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,n=r[1],a=r[2];switch(n){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(o,s,l)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u=r[1],c=u.length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}if(e&&e.length>0){var u=zl[e];void 0!==u?this.setHex(u):console.warn("THREE.Color: Unknown color "+e)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(){var e=this.r,t=this.g,r=this.b;return this.r=e*e,this.g=t*t,this.b=r*r,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,r,i=e||{h:0,s:0,l:0},n=this.r,a=this.g,o=this.b,s=Math.max(n,a,o),l=Math.min(n,a,o),u=(l+s)/2;if(l===s)t=0,r=0;else{var c=s-l;switch(r=.5>=u?c/(s+l):c/(2-s-l),s){case n:t=(a-o)/c+(o>a?6:0);break;case a:t=(o-n)/c+2;break;case o:t=(n-a)/c+4}t/=6}return i.h=t,i.s=r,i.l=u,i},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){var i=this.getHSL();return i.h+=e,i.s+=t,i.l+=r,this.setHSL(i.h,i.s,i.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}};var zl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Hl={common:{diffuse:{value:new X(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new a(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new r(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new X(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}}},points:{diffuse:{value:new X(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new a(0,0,1,1)}}},Wl={basic:{uniforms:Ho.merge([Hl.common,Hl.aomap,Hl.fog]),vertexShader:Ul.meshbasic_vert,fragmentShader:Ul.meshbasic_frag},lambert:{uniforms:Ho.merge([Hl.common,Hl.aomap,Hl.lightmap,Hl.emissivemap,Hl.fog,Hl.lights,{emissive:{value:new X(0)}}]),vertexShader:Ul.meshlambert_vert,fragmentShader:Ul.meshlambert_frag},phong:{uniforms:Ho.merge([Hl.common,Hl.aomap,Hl.lightmap,Hl.emissivemap,Hl.bumpmap,Hl.normalmap,Hl.displacementmap,Hl.fog,Hl.lights,{emissive:{value:new X(0)},specular:{value:new X(1118481)},shininess:{value:30}}]),vertexShader:Ul.meshphong_vert,fragmentShader:Ul.meshphong_frag},standard:{uniforms:Ho.merge([Hl.common,Hl.aomap,Hl.lightmap,Hl.emissivemap,Hl.bumpmap,Hl.normalmap,Hl.displacementmap,Hl.roughnessmap,Hl.metalnessmap,Hl.fog,Hl.lights,{emissive:{value:new X(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ul.meshphysical_vert,fragmentShader:Ul.meshphysical_frag},points:{uniforms:Ho.merge([Hl.points,Hl.fog]),vertexShader:Ul.points_vert,fragmentShader:Ul.points_frag},dashed:{uniforms:Ho.merge([Hl.common,Hl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ul.linedashed_vert,fragmentShader:Ul.linedashed_frag},depth:{uniforms:Ho.merge([Hl.common,Hl.displacementmap]),vertexShader:Ul.depth_vert,fragmentShader:Ul.depth_frag},normal:{uniforms:{opacity:{value:1}},vertexShader:Ul.normal_vert,fragmentShader:Ul.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ul.cube_vert,fragmentShader:Ul.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:Ul.equirect_vert,fragmentShader:Ul.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new u}},vertexShader:Ul.distanceRGBA_vert,fragmentShader:Ul.distanceRGBA_frag}};Wl.physical={uniforms:Ho.merge([Wl.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Ul.meshphysical_vert,fragmentShader:Ul.meshphysical_frag},Y.prototype={constructor:Y,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;r>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new r;return function(t,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=+(1/0),this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new r;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new r;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y?!0:!1},getParameter:function(e,t){var i=t||new r;return i.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){var i=t||new r;return i.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new r;return function(t){var r=e.copy(t).clamp(this.min,this.max);return r.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},$.prototype={constructor:$,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){e===!0&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r){var i=this[t];void 0!==i?i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]="overdraw"===t?Number(r):r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){function t(e){var t=[];for(var r in e){var i=e[r];delete i.metadata,t.push(i)}return t}var r=void 0===e;r&&(e={textures:{},images:{}});var i={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,i.reflectivity=this.reflectivity),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Dn&&(i.blending=this.blending),this.shading!==On&&(i.shading=this.shading),this.side!==En&&(i.side=this.side),this.vertexColors!==kn&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),i.skinning=this.skinning,i.morphTargets=this.morphTargets,r){var n=t(e.textures),a=t(e.images);n.length>0&&(i.textures=n),a.length>0&&(i.images=a)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(null!==t){var i=t.length;r=new Array(i);for(var n=0;n!==i;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign($.prototype,t.prototype);var Xl=0;Q.prototype=Object.create($.prototype),Q.prototype.constructor=Q,Q.prototype.isShaderMaterial=!0,Q.prototype.copy=function(e){return $.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ho.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Q.prototype.toJSON=function(e){var t=$.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},J.prototype=Object.create($.prototype),J.prototype.constructor=J,J.prototype.isMeshDepthMaterial=!0,J.prototype.copy=function(e){return $.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},ee.prototype={constructor:ee,isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=+(1/0),r=+(1/0),i=+(1/0),n=-(1/0),a=-(1/0),o=-(1/0),s=0,l=e.length;l>s;s+=3){var u=e[s],c=e[s+1],h=e[s+2];t>u&&(t=u),r>c&&(r=c),i>h&&(i=h),u>n&&(n=u),c>a&&(a=c),h>o&&(o=h)}this.min.set(t,r,i),this.max.set(n,a,o)},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;r>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new u;return function(t,r){var i=e.copy(r).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(){var e=new u;return function(t){var r=this;return t.updateMatrixWorld(!0),this.makeEmpty(),t.traverse(function(t){var i=t.geometry;if(void 0!==i)if(i&&i.isGeometry)for(var n=i.vertices,a=0,o=n.length;o>a;a++)e.copy(n[a]),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e);else if(i&&i.isBufferGeometry){var s=i.attributes.position;if(void 0!==s){var l,u,c;s&&s.isInterleavedBufferAttribute?(l=s.data.array,u=s.offset,c=s.data.stride):(l=s.array,u=0,c=3);for(var a=u,o=l.length;o>a;a+=c)e.fromArray(l,a),e.applyMatrix4(t.matrixWorld),r.expandByPoint(e)}}}),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+(1/0),this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new u;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new u;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z?!0:!1},getParameter:function(e,t){var r=t||new u;return r.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},intersectsSphere:function(){var e;return function(t){return void 0===e&&(e=new u),this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=e.constant&&r>=e.constant},clampPoint:function(e,t){var r=t||new u;return r.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new u;return function(t){var r=e.copy(t).clamp(this.min,this.max);return r.sub(t).length()}}(),getBoundingSphere:function(){var e=new u;return function(t){var r=t||new te;return this.getCenter(r.center),r.radius=.5*this.getSize(e).length(),r}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new u,new u,new u,new u,new u,new u,new u,new u];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},te.prototype={constructor:te,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new ee;return function(t,r){var i=this.center;void 0!==r?i.copy(r):e.setFromPoints(t).getCenter(i);for(var n=0,a=0,o=t.length;o>a;a++)n=Math.max(n,i.distanceToSquared(t[a]));return this.radius=Math.sqrt(n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e),i=t||new u;return i.copy(e),r>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(e){var t=e||new ee;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},re.prototype={constructor:re,isMatrix3:!0,set:function(e,t,r,i,n,a,o,s,l){var u=this.elements;return u[0]=e,u[1]=i,u[2]=o,u[3]=t,u[4]=n,u[5]=s,u[6]=r,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToVector3Array:function(){var e;return function(t,r,i){void 0===e&&(e=new u),void 0===r&&(r=0),void 0===i&&(i=t.length);for(var n=0,a=r;i>n;n+=3,a+=3)e.fromArray(t,a),e.applyMatrix3(this),e.toArray(t,a);return t}}(),applyToBuffer:function(){var e;return function(t,r,i){void 0===e&&(e=new u),void 0===r&&(r=0),void 0===i&&(i=t.length/t.itemSize);for(var n=0,a=r;i>n;n++,a++)e.x=t.getX(a),e.y=t.getY(a),e.z=t.getZ(a),e.applyMatrix3(this),t.setXYZ(a,e.x,e.y,e.z);return t}}(),multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8];return t*a*u-t*o*l-r*n*u+r*o*s+i*n*l-i*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var r=e.elements,i=this.elements,n=r[0],a=r[1],o=r[2],s=r[3],l=r[4],u=r[5],c=r[6],h=r[7],p=r[8],d=p*l-u*h,f=u*c-p*s,m=h*s-l*c,v=n*d+a*f+o*m;if(0===v){var g="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(t===!0)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return i[0]=d*y,i[1]=(o*h-p*a)*y,i[2]=(u*a-o*l)*y,i[3]=f*y,i[4]=(p*n-o*c)*y,i[5]=(o*s-u*n)*y,i[6]=m*y,i[7]=(a*c-h*n)*y,i[8]=(l*n-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset is deprecated - just use .toArray instead."),this.toArray(e,t)},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;9>r;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}},ie.prototype={constructor:ie,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new u,t=new u;return function(r,i,n){var a=e.subVectors(n,i).cross(t.subVectors(r,i)).normalize();return this.setFromNormalAndCoplanarPoint(a,r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var r=this.distanceToPoint(e),i=t||new u;return i.copy(this.normal).multiplyScalar(r)},intersectLine:function(){var e=new u;return function(t,r){var i=r||new u,n=t.delta(e),a=this.normal.dot(n);if(0===a)return 0===this.distanceToPoint(t.start)?i.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/a;return 0>o||o>1?void 0:i.copy(n).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return 0>t&&r>0||0>r&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new u;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new u,t=new re;return function(r,i){var n=this.coplanarPoint(e).applyMatrix4(r),a=i||t.getNormalMatrix(r),o=this.normal.applyMatrix3(a).normalize();return this.constant=-n.dot(o),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},ne.prototype={constructor:ne,set:function(e,t,r,i,n,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(r),o[3].copy(i),o[4].copy(n),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,r=0;6>r;r++)t[r].copy(e.planes[r]);

return this},setFromMatrix:function(e){var t=this.planes,r=e.elements,i=r[0],n=r[1],a=r[2],o=r[3],s=r[4],l=r[5],u=r[6],c=r[7],h=r[8],p=r[9],d=r[10],f=r[11],m=r[12],v=r[13],g=r[14],y=r[15];return t[0].setComponents(o-i,c-s,f-h,y-m).normalize(),t[1].setComponents(o+i,c+s,f+h,y+m).normalize(),t[2].setComponents(o+n,c+l,f+p,y+v).normalize(),t[3].setComponents(o-n,c-l,f-p,y-v).normalize(),t[4].setComponents(o-a,c-u,f-d,y-g).normalize(),t[5].setComponents(o+a,c+u,f+d,y+g).normalize(),this},intersectsObject:function(){var e=new te;return function(t){var r=t.geometry;return null===r.boundingSphere&&r.computeBoundingSphere(),e.copy(r.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new te;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,r=e.center,i=-e.radius,n=0;6>n;n++){var a=t[n].distanceToPoint(r);if(i>a)return!1}return!0},intersectsBox:function(){var e=new u,t=new u;return function(r){for(var i=this.planes,n=0;6>n;n++){var a=i[n];e.x=a.normal.x>0?r.min.x:r.max.x,t.x=a.normal.x>0?r.max.x:r.min.x,e.y=a.normal.y>0?r.min.y:r.max.y,t.y=a.normal.y>0?r.max.y:r.min.y,e.z=a.normal.z>0?r.min.z:r.max.z,t.z=a.normal.z>0?r.max.z:r.min.z;var o=a.distanceToPoint(e),s=a.distanceToPoint(t);if(0>o&&0>s)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,r=0;6>r;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}},oe.prototype={constructor:oe,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var r=t||new u;return r.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new u;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){var r=t||new u;r.subVectors(e,this.origin);var i=r.dot(this.direction);return 0>i?r.copy(this.origin):r.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new u;return function(t){var r=e.subVectors(t,this.origin).dot(this.direction);return 0>r?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(r).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new u,t=new u,r=new u;return function(i,n,a,o){e.copy(i).add(n).multiplyScalar(.5),t.copy(n).sub(i).normalize(),r.copy(this.origin).sub(e);var s,l,u,c,h=.5*i.distanceTo(n),p=-this.direction.dot(t),d=r.dot(this.direction),f=-r.dot(t),m=r.lengthSq(),v=Math.abs(1-p*p);if(v>0)if(s=p*f-d,l=p*d-f,c=h*v,s>=0)if(l>=-c)if(c>=l){var g=1/v;s*=g,l*=g,u=s*(s+p*l+2*d)+l*(p*s+l+2*f)+m}else l=h,s=Math.max(0,-(p*l+d)),u=-s*s+l*(l+2*f)+m;else l=-h,s=Math.max(0,-(p*l+d)),u=-s*s+l*(l+2*f)+m;else-c>=l?(s=Math.max(0,-(-p*h+d)),l=s>0?-h:Math.min(Math.max(-h,-f),h),u=-s*s+l*(l+2*f)+m):c>=l?(s=0,l=Math.min(Math.max(-h,-f),h),u=l*(l+2*f)+m):(s=Math.max(0,-(p*h+d)),l=s>0?h:Math.min(Math.max(-h,-f),h),u=-s*s+l*(l+2*f)+m);else l=p>0?-h:h,s=Math.max(0,-(p*l+d)),u=-s*s+l*(l+2*f)+m;return a&&a.copy(this.direction).multiplyScalar(s).add(this.origin),o&&o.copy(t).multiplyScalar(l).add(e),u}}(),intersectSphere:function(){var e=new u;return function(t,r){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),n=e.dot(e)-i*i,a=t.radius*t.radius;if(n>a)return null;var o=Math.sqrt(a-n),s=i-o,l=i+o;return 0>s&&0>l?null:0>s?this.at(l,r):this.at(s,r)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var r=e.normal.dot(this.direction);return 0>r*t?!0:!1},intersectBox:function(e,t){var r,i,n,a,o,s,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return l>=0?(r=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(r=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),u>=0?(n=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(n=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),r>a||n>i?null:((n>r||r!==r)&&(r=n),(i>a||i!==i)&&(i=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),r>s||o>i?null:((o>r||r!==r)&&(r=o),(i>s||i!==i)&&(i=s),0>i?null:this.at(r>=0?r:i,t)))},intersectsBox:function(){var e=new u;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new u,t=new u,r=new u,i=new u;return function(n,a,o,s,l){t.subVectors(a,n),r.subVectors(o,n),i.crossVectors(t,r);var u,c=this.direction.dot(i);if(c>0){if(s)return null;u=1}else{if(!(0>c))return null;u=-1,c=-c}e.subVectors(this.origin,n);var h=u*this.direction.dot(r.crossVectors(e,r));if(0>h)return null;var p=u*this.direction.dot(t.cross(e));if(0>p)return null;if(h+p>c)return null;var d=-u*e.dot(i);return 0>d?null:this.at(d/c,l)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},se.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],se.DefaultOrder="XYZ",se.prototype={constructor:se,isEuler:!0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var i=No.clamp,n=e.elements,a=n[0],o=n[4],s=n[8],l=n[1],u=n[5],c=n[9],h=n[2],p=n[6],d=n[10];return t=t||this._order,"XYZ"===t?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(p,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===t?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===t?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(p,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,r!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var e;return function(t,r,i){return void 0===e&&(e=new c),e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,r,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new l;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new u(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},le.prototype={constructor:le,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return 0!==(this.mask&e.mask)}},ue.DefaultUp=new u(0,1,0),ue.DefaultMatrixAutoUpdate=!0,Object.assign(ue.prototype,t.prototype,{isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new l;return function(t,r){return e.setFromAxisAngle(t,r),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new u(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new u(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new u(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new u;return function(t,r){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(r)),this}}(),translateX:function(){var e=new u(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new u(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new u(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new c;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new c;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var r=this.children.indexOf(e);-1!==r&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(r,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,i=this.children.length;i>r;r++){var n=this.children[r],a=n.getObjectByProperty(e,t);if(void 0!==a)return a}return void 0},getWorldPosition:function(e){var t=e||new u;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new u,t=new u;return function(r){var i=r||new l;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,i,t),i}}(),getWorldRotation:function(){var e=new l;return function(t){var r=t||new se;return this.getWorldQuaternion(e),r.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new u,t=new l;return function(r){var i=r||new u;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i),i}}(),getWorldDirection:function(){var e=new l;return function(t){var r=t||new u;return this.getWorldQuaternion(e),r.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,i=t.length;i>r;r++)t[r].traverse(e)},traverseVisible:function(e){if(this.visible!==!1){e(this);for(var t=this.children,r=0,i=t.length;i>r;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||e===!0)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,i=t.length;i>r;r++)t[r].updateMatrixWorld(e)},toJSON:function(e){function t(e){var t=[];for(var r in e){var i=e[r];delete i.metadata,t.push(i)}return t}var r=void 0===e||""===e,i={};r&&(e={geometries:{},materials:{},textures:{},images:{}},i.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var n={};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),n.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),n.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),n.material=this.material.uuid),this.children.length>0){n.children=[];for(var a=0;a<this.children.length;a++)n.children.push(this.children[a].toJSON(e).object)}if(r){var o=t(e.geometries),s=t(e.materials),l=t(e.textures),u=t(e.images);o.length>0&&(i.geometries=o),s.length>0&&(i.materials=s),l.length>0&&(i.textures=l),u.length>0&&(i.images=u)}return i.object=n,i},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(var r=0;r<e.children.length;r++){var i=e.children[r];this.add(i.clone())}return this}});var Yl=0;he.prototype={constructor:he,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){var t=e||new u;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new u;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var r=t||new u;return this.delta(r).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new u,t=new u;return function(r,i){e.subVectors(r,this.start),t.subVectors(this.end,this.start);var n=t.dot(t),a=t.dot(e),o=a/n;return i&&(o=No.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,r){var i=this.closestPointToPointParameter(e,t),n=r||new u;return this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},pe.normal=function(){var e=new u;return function(t,r,i,n){var a=n||new u;a.subVectors(i,r),e.subVectors(t,r),a.cross(e);var o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}}(),pe.barycoordFromPoint=function(){var e=new u,t=new u,r=new u;return function(i,n,a,o,s){e.subVectors(o,n),t.subVectors(a,n),r.subVectors(i,n);var l=e.dot(e),c=e.dot(t),h=e.dot(r),p=t.dot(t),d=t.dot(r),f=l*p-c*c,m=s||new u;if(0===f)return m.set(-2,-1,-1);var v=1/f,g=(p*h-c*d)*v,y=(l*d-c*h)*v;return m.set(1-g-y,y,g)}}(),pe.containsPoint=function(){var e=new u;return function(t,r,i,n){var a=pe.barycoordFromPoint(t,r,i,n,e);return a.x>=0&&a.y>=0&&a.x+a.y<=1}}(),pe.prototype={constructor:pe,set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new u,t=new u;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new u;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return pe.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new ie;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return pe.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return pe.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e,t,r,i;return function(n,a){void 0===e&&(e=new ie,t=[new he,new he,new he],r=new u,i=new u);var o=a||new u,s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(n,r),this.containsPoint(r)===!0)o.copy(r);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var l=0;l<t.length;l++){t[l].closestPointToPoint(r,!0,i);var c=r.distanceToSquared(i);s>c&&(s=c,o.copy(i))}}return o}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},de.prototype={constructor:de,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;r>t;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,r=e.vertexColors.length;r>t;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}},fe.prototype=Object.create($.prototype),fe.prototype.constructor=fe,fe.prototype.isMeshBasicMaterial=!0,fe.prototype.copy=function(e){return $.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},me.prototype={constructor:me,isBufferAttribute:!0,set needsUpdate(e){e===!0&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var i=0,n=this.itemSize;n>i;i++)this.array[e+i]=t.array[r+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;n>i;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new X),t[r++]=a.r,t[r++]=a.g,t[r++]=a.b}return this},copyIndicesArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;n>i;i++){var a=e[i];t[r++]=a.a,t[r++]=a.b,t[r++]=a.c}return this},copyVector2sArray:function(e){for(var t=this.array,i=0,n=0,a=e.length;a>n;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new r),t[i++]=o.x,t[i++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;n>i;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new u),t[r++]=a.x,t[r++]=a.y,t[r++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,i=0,n=e.length;n>i;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new a),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this},setXYZW:function(e,t,r,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this},clone:function(){return(new this.constructor).copy(this)}},Object.assign(Ee.prototype,t.prototype,{isGeometry:!0,applyMatrix:function(e){for(var t=(new re).getNormalMatrix(e),r=0,i=this.vertices.length;i>r;r++){var n=this.vertices[r];n.applyMatrix4(e)}for(var r=0,i=this.faces.length;i>r;r++){var a=this.faces[r];a.normal.applyMatrix3(t).normalize();for(var o=0,s=a.vertexNormals.length;s>o;o++)a.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new c),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new c),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new c),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,r,i){return void 0===e&&(e=new c),e.makeTranslation(t,r,i),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,r,i){return void 0===e&&(e=new c),e.makeScale(t,r,i),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new ue),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,r,n){var a=void 0!==s?[p[e].clone(),p[t].clone(),p[r].clone()]:[],o=void 0!==l?[i.colors[e].clone(),i.colors[t].clone(),i.colors[r].clone()]:[],u=new de(e,t,r,a,o,n);i.faces.push(u),void 0!==c&&i.faceVertexUvs[0].push([d[e].clone(),d[t].clone(),d[r].clone()]),void 0!==h&&i.faceVertexUvs[1].push([f[e].clone(),f[t].clone(),f[r].clone()])}var i=this,n=null!==e.index?e.index.array:void 0,a=e.attributes,o=a.position.array,s=void 0!==a.normal?a.normal.array:void 0,l=void 0!==a.color?a.color.array:void 0,c=void 0!==a.uv?a.uv.array:void 0,h=void 0!==a.uv2?a.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var p=[],d=[],f=[],m=0,v=0;m<o.length;m+=3,v+=2)i.vertices.push(new u(o[m],o[m+1],o[m+2])),void 0!==s&&p.push(new u(s[m],s[m+1],s[m+2])),void 0!==l&&i.colors.push(new X(l[m],l[m+1],l[m+2])),void 0!==c&&d.push(new r(c[v],c[v+1])),void 0!==h&&f.push(new r(h[v],h[v+1]));if(void 0!==n){var g=e.groups;if(g.length>0)for(var m=0;m<g.length;m++)for(var y=g[m],b=y.start,_=y.count,v=b,x=b+_;x>v;v+=3)t(n[v],n[v+1],n[v+2],y.materialIndex);else for(var m=0;m<n.length;m+=3)t(n[m],n[m+1],n[m+2])}else for(var m=0;m<o.length/3;m+=3)t(m,m+1,m+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,i=new c;return i.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new u,t=new u,r=0,i=this.faces.length;i>r;r++){var n=this.faces[r],a=this.vertices[n.a],o=this.vertices[n.b],s=this.vertices[n.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,r,i,n,a,o;for(o=new Array(this.vertices.length),t=0,r=this.vertices.length;r>t;t++)o[t]=new u;if(e){var s,l,c,h=new u,p=new u;for(i=0,n=this.faces.length;n>i;i++)a=this.faces[i],s=this.vertices[a.a],l=this.vertices[a.b],c=this.vertices[a.c],h.subVectors(c,l),p.subVectors(s,l),h.cross(p),o[a.a].add(h),o[a.b].add(h),o[a.c].add(h)}else for(this.computeFaceNormals(),i=0,n=this.faces.length;n>i;i++)a=this.faces[i],o[a.a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,r=this.vertices.length;r>t;t++)o[t].normalize();for(i=0,n=this.faces.length;n>i;i++){a=this.faces[i];var d=a.vertexNormals;3===d.length?(d[0].copy(o[a.a]),d[1].copy(o[a.b]),d[2].copy(o[a.c])):(d[0]=o[a.a].clone(),d[1]=o[a.b].clone(),d[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;t>e;e++){r=this.faces[e];var i=r.vertexNormals;3===i.length?(i[0].copy(r.normal),i[1].copy(r.normal),i[2].copy(r.normal)):(i[0]=r.normal.clone(),i[1]=r.normal.clone(),i[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,i,n;for(r=0,i=this.faces.length;i>r;r++)for(n=this.faces[r],n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;t>e;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var a=new Ee;for(a.faces=this.faces,e=0,t=this.morphTargets.length;t>e;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o,s,l=this.morphNormals[e].faceNormals,c=this.morphNormals[e].vertexNormals;for(r=0,i=this.faces.length;i>r;r++)o=new u,s={a:new u,b:new u,c:new u},l.push(o),c.push(s)}var h=this.morphNormals[e];a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals();var o,s;for(r=0,i=this.faces.length;i>r;r++)n=this.faces[r],o=h.faceNormals[r],s=h.vertexNormals[r],o.copy(n.normal),s.a.copy(n.vertexNormals[0]),s.b.copy(n.vertexNormals[1]),s.c.copy(n.vertexNormals[2])}for(r=0,i=this.faces.length;i>r;r++)n=this.faces[r],n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeTangents:function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){for(var e=0,t=this.vertices,r=0,i=t.length;i>r;r++)r>0&&(e+=t[r].distanceTo(t[r-1])),this.lineDistances[r]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ee),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new te),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if((e&&e.isGeometry)===!1)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e);var i,n=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,u=this.faceVertexUvs[0],c=e.faceVertexUvs[0],h=this.colors,p=e.colors;void 0===r&&(r=0),void 0!==t&&(i=(new re).getNormalMatrix(t));for(var d=0,f=o.length;f>d;d++){var m=o[d],v=m.clone();void 0!==t&&v.applyMatrix4(t),a.push(v)}for(var d=0,f=p.length;f>d;d++)h.push(p[d].clone());for(d=0,f=l.length;f>d;d++){var g,y,b,_=l[d],x=_.vertexNormals,w=_.vertexColors;g=new de(_.a+n,_.b+n,_.c+n),g.normal.copy(_.normal),void 0!==i&&g.normal.applyMatrix3(i).normalize();for(var T=0,M=x.length;M>T;T++)y=x[T].clone(),void 0!==i&&y.applyMatrix3(i).normalize(),g.vertexNormals.push(y);g.color.copy(_.color);for(var T=0,M=w.length;M>T;T++)b=w[T],g.vertexColors.push(b.clone());g.materialIndex=_.materialIndex+r,s.push(g)}for(d=0,f=c.length;f>d;d++){var S=c[d],E=[];if(void 0!==S){for(var T=0,M=S.length;M>T;T++)E.push(S[T].clone());u.push(E)}}},mergeMesh:function(e){return(e&&e.isMesh)===!1?void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e):(e.matrixAutoUpdate&&e.updateMatrix(),void this.merge(e.geometry,e.matrix))},mergeVertices:function(){var e,t,r,i,n,a,o,s,l={},u=[],c=[],h=4,p=Math.pow(10,h);for(r=0,i=this.vertices.length;i>r;r++)e=this.vertices[r],t=Math.round(e.x*p)+"_"+Math.round(e.y*p)+"_"+Math.round(e.z*p),void 0===l[t]?(l[t]=r,u.push(this.vertices[r]),c[r]=u.length-1):c[r]=c[l[t]];var d=[];for(r=0,i=this.faces.length;i>r;r++){n=this.faces[r],n.a=c[n.a],n.b=c[n.b],n.c=c[n.c],a=[n.a,n.b,n.c];for(var f=-1,m=0;3>m;m++)if(a[m]===a[(m+1)%3]){f=m,d.push(r);break}}for(r=d.length-1;r>=0;r--){var v=d[r];for(this.faces.splice(v,1),o=0,s=this.faceVertexUvs.length;s>o;o++)this.faceVertexUvs[o].splice(v,1)}var g=this.vertices.length-u.length;return this.vertices=u,g},sortFacesByMaterialIndex:function(){function e(e,t){return e.materialIndex-t.materialIndex}for(var t=this.faces,r=t.length,i=0;r>i;i++)t[i]._id=i;t.sort(e);var n,a,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];o&&o.length===r&&(n=[]),s&&s.length===r&&(a=[]);for(var i=0;r>i;i++){var l=t[i]._id;n&&n.push(o[l]),a&&a.push(s[l])}n&&(this.faceVertexUvs[0]=n),a&&(this.faceVertexUvs[1]=a)},toJSON:function(){function e(e,t,r){return r?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==p[t]?p[t]:(p[t]=h.length/3,h.push(e.x,e.y,e.z),p[t])}function r(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==f[t]?f[t]:(f[t]=d.length,d.push(e.getHex()),f[t])}function i(e){var t=e.x.toString()+e.y.toString();return void 0!==v[t]?v[t]:(v[t]=m.length/2,m.push(e.x,e.y),v[t])}var n={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),void 0!==this.parameters){var a=this.parameters;for(var o in a)void 0!==a[o]&&(n[o]=a[o]);return n}for(var s=[],l=0;l<this.vertices.length;l++){var u=this.vertices[l];s.push(u.x,u.y,u.z)}for(var c=[],h=[],p={},d=[],f={},m=[],v={},l=0;l<this.faces.length;l++){var g=this.faces[l],y=!0,b=!1,_=void 0!==this.faceVertexUvs[0][l],x=g.normal.length()>0,w=g.vertexNormals.length>0,T=1!==g.color.r||1!==g.color.g||1!==g.color.b,M=g.vertexColors.length>0,S=0;if(S=e(S,0,0),S=e(S,1,y),S=e(S,2,b),S=e(S,3,_),S=e(S,4,x),S=e(S,5,w),S=e(S,6,T),S=e(S,7,M),c.push(S),c.push(g.a,g.b,g.c),c.push(g.materialIndex),_){var E=this.faceVertexUvs[0][l];c.push(i(E[0]),i(E[1]),i(E[2]))}if(x&&c.push(t(g.normal)),w){var P=g.vertexNormals;c.push(t(P[0]),t(P[1]),t(P[2]))}if(T&&c.push(r(g.color)),M){var A=g.vertexColors;c.push(r(A[0]),r(A[1]),r(A[2]))}}return n.data={},n.data.vertices=s,n.data.normals=h,d.length>0&&(n.data.colors=d),m.length>0&&(n.data.uvs=[m]),n.data.faces=c,n},clone:function(){return(new Ee).copy(this)},copy:function(e){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]],this.colors=[];for(var t=e.vertices,r=0,i=t.length;i>r;r++)this.vertices.push(t[r].clone());

for(var n=e.colors,r=0,i=n.length;i>r;r++)this.colors.push(n[r].clone());for(var a=e.faces,r=0,i=a.length;i>r;r++)this.faces.push(a[r].clone());for(var r=0,i=e.faceVertexUvs.length;i>r;r++){var o=e.faceVertexUvs[r];void 0===this.faceVertexUvs[r]&&(this.faceVertexUvs[r]=[]);for(var s=0,l=o.length;l>s;s++){for(var u=o[s],c=[],h=0,p=u.length;p>h;h++){var d=u[h];c.push(d.clone())}this.faceVertexUvs[r].push(c)}}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var ql=0;Object.assign(Ae.prototype,t.prototype,{computeBoundingBox:Ee.prototype.computeBoundingBox,computeBoundingSphere:Ee.prototype.computeBoundingSphere,computeFaceNormals:function(){console.warn("THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.")},computeVertexNormals:function(){console.warn("THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.")},computeGroups:function(e){for(var t,r,i=[],n=e.faces,a=0;a<n.length;a++){var o=n[a];o.materialIndex!==r&&(r=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,i.push(t)),t={start:3*a,materialIndex:r})}void 0!==t&&(t.count=3*a-t.start,i.push(t)),this.groups=i},fromGeometry:function(e){var t,i=e.faces,n=e.vertices,a=e.faceVertexUvs,o=a[0]&&a[0].length>0,s=a[1]&&a[1].length>0,l=e.morphTargets,u=l.length;if(u>0){t=[];for(var c=0;u>c;c++)t[c]=[];this.morphTargets.position=t}var h,p=e.morphNormals,d=p.length;if(d>0){h=[];for(var c=0;d>c;c++)h[c]=[];this.morphTargets.normal=h}for(var f=e.skinIndices,m=e.skinWeights,v=f.length===n.length,g=m.length===n.length,c=0;c<i.length;c++){var y=i[c];this.vertices.push(n[y.a],n[y.b],n[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var _=y.normal;this.normals.push(_,_,_)}var x=y.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=y.color;this.colors.push(w,w,w)}if(o===!0){var T=a[0][c];void 0!==T?this.uvs.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new r,new r,new r))}if(s===!0){var T=a[1][c];void 0!==T?this.uvs2.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new r,new r,new r))}for(var M=0;u>M;M++){var S=l[M].vertices;t[M].push(S[y.a],S[y.b],S[y.c])}for(var M=0;d>M;M++){var E=p[M].vertexNormals[c];h[M].push(E.a,E.b,E.c)}v&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(Ce.prototype,t.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=e},addAttribute:function(e,t){return(t&&t.isBufferAttribute)===!1&&(t&&t.isInterleavedBufferAttribute)===!1?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new me(arguments[1],arguments[2]))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this)},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToVector3Array(t.array),t.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){var i=(new re).getNormalMatrix(e);i.applyToVector3Array(r.array),r.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e;return function(t){return void 0===e&&(e=new c),e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e;return function(t){return void 0===e&&(e=new c),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new c),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,r,i){return void 0===e&&(e=new c),e.makeTranslation(t,r,i),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,r,i){return void 0===e&&(e=new c),e.makeScale(t,r,i),this.applyMatrix(e),this}}(),lookAt:function(){var e;return function(t){void 0===e&&(e=new ue),e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e&&e.isPoints||e&&e.isLine){var r=new Te(3*t.vertices.length,3),i=new Te(3*t.colors.length,3);if(this.addAttribute("position",r.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var n=new Te(t.lineDistances.length,1);this.addAttribute("lineDistance",n.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e&&e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e&&e.isMesh){var r=t.__directGeometry;if(t.elementsNeedUpdate===!0&&(r=void 0,t.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(t);r.verticesNeedUpdate=t.verticesNeedUpdate,r.normalsNeedUpdate=t.normalsNeedUpdate,r.colorsNeedUpdate=t.colorsNeedUpdate,r.uvsNeedUpdate=t.uvsNeedUpdate,r.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=r}var i;return t.verticesNeedUpdate===!0&&(i=this.attributes.position,void 0!==i&&(i.copyVector3sArray(t.vertices),i.needsUpdate=!0),t.verticesNeedUpdate=!1),t.normalsNeedUpdate===!0&&(i=this.attributes.normal,void 0!==i&&(i.copyVector3sArray(t.normals),i.needsUpdate=!0),t.normalsNeedUpdate=!1),t.colorsNeedUpdate===!0&&(i=this.attributes.color,void 0!==i&&(i.copyColorsArray(t.colors),i.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(i=this.attributes.uv,void 0!==i&&(i.copyVector2sArray(t.uvs),i.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(i=this.attributes.lineDistance,void 0!==i&&(i.copyArray(t.lineDistances),i.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ae).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new me(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.addAttribute("normal",new me(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new me(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var n=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new me(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new me(a,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var o=e.vertices.length>65535?Uint32Array:Uint16Array,s=new o(3*e.indices.length);this.setIndex(new me(s,1).copyIndicesArray(e.indices))}this.groups=e.groups;for(var l in e.morphTargets){for(var u=[],c=e.morphTargets[l],h=0,p=c.length;p>h;h++){var d=c[h],f=new Te(3*d.length,3);u.push(f.copyVector3sArray(d))}this.morphAttributes[l]=u}if(e.skinIndices.length>0){var m=new Te(4*e.skinIndices.length,4);this.addAttribute("skinIndex",m.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var v=new Te(4*e.skinWeights.length,4);this.addAttribute("skinWeight",v.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ee);var e=this.attributes.position.array;void 0!==e?this.boundingBox.setFromArray(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new ee,t=new u;return function(){null===this.boundingSphere&&(this.boundingSphere=new te);var r=this.attributes.position;if(r){var i=r.array,n=this.boundingSphere.center;e.setFromArray(i),e.getCenter(n);for(var a=0,o=0,s=i.length;s>o;o+=3)t.fromArray(i,o),a=Math.max(a,n.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,r=this.groups;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new me(new Float32Array(i.length),3));else for(var n=t.normal.array,a=0,o=n.length;o>a;a++)n[a]=0;var s,l,c,h=t.normal.array,p=new u,d=new u,f=new u,m=new u,v=new u;if(e){var g=e.array;0===r.length&&this.addGroup(0,g.length);for(var y=0,b=r.length;b>y;++y)for(var _=r[y],x=_.start,w=_.count,a=x,o=x+w;o>a;a+=3)s=3*g[a+0],l=3*g[a+1],c=3*g[a+2],p.fromArray(i,s),d.fromArray(i,l),f.fromArray(i,c),m.subVectors(f,d),v.subVectors(p,d),m.cross(v),h[s]+=m.x,h[s+1]+=m.y,h[s+2]+=m.z,h[l]+=m.x,h[l+1]+=m.y,h[l+2]+=m.z,h[c]+=m.x,h[c+1]+=m.y,h[c+2]+=m.z}else for(var a=0,o=i.length;o>a;a+=9)p.fromArray(i,a),d.fromArray(i,a+3),f.fromArray(i,a+6),m.subVectors(f,d),v.subVectors(p,d),m.cross(v),h[a]=m.x,h[a+1]=m.y,h[a+2]=m.z,h[a+3]=m.x,h[a+4]=m.y,h[a+5]=m.z,h[a+6]=m.x,h[a+7]=m.y,h[a+8]=m.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if((e&&e.isBufferGeometry)===!1)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0);var r=this.attributes;for(var i in r)if(void 0!==e.attributes[i])for(var n=r[i],a=n.array,o=e.attributes[i],s=o.array,l=o.itemSize,u=0,c=l*t;u<s.length;u++,c++)a[c]=s[u];return this},normalizeNormals:function(){for(var e,t,r,i,n=this.attributes.normal.array,a=0,o=n.length;o>a;a+=3)e=n[a],t=n[a+1],r=n[a+2],i=1/Math.sqrt(e*e+t*t+r*r),n[a]*=i,n[a+1]*=i,n[a+2]*=i},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Ce,t=this.index.array,r=this.attributes;for(var i in r){for(var n=r[i],a=n.array,o=n.itemSize,s=new a.constructor(t.length*o),l=0,u=0,c=0,h=t.length;h>c;c++){l=t[c]*o;for(var p=0;o>p;p++)s[u++]=a[l++]}e.addAttribute(i,new me(s,o))}return e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var n=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:n}}var a=this.attributes;for(var r in a){var o=a[r],n=Array.prototype.slice.call(o.array);e.data.attributes[r]={itemSize:o.itemSize,type:o.array.constructor.name,array:n,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new Ce).copy(this)},copy:function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var r=e.attributes;for(var i in r){var n=r[i];this.addAttribute(i,n.clone())}for(var a=e.groups,o=0,s=a.length;s>o;o++){var l=a[o];this.addGroup(l.start,l.count,l.materialIndex)}return this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ce.MaxIndex=65535,Oe.prototype=Object.assign(Object.create(ue.prototype),{constructor:Oe,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return ue.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry.morphTargets;if(void 0!==e&&e.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,r=e.length;r>t;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){function e(e,t,r,i,n,a,o){return pe.barycoordFromPoint(e,t,r,i,y),n.multiplyScalar(y.x),a.multiplyScalar(y.y),o.multiplyScalar(y.z),n.add(a).add(o),n.clone()}function t(e,t,r,i,n,a,o){var s,l=e.material;if(s=l.side===Pn?r.intersectTriangle(a,n,i,!0,o):r.intersectTriangle(i,n,a,l.side!==An,o),null===s)return null;_.copy(o),_.applyMatrix4(e.matrixWorld);var u=t.ray.origin.distanceTo(_);return u<t.near||u>t.far?null:{distance:u,point:_.clone(),object:e}}function i(r,i,n,a,o,u,c,p){s.fromArray(a,3*u),l.fromArray(a,3*c),h.fromArray(a,3*p);var d=t(r,i,n,s,l,h,b);return d&&(o&&(m.fromArray(o,2*u),v.fromArray(o,2*c),g.fromArray(o,2*p),d.uv=e(b,s,l,h,m,v,g)),d.face=new de(u,c,p,pe.normal(s,l,h)),d.faceIndex=u),d}var n=new c,a=new oe,o=new te,s=new u,l=new u,h=new u,p=new u,d=new u,f=new u,m=new r,v=new r,g=new r,y=new u,b=new u,_=new u;return function(r,u){var c=this.geometry,y=this.material,_=this.matrixWorld;if(void 0!==y&&(null===c.boundingSphere&&c.computeBoundingSphere(),o.copy(c.boundingSphere),o.applyMatrix4(_),r.ray.intersectsSphere(o)!==!1&&(n.getInverse(_),a.copy(r.ray).applyMatrix4(n),null===c.boundingBox||a.intersectsBox(c.boundingBox)!==!1))){var x,w;if(c&&c.isBufferGeometry){var T,M,S,E=c.index,P=c.attributes,A=P.position.array;if(void 0!==P.uv&&(x=P.uv.array),null!==E)for(var C=E.array,O=0,k=C.length;k>O;O+=3)T=C[O],M=C[O+1],S=C[O+2],w=i(this,r,a,A,x,T,M,S),w&&(w.faceIndex=Math.floor(O/3),u.push(w));else for(var O=0,k=A.length;k>O;O+=9)T=O/3,M=T+1,S=T+2,w=i(this,r,a,A,x,T,M,S),w&&(w.index=T,u.push(w))}else if(c&&c.isGeometry){var L,R,I,D=y&&y.isMultiMaterial,F=D===!0?y.materials:null,N=c.vertices,B=c.faces,G=c.faceVertexUvs[0];G.length>0&&(x=G);for(var j=0,V=B.length;V>j;j++){var U=B[j],z=D===!0?F[U.materialIndex]:y;if(void 0!==z){if(L=N[U.a],R=N[U.b],I=N[U.c],z.morphTargets===!0){var H=c.morphTargets,W=this.morphTargetInfluences;s.set(0,0,0),l.set(0,0,0),h.set(0,0,0);for(var X=0,Y=H.length;Y>X;X++){var q=W[X];if(0!==q){var K=H[X].vertices;s.addScaledVector(p.subVectors(K[U.a],L),q),l.addScaledVector(d.subVectors(K[U.b],R),q),h.addScaledVector(f.subVectors(K[U.c],I),q)}}s.add(L),l.add(R),h.add(I),L=s,R=l,I=h}if(w=t(this,r,a,L,R,I,b)){if(x){var $=x[j];m.copy($[0]),v.copy($[1]),g.copy($[2]),w.uv=e(b,L,R,I,m,v,g)}w.face=U,w.faceIndex=j,u.push(w)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ke.prototype=Object.create(Ce.prototype),ke.prototype.constructor=ke,Le.prototype=Object.create(Ce.prototype),Le.prototype.constructor=Le,Re.prototype=Object.create(ue.prototype),Re.prototype.constructor=Re,Re.prototype.isCamera=!0,Re.prototype.getWorldDirection=function(){var e=new l;return function(t){var r=t||new u;return this.getWorldQuaternion(e),r.set(0,0,-1).applyQuaternion(e)}}(),Re.prototype.lookAt=function(){var e=new c;return function(t){e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}}(),Re.prototype.clone=function(){return(new this.constructor).copy(this)},Re.prototype.copy=function(e){return ue.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},Ie.prototype=Object.assign(Object.create(Re.prototype),{constructor:Ie,isPerspectiveCamera:!0,copy:function(e){return Re.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*No.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*No.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*No.RAD2DEG*Math.atan(Math.tan(.5*No.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,i,n,a){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:i,width:n,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*No.DEG2RAD*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,a=this.view;if(null!==a){var o=a.fullWidth,s=a.fullHeight;n+=a.offsetX*i/o,t-=a.offsetY*r/s,i*=a.width/o,r*=a.height/s}var l=this.filmOffset;0!==l&&(n+=e*l/this.getFilmWidth()),this.projectionMatrix.makeFrustum(n,n+i,t-r,t,e,this.far)},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),De.prototype=Object.assign(Object.create(Re.prototype),{constructor:De,isOrthographicCamera:!0,copy:function(e){return Re.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,r,i,n,a){this.view={fullWidth:e,fullHeight:t,offsetX:r,offsetY:i,width:n,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,a=r+e,o=i+t,s=i-t;if(null!==this.view){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;n+=c*(this.view.offsetX/l),a=n+c*(this.view.width/l),o-=h*(this.view.offsetY/u),s=o-h*(this.view.height/u)}this.projectionMatrix.makeOrthographic(n,a,o,s,this.near,this.far)},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}});var Kl=0;ut.prototype.isFogExp2=!0,ut.prototype.clone=function(){return new ut(this.color.getHex(),this.density)},ut.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},ct.prototype.isFog=!0,ct.prototype.clone=function(){return new ct(this.color.getHex(),this.near,this.far)},ct.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ht.prototype=Object.create(ue.prototype),ht.prototype.constructor=ht,ht.prototype.copy=function(e,t){return ue.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},ht.prototype.toJSON=function(e){var t=ue.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},pt.prototype=Object.assign(Object.create(ue.prototype),{constructor:pt,isLensFlare:!0,copy:function(e){ue.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,r=e.lensFlares.length;r>t;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,r,i,n,a){void 0===t&&(t=-1),void 0===r&&(r=0),void 0===a&&(a=1),void 0===n&&(n=new X(16777215)),void 0===i&&(i=Dn),r=Math.min(r,Math.max(0,r)),this.lensFlares.push({texture:e,size:t,distance:r,x:0,y:0,z:0,scale:1,rotation:0,opacity:a,color:n,blending:i})},updateLensFlares:function(){var e,t,r=this.lensFlares.length,i=2*-this.positionScreen.x,n=2*-this.positionScreen.y;for(e=0;r>e;e++)t=this.lensFlares[e],t.x=this.positionScreen.x+i*t.distance,t.y=this.positionScreen.y+n*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}}),dt.prototype=Object.create($.prototype),dt.prototype.constructor=dt,dt.prototype.copy=function(e){return $.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},ft.prototype=Object.assign(Object.create(ue.prototype),{constructor:ft,isSprite:!0,raycast:function(){var e=new u;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.distanceSqToPoint(e),n=this.scale.x*this.scale.y/4;i>n||r.push({distance:Math.sqrt(i),point:this.position,face:null,object:this})}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),mt.prototype=Object.assign(Object.create(ue.prototype),{constructor:mt,copy:function(e){ue.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,i=t.length;i>r;r++){var n=t[r];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,i=0;i<r.length&&!(t<r[i].distance);i++);r.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,r=1,i=t.length;i>r&&!(e<t[r].distance);r++);return t[r-1].object},raycast:function(){var e=new u;return function(t,r){e.setFromMatrixPosition(this.matrixWorld);var i=t.ray.origin.distanceTo(e);this.getObjectForDistance(i).raycast(t,r)}}(),update:function(){var e=new u,t=new u;return function(r){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(r.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var n=e.distanceTo(t);i[0].object.visible=!0;for(var a=1,o=i.length;o>a&&n>=i[a].distance;a++)i[a-1].object.visible=!1,i[a].object.visible=!0;for(;o>a;a++)i[a].object.visible=!1}}}(),toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);t.object.levels=[];for(var r=this.levels,i=0,n=r.length;n>i;i++){var a=r[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),vt.prototype=Object.create(i.prototype),vt.prototype.constructor=vt,vt.prototype.isDataTexture=!0,Object.assign(gt.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;t>e;e++){var r=new c;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){for(var e,t=0,r=this.bones.length;r>t;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(var t=0,r=this.bones.length;r>t;t++)e=this.bones[t],e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new c;return function(){for(var t=0,r=this.bones.length;r>t;t++){var i=this.bones[t]?this.bones[t].matrixWorld:this.identityMatrix;e.multiplyMatrices(i,this.boneInverses[t]),e.toArray(this.boneMatrices,16*t)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}}(),clone:function(){return new gt(this.bones,this.boneInverses,this.useVertexTexture)}}),yt.prototype=Object.assign(Object.create(ue.prototype),{constructor:yt,isBone:!0,copy:function(e){return ue.prototype.copy.call(this,e),this.skin=e.skin,this}}),bt.prototype=Object.assign(Object.create(Oe.prototype),{constructor:bt,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e],r=1/t.lengthManhattan();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry)for(var i=new a,n=this.geometry.attributes.skinWeight,e=0;e<n.count;e++){i.x=n.getX(e),i.y=n.getY(e),i.z=n.getZ(e),i.w=n.getW(e);var r=1/i.lengthManhattan();r!==1/0?i.multiplyScalar(r):i.set(1,0,0,0),n.setXYZW(e,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(){Oe.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}}),_t.prototype=Object.create($.prototype),_t.prototype.constructor=_t,_t.prototype.isLineBasicMaterial=!0,_t.prototype.copy=function(e){return $.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},xt.prototype=Object.assign(Object.create(ue.prototype),{constructor:xt,isLine:!0,raycast:function(){var e=new c,t=new oe,r=new te;return function(i,n){var a=i.linePrecision,o=a*a,s=this.geometry,l=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(l),i.ray.intersectsSphere(r)!==!1){e.getInverse(l),t.copy(i.ray).applyMatrix4(e);var c=new u,h=new u,p=new u,d=new u,f=this&&this.isLineSegments?2:1;if(s&&s.isBufferGeometry){var m=s.index,v=s.attributes,g=v.position.array;if(null!==m)for(var y=m.array,b=0,_=y.length-1;_>b;b+=f){var x=y[b],w=y[b+1];c.fromArray(g,3*x),h.fromArray(g,3*w);var T=t.distanceSqToSegment(c,h,d,p);if(!(T>o)){d.applyMatrix4(this.matrixWorld);var M=i.ray.origin.distanceTo(d);M<i.near||M>i.far||n.push({distance:M,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else for(var b=0,_=g.length/3-1;_>b;b+=f){c.fromArray(g,3*b),h.fromArray(g,3*b+3);var T=t.distanceSqToSegment(c,h,d,p);if(!(T>o)){d.applyMatrix4(this.matrixWorld);var M=i.ray.origin.distanceTo(d);M<i.near||M>i.far||n.push({distance:M,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(s&&s.isGeometry)for(var S=s.vertices,E=S.length,b=0;E-1>b;b+=f){var T=t.distanceSqToSegment(S[b],S[b+1],d,p);if(!(T>o)){d.applyMatrix4(this.matrixWorld);var M=i.ray.origin.distanceTo(d);M<i.near||M>i.far||n.push({distance:M,point:p.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),wt.prototype=Object.assign(Object.create(xt.prototype),{constructor:wt,isLineSegments:!0}),Tt.prototype=Object.create($.prototype),Tt.prototype.constructor=Tt,Tt.prototype.isPointsMaterial=!0,Tt.prototype.copy=function(e){return $.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},Mt.prototype=Object.assign(Object.create(ue.prototype),{constructor:Mt,isPoints:!0,raycast:function(){var e=new c,t=new oe,r=new te;return function(i,n){function a(e,r){var a=t.distanceSqToPoint(e);if(p>a){var s=t.closestPointToPoint(e);s.applyMatrix4(l);var u=i.ray.origin.distanceTo(s);if(u<i.near||u>i.far)return;n.push({distance:u,distanceToRay:Math.sqrt(a),point:s.clone(),index:r,face:null,object:o})}}var o=this,s=this.geometry,l=this.matrixWorld,c=i.params.Points.threshold;if(null===s.boundingSphere&&s.computeBoundingSphere(),r.copy(s.boundingSphere),r.applyMatrix4(l),i.ray.intersectsSphere(r)!==!1){e.getInverse(l),t.copy(i.ray).applyMatrix4(e);var h=c/((this.scale.x+this.scale.y+this.scale.z)/3),p=h*h,d=new u;if(s&&s.isBufferGeometry){var f=s.index,m=s.attributes,v=m.position.array;if(null!==f)for(var g=f.array,y=0,b=g.length;b>y;y++){var _=g[y];d.fromArray(v,3*_),a(d,_)}else for(var y=0,x=v.length/3;x>y;y++)d.fromArray(v,3*y),a(d,y)}else for(var w=s.vertices,y=0,x=w.length;x>y;y++)a(w[y],y)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),St.prototype=Object.assign(Object.create(ue.prototype),{constructor:St}),Et.prototype=Object.create(i.prototype),Et.prototype.constructor=Et,Pt.prototype=Object.create(i.prototype),Pt.prototype.constructor=Pt,Pt.prototype.isCompressedTexture=!0,At.prototype=Object.create(i.prototype),At.prototype.constructor=At,Ct.prototype=Object.create(i.prototype),Ct.prototype.constructor=Ct,Ct.prototype.isDepthTexture=!0,Ot.prototype=Object.create(Ce.prototype),Ot.prototype.constructor=Ot,kt.prototype=Object.create(Ce.prototype),kt.prototype.constructor=kt,Lt.prototype=Object.create(Ee.prototype),Lt.prototype.constructor=Lt,Rt.prototype=Object.create(Ce.prototype),Rt.prototype.constructor=Rt,It.prototype=Object.create(Rt.prototype),It.prototype.constructor=It,Dt.prototype=Object.create(Ee.prototype),Dt.prototype.constructor=Dt,Ft.prototype=Object.create(Rt.prototype),Ft.prototype.constructor=Ft,Nt.prototype=Object.create(Ee.prototype),Nt.prototype.constructor=Nt,Bt.prototype=Object.create(Rt.prototype),Bt.prototype.constructor=Bt,Gt.prototype=Object.create(Ee.prototype),Gt.prototype.constructor=Gt,jt.prototype=Object.create(Rt.prototype),jt.prototype.constructor=jt,Vt.prototype=Object.create(Ee.prototype),Vt.prototype.constructor=Vt,Ut.prototype=Object.create(Ee.prototype),Ut.prototype.constructor=Ut,zt.prototype=Object.create(Ce.prototype),zt.prototype.constructor=zt,Ht.prototype=Object.create(Ee.prototype),Ht.prototype.constructor=Ht,Wt.prototype=Object.create(Ce.prototype),Wt.prototype.constructor=Wt,Xt.prototype=Object.create(Ee.prototype),Xt.prototype.constructor=Xt,Yt.prototype=Object.create(Ce.prototype),Yt.prototype.constructor=Yt,qt.prototype=Object.create(Ee.prototype),qt.prototype.constructor=qt;var $l={area:function(e){for(var t=e.length,r=0,i=t-1,n=0;t>n;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return.5*r},triangulate:function(){function e(e,t,r,i,n,a){var o,s,l,u,c,h,p,d,f;if(s=e[a[t]].x,l=e[a[t]].y,u=e[a[r]].x,c=e[a[r]].y,h=e[a[i]].x,p=e[a[i]].y,0>=(u-s)*(p-l)-(c-l)*(h-s))return!1;var m,v,g,y,b,_,x,w,T,M,S,E,P,A,C;for(m=h-u,v=p-c,g=s-h,y=l-p,b=u-s,_=c-l,o=0;n>o;o++)if(d=e[a[o]].x,f=e[a[o]].y,!(d===s&&f===l||d===u&&f===c||d===h&&f===p)&&(x=d-s,w=f-l,T=d-u,M=f-c,S=d-h,E=f-p,C=m*M-v*T,P=b*w-_*x,A=g*E-y*S,C>=-Number.EPSILON&&A>=-Number.EPSILON&&P>=-Number.EPSILON))return!1;return!0}return function(t,r){var i=t.length;if(3>i)return null;var n,a,o,s=[],l=[],u=[];if($l.area(t)>0)for(a=0;i>a;a++)l[a]=a;else for(a=0;i>a;a++)l[a]=i-1-a;var c=i,h=2*c;for(a=c-1;c>2;){if(h--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),r?u:s;if(n=a,n>=c&&(n=0),a=n+1,a>=c&&(a=0),o=a+1,o>=c&&(o=0),e(t,n,a,o,c,l)){var p,d,f,m,v;for(p=l[n],d=l[a],f=l[o],s.push([t[p],t[d],t[f]]),u.push([l[n],l[a],l[o]]),m=a,v=a+1;c>v;m++,v++)l[m]=l[v];c--,h=2*c}}return r?u:s}}(),triangulateShape:function(e,t){function r(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function i(e,t,r){return e.x!==t.x?e.x<t.x?e.x<=r.x&&r.x<=t.x:t.x<=r.x&&r.x<=e.x:e.y<t.y?e.y<=r.y&&r.y<=t.y:t.y<=r.y&&r.y<=e.y;

}function n(e,t,r,n,a){var o=t.x-e.x,s=t.y-e.y,l=n.x-r.x,u=n.y-r.y,c=e.x-r.x,h=e.y-r.y,p=s*l-o*u,d=s*c-o*h;if(Math.abs(p)>Number.EPSILON){var f;if(p>0){if(0>d||d>p)return[];if(f=u*c-l*h,0>f||f>p)return[]}else{if(d>0||p>d)return[];if(f=u*c-l*h,f>0||p>f)return[]}if(0===f)return!a||0!==d&&d!==p?[e]:[];if(f===p)return!a||0!==d&&d!==p?[t]:[];if(0===d)return[r];if(d===p)return[n];var m=f/p;return[{x:e.x+m*o,y:e.y+m*s}]}if(0!==d||u*c!==l*h)return[];var v=0===o&&0===s,g=0===l&&0===u;if(v&&g)return e.x!==r.x||e.y!==r.y?[]:[e];if(v)return i(r,n,e)?[e]:[];if(g)return i(e,t,r)?[r]:[];var y,b,_,x,w,T,M,S;return 0!==o?(e.x<t.x?(y=e,_=e.x,b=t,x=t.x):(y=t,_=t.x,b=e,x=e.x),r.x<n.x?(w=r,M=r.x,T=n,S=n.x):(w=n,M=n.x,T=r,S=r.x)):(e.y<t.y?(y=e,_=e.y,b=t,x=t.y):(y=t,_=t.y,b=e,x=e.y),r.y<n.y?(w=r,M=r.y,T=n,S=n.y):(w=n,M=n.y,T=r,S=r.y)),M>=_?M>x?[]:x===M?a?[]:[w]:S>=x?[w,b]:[w,T]:_>S?[]:_===S?a?[]:[y]:S>=x?[y,b]:[y,T]}function a(e,t,r,i){var n=t.x-e.x,a=t.y-e.y,o=r.x-e.x,s=r.y-e.y,l=i.x-e.x,u=i.y-e.y,c=n*s-a*o,h=n*u-a*l;if(Math.abs(c)>Number.EPSILON){var p=l*s-u*o;return c>0?h>=0&&p>=0:h>=0||p>=0}return h>0}function o(e,t){function r(e,t){var r=y.length-1,i=e-1;0>i&&(i=r);var n=e+1;n>r&&(n=0);var o=a(y[e],y[i],y[n],s[t]);if(!o)return!1;var l=s.length-1,u=t-1;0>u&&(u=l);var c=t+1;return c>l&&(c=0),o=a(s[t],s[u],s[c],y[e]),o?!0:!1}function i(e,t){var r,i,a;for(r=0;r<y.length;r++)if(i=r+1,i%=y.length,a=n(e,t,y[r],y[i],!0),a.length>0)return!0;return!1}function o(e,r){var i,a,o,s,l;for(i=0;i<b.length;i++)for(a=t[b[i]],o=0;o<a.length;o++)if(s=o+1,s%=a.length,l=n(e,r,a[o],a[s],!0),l.length>0)return!0;return!1}for(var s,l,u,c,h,p,d,f,m,v,g,y=e.concat(),b=[],_=[],x=0,w=t.length;w>x;x++)b.push(x);for(var T=0,M=2*b.length;b.length>0;){if(M--,0>M){console.log("Infinite Loop! Holes left:"+b.length+", Probably Hole outside Shape!");break}for(u=T;u<y.length;u++){c=y[u],l=-1;for(var x=0;x<b.length;x++)if(p=b[x],d=c.x+":"+c.y+":"+p,void 0===_[d]){s=t[p];for(var S=0;S<s.length;S++)if(h=s[S],r(u,S)&&!i(c,h)&&!o(c,h)){l=S,b.splice(x,1),f=y.slice(0,u+1),m=y.slice(u),v=s.slice(l),g=s.slice(0,l+1),y=f.concat(v).concat(g).concat(m),T=u;break}if(l>=0)break;_[d]=!0}if(l>=0)break}}return y}r(e),t.forEach(r);for(var s,l,u,c,h,p,d={},f=e.concat(),m=0,v=t.length;v>m;m++)Array.prototype.push.apply(f,t[m]);for(s=0,l=f.length;l>s;s++)h=f[s].x+":"+f[s].y,void 0!==d[h]&&console.warn("THREE.ShapeUtils: Duplicate point",h,s),d[h]=s;var g=o(e,t),y=$l.triangulate(g,!1);for(s=0,l=y.length;l>s;s++)for(c=y[s],u=0;3>u;u++)h=c[u].x+":"+c[u].y,p=d[h],void 0!==p&&(c[u]=p);return y.concat()},isClockWise:function(e){return $l.area(e)<0},b2:function(){function e(e,t){var r=1-e;return r*r*t}function t(e,t){return 2*(1-e)*e*t}function r(e,t){return e*e*t}return function(i,n,a,o){return e(i,n)+t(i,a)+r(i,o)}}(),b3:function(){function e(e,t){var r=1-e;return r*r*r*t}function t(e,t){var r=1-e;return 3*r*r*e*t}function r(e,t){var r=1-e;return 3*r*e*e*t}function i(e,t){return e*e*e*t}return function(n,a,o,s,l){return e(n,a)+t(n,o)+r(n,s)+i(n,l)}}()};Kt.prototype=Object.create(Ee.prototype),Kt.prototype.constructor=Kt,Kt.prototype.addShapeList=function(e,t){for(var r=e.length,i=0;r>i;i++){var n=e[i];this.addShape(n,t)}},Kt.prototype.addShape=function(e,t){function i(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}function n(e,t,i){var n,a,o=1,s=e.x-t.x,l=e.y-t.y,u=i.x-e.x,c=i.y-e.y,h=s*s+l*l,p=s*c-l*u;if(Math.abs(p)>Number.EPSILON){var d=Math.sqrt(h),f=Math.sqrt(u*u+c*c),m=t.x-l/d,v=t.y+s/d,g=i.x-c/f,y=i.y+u/f,b=((g-m)*c-(y-v)*u)/(s*c-l*u);n=m+s*b-e.x,a=v+l*b-e.y;var _=n*n+a*a;if(2>=_)return new r(n,a);o=Math.sqrt(_/2)}else{var x=!1;s>Number.EPSILON?u>Number.EPSILON&&(x=!0):s<-Number.EPSILON?u<-Number.EPSILON&&(x=!0):Math.sign(l)===Math.sign(c)&&(x=!0),x?(n=-l,a=s,o=Math.sqrt(h)):(n=s,a=l,o=Math.sqrt(h/2))}return new r(n/o,a/o)}function a(){if(x){var e=0,t=H*e;for(Y=0;W>Y;Y++)z=F[Y],c(z[2]+t,z[1]+t,z[0]+t);for(e=T+2*_,t=H*e,Y=0;W>Y;Y++)z=F[Y],c(z[0]+t,z[1]+t,z[2]+t)}else{for(Y=0;W>Y;Y++)z=F[Y],c(z[2],z[1],z[0]);for(Y=0;W>Y;Y++)z=F[Y],c(z[0]+H*T,z[1]+H*T,z[2]+H*T)}}function o(){var e=0;for(s(N,e),e+=N.length,A=0,C=I.length;C>A;A++)P=I[A],s(P,e),e+=P.length}function s(e,t){var r,i;for(Y=e.length;--Y>=0;){r=Y,i=Y-1,0>i&&(i=e.length-1);var n=0,a=T+2*_;for(n=0;a>n;n++){var o=H*n,s=H*(n+1),l=t+r+o,u=t+i+o,c=t+i+s,p=t+r+s;h(l,u,c,p,e,n,a,r,i)}}}function l(e,t,r){O.vertices.push(new u(e,t,r))}function c(e,t,r){e+=k,t+=k,r+=k,O.faces.push(new de(e,t,r,null,null,0));var i=E.generateTopUV(O,e,t,r);O.faceVertexUvs[0].push(i)}function h(e,t,r,i){e+=k,t+=k,r+=k,i+=k,O.faces.push(new de(e,t,i,null,null,1)),O.faces.push(new de(t,r,i,null,null,1));var n=E.generateSideWallUV(O,e,t,r,i);O.faceVertexUvs[0].push([n[0],n[1],n[3]]),O.faceVertexUvs[0].push([n[1],n[2],n[3]])}var p,d,f,m,v,g=void 0!==t.amount?t.amount:100,y=void 0!==t.bevelThickness?t.bevelThickness:6,b=void 0!==t.bevelSize?t.bevelSize:y-2,_=void 0!==t.bevelSegments?t.bevelSegments:3,x=void 0!==t.bevelEnabled?t.bevelEnabled:!0,w=void 0!==t.curveSegments?t.curveSegments:12,T=void 0!==t.steps?t.steps:1,M=t.extrudePath,S=!1,E=void 0!==t.UVGenerator?t.UVGenerator:Kt.WorldUVGenerator;M&&(p=M.getSpacedPoints(T),S=!0,x=!1,d=void 0!==t.frames?t.frames:M.computeFrenetFrames(T,!1),f=new u,m=new u,v=new u),x||(_=0,y=0,b=0);var P,A,C,O=this,k=this.vertices.length,L=e.extractPoints(w),R=L.shape,I=L.holes,D=!$l.isClockWise(R);if(D){for(R=R.reverse(),A=0,C=I.length;C>A;A++)P=I[A],$l.isClockWise(P)&&(I[A]=P.reverse());D=!1}var F=$l.triangulateShape(R,I),N=R;for(A=0,C=I.length;C>A;A++)P=I[A],R=R.concat(P);for(var B,G,j,V,U,z,H=R.length,W=F.length,X=[],Y=0,q=N.length,K=q-1,$=Y+1;q>Y;Y++,K++,$++)K===q&&(K=0),$===q&&($=0),X[Y]=n(N[Y],N[K],N[$]);var Z,Q=[],J=X.concat();for(A=0,C=I.length;C>A;A++){for(P=I[A],Z=[],Y=0,q=P.length,K=q-1,$=Y+1;q>Y;Y++,K++,$++)K===q&&(K=0),$===q&&($=0),Z[Y]=n(P[Y],P[K],P[$]);Q.push(Z),J=J.concat(Z)}for(B=0;_>B;B++){for(j=B/_,V=y*Math.cos(j*Math.PI/2),G=b*Math.sin(j*Math.PI/2),Y=0,q=N.length;q>Y;Y++)U=i(N[Y],X[Y],G),l(U.x,U.y,-V);for(A=0,C=I.length;C>A;A++)for(P=I[A],Z=Q[A],Y=0,q=P.length;q>Y;Y++)U=i(P[Y],Z[Y],G),l(U.x,U.y,-V)}for(G=b,Y=0;H>Y;Y++)U=x?i(R[Y],J[Y],G):R[Y],S?(m.copy(d.normals[0]).multiplyScalar(U.x),f.copy(d.binormals[0]).multiplyScalar(U.y),v.copy(p[0]).add(m).add(f),l(v.x,v.y,v.z)):l(U.x,U.y,0);var ee;for(ee=1;T>=ee;ee++)for(Y=0;H>Y;Y++)U=x?i(R[Y],J[Y],G):R[Y],S?(m.copy(d.normals[ee]).multiplyScalar(U.x),f.copy(d.binormals[ee]).multiplyScalar(U.y),v.copy(p[ee]).add(m).add(f),l(v.x,v.y,v.z)):l(U.x,U.y,g/T*ee);for(B=_-1;B>=0;B--){for(j=B/_,V=y*Math.cos(j*Math.PI/2),G=b*Math.sin(j*Math.PI/2),Y=0,q=N.length;q>Y;Y++)U=i(N[Y],X[Y],G),l(U.x,U.y,g+V);for(A=0,C=I.length;C>A;A++)for(P=I[A],Z=Q[A],Y=0,q=P.length;q>Y;Y++)U=i(P[Y],Z[Y],G),S?l(U.x,U.y+p[T-1].y,p[T-1].x+V):l(U.x,U.y,g+V)}a(),o()},Kt.WorldUVGenerator={generateTopUV:function(e,t,i,n){var a=e.vertices,o=a[t],s=a[i],l=a[n];return[new r(o.x,o.y),new r(s.x,s.y),new r(l.x,l.y)]},generateSideWallUV:function(e,t,i,n,a){var o=e.vertices,s=o[t],l=o[i],u=o[n],c=o[a];return Math.abs(s.y-l.y)<.01?[new r(s.x,1-s.z),new r(l.x,1-l.z),new r(u.x,1-u.z),new r(c.x,1-c.z)]:[new r(s.y,1-s.z),new r(l.y,1-l.z),new r(u.y,1-u.z),new r(c.y,1-c.z)]}},$t.prototype=Object.create(Kt.prototype),$t.prototype.constructor=$t,Zt.prototype=Object.create(Ce.prototype),Zt.prototype.constructor=Zt,Qt.prototype=Object.create(Ee.prototype),Qt.prototype.constructor=Qt,Jt.prototype=Object.create(Ce.prototype),Jt.prototype.constructor=Jt,er.prototype=Object.create(Ee.prototype),er.prototype.constructor=er,tr.prototype=Object.create(Ee.prototype),tr.prototype.constructor=tr,rr.prototype=Object.create(Ce.prototype),rr.prototype.constructor=rr,ir.prototype=Object.create(Ee.prototype),ir.prototype.constructor=ir,nr.prototype=Object.create(Ee.prototype),nr.prototype.constructor=nr,nr.prototype.addShapeList=function(e,t){for(var r=0,i=e.length;i>r;r++)this.addShape(e[r],t);return this},nr.prototype.addShape=function(e,t){void 0===t&&(t={});var r,i,n,a=void 0!==t.curveSegments?t.curveSegments:12,o=t.material,s=void 0===t.UVGenerator?Kt.WorldUVGenerator:t.UVGenerator,l=this.vertices.length,c=e.extractPoints(a),h=c.shape,p=c.holes,d=!$l.isClockWise(h);if(d){for(h=h.reverse(),r=0,i=p.length;i>r;r++)n=p[r],$l.isClockWise(n)&&(p[r]=n.reverse());d=!1}var f=$l.triangulateShape(h,p);for(r=0,i=p.length;i>r;r++)n=p[r],h=h.concat(n);var m,v,g=h.length,y=f.length;for(r=0;g>r;r++)m=h[r],this.vertices.push(new u(m.x,m.y,0));for(r=0;y>r;r++){v=f[r];var b=v[0]+l,_=v[1]+l,x=v[2]+l;this.faces.push(new de(b,_,x,null,null,o)),this.faceVertexUvs[0].push(s.generateTopUV(this,b,_,x))}},ar.prototype=Object.create(Ce.prototype),ar.prototype.constructor=ar,or.prototype=Object.create(Ce.prototype),or.prototype.constructor=or,sr.prototype=Object.create(Ee.prototype),sr.prototype.constructor=sr,lr.prototype=Object.create(sr.prototype),lr.prototype.constructor=lr,ur.prototype=Object.create(or.prototype),ur.prototype.constructor=ur,cr.prototype=Object.create(Ce.prototype),cr.prototype.constructor=cr,hr.prototype=Object.create(Ee.prototype),hr.prototype.constructor=hr,pr.prototype=Object.create(Ee.prototype),pr.prototype.constructor=pr;var Zl=Object.freeze({WireframeGeometry:Ot,ParametricGeometry:Lt,ParametricBufferGeometry:kt,TetrahedronGeometry:Dt,TetrahedronBufferGeometry:It,OctahedronGeometry:Nt,OctahedronBufferGeometry:Ft,IcosahedronGeometry:Gt,IcosahedronBufferGeometry:Bt,DodecahedronGeometry:Vt,DodecahedronBufferGeometry:jt,PolyhedronGeometry:Ut,PolyhedronBufferGeometry:Rt,TubeGeometry:Ht,TubeBufferGeometry:zt,TorusKnotGeometry:Xt,TorusKnotBufferGeometry:Wt,TorusGeometry:qt,TorusBufferGeometry:Yt,TextGeometry:$t,SphereBufferGeometry:Zt,SphereGeometry:Qt,RingGeometry:er,RingBufferGeometry:Jt,PlaneBufferGeometry:Le,PlaneGeometry:tr,LatheGeometry:ir,LatheBufferGeometry:rr,ShapeGeometry:nr,ExtrudeGeometry:Kt,EdgesGeometry:ar,ConeGeometry:lr,ConeBufferGeometry:ur,CylinderGeometry:sr,CylinderBufferGeometry:or,CircleBufferGeometry:cr,CircleGeometry:hr,BoxBufferGeometry:ke,BoxGeometry:pr});dr.prototype=Object.create(Q.prototype),dr.prototype.constructor=dr,dr.prototype.isShadowMaterial=!0,fr.prototype=Object.create(Q.prototype),fr.prototype.constructor=fr,fr.prototype.isRawShaderMaterial=!0,mr.prototype={constructor:mr,isMultiMaterial:!0,toJSON:function(e){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},r=this.materials,i=0,n=r.length;n>i;i++){var a=r[i].toJSON(e);delete a.metadata,t.materials.push(a)}return t.visible=this.visible,t},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}},vr.prototype=Object.create($.prototype),vr.prototype.constructor=vr,vr.prototype.isMeshStandardMaterial=!0,vr.prototype.copy=function(e){return $.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},gr.prototype=Object.create(vr.prototype),gr.prototype.constructor=gr,gr.prototype.isMeshPhysicalMaterial=!0,gr.prototype.copy=function(e){return vr.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},yr.prototype=Object.create($.prototype),yr.prototype.constructor=yr,yr.prototype.isMeshPhongMaterial=!0,yr.prototype.copy=function(e){return $.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},br.prototype=Object.create($.prototype),br.prototype.constructor=br,br.prototype.isMeshNormalMaterial=!0,br.prototype.copy=function(e){return $.prototype.copy.call(this,e),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},_r.prototype=Object.create($.prototype),_r.prototype.constructor=_r,_r.prototype.isMeshLambertMaterial=!0,_r.prototype.copy=function(e){return $.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},xr.prototype=Object.create($.prototype),xr.prototype.constructor=xr,xr.prototype.isLineDashedMaterial=!0,xr.prototype.copy=function(e){return $.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Ql=Object.freeze({ShadowMaterial:dr,SpriteMaterial:dt,RawShaderMaterial:fr,ShaderMaterial:Q,PointsMaterial:Tt,MultiMaterial:mr,MeshPhysicalMaterial:gr,MeshStandardMaterial:vr,MeshPhongMaterial:yr,MeshNormalMaterial:br,MeshLambertMaterial:_r,MeshDepthMaterial:J,MeshBasicMaterial:fe,LineDashedMaterial:xr,LineBasicMaterial:_t,Material:$}),Jl={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){return this.enabled!==!1?this.files[e]:void 0},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},eu=new wr;Object.assign(Tr.prototype,{load:function(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var n=this,a=Jl.get(e);if(void 0!==a)return n.manager.itemStart(e),setTimeout(function(){t&&t(a),n.manager.itemEnd(e)},0),a;var o=/^data:(.*?)(;base64)?,(.*)$/,s=e.match(o);if(s){var l=s[1],u=!!s[2],c=s[3];c=window.decodeURIComponent(c),u&&(c=window.atob(c));try{var h,p=(this.responseType||"").toLowerCase();switch(p){case"arraybuffer":case"blob":h=new ArrayBuffer(c.length);for(var d=new Uint8Array(h),f=0;f<c.length;f++)d[f]=c.charCodeAt(f);"blob"===p&&(h=new Blob([h],{type:l}));break;case"document":var m=new DOMParser;h=m.parseFromString(c,l);break;case"json":h=JSON.parse(c);break;default:h=c}window.setTimeout(function(){t&&t(h),n.manager.itemEnd(e)},0)}catch(v){window.setTimeout(function(){i&&i(v),n.manager.itemError(e)},0)}}else{var g=new XMLHttpRequest;g.open("GET",e,!0),g.addEventListener("load",function(r){var a=r.target.response;Jl.add(e,a),200===this.status?(t&&t(a),n.manager.itemEnd(e)):0===this.status?(console.warn("THREE.XHRLoader: HTTP Status 0 received."),t&&t(a),n.manager.itemEnd(e)):(i&&i(r),n.manager.itemError(e))},!1),void 0!==r&&g.addEventListener("progress",function(e){r(e)},!1),g.addEventListener("error",function(t){i&&i(t),n.manager.itemError(e)},!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType("text/plain"),g.send(null)}return n.manager.itemStart(e),g},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this}}),Object.assign(Mr.prototype,{load:function(e,t,r,i){function n(n){l.load(e[n],function(e){var r=a._parser(e,!0);o[n]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},u+=1,6===u&&(1===r.mipmapCount&&(s.minFilter=Da),s.format=r.format,s.needsUpdate=!0,t&&t(s))},r,i)}var a=this,o=[],s=new Pt;s.image=o;var l=new Tr(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,h=e.length;h>c;++c)n(c);else l.load(e,function(e){var r=a._parser(e,!0);if(r.isCubemap)for(var i=r.mipmaps.length/r.mipmapCount,n=0;i>n;n++){o[n]={mipmaps:[]};for(var l=0;l<r.mipmapCount;l++)o[n].mipmaps.push(r.mipmaps[n*r.mipmapCount+l]),o[n].format=r.format,o[n].width=r.width,o[n].height=r.height}else s.image.width=r.width,s.image.height=r.height,s.mipmaps=r.mipmaps;1===r.mipmapCount&&(s.minFilter=Da),s.format=r.format,s.needsUpdate=!0,t&&t(s)},r,i);return s},setPath:function(e){return this.path=e,this}});var tu=Sr;Object.assign(Sr.prototype,{load:function(e,t,r,i){var n=this,a=new vt,o=new Tr(this.manager);return o.setResponseType("arraybuffer"),o.load(e,function(e){var r=n._parser(e);r&&(void 0!==r.image?a.image=r.image:void 0!==r.data&&(a.image.width=r.width,a.image.height=r.height,a.image.data=r.data),a.wrapS=void 0!==r.wrapS?r.wrapS:Ca,a.wrapT=void 0!==r.wrapT?r.wrapT:Ca,a.magFilter=void 0!==r.magFilter?r.magFilter:Da,a.minFilter=void 0!==r.minFilter?r.minFilter:Na,a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(a.format=r.format),void 0!==r.type&&(a.type=r.type),void 0!==r.mipmaps&&(a.mipmaps=r.mipmaps),1===r.mipmapCount&&(a.minFilter=Da),a.needsUpdate=!0,t&&t(a,r))},r,i),a}}),Object.assign(Er.prototype,{load:function(e,t,r,i){var n=this,a=document.createElementNS("http://www.w3.org/1999/xhtml","img");if(a.onload=function(){a.onload=null,URL.revokeObjectURL(a.src),t&&t(a),n.manager.itemEnd(e)},a.onerror=i,0===e.indexOf("data:"))a.src=e;else{var o=new Tr;o.setPath(this.path),o.setResponseType("blob"),o.setWithCredentials(this.withCredentials),o.load(e,function(e){a.src=URL.createObjectURL(e)},r,i)}return n.manager.itemStart(e),a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Pr.prototype,{load:function(e,t,r,i){function n(r){o.load(e[r],function(e){a.images[r]=e,s++,6===s&&(a.needsUpdate=!0,t&&t(a))},void 0,i)}var a=new h,o=new Er(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var s=0,l=0;l<e.length;++l)n(l);return a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ar.prototype,{load:function(e,t,r,n){var a=new i,o=new Er(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setWithCredentials(this.withCredentials),o.setPath(this.path),o.load(e,function(r){var i=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);a.format=i?Qa:Ja,a.image=r,a.needsUpdate=!0,void 0!==t&&t(a)},r,n),a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this}}),Cr.prototype=Object.assign(Object.create(ue.prototype),{constructor:Cr,isLight:!0,copy:function(e){return ue.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=ue.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Or.prototype=Object.assign(Object.create(Cr.prototype),{constructor:Or,isHemisphereLight:!0,copy:function(e){return Cr.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(kr.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Lr.prototype=Object.assign(Object.create(kr.prototype),{constructor:Lr,isSpotLightShadow:!0,update:function(e){var t=2*No.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||500,n=this.camera;(t!==n.fov||r!==n.aspect||i!==n.far)&&(n.fov=t,n.aspect=r,n.far=i,n.updateProjectionMatrix())}}),Rr.prototype=Object.assign(Object.create(Cr.prototype),{constructor:Rr,isSpotLight:!0,copy:function(e){return Cr.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ir.prototype=Object.assign(Object.create(Cr.prototype),{constructor:Ir,isPointLight:!0,copy:function(e){return Cr.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Dr.prototype=Object.assign(Object.create(kr.prototype),{constructor:Dr}),Fr.prototype=Object.assign(Object.create(Cr.prototype),{constructor:Fr,isDirectionalLight:!0,copy:function(e){return Cr.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Nr.prototype=Object.assign(Object.create(Cr.prototype),{constructor:Nr,isAmbientLight:!0});var ru={arraySlice:function(e,t,r){return ru.isTypedArray(e)?new e.constructor(e.subarray(t,r)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(t,r){return e[t]-e[r]}for(var r=e.length,i=new Array(r),n=0;n!==r;++n)i[n]=n;return i.sort(t),i},sortedArray:function(e,t,r){for(var i=e.length,n=new e.constructor(i),a=0,o=0;o!==i;++a)for(var s=r[a]*t,l=0;l!==t;++l)n[o++]=e[s+l];return n},flattenJSON:function(e,t,r,i){for(var n=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[n++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o)){do o=a[i],void 0!==o&&(t.push(a.time),r.push.apply(r,o)),a=e[n++];while(void 0!==a)}else if(void 0!==o.toArray){do o=a[i],void 0!==o&&(t.push(a.time),o.toArray(r,r.length)),a=e[n++];while(void 0!==a)}else do o=a[i],void 0!==o&&(t.push(a.time),r.push(o)),a=e[n++];while(void 0!==a)}}};Br.prototype={constructor:Br,evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,i=t[r],n=t[r-1];e:{t:{var a;r:{i:if(!(i>e)){for(var o=r+2;;){if(void 0===i){if(n>e)break i;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,n)}if(r===o)break;if(n=i,i=t[++r],i>e)break t}a=t.length;break r}{if(e>=n)break e;var s=t[1];s>e&&(r=2,n=s);for(var o=r-2;;){if(void 0===n)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(r===o)break;if(i=n,n=t[--r-1],e>=n)break t}a=r,r=0}}for(;a>r;){var l=r+a>>>1;e<t[l]?a=l:r=l+1}if(i=t[r],n=t[r-1],void 0===n)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,n,e)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=e*i,a=0;a!==i;++a)t[a]=r[n+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}},Object.assign(Br.prototype,{beforeStart_:Br.prototype.copySampleValue_,afterEnd_:Br.prototype.copySampleValue_}),Gr.prototype=Object.assign(Object.create(Br.prototype),{constructor:Gr,DefaultSettings_:{endingStart:xo,endingEnd:xo},intervalChanged_:function(e,t,r){var i=this.parameterPositions,n=e-2,a=e+1,o=i[n],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case wo:n=e,o=2*t-r;break;case To:n=i.length-2,o=t+i[n]-i[n+1];break;default:n=e,o=r}if(void 0===s)switch(this.getSettings_().endingEnd){case wo:a=e,s=2*r-t;break;case To:a=1,s=r+i[1]-i[0];break;default:a=e-1,s=t}var l=.5*(r-t),u=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(s-r),this._offsetPrev=n*u,this._offsetNext=a*u},interpolate_:function(e,t,r,i){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,p=this._weightNext,d=(r-t)/(i-t),f=d*d,m=f*d,v=-h*m+2*h*f-h*d,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,b=p*m-p*f,_=0;_!==o;++_)n[_]=v*a[u+_]+g*a[l+_]+y*a[s+_]+b*a[c+_];return n}}),jr.prototype=Object.assign(Object.create(Br.prototype),{constructor:jr,interpolate_:function(e,t,r,i){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,l=s-o,u=(r-t)/(i-t),c=1-u,h=0;h!==o;++h)n[h]=a[l+h]*c+a[s+h]*u;return n}}),Vr.prototype=Object.assign(Object.create(Br.prototype),{constructor:Vr,interpolate_:function(e){return this.copySampleValue_(e-1)}});var iu;iu={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:bo,InterpolantFactoryMethodDiscrete:function(e){return new Vr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new jr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Gr(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case yo:t=this.InterpolantFactoryMethodDiscrete;break;case bo:t=this.InterpolantFactoryMethodLinear;break;case _o:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return void console.warn(r)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return yo;case this.InterpolantFactoryMethodLinear:return bo;case this.InterpolantFactoryMethodSmooth:return _o}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,i=t.length;r!==i;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,i=t.length;r!==i;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,i=r.length,n=0,a=i-1;n!==i&&r[n]<e;)++n;for(;-1!==a&&r[a]>t;)--a;if(++a,0!==n||a!==i){n>=a&&(a=Math.max(a,1),n=a-1);var o=this.getValueSize();this.times=ru.arraySlice(r,n,a),this.values=ru.arraySlice(this.values,n*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("invalid value size in track",this),e=!1);var r=this.times,i=this.values,n=r.length;0===n&&(console.error("track is empty",this),e=!1);for(var a=null,o=0;o!==n;o++){var s=r[o];if("number"==typeof s&&isNaN(s)){console.error("time is not a valid number",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("out of order keys",this,o,s,a),e=!1;break}a=s}if(void 0!==i&&ru.isTypedArray(i))for(var o=0,l=i.length;o!==l;++o){var u=i[o];if(isNaN(u)){console.error("value is not a valid number",this,o,u),e=!1;break}}return e},optimize:function(){for(var e=this.times,t=this.values,r=this.getValueSize(),i=this.getInterpolation()===_o,n=1,a=e.length-1,o=1;a>o;++o){var s=!1,l=e[o],u=e[o+1];if(l!==u&&(1!==o||l!==l[0]))if(i)s=!0;else for(var c=o*r,h=c-r,p=c+r,d=0;d!==r;++d){var f=t[c+d];if(f!==t[h+d]||f!==t[p+d]){s=!0;break}}if(s){if(o!==n){e[n]=e[o];for(var m=o*r,v=n*r,d=0;d!==r;++d)t[v+d]=t[m+d]}++n}}if(a>0){e[n]=e[a];for(var m=a*r,v=n*r,d=0;d!==r;++d)t[v+d]=t[m+d];++n}return n!==e.length&&(this.times=ru.arraySlice(e,0,n),this.values=ru.arraySlice(t,0,n*r)),this}},zr.prototype=Object.assign(Object.create(iu),{constructor:zr,ValueTypeName:"vector"}),Hr.prototype=Object.assign(Object.create(Br.prototype),{constructor:Hr,interpolate_:function(e,t,r,i){for(var n=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=(r-t)/(i-t),c=s+o;s!==c;s+=4)l.slerpFlat(n,0,a,s-o,a,s,u);return n}}),Wr.prototype=Object.assign(Object.create(iu),{constructor:Wr,ValueTypeName:"quaternion",DefaultInterpolation:bo,InterpolantFactoryMethodLinear:function(e){return new Hr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Xr.prototype=Object.assign(Object.create(iu),{constructor:Xr,ValueTypeName:"number"}),Yr.prototype=Object.assign(Object.create(iu),{constructor:Yr,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:yo,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),qr.prototype=Object.assign(Object.create(iu),{constructor:qr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:yo,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Kr.prototype=Object.assign(Object.create(iu),{constructor:Kr,ValueTypeName:"color"}),$r.prototype=iu,iu.constructor=$r,Object.assign($r,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=$r._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var r=[],i=[];ru.flattenJSON(e.keys,r,i,"value"),e.times=r,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,r=e.constructor;if(void 0!==r.toJSON)t=r.toJSON(e);else{t={name:e.name,times:ru.convertArray(e.times,Array),values:ru.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Xr;case"vector":case"vector2":case"vector3":case"vector4":return zr;case"color":return Kr;case"quaternion":return Wr;case"bool":case"boolean":return qr;case"string":return Yr}throw new Error("Unsupported typeName: "+e)}}),Zr.prototype={constructor:Zr,resetDuration:function(){for(var e=this.tracks,t=0,r=0,i=e.length;r!==i;++r){var n=this.tracks[r];t=Math.max(t,n.times[n.times.length-1])}this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},Object.assign(Zr,{parse:function(e){for(var t=[],r=e.tracks,i=1/(e.fps||1),n=0,a=r.length;n!==a;++n)t.push($r.parse(r[n]).scale(i));

return new Zr(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t},n=0,a=r.length;n!==a;++n)t.push($r.toJSON(r[n]));return i},CreateFromMorphTargetSequence:function(e,t,r,i){for(var n=t.length,a=[],o=0;n>o;o++){var s=[],l=[];s.push((o+n-1)%n,o,(o+1)%n),l.push(0,1,0);var u=ru.getKeyframeOrder(s);s=ru.sortedArray(s,1,u),l=ru.sortedArray(l,1,u),i||0!==s[0]||(s.push(n),l.push(l[0])),a.push(new Xr(".morphTargetInfluences["+t[o].name+"]",s,l).scale(1/r))}return new Zr(e,-1,a)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var i=e;r=i.geometry&&i.geometry.animations||i.animations}for(var n=0;n<r.length;n++)if(r[n].name===t)return r[n];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var i={},n=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;o>a;a++){var s=e[a],l=s.name.match(n);if(l&&l.length>1){var u=l[1],c=i[u];c||(i[u]=c=[]),c.push(s)}}var h=[];for(var u in i)h.push(Zr.CreateFromMorphTargetSequence(u,i[u],t,r));return h},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var r=function(e,t,r,i,n){if(0!==r.length){var a=[],o=[];ru.flattenJSON(r,a,o,i),0!==a.length&&n.push(new e(t,a,o))}},i=[],n=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],l=0;l<s.length;l++){var u=s[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},h=0;h<u.length;h++)if(u[h].morphTargets)for(var p=0;p<u[h].morphTargets.length;p++)c[u[h].morphTargets[p]]=-1;for(var d in c){for(var f=[],m=[],p=0;p!==u[h].morphTargets.length;++p){var v=u[h];f.push(v.time),m.push(v.morphTarget===d?1:0)}i.push(new Xr(".morphTargetInfluence["+d+"]",f,m))}a=c.length*(o||1)}else{var g=".bones["+t[l].name+"]";r(zr,g+".position",u,"pos",i),r(Wr,g+".quaternion",u,"rot",i),r(zr,g+".scale",u,"scl",i)}}if(0===i.length)return null;var y=new Zr(n,a,i);return y}}),Object.assign(Qr.prototype,{load:function(e,t,r,i){var n=this,a=new Tr(n.manager);a.load(e,function(e){t(n.parse(JSON.parse(e)))},r,i)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){return void 0===i[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),i[e]}var i=this.textures,n=new Ql[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.uniforms&&(n.uniforms=e.uniforms),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(n.vertexColors=e.vertexColors),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.shading&&(n.shading=e.shading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=t(e.map)),void 0!==e.alphaMap&&(n.alphaMap=t(e.alphaMap),n.transparent=!0),void 0!==e.bumpMap&&(n.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=t(e.normalMap)),void 0!==e.normalScale){var a=e.normalScale;Array.isArray(a)===!1&&(a=[a,a]),n.normalScale=(new r).fromArray(a)}if(void 0!==e.displacementMap&&(n.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=t(e.specularMap)),void 0!==e.envMap&&(n.envMap=t(e.envMap)),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.lightMap&&(n.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.materials)for(var o=0,s=e.materials.length;s>o;o++)n.materials.push(this.parse(e.materials[o]));return n}}),Object.assign(Jr.prototype,{load:function(e,t,r,i){var n=this,a=new Tr(n.manager);a.load(e,function(e){t(n.parse(JSON.parse(e)))},r,i)},parse:function(e){var t=new Ce,r=e.data.index,i={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==r){var n=new i[r.type](r.array);t.setIndex(new me(n,1))}var a=e.data.attributes;for(var o in a){var s=a[o],n=new i[s.type](s.array);t.addAttribute(o,new me(n,s.itemSize,s.normalized))}var l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(var c=0,h=l.length;c!==h;++c){var p=l[c];t.addGroup(p.start,p.count,p.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var f=new u;void 0!==d.center&&f.fromArray(d.center),t.boundingSphere=new te(f,d.radius)}return t}}),ei.prototype={constructor:ei,crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,r){for(var i=[],n=0;n<e.length;++n)i[n]=this.createMaterial(e[n],t,r);return i},createMaterial:function(){var e,t,r;return function(i,n,a){function o(e,r,i,o,l){var u,c=n+e,h=ei.Handlers.get(c);null!==h?u=h.load(c):(t.setCrossOrigin(a),u=t.load(c)),void 0!==r&&(u.repeat.fromArray(r),1!==r[0]&&(u.wrapS=Aa),1!==r[1]&&(u.wrapT=Aa)),void 0!==i&&u.offset.fromArray(i),void 0!==o&&("repeat"===o[0]&&(u.wrapS=Aa),"mirror"===o[0]&&(u.wrapS=Oa),"repeat"===o[1]&&(u.wrapT=Aa),"mirror"===o[1]&&(u.wrapT=Oa)),void 0!==l&&(u.anisotropy=l);var p=No.generateUUID();return s[p]=u,p}void 0===e&&(e=new X),void 0===t&&(t=new Ar),void 0===r&&(r=new Qr);var s={},l={uuid:No.generateUUID(),type:"MeshLambertMaterial"};for(var u in i){var c=i[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":l.name=c;break;case"blending":l.blending=jn[c];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":l.color=e.fromArray(c).getHex();break;case"colorSpecular":l.specular=e.fromArray(c).getHex();break;case"colorEmissive":l.emissive=e.fromArray(c).getHex();break;case"specularCoef":l.shininess=c;break;case"shading":"basic"===c.toLowerCase()&&(l.type="MeshBasicMaterial"),"phong"===c.toLowerCase()&&(l.type="MeshPhongMaterial"),"standard"===c.toLowerCase()&&(l.type="MeshStandardMaterial");break;case"mapDiffuse":l.map=o(c,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":l.emissiveMap=o(c,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":l.lightMap=o(c,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":l.aoMap=o(c,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":l.bumpMap=o(c,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":l.bumpScale=c;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":l.normalMap=o(c,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":l.normalScale=[c,c];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":l.specularMap=o(c,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":l.metalnessMap=o(c,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":l.roughnessMap=o(c,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":l.alphaMap=o(c,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":l.side=Pn;break;case"doubleSided":l.side=An;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),l.opacity=c;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":l[u]=c;break;case"vertexColors":c===!0&&(l.vertexColors=Rn),"face"===c&&(l.vertexColors=Ln);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,c)}}return"MeshBasicMaterial"===l.type&&delete l.emissive,"MeshPhongMaterial"!==l.type&&delete l.specular,l.opacity<1&&(l.transparent=!0),r.setTextures(s),r.parse(l)}}()},ei.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,r=0,i=t.length;i>r;r+=2){var n=t[r],a=t[r+1];if(n.test(e))return a}return null}},Object.assign(ti.prototype,{load:function(e,t,r,i){var n=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:ei.prototype.extractUrlBase(e),o=new Tr(this.manager);o.setWithCredentials(this.withCredentials),o.load(e,function(r){var i=JSON.parse(r),o=i.metadata;if(void 0!==o){var s=o.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var l=n.parse(i,a);t(l.geometry,l.materials)},r,i)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){function i(t){function i(e,t){return e&1<<t}var n,a,o,s,c,h,p,d,f,m,v,g,y,b,_,x,w,T,M,S,E,P,A,C,O,k,L,R=e.faces,I=e.vertices,D=e.normals,F=e.colors,N=0;if(void 0!==e.uvs){for(n=0;n<e.uvs.length;n++)e.uvs[n].length&&N++;for(n=0;N>n;n++)l.faceVertexUvs[n]=[]}for(s=0,c=I.length;c>s;)T=new u,T.x=I[s++]*t,T.y=I[s++]*t,T.z=I[s++]*t,l.vertices.push(T);for(s=0,c=R.length;c>s;)if(m=R[s++],v=i(m,0),g=i(m,1),y=i(m,3),b=i(m,4),_=i(m,5),x=i(m,6),w=i(m,7),v){if(S=new de,S.a=R[s],S.b=R[s+1],S.c=R[s+3],E=new de,E.a=R[s+1],E.b=R[s+2],E.c=R[s+3],s+=4,g&&(f=R[s++],S.materialIndex=f,E.materialIndex=f),o=l.faces.length,y)for(n=0;N>n;n++)for(C=e.uvs[n],l.faceVertexUvs[n][o]=[],l.faceVertexUvs[n][o+1]=[],a=0;4>a;a++)d=R[s++],k=C[2*d],L=C[2*d+1],O=new r(k,L),2!==a&&l.faceVertexUvs[n][o].push(O),0!==a&&l.faceVertexUvs[n][o+1].push(O);if(b&&(p=3*R[s++],S.normal.set(D[p++],D[p++],D[p]),E.normal.copy(S.normal)),_)for(n=0;4>n;n++)p=3*R[s++],A=new u(D[p++],D[p++],D[p]),2!==n&&S.vertexNormals.push(A),0!==n&&E.vertexNormals.push(A);if(x&&(h=R[s++],P=F[h],S.color.setHex(P),E.color.setHex(P)),w)for(n=0;4>n;n++)h=R[s++],P=F[h],2!==n&&S.vertexColors.push(new X(P)),0!==n&&E.vertexColors.push(new X(P));l.faces.push(S),l.faces.push(E)}else{if(M=new de,M.a=R[s++],M.b=R[s++],M.c=R[s++],g&&(f=R[s++],M.materialIndex=f),o=l.faces.length,y)for(n=0;N>n;n++)for(C=e.uvs[n],l.faceVertexUvs[n][o]=[],a=0;3>a;a++)d=R[s++],k=C[2*d],L=C[2*d+1],O=new r(k,L),l.faceVertexUvs[n][o].push(O);if(b&&(p=3*R[s++],M.normal.set(D[p++],D[p++],D[p])),_)for(n=0;3>n;n++)p=3*R[s++],A=new u(D[p++],D[p++],D[p]),M.vertexNormals.push(A);if(x&&(h=R[s++],M.color.setHex(F[h])),w)for(n=0;3>n;n++)h=R[s++],M.vertexColors.push(new X(F[h]));l.faces.push(M)}}function n(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;i>r;r+=t){var n=e.skinWeights[r],o=t>1?e.skinWeights[r+1]:0,s=t>2?e.skinWeights[r+2]:0,u=t>3?e.skinWeights[r+3]:0;l.skinWeights.push(new a(n,o,s,u))}if(e.skinIndices)for(var r=0,i=e.skinIndices.length;i>r;r+=t){var c=e.skinIndices[r],h=t>1?e.skinIndices[r+1]:0,p=t>2?e.skinIndices[r+2]:0,d=t>3?e.skinIndices[r+3]:0;l.skinIndices.push(new a(c,h,p,d))}l.bones=e.bones,l.bones&&l.bones.length>0&&(l.skinWeights.length!==l.skinIndices.length||l.skinIndices.length!==l.vertices.length)&&console.warn("When skinning, number of vertices ("+l.vertices.length+"), skinIndices ("+l.skinIndices.length+"), and skinWeights ("+l.skinWeights.length+") should match.")}function o(t){if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;i>r;r++){l.morphTargets[r]={},l.morphTargets[r].name=e.morphTargets[r].name,l.morphTargets[r].vertices=[];for(var n=l.morphTargets[r].vertices,a=e.morphTargets[r].vertices,o=0,s=a.length;s>o;o+=3){var c=new u;c.x=a[o]*t,c.y=a[o+1]*t,c.z=a[o+2]*t,n.push(c)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=l.faces,p=e.morphColors[0].colors,r=0,i=h.length;i>r;r++)h[r].color.fromArray(p,3*r)}}function s(){var t=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var n=Zr.parseAnimation(r[i],l.bones);n&&t.push(n)}if(l.morphTargets){var a=Zr.CreateClipsFromMorphTargetSequences(l.morphTargets,10);t=t.concat(a)}t.length>0&&(l.animations=t)}var l=new Ee,c=void 0!==e.scale?1/e.scale:1;if(i(c),n(),o(c),s(),l.computeFaceNormals(),l.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:l};var h=ei.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:l,materials:h}}}),Object.assign(ri.prototype,{load:function(e,t,r,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var n=this,a=new Tr(n.manager);a.load(e,function(e){n.parse(JSON.parse(e),t)},r,i)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var r=this.parseGeometries(e.geometries),i=this.parseImages(e.images,function(){void 0!==t&&t(o)}),n=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,n),o=this.parseObject(e.object,r,a);return e.animations&&(o.animations=this.parseAnimations(e.animations)),(void 0===e.images||0===e.images.length)&&void 0!==t&&t(o),o},parseGeometries:function(e){var t={};if(void 0!==e)for(var r=new ti,i=new Jr,n=0,a=e.length;a>n;n++){var o,s=e[n];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Zl[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new Zl[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Zl[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Zl[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Zl[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Zl[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":o=new Zl[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Zl[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Zl[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Zl[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Zl[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":o=i.parse(s);break;case"Geometry":o=r.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),t[s.uuid]=o}return t},parseMaterials:function(e,t){var r={};if(void 0!==e){var i=new Qr;i.setTextures(t);for(var n=0,a=e.length;a>n;n++){var o=i.parse(e[n]);r[o.uuid]=o}}return r},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var i=Zr.parse(e[r]);t.push(i)}return t},parseImages:function(e,t){function r(e){return i.manager.itemStart(e),o.load(e,function(){i.manager.itemEnd(e)},void 0,function(){i.manager.itemError(e)})}var i=this,n={};if(void 0!==e&&e.length>0){var a=new wr(t),o=new Er(a);o.setCrossOrigin(this.crossOrigin);for(var s=0,l=e.length;l>s;s++){var u=e[s],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:i.texturePath+u.url;n[u.uuid]=r(c)}}return n},parseTextures:function(e,t){function r(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var n={};if(void 0!==e)for(var a=0,o=e.length;o>a;a++){var s=e[a];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var l=new i(t[s.image]);l.needsUpdate=!0,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=r(s.mapping,Pa)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.wrap&&(l.wrapS=r(s.wrap[0],ka),l.wrapT=r(s.wrap[1],ka)),void 0!==s.minFilter&&(l.minFilter=r(s.minFilter,Ba)),void 0!==s.magFilter&&(l.magFilter=r(s.magFilter,Ba)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),n[s.uuid]=l}return n},parseObject:function(){var e=new c;return function(t,r,i){function n(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),r[e]}function a(e){return void 0===e?void 0:(void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e])}var o;switch(t.type){case"Scene":o=new ht,void 0!==t.background&&Number.isInteger(t.background)&&(o.background=new X(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new ct(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new ut(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new Ie(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new De(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":o=new Nr(t.color,t.intensity);break;case"DirectionalLight":o=new Fr(t.color,t.intensity);break;case"PointLight":o=new Ir(t.color,t.intensity,t.distance,t.decay);break;case"SpotLight":o=new Rr(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new Or(t.color,t.groundColor,t.intensity);break;case"Mesh":var s=n(t.geometry),l=a(t.material);o=s.bones&&s.bones.length>0?new bt(s,l):new Oe(s,l);break;case"LOD":o=new mt;break;case"Line":o=new xt(n(t.geometry),a(t.material),t.mode);break;case"LineSegments":o=new wt(n(t.geometry),a(t.material));break;case"PointCloud":case"Points":o=new Mt(n(t.geometry),a(t.material));break;case"Sprite":o=new ft(a(t.material));break;case"Group":o=new St;break;default:o=new ue}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(e.fromArray(t.matrix),e.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.children)for(var u in t.children)o.add(this.parseObject(t.children[u],r,i));if("LOD"===t.type)for(var c=t.levels,h=0;h<c.length;h++){var p=c[h],u=o.getObjectByProperty("uuid",p.object);void 0!==u&&o.addLevel(u,p.distance)}return o}}()}),ii.prototype={constructor:ii,getPoint:function(){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){e||(e=5);for(var t=[],r=0;e>=r;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){e||(e=5);for(var t=[],r=0;e>=r;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e||(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,i=[],n=this.getPoint(0),a=0;for(i.push(0),r=1;e>=r;r++)t=this.getPoint(r/e),a+=t.distanceTo(n),i.push(a),n=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,i=this.getLengths(),n=0,a=i.length;r=t?t:e*i[a-1];for(var o,s=0,l=a-1;l>=s;)if(n=Math.floor(s+(l-s)/2),o=i[n]-r,0>o)s=n+1;else{if(!(o>0)){l=n;break}l=n-1}if(n=l,i[n]===r){var u=n/(a-1);return u}var c=i[n],h=i[n+1],p=h-c,d=(r-c)/p,u=(n+d)/(a-1);return u},getTangent:function(e){var t=1e-4,r=e-t,i=e+t;0>r&&(r=0),i>1&&(i=1);var n=this.getPoint(r),a=this.getPoint(i),o=a.clone().sub(n);return o.normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r,i,n,a=new u,o=[],s=[],l=[],h=new u,p=new c;for(r=0;e>=r;r++)i=r/e,o[r]=this.getTangentAt(i),o[r].normalize();s[0]=new u,l[0]=new u;var d=Number.MAX_VALUE,f=Math.abs(o[0].x),m=Math.abs(o[0].y),v=Math.abs(o[0].z);for(d>=f&&(d=f,a.set(1,0,0)),d>=m&&(d=m,a.set(0,1,0)),d>=v&&a.set(0,0,1),h.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],h),l[0].crossVectors(o[0],s[0]),r=1;e>=r;r++)s[r]=s[r-1].clone(),l[r]=l[r-1].clone(),h.crossVectors(o[r-1],o[r]),h.length()>Number.EPSILON&&(h.normalize(),n=Math.acos(No.clamp(o[r-1].dot(o[r]),-1,1)),s[r].applyMatrix4(p.makeRotationAxis(h,n))),l[r].crossVectors(o[r],s[r]);if(t===!0)for(n=Math.acos(No.clamp(s[0].dot(s[e]),-1,1)),n/=e,o[0].dot(h.crossVectors(s[0],s[e]))>0&&(n=-n),r=1;e>=r;r++)s[r].applyMatrix4(p.makeRotationAxis(o[r],n*r)),l[r].crossVectors(o[r],s[r]);return{tangents:o,normals:s,binormals:l}}},ii.create=function(e,t){return e.prototype=Object.create(ii.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},ni.prototype=Object.create(ii.prototype),ni.prototype.constructor=ni,ni.prototype.isLineCurve=!0,ni.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},ni.prototype.getPointAt=function(e){return this.getPoint(e)},ni.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()},ai.prototype=Object.assign(Object.create(ii.prototype),{constructor:ai,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ni(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=t){var n=r[i]-t,a=this.curves[i],o=a.getLength(),s=0===o?0:1-n/o;return a.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,i=this.curves.length;i>r;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){e||(e=40);for(var t=[],r=0;e>=r;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,r=[],i=0,n=this.curves;i<n.length;i++)for(var a=n[i],o=a&&a.isEllipseCurve?2*e:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),l=0;l<s.length;l++){var u=s[l];t&&t.equals(u)||(r.push(u),t=u)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new Ee,r=0,i=e.length;i>r;r++){var n=e[r];t.vertices.push(new u(n.x,n.y,n.z||0))}return t}}),oi.prototype=Object.create(ii.prototype),oi.prototype.constructor=oi,oi.prototype.isEllipseCurve=!0,oi.prototype.getPoint=function(e){for(var t=2*Math.PI,i=this.aEndAngle-this.aStartAngle,n=Math.abs(i)<Number.EPSILON;0>i;)i+=t;for(;i>t;)i-=t;i<Number.EPSILON&&(i=n?0:t),this.aClockwise!==!0||n||(i===t?i=-t:i-=t);var a=this.aStartAngle+e*i,o=this.aX+this.xRadius*Math.cos(a),s=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),u=Math.sin(this.aRotation),c=o-this.aX,h=s-this.aY;o=c*l-h*u+this.aX,s=c*u+h*l+this.aY}return new r(o,s)};var nu={tangentQuadraticBezier:function(e,t,r,i){return 2*(1-e)*(r-t)+2*e*(i-r)},tangentCubicBezier:function(e,t,r,i,n){return-3*t*(1-e)*(1-e)+3*r*(1-e)*(1-e)-6*e*r*(1-e)+6*e*i*(1-e)-3*e*e*i+3*e*e*n},tangentSpline:function(e){var t=6*e*e-6*e,r=3*e*e-4*e+1,i=-6*e*e+6*e,n=3*e*e-2*e;return t+r+i+n},interpolate:function(e,t,r,i,n){var a=.5*(r-e),o=.5*(i-t),s=n*n,l=n*s;return(2*t-2*r+a+o)*l+(-3*t+3*r-2*a-o)*s+a*n+t}};si.prototype=Object.create(ii.prototype),si.prototype.constructor=si,si.prototype.isSplineCurve=!0,si.prototype.getPoint=function(e){var t=this.points,i=(t.length-1)*e,n=Math.floor(i),a=i-n,o=t[0===n?n:n-1],s=t[n],l=t[n>t.length-2?t.length-1:n+1],u=t[n>t.length-3?t.length-1:n+2],c=nu.interpolate;return new r(c(o.x,s.x,l.x,u.x,a),c(o.y,s.y,l.y,u.y,a))},li.prototype=Object.create(ii.prototype),li.prototype.constructor=li,li.prototype.getPoint=function(e){var t=$l.b3;return new r(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y))},li.prototype.getTangent=function(e){var t=nu.tangentCubicBezier;return new r(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y)).normalize()},ui.prototype=Object.create(ii.prototype),ui.prototype.constructor=ui,ui.prototype.getPoint=function(e){var t=$l.b2;return new r(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y))},ui.prototype.getTangent=function(e){var t=nu.tangentQuadraticBezier;return new r(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y)).normalize()};var au=Object.assign(Object.create(ai.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;r>t;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var i=new ni(this.currentPoint.clone(),new r(e,t));this.curves.push(i),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,i,n){var a=new ui(this.currentPoint.clone(),new r(e,t),new r(i,n));this.curves.push(a),this.currentPoint.set(i,n)},bezierCurveTo:function(e,t,i,n,a,o){var s=new li(this.currentPoint.clone(),new r(e,t),new r(i,n),new r(a,o));this.curves.push(s),this.currentPoint.set(a,o)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),r=new si(t);this.curves.push(r),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,r,i,n,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,r,i,n,a)},absarc:function(e,t,r,i,n,a){this.absellipse(e,t,r,r,i,n,a)},ellipse:function(e,t,r,i,n,a,o,s){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+l,t+u,r,i,n,a,o,s)},absellipse:function(e,t,r,i,n,a,o,s){var l=new oi(e,t,r,i,n,a,o,s);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)}});ci.prototype=Object.assign(Object.create(au),{constructor:ci,getPointsHoles:function(e){for(var t=[],r=0,i=this.holes.length;i>r;r++)t[r]=this.holes[r].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),hi.prototype=au,au.constructor=hi,pi.prototype={moveTo:function(e,t){this.currentPath=new hi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,r,i){this.currentPath.quadraticCurveTo(e,t,r,i)},bezierCurveTo:function(e,t,r,i,n,a){this.currentPath.bezierCurveTo(e,t,r,i,n,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function r(e){for(var t=[],r=0,i=e.length;i>r;r++){var n=e[r],a=new ci;a.curves=n.curves,t.push(a)}return t}function i(e,t){for(var r=t.length,i=!1,n=r-1,a=0;r>a;n=a++){var o=t[n],s=t[a],l=s.x-o.x,u=s.y-o.y;if(Math.abs(u)>Number.EPSILON){if(0>u&&(o=t[a],l=-l,s=t[n],u=-u),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=u*(e.x-o.x)-l*(e.y-o.y);if(0===c)return!0;if(0>c)continue;i=!i}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return i}var n=$l.isClockWise,a=this.subPaths;if(0===a.length)return[];if(t===!0)return r(a);var o,s,l,u=[];if(1===a.length)return s=a[0],l=new ci,l.curves=s.curves,u.push(l),u;var c=!n(a[0].getPoints());c=e?!c:c;var h,p=[],d=[],f=[],m=0;d[m]=void 0,f[m]=[];for(var v=0,g=a.length;g>v;v++)s=a[v],h=s.getPoints(),o=n(h),o=e?!o:o,o?(!c&&d[m]&&m++,d[m]={s:new ci,p:h},d[m].s.curves=s.curves,c&&m++,f[m]=[]):f[m].push({h:s,p:h[0]});if(!d[0])return r(a);if(d.length>1){for(var y=!1,b=[],_=0,x=d.length;x>_;_++)p[_]=[];for(var _=0,x=d.length;x>_;_++)for(var w=f[_],T=0;T<w.length;T++){for(var M=w[T],S=!0,E=0;E<d.length;E++)i(M.p,d[E].p)&&(_!==E&&b.push({froms:_,tos:E,hole:T}),S?(S=!1,p[E].push(M)):y=!0);S&&p[_].push(M)}b.length>0&&(y||(f=p))}for(var P,v=0,A=d.length;A>v;v++){l=d[v].s,u.push(l),P=f[v];for(var C=0,O=P.length;O>C;C++)l.holes.push(P[C].h)}return u}},Object.assign(di.prototype,{isFont:!0,generateShapes:function(e,t,r){function i(e){
for(var r=String(e).split(""),i=t/a.resolution,o=0,s=[],l=0;l<r.length;l++){var u=n(r[l],i,o);o+=u.offset,s.push(u.path)}return s}function n(e,t,i){var n=a.glyphs[e]||a.glyphs["?"];if(n){var o,s,l,u,c,h,p,d,f,m,v,g=new pi,y=[],b=$l.b2,_=$l.b3;if(n.o)for(var x=n._cachedOutline||(n._cachedOutline=n.o.split(" ")),w=0,T=x.length;T>w;){var M=x[w++];switch(M){case"m":o=x[w++]*t+i,s=x[w++]*t,g.moveTo(o,s);break;case"l":o=x[w++]*t+i,s=x[w++]*t,g.lineTo(o,s);break;case"q":if(l=x[w++]*t+i,u=x[w++]*t,p=x[w++]*t+i,d=x[w++]*t,g.quadraticCurveTo(p,d,l,u),v=y[y.length-1]){c=v.x,h=v.y;for(var S=1;r>=S;S++){var E=S/r;b(E,c,p,l),b(E,h,d,u)}}break;case"b":if(l=x[w++]*t+i,u=x[w++]*t,p=x[w++]*t+i,d=x[w++]*t,f=x[w++]*t+i,m=x[w++]*t,g.bezierCurveTo(p,d,f,m,l,u),v=y[y.length-1]){c=v.x,h=v.y;for(var S=1;r>=S;S++){var E=S/r;_(E,c,p,f,l),_(E,h,d,m,u)}}}}return{offset:n.ha*t,path:g}}}void 0===t&&(t=100),void 0===r&&(r=4);for(var a=this.data,o=i(e),s=[],l=0,u=o.length;u>l;l++)Array.prototype.push.apply(s,o[l].toShapes());return s}}),Object.assign(fi.prototype,{load:function(e,t,r,i){var n=this,a=new Tr(this.manager);a.load(e,function(e){var r;try{r=JSON.parse(e)}catch(i){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}var a=n.parse(r);t&&t(a)},r,i)},parse:function(e){return new di(e)}});var ou;Object.assign(vi.prototype,{load:function(e,t,r,i){var n=new Tr(this.manager);n.setResponseType("arraybuffer"),n.load(e,function(e){var r=mi();r.decodeAudioData(e,function(e){t(e)})},r,i)}}),Object.assign(gi.prototype,{update:function(){var e,t,r,i,n,a,o,s=new c,l=new c;return function(u){var c=e!==this||t!==u.focus||r!==u.fov||i!==u.aspect*this.aspect||n!==u.near||a!==u.far||o!==u.zoom;if(c){e=this,t=u.focus,r=u.fov,i=u.aspect*this.aspect,n=u.near,a=u.far,o=u.zoom;var h,p,d=u.projectionMatrix.clone(),f=this.eyeSep/2,m=f*n/t,v=n*Math.tan(No.DEG2RAD*r*.5)/o;l.elements[12]=-f,s.elements[12]=f,h=-v*i+m,p=v*i+m,d.elements[0]=2*n/(p-h),d.elements[8]=(p+h)/(p-h),this.cameraL.projectionMatrix.copy(d),h=-v*i-m,p=v*i-m,d.elements[0]=2*n/(p-h),d.elements[8]=(p+h)/(p-h),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(s)}}()}),yi.prototype=Object.create(ue.prototype),yi.prototype.constructor=yi,bi.prototype=Object.assign(Object.create(ue.prototype),{constructor:bi,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new u,t=new l,r=new u,i=new u;return function(n){ue.prototype.updateMatrixWorld.call(this,n);var a=this.context.listener,o=this.up;this.matrixWorld.decompose(e,t,r),i.set(0,0,-1).applyQuaternion(t),a.setPosition(e.x,e.y,e.z),a.setOrientation(i.x,i.y,i.z,o.x,o.y,o.z)}}()}),_i.prototype=Object.assign(Object.create(ue.prototype),{constructor:_i,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.source.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(this.isPlaying===!0)return void console.warn("THREE.Audio: Audio is already playing.");if(this.hasPlaybackControl===!1)return void console.warn("THREE.Audio: this Audio has no playback control.");var e=this.context.createBufferSource();return e.buffer=this.source.buffer,e.loop=this.source.loop,e.onended=this.source.onended,e.start(0,this.startTime),e.playbackRate.value=this.playbackRate,this.isPlaying=!0,this.source=e,this.connect()},pause:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;t>e;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;t>e;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),this.isPlaying===!0?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=e,this.isPlaying===!0&&(this.source.playbackRate.value=this.playbackRate),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.source.loop},setLoop:function(e){return this.hasPlaybackControl===!1?void console.warn("THREE.Audio: this Audio has no playback control."):void(this.source.loop=e)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),xi.prototype=Object.assign(Object.create(_i.prototype),{constructor:xi,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new u;return function(t){ue.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(wi.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),Ti.prototype={constructor:Ti,accumulate:function(e,t){var r=this.buffer,i=this.valueSize,n=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)r[n+o]=r[o];a=t}else{a+=t;var s=t/a;this._mixBufferRegion(r,n,0,s,i)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,r=this.buffer,i=e*t+t,n=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,1>n){var o=3*t;this._mixBufferRegion(r,i,o,1-n,t)}for(var s=t,l=t+t;s!==l;++s)if(r[s]!==r[s+t]){a.setValue(r,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,i=3*r;e.getValue(t,i);for(var n=r,a=i;n!==a;++n)t[n]=t[i+n%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,i,n){if(i>=.5)for(var a=0;a!==n;++a)e[t+a]=e[r+a]},_slerp:function(e,t,r,i){l.slerpFlat(e,t,e,t,e,r,i)},_lerp:function(e,t,r,i,n){for(var a=1-i,o=0;o!==n;++o){var s=t+o;e[s]=e[s]*a+e[r+o]*i}}},Mi.prototype={constructor:Mi,getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,n=t.propertyIndex;if(e||(e=Mi.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("  trying to update node for track: "+this.path+" but it wasn't found.");if(r){var a=t.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[r])return void console.error("  can not bind to objectName of node, undefined",this);e=e[r]}if(void 0!==a){if(void 0===e[a])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[a]}}var s=e[i];if(void 0===s){var l=t.nodeName;return void console.error("  trying to update property for track: "+l+"."+i+" but it wasn't found.",e)}var u=this.Versioning.None;void 0!==e.needsUpdate?(u=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(var o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===n){n=o;break}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):void 0!==s.length?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(Mi.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:Mi.prototype.getValue,_setValue_unbound:Mi.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)e[t++]=r[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=e[t++]},function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),Mi.Composite=function(e,t,r){var i=r||Mi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)},Mi.Composite.prototype={constructor:Mi.Composite,getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,i=this._bindings[r];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},Mi.create=function(e,t,r){return e&&e.isAnimationObjectGroup?new Mi.Composite(e,t,r):new Mi(e,t,r)},Mi.parseTrackName=function(e){var t=/^((?:\w+[\/:])*)(\w+)?(?:\.(\w+)(?:\[(.+)\])?)?\.(\w+)(?:\[(.+)\])?$/,r=t.exec(e);if(!r)throw new Error("cannot parse trackName at all: "+e);var i={nodeName:r[2],objectName:r[3],objectIndex:r[4],propertyName:r[5],propertyIndex:r[6]};if(null===i.propertyName||0===i.propertyName.length)throw new Error("can not parse propertyName from trackName: "+e);return i},Mi.findNode=function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=function(e){for(var r=0;r<e.bones.length;r++){var i=e.bones[r];if(i.name===t)return i}return null},i=r(e.skeleton);if(i)return i}if(e.children){var n=function(e){for(var r=0;r<e.length;r++){var i=e[r];if(i.name===t||i.uuid===t)return i;var a=n(i.children);if(a)return a}return null},a=n(e.children);if(a)return a}return null},Si.prototype={constructor:Si,isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,i=this._indicesByUUID,n=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,l=0,u=arguments.length;l!==u;++l){var c=arguments[l],h=c.uuid,p=i[h];if(void 0===p){p=t++,i[h]=p,e.push(c);for(var d=0,f=s;d!==f;++d)o[d].push(new Mi(c,n[d],a[d]))}else if(r>p){var m=e[p],v=--r,g=e[v];i[g.uuid]=p,e[p]=g,i[h]=v,e[v]=c;for(var d=0,f=s;d!==f;++d){var y=o[d],b=y[v],_=y[p];y[p]=b,void 0===_&&(_=new Mi(c,n[d],a[d])),y[v]=_}}else e[p]!==m&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=r},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,n=i.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],l=s.uuid,u=r[l];if(void 0!==u&&u>=t){var c=t++,h=e[c];r[h.uuid]=u,e[u]=h,r[l]=c,e[c]=s;for(var p=0,d=n;p!==d;++p){var f=i[p],m=f[c],v=f[u];f[u]=m,f[c]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,a=n.length,o=0,s=arguments.length;o!==s;++o){var l=arguments[o],u=l.uuid,c=i[u];if(void 0!==c)if(delete i[u],r>c){var h=--r,p=e[h],d=--t,f=e[d];i[p.uuid]=c,e[c]=p,i[f.uuid]=h,e[h]=f,e.pop();for(var m=0,v=a;m!==v;++m){var g=n[m],y=g[h],b=g[d];g[c]=y,g[h]=b,g.pop()}}else{var d=--t,f=e[d];i[f.uuid]=c,e[c]=f,e.pop();for(var m=0,v=a;m!==v;++m){var g=n[m];g[c]=g[d],g.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,i=r[e],n=this._bindings;if(void 0!==i)return n[i];var a=this._paths,o=this._parsedPaths,s=this._objects,l=s.length,u=this.nCachedObjects_,c=new Array(l);i=n.length,r[e]=i,a.push(e),o.push(t),n.push(c);for(var h=u,p=s.length;h!==p;++h){var d=s[h];c[h]=new Mi(d,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var i=this._paths,n=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o],l=e[o];t[l]=r,a[r]=s,a.pop(),n[r]=n[o],n.pop(),i[r]=i[o],i.pop()}}},Ei.prototype={constructor:Ei,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var i=this._clip.duration,n=e._clip.duration,a=n/i,o=i/n;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var i=this._mixer,n=i.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,l=a.sampleValues;return s[0]=n,s[1]=n+r,l[0]=e/o,l[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,i){var n=this._startTime;if(null!==n){var a=(e-n)*r;if(0>a||0===r)return;this._startTime=null,t=r*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(i,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r){var i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var r=this._clip.duration,i=this.loop,n=this._loopCount;if(i===mo){-1===n&&(this.loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else{if(!(0>t))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>e?-1:1})}}else{var a=i===go;if(-1===n&&(e>=0?(n=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=r||0>t){var o=Math.floor(t/r);t-=r*o,n+=Math.abs(o);var s=this.repetitions-n;if(0>s)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===s){var l=0>e;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1===(1&n))return this.time=t,r-t}return this.time=t,t},_setEndings:function(e,t,r){var i=this._interpolantSettings;r?(i.endingStart=wo,i.endingEnd=wo):(i.endingStart=e?this.zeroSlopeAtStart?wo:xo:To,i.endingEnd=t?this.zeroSlopeAtEnd?wo:xo:To)},_scheduleFading:function(e,t,r){var i=this._mixer,n=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=n,s[0]=t,o[1]=n+e,s[1]=r,this}},Object.assign(Pi.prototype,t.prototype,{clipAction:function(e,t){var r=t||this._root,i=r.uuid,n="string"==typeof e?Zr.findByName(r,e):e,a=null!==n?n.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var l=o.actionByRoot[i];if(void 0!==l)return l;s=o.knownActions[0],null===n&&(n=s._clip)}if(null===n)return null;var u=new Ei(this,n,t);return this._bindAction(u,s),this._addInactiveAction(u,a,i),u},existingAction:function(e,t){var r=t||this._root,i=r.uuid,n="string"==typeof e?Zr.findByName(r,e):e,a=n?n.uuid:e,o=this._actionsByClip[a];return void 0!==o?o.actionByRoot[i]||null:null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var n=0;n!==t;++n)e[n].reset();for(var n=0;n!==i;++n)r[n].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,i=this.time+=e,n=Math.sign(e),a=this._accuIndex^=1,o=0;o!==r;++o){var s=t[o];s.enabled&&s._update(i,e,n,a)}for(var l=this._bindings,u=this._nActiveBindings,o=0;o!==u;++o)l[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,i=this._actionsByClip,n=i[r];if(void 0!==n){for(var a=n.knownActions,o=0,s=a.length;o!==s;++o){var l=a[o];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var i in r){var n=r[i].actionByRoot,a=n[t];void 0!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}var o=this._bindingsByRootAndName,s=o[t];if(void 0!==s)for(var l in s){var u=s[l];u.restoreOriginalState(),this._removeInactiveBinding(u)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}),Object.assign(Pi.prototype,{_bindAction:function(e,t){var r=e._localRoot||this._root,i=e._clip.tracks,n=i.length,a=e._propertyBindings,o=e._interpolants,s=r.uuid,l=this._bindingsByRootAndName,u=l[s];void 0===u&&(u={},l[s]=u);for(var c=0;c!==n;++c){var h=i[c],p=h.name,d=u[p];if(void 0!==d)a[c]=d;else{if(d=a[c],void 0!==d){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=t&&t._propertyBindings[c].binding.parsedPath;d=new Ti(Mi.create(r,p,f),h.ValueTypeName,h.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,s,p),a[c]=d}o[c].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,i=this._actionsByClip[r];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,r,t)}for(var n=e._propertyBindings,a=0,o=n.length;a!==o;++a){var s=n[a];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,i=t.length;r!==i;++r){var n=t[r];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var i=this._actions,n=this._actionsByClip,a=n[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;var n=e._clip.uuid,a=this._actionsByClip,o=a[n],s=o.knownActions,l=s[s.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,s[u]=l,s.pop(),e._byClipCacheIndex=null;var c=o.actionByRoot,h=(t._localRoot||this._root).uuid;delete c[h],0===s.length&&delete a[n],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,i=t.length;r!==i;++r){var n=t[r];0===--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_addInactiveBinding:function(e,t,r){var i=this._bindingsByRootAndName,n=i[t],a=this._bindings;void 0===n&&(n={},i[t]=n),n[r]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,i=r.rootNode.uuid,n=r.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete o[n];e:{for(var u in o)break e;delete a[i]}},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&(r=new jr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),r.__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,n=t[i];e.__cacheIndex=i,t[i]=e,n.__cacheIndex=r,t[r]=n},_controlInterpolantsResultBuffer:new Float32Array(1)}),Ci.prototype=Object.create(Ce.prototype),Ci.prototype.constructor=Ci,Ci.prototype.isInstancedBufferGeometry=!0,Ci.prototype.addGroup=function(e,t,r){this.groups.push({start:e,count:t,materialIndex:r})},Ci.prototype.copy=function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var r=e.attributes;for(var i in r){var n=r[i];this.addAttribute(i,n.clone())}for(var a=e.groups,o=0,s=a.length;s>o;o++){var l=a[o];this.addGroup(l.start,l.count,l.materialIndex)}return this},Oi.prototype={constructor:Oi,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this},setXYZW:function(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}},ki.prototype={constructor:ki,isInterleavedBuffer:!0,set needsUpdate(e){e===!0&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var i=0,n=this.stride;n>i;i++)this.array[e+i]=t.array[r+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)}},Li.prototype=Object.create(ki.prototype),Li.prototype.constructor=Li,Li.prototype.isInstancedInterleavedBuffer=!0,Li.prototype.copy=function(e){return ki.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},Ri.prototype=Object.create(me.prototype),Ri.prototype.constructor=Ri,Ri.prototype.isInstancedBufferAttribute=!0,Ri.prototype.copy=function(e){return me.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},Ii.prototype={constructor:Ii,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var r=[];return Fi(e,this,r,t),r.sort(Di),r},intersectObjects:function(e,t){var r=[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,n=e.length;n>i;i++)Fi(e[i],this,r,t);return r.sort(Di),r}},Ni.prototype={constructor:Ni,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=(performance||Date).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}},Gi.prototype={constructor:Gi,set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(No.clamp(e.y/this.radius,-1,1))),this}},ji.prototype=Object.create(Oe.prototype),ji.prototype.constructor=ji,ji.prototype.createAnimation=function(e,t,r,i){var n={start:t,end:r,length:r-t+1,fps:i,duration:(r-t)/i,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=n,this.animationsList.push(n)},ji.prototype.autoCreateAnimations=function(e){for(var t,r=/([a-z]+)_?(\d+)/i,i={},n=this.geometry,a=0,o=n.morphTargets.length;o>a;a++){var s=n.morphTargets[a],l=s.name.match(r);if(l&&l.length>1){var u=l[1];i[u]||(i[u]={start:1/0,end:-(1/0)});var c=i[u];a<c.start&&(c.start=a),a>c.end&&(c.end=a),t||(t=u)}}for(var u in i){
var c=i[u];this.createAnimation(u,c.start,c.end,e)}this.firstAnimation=t},ji.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},ji.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},ji.prototype.setAnimationFPS=function(e,t){var r=this.animationsMap[e];r&&(r.fps=t,r.duration=(r.end-r.start)/r.fps)},ji.prototype.setAnimationDuration=function(e,t){var r=this.animationsMap[e];r&&(r.duration=t,r.fps=(r.end-r.start)/r.duration)},ji.prototype.setAnimationWeight=function(e,t){var r=this.animationsMap[e];r&&(r.weight=t)},ji.prototype.setAnimationTime=function(e,t){var r=this.animationsMap[e];r&&(r.time=t)},ji.prototype.getAnimationTime=function(e){var t=0,r=this.animationsMap[e];return r&&(t=r.time),t},ji.prototype.getAnimationDuration=function(e){var t=-1,r=this.animationsMap[e];return r&&(t=r.duration),t},ji.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},ji.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},ji.prototype.update=function(e){for(var t=0,r=this.animationsList.length;r>t;t++){var i=this.animationsList[t];if(i.active){var n=i.duration/i.length;i.time+=i.direction*e,i.mirroredLoop?(i.time>i.duration||i.time<0)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.directionBackwards=!0),i.time<0&&(i.time=0,i.directionBackwards=!1)):(i.time=i.time%i.duration,i.time<0&&(i.time+=i.duration));var a=i.start+No.clamp(Math.floor(i.time/n),0,i.length-1),o=i.weight;a!==i.currentFrame&&(this.morphTargetInfluences[i.lastFrame]=0,this.morphTargetInfluences[i.currentFrame]=1*o,this.morphTargetInfluences[a]=0,i.lastFrame=i.currentFrame,i.currentFrame=a);var s=i.time%n/n;i.directionBackwards&&(s=1-s),i.currentFrame!==i.lastFrame?(this.morphTargetInfluences[i.currentFrame]=s*o,this.morphTargetInfluences[i.lastFrame]=(1-s)*o):this.morphTargetInfluences[i.currentFrame]=o}}},Vi.prototype=Object.create(ue.prototype),Vi.prototype.constructor=Vi,Vi.prototype.isImmediateRenderObject=!0,Ui.prototype=Object.create(wt.prototype),Ui.prototype.constructor=Ui,Ui.prototype.update=function(){var e=new u,t=new u,r=new re;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);var n=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,l=o.faces,u=0,c=0,h=l.length;h>c;c++)for(var p=l[c],d=0,f=p.vertexNormals.length;f>d;d++){var m=s[p[i[d]]],v=p.vertexNormals[d];e.copy(m).applyMatrix4(n),t.copy(v).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}else if(o&&o.isBufferGeometry)for(var g=o.attributes.position,y=o.attributes.normal,u=0,d=0,f=g.count;f>d;d++)e.set(g.getX(d),g.getY(d),g.getZ(d)).applyMatrix4(n),t.set(y.getX(d),y.getY(d),y.getZ(d)),t.applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1;return a.needsUpdate=!0,this}}(),zi.prototype=Object.create(ue.prototype),zi.prototype.constructor=zi,zi.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},zi.prototype.update=function(){var e=new u,t=new u;return function(){var r=this.light.distance?this.light.distance:1e3,i=r*Math.tan(this.light.angle);this.cone.scale.set(i,i,r),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}}(),Hi.prototype=Object.create(wt.prototype),Hi.prototype.constructor=Hi,Hi.prototype.getBoneList=function(e){var t=[];e&&e.isBone&&t.push(e);for(var r=0;r<e.children.length;r++)t.push.apply(t,this.getBoneList(e.children[r]));return t},Hi.prototype.update=function(){for(var e=this.geometry,t=(new c).getInverse(this.root.matrixWorld),r=new c,i=0,n=0;n<this.bones.length;n++){var a=this.bones[n];a.parent&&a.parent.isBone&&(r.multiplyMatrices(t,a.matrixWorld),e.vertices[i].setFromMatrixPosition(r),r.multiplyMatrices(t,a.parent.matrixWorld),e.vertices[i+1].setFromMatrixPosition(r),i+=2)}e.verticesNeedUpdate=!0,e.computeBoundingSphere()},Wi.prototype=Object.create(Oe.prototype),Wi.prototype.constructor=Wi,Wi.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Wi.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)},Xi.prototype=Object.create(ue.prototype),Xi.prototype.constructor=Xi,Xi.prototype.dispose=function(){this.lightSphere.geometry.dispose(),this.lightSphere.material.dispose()},Xi.prototype.update=function(){var e=new u;return function(){this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity),this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity),this.lightSphere.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate()),this.lightSphere.geometry.colorsNeedUpdate=!0}}(),Yi.prototype=Object.create(wt.prototype),Yi.prototype.constructor=Yi,Yi.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},qi.prototype=Object.create(wt.prototype),qi.prototype.constructor=qi,qi.prototype.update=function(){var e=new u,t=new u,r=new re;return function(){this.object.updateMatrixWorld(!0),r.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,n=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,l=0,u=0,c=s.length;c>u;u++){var h=s[u],p=h.normal;e.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(i),t.copy(p).applyMatrix3(r).normalize().multiplyScalar(this.size).add(e),n.setXYZ(l,e.x,e.y,e.z),l+=1,n.setXYZ(l,t.x,t.y,t.z),l+=1}return n.needsUpdate=!0,this}}(),Ki.prototype=Object.create(ue.prototype),Ki.prototype.constructor=Ki,Ki.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},Ki.prototype.update=function(){var e=new u,t=new u,r=new u;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),r.subVectors(t,e);var i=this.children[0],n=this.children[1];i.lookAt(r),i.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),n.lookAt(r),n.scale.z=r.length()}}(),$i.prototype=Object.create(wt.prototype),$i.prototype.constructor=$i,$i.prototype.update=function(){function e(e,a,o,s){i.set(a,o,s).unproject(n);var l=r[e];if(void 0!==l)for(var u=0,c=l.length;c>u;u++)t.vertices[l[u]].copy(i)}var t,r,i=new u,n=new Re;return function(){t=this.geometry,r=this.pointMap;var i=1,a=1;n.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-i,-a,-1),e("n2",i,-a,-1),e("n3",-i,a,-1),e("n4",i,a,-1),e("f1",-i,-a,1),e("f2",i,-a,1),e("f3",-i,a,1),e("f4",i,a,1),e("u1",.7*i,1.1*a,-1),e("u2",.7*-i,1.1*a,-1),e("u3",0,2*a,-1),e("cf1",-i,0,1),e("cf2",i,0,1),e("cf3",0,-a,1),e("cf4",0,a,1),e("cn1",-i,0,-1),e("cn2",i,0,-1),e("cn3",0,-a,-1),e("cn4",0,a,-1),t.verticesNeedUpdate=!0}}(),Zi.prototype=Object.create(Oe.prototype),Zi.prototype.constructor=Zi,Zi.prototype.update=function(){this.box.setFromObject(this.object),this.box.getSize(this.scale),this.box.getCenter(this.position)},Qi.prototype=Object.create(wt.prototype),Qi.prototype.constructor=Qi,Qi.prototype.update=function(){var e=new ee;return function(t){if(t&&t.isBox3?e.copy(t):e.setFromObject(t),!e.isEmpty()){var r=e.min,i=e.max,n=this.geometry.attributes.position,a=n.array;a[0]=i.x,a[1]=i.y,a[2]=i.z,a[3]=r.x,a[4]=i.y,a[5]=i.z,a[6]=r.x,a[7]=r.y,a[8]=i.z,a[9]=i.x,a[10]=r.y,a[11]=i.z,a[12]=i.x,a[13]=i.y,a[14]=r.z,a[15]=r.x,a[16]=i.y,a[17]=r.z,a[18]=r.x,a[19]=r.y,a[20]=r.z,a[21]=i.x,a[22]=r.y,a[23]=r.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}();var su=new Ce;su.addAttribute("position",new Te([0,0,0,0,1,0],3));var lu=new or(0,.5,1,5,1);lu.translate(0,-.5,0),Ji.prototype=Object.create(ue.prototype),Ji.prototype.constructor=Ji,Ji.prototype.setDirection=function(){var e,t=new u;return function(r){r.y>.99999?this.quaternion.set(0,0,0,1):r.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(r.z,0,-r.x).normalize(),e=Math.acos(r.y),this.quaternion.setFromAxisAngle(t,e))}}(),Ji.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},Ji.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},en.prototype=Object.create(wt.prototype),en.prototype.constructor=en;var uu=function(){function e(){}var t=new u,r=new e,i=new e,n=new e;return e.prototype.init=function(e,t,r,i){this.c0=e,this.c1=r,this.c2=-3*e+3*t-2*r-i,this.c3=2*e-2*t+r+i},e.prototype.initNonuniformCatmullRom=function(e,t,r,i,n,a,o){var s=(t-e)/n-(r-e)/(n+a)+(r-t)/a,l=(r-t)/a-(i-t)/(a+o)+(i-r)/o;s*=a,l*=a,this.init(t,r,s,l)},e.prototype.initCatmullRom=function(e,t,r,i,n){this.init(t,r,n*(r-e),n*(i-t))},e.prototype.calc=function(e){var t=e*e,r=t*e;return this.c0+this.c1*e+this.c2*t+this.c3*r},ii.create(function(e){this.points=e||[],this.closed=!1},function(e){var a,o,s,l,c=this.points;l=c.length,2>l&&console.log("duh, you need at least 2 points"),a=(l-(this.closed?0:1))*e,o=Math.floor(a),s=a-o,this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/c.length)+1)*c.length:0===s&&o===l-1&&(o=l-2,s=1);var h,p,d,f;if(this.closed||o>0?h=c[(o-1)%l]:(t.subVectors(c[0],c[1]).add(c[0]),h=t),p=c[o%l],d=c[(o+1)%l],this.closed||l>o+2?f=c[(o+2)%l]:(t.subVectors(c[l-1],c[l-2]).add(c[l-1]),f=t),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var m="chordal"===this.type?.5:.25,v=Math.pow(h.distanceToSquared(p),m),g=Math.pow(p.distanceToSquared(d),m),y=Math.pow(d.distanceToSquared(f),m);1e-4>g&&(g=1),1e-4>v&&(v=g),1e-4>y&&(y=g),r.initNonuniformCatmullRom(h.x,p.x,d.x,f.x,v,g,y),i.initNonuniformCatmullRom(h.y,p.y,d.y,f.y,v,g,y),n.initNonuniformCatmullRom(h.z,p.z,d.z,f.z,v,g,y)}else if("catmullrom"===this.type){var b=void 0!==this.tension?this.tension:.5;r.initCatmullRom(h.x,p.x,d.x,f.x,b),i.initCatmullRom(h.y,p.y,d.y,f.y,b),n.initCatmullRom(h.z,p.z,d.z,f.z,b)}var _=new u(r.calc(s),i.calc(s),n.calc(s));return _})}();tn.prototype=Object.create(uu.prototype);var cu=ii.create(function(e){console.warn("THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3"),this.points=void 0===e?[]:e},function(e){var t=this.points,r=(t.length-1)*e,i=Math.floor(r),n=r-i,a=t[0==i?i:i-1],o=t[i],s=t[i>t.length-2?t.length-1:i+1],l=t[i>t.length-3?t.length-1:i+2],c=nu.interpolate;return new u(c(a.x,o.x,s.x,l.x,n),c(a.y,o.y,s.y,l.y,n),c(a.z,o.z,s.z,l.z,n))}),hu=ii.create(function(e,t,r,i){this.v0=e,this.v1=t,this.v2=r,this.v3=i},function(e){var t=$l.b3;return new u(t(e,this.v0.x,this.v1.x,this.v2.x,this.v3.x),t(e,this.v0.y,this.v1.y,this.v2.y,this.v3.y),t(e,this.v0.z,this.v1.z,this.v2.z,this.v3.z))}),pu=ii.create(function(e,t,r){this.v0=e,this.v1=t,this.v2=r},function(e){var t=$l.b2;return new u(t(e,this.v0.x,this.v1.x,this.v2.x),t(e,this.v0.y,this.v1.y,this.v2.y),t(e,this.v0.z,this.v1.z,this.v2.z))}),du=ii.create(function(e,t){this.v1=e,this.v2=t},function(e){if(1===e)return this.v2.clone();var t=new u;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t});rn.prototype=Object.create(oi.prototype),rn.prototype.constructor=rn;var fu={createMultiMaterialObject:function(e,t){for(var r=new St,i=0,n=t.length;n>i;i++)r.add(new Oe(e,t[i]));return r},detach:function(e,t,r){e.applyMatrix(t.matrixWorld),t.remove(e),r.add(e)},attach:function(e,t,r){var i=new c;i.getInverse(r.matrixWorld),e.applyMatrix(i),t.remove(e),r.add(e)}},mu=0,vu=1;Object.assign(Y.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(ee.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(he.prototype,{center:function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)}}),Object.assign(re.prototype,{multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)}}),Object.assign(c.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),e.applyProjection(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")}}),Object.assign(ie.prototype,{isIntersectionLine:function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)}}),Object.assign(l.prototype,{multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)}}),Object.assign(oe.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ci.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Kt(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new nr(this,e)}}),Object.assign(u.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)}}),Object.assign(ue.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(ue.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(mt.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Ie.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Cr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(me.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Please use .count."),this.array.length}}}),Object.assign(Ce.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Ce.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties($.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new X}}}),Object.defineProperties(yr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Q.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),t.prototype=Object.assign(Object.create({constructor:t,apply:function(e){console.warn("THREE.EventDispatcher: .apply is deprecated, just inherit or Object.assign the prototype to mix-in."),Object.assign(e,this)}}),t.prototype),Object.defineProperties(Ai.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.assign(lt.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(lt.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(ae.prototype,{cullFace:{get:function(){return this.renderReverseSided?bn:yn},set:function(e){var t=e!==yn;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(o.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.assign(_i.prototype,{load:function(e){console.warn("THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.");var t=this,r=new vi;return r.load(e,function(e){t.setBuffer(e)}),this}}),Object.assign(wi.prototype,{getData:function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()}});var gu={merge:function(e,t,r){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var i;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},yu={crossOrigin:void 0,loadTexture:function(e,t,r,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var n=new Ar;n.setCrossOrigin(this.crossOrigin);var a=n.load(e,r,void 0,i);return t&&(a.mapping=t),a},loadTextureCube:function(e,t,r,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var n=new Pr;n.setCrossOrigin(this.crossOrigin);var a=n.load(e,r,void 0,i);return t&&(a.mapping=t),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};e.WebGLRenderTargetCube=s,e.WebGLRenderTarget=o,e.WebGLRenderer=lt,e.ShaderLib=Wl,e.UniformsLib=Hl,e.UniformsUtils=Ho,e.ShaderChunk=Ul,e.FogExp2=ut,e.Fog=ct,e.Scene=ht,e.LensFlare=pt,e.Sprite=ft,e.LOD=mt,e.SkinnedMesh=bt,e.Skeleton=gt,e.Bone=yt,e.Mesh=Oe,e.LineSegments=wt,e.Line=xt,e.Points=Mt,e.Group=St,e.VideoTexture=Et,e.DataTexture=vt,e.CompressedTexture=Pt,e.CubeTexture=h,e.CanvasTexture=At,e.DepthTexture=Ct,e.TextureIdCount=n,e.Texture=i,e.MaterialIdCount=Z,e.CompressedTextureLoader=Mr,e.BinaryTextureLoader=Sr,e.DataTextureLoader=tu,e.CubeTextureLoader=Pr,e.TextureLoader=Ar,e.ObjectLoader=ri,e.MaterialLoader=Qr,e.BufferGeometryLoader=Jr,e.DefaultLoadingManager=eu,e.LoadingManager=wr,e.JSONLoader=ti,e.ImageLoader=Er,e.FontLoader=fi,e.XHRLoader=Tr,e.Loader=ei,e.Cache=Jl,e.AudioLoader=vi,e.SpotLightShadow=Lr,e.SpotLight=Rr,e.PointLight=Ir,e.HemisphereLight=Or,e.DirectionalLightShadow=Dr,e.DirectionalLight=Fr,e.AmbientLight=Nr,e.LightShadow=kr,e.Light=Cr,e.StereoCamera=gi,e.PerspectiveCamera=Ie,e.OrthographicCamera=De,e.CubeCamera=yi,e.Camera=Re,e.AudioListener=bi,e.PositionalAudio=xi,e.getAudioContext=mi,e.AudioAnalyser=wi,e.Audio=_i,e.VectorKeyframeTrack=zr,e.StringKeyframeTrack=Yr,e.QuaternionKeyframeTrack=Wr,e.NumberKeyframeTrack=Xr,e.ColorKeyframeTrack=Kr,e.BooleanKeyframeTrack=qr,e.PropertyMixer=Ti,e.PropertyBinding=Mi,e.KeyframeTrack=$r,e.AnimationUtils=ru,e.AnimationObjectGroup=Si,e.AnimationMixer=Pi,e.AnimationClip=Zr,e.Uniform=Ai,e.InstancedBufferGeometry=Ci,e.BufferGeometry=Ce,e.GeometryIdCount=Pe,e.Geometry=Ee,e.InterleavedBufferAttribute=Oi,e.InstancedInterleavedBuffer=Li,e.InterleavedBuffer=ki,e.InstancedBufferAttribute=Ri,e.DynamicBufferAttribute=Se,e.Float64Attribute=Me,e.Float32Attribute=Te,e.Uint32Attribute=we,e.Int32Attribute=xe,
e.Uint16Attribute=_e,e.Int16Attribute=be,e.Uint8ClampedAttribute=ye,e.Uint8Attribute=ge,e.Int8Attribute=ve,e.BufferAttribute=me,e.Face3=de,e.Object3DIdCount=ce,e.Object3D=ue,e.Raycaster=Ii,e.Layers=le,e.EventDispatcher=t,e.Clock=Ni,e.QuaternionLinearInterpolant=Hr,e.LinearInterpolant=jr,e.DiscreteInterpolant=Vr,e.CubicInterpolant=Gr,e.Interpolant=Br,e.Triangle=pe,e.Spline=Bi,e.Math=No,e.Spherical=Gi,e.Plane=ie,e.Frustum=ne,e.Sphere=te,e.Ray=oe,e.Matrix4=c,e.Matrix3=re,e.Box3=ee,e.Box2=Y,e.Line3=he,e.Euler=se,e.Vector4=a,e.Vector3=u,e.Vector2=r,e.Quaternion=l,e.ColorKeywords=zl,e.Color=X,e.MorphBlendMesh=ji,e.ImmediateRenderObject=Vi,e.VertexNormalsHelper=Ui,e.SpotLightHelper=zi,e.SkeletonHelper=Hi,e.PointLightHelper=Wi,e.HemisphereLightHelper=Xi,e.GridHelper=Yi,e.FaceNormalsHelper=qi,e.DirectionalLightHelper=Ki,e.CameraHelper=$i,e.BoundingBoxHelper=Zi,e.BoxHelper=Qi,e.ArrowHelper=Ji,e.AxisHelper=en,e.ClosedSplineCurve3=tn,e.CatmullRomCurve3=uu,e.SplineCurve3=cu,e.CubicBezierCurve3=hu,e.QuadraticBezierCurve3=pu,e.LineCurve3=du,e.ArcCurve=rn,e.EllipseCurve=oi,e.SplineCurve=si,e.CubicBezierCurve=li,e.QuadraticBezierCurve=ui,e.LineCurve=ni,e.Shape=ci,e.ShapePath=pi,e.Path=hi,e.Font=di,e.CurvePath=ai,e.Curve=ii,e.ShapeUtils=$l,e.SceneUtils=fu,e.CurveUtils=nu,e.WireframeGeometry=Ot,e.ParametricGeometry=Lt,e.ParametricBufferGeometry=kt,e.TetrahedronGeometry=Dt,e.TetrahedronBufferGeometry=It,e.OctahedronGeometry=Nt,e.OctahedronBufferGeometry=Ft,e.IcosahedronGeometry=Gt,e.IcosahedronBufferGeometry=Bt,e.DodecahedronGeometry=Vt,e.DodecahedronBufferGeometry=jt,e.PolyhedronGeometry=Ut,e.PolyhedronBufferGeometry=Rt,e.TubeGeometry=Ht,e.TubeBufferGeometry=zt,e.TorusKnotGeometry=Xt,e.TorusKnotBufferGeometry=Wt,e.TorusGeometry=qt,e.TorusBufferGeometry=Yt,e.TextGeometry=$t,e.SphereBufferGeometry=Zt,e.SphereGeometry=Qt,e.RingGeometry=er,e.RingBufferGeometry=Jt,e.PlaneBufferGeometry=Le,e.PlaneGeometry=tr,e.LatheGeometry=ir,e.LatheBufferGeometry=rr,e.ShapeGeometry=nr,e.ExtrudeGeometry=Kt,e.EdgesGeometry=ar,e.ConeGeometry=lr,e.ConeBufferGeometry=ur,e.CylinderGeometry=sr,e.CylinderBufferGeometry=or,e.CircleBufferGeometry=cr,e.CircleGeometry=hr,e.BoxBufferGeometry=ke,e.BoxGeometry=pr,e.ShadowMaterial=dr,e.SpriteMaterial=dt,e.RawShaderMaterial=fr,e.ShaderMaterial=Q,e.PointsMaterial=Tt,e.MultiMaterial=mr,e.MeshPhysicalMaterial=gr,e.MeshStandardMaterial=vr,e.MeshPhongMaterial=yr,e.MeshNormalMaterial=br,e.MeshLambertMaterial=_r,e.MeshDepthMaterial=J,e.MeshBasicMaterial=fe,e.LineDashedMaterial=xr,e.LineBasicMaterial=_t,e.Material=$,e.REVISION=mn,e.MOUSE=vn,e.CullFaceNone=gn,e.CullFaceBack=yn,e.CullFaceFront=bn,e.CullFaceFrontBack=_n,e.FrontFaceDirectionCW=xn,e.FrontFaceDirectionCCW=wn,e.BasicShadowMap=Tn,e.PCFShadowMap=Mn,e.PCFSoftShadowMap=Sn,e.FrontSide=En,e.BackSide=Pn,e.DoubleSide=An,e.FlatShading=Cn,e.SmoothShading=On,e.NoColors=kn,e.FaceColors=Ln,e.VertexColors=Rn,e.NoBlending=In,e.NormalBlending=Dn,e.AdditiveBlending=Fn,e.SubtractiveBlending=Nn,e.MultiplyBlending=Bn,e.CustomBlending=Gn,e.BlendingMode=jn,e.AddEquation=Vn,e.SubtractEquation=Un,e.ReverseSubtractEquation=zn,e.MinEquation=Hn,e.MaxEquation=Wn,e.ZeroFactor=Xn,e.OneFactor=Yn,e.SrcColorFactor=qn,e.OneMinusSrcColorFactor=Kn,e.SrcAlphaFactor=$n,e.OneMinusSrcAlphaFactor=Zn,e.DstAlphaFactor=Qn,e.OneMinusDstAlphaFactor=Jn,e.DstColorFactor=ea,e.OneMinusDstColorFactor=ta,e.SrcAlphaSaturateFactor=ra,e.NeverDepth=ia,e.AlwaysDepth=na,e.LessDepth=aa,e.LessEqualDepth=oa,e.EqualDepth=sa,e.GreaterEqualDepth=la,e.GreaterDepth=ua,e.NotEqualDepth=ca,e.MultiplyOperation=ha,e.MixOperation=pa,e.AddOperation=da,e.NoToneMapping=fa,e.LinearToneMapping=ma,e.ReinhardToneMapping=va,e.Uncharted2ToneMapping=ga,e.CineonToneMapping=ya,e.UVMapping=ba,e.CubeReflectionMapping=_a,e.CubeRefractionMapping=xa,e.EquirectangularReflectionMapping=wa,e.EquirectangularRefractionMapping=Ta,e.SphericalReflectionMapping=Ma,e.CubeUVReflectionMapping=Sa,e.CubeUVRefractionMapping=Ea,e.TextureMapping=Pa,e.RepeatWrapping=Aa,e.ClampToEdgeWrapping=Ca,e.MirroredRepeatWrapping=Oa,e.TextureWrapping=ka,e.NearestFilter=La,e.NearestMipMapNearestFilter=Ra,e.NearestMipMapLinearFilter=Ia,e.LinearFilter=Da,e.LinearMipMapNearestFilter=Fa,e.LinearMipMapLinearFilter=Na,e.TextureFilter=Ba,e.UnsignedByteType=Ga,e.ByteType=ja,e.ShortType=Va,e.UnsignedShortType=Ua,e.IntType=za,e.UnsignedIntType=Ha,e.FloatType=Wa,e.HalfFloatType=Xa,e.UnsignedShort4444Type=Ya,e.UnsignedShort5551Type=qa,e.UnsignedShort565Type=Ka,e.UnsignedInt248Type=$a,e.AlphaFormat=Za,e.RGBFormat=Qa,e.RGBAFormat=Ja,e.LuminanceFormat=eo,e.LuminanceAlphaFormat=to,e.RGBEFormat=ro,e.DepthFormat=io,e.DepthStencilFormat=no,e.RGB_S3TC_DXT1_Format=ao,e.RGBA_S3TC_DXT1_Format=oo,e.RGBA_S3TC_DXT3_Format=so,e.RGBA_S3TC_DXT5_Format=lo,e.RGB_PVRTC_4BPPV1_Format=uo,e.RGB_PVRTC_2BPPV1_Format=co,e.RGBA_PVRTC_4BPPV1_Format=ho,e.RGBA_PVRTC_2BPPV1_Format=po,e.RGB_ETC1_Format=fo,e.LoopOnce=mo,e.LoopRepeat=vo,e.LoopPingPong=go,e.InterpolateDiscrete=yo,e.InterpolateLinear=bo,e.InterpolateSmooth=_o,e.ZeroCurvatureEnding=xo,e.ZeroSlopeEnding=wo,e.WrapAroundEnding=To,e.TrianglesDrawMode=Mo,e.TriangleStripDrawMode=So,e.TriangleFanDrawMode=Eo,e.LinearEncoding=Po,e.sRGBEncoding=Ao,e.GammaEncoding=Co,e.RGBEEncoding=Oo,e.LogLuvEncoding=ko,e.RGBM7Encoding=Lo,e.RGBM16Encoding=Ro,e.RGBDEncoding=Io,e.BasicDepthPacking=Do,e.RGBADepthPacking=Fo,e.CubeGeometry=pr,e.Face4=nn,e.LineStrip=mu,e.LinePieces=vu,e.MeshFaceMaterial=mr,e.PointCloud=an,e.Particle=ft,e.ParticleSystem=on,e.PointCloudMaterial=sn,e.ParticleBasicMaterial=ln,e.ParticleSystemMaterial=un,e.Vertex=cn,e.EdgesHelper=hn,e.WireframeHelper=pn,e.GeometryUtils=gu,e.ImageUtils=yu,e.Projector=dn,e.CanvasRenderer=fn,Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AudioContext",{get:function(){return e.getAudioContext()}})})},{}],28:[function(e,t,r){(function(e){!function(e,i){"object"==typeof r&&"undefined"!=typeof t?t.exports=i():"function"==typeof define&&define.amd?define(i):e.Vue=i()}(this,function(){"use strict";function t(e){return null==e?"":"object"==typeof e?JSON.stringify(e,null,2):String(e)}function r(e){var t=parseFloat(e,10);return t||0===t?t:e}function i(e,t){for(var r=Object.create(null),i=e.split(","),n=0;n<i.length;n++)r[i[n]]=!0;return t?function(e){return r[e.toLowerCase()]}:function(e){return r[e]}}function n(e,t){if(e.length){var r=e.indexOf(t);if(r>-1)return e.splice(r,1)}}function a(e,t){return Vi.call(e,t)}function o(e){return"string"==typeof e||"number"==typeof e}function s(e){var t=Object.create(null);return function(r){var i=t[r];return i||(t[r]=e(r))}}function l(e,t){function r(r){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,r):e.call(t)}return r._length=e.length,r}function u(e,t){t=t||0;for(var r=e.length-t,i=new Array(r);r--;)i[r]=e[r+t];return i}function c(e,t){for(var r in t)e[r]=t[r];return e}function h(e){return null!==e&&"object"==typeof e}function p(e){return Yi.call(e)===qi}function d(e){for(var t={},r=0;r<e.length;r++)e[r]&&c(t,e[r]);return t}function f(){}function m(e){return e.reduce(function(e,t){return e.concat(t.staticKeys||[])},[]).join(",")}function v(e,t){return e==t||!(!h(e)||!h(t))&&JSON.stringify(e)===JSON.stringify(t)}function g(e,t){for(var r=0;r<e.length;r++)if(v(e[r],t))return r;return-1}function y(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function b(e,t,r,i){Object.defineProperty(e,t,{value:r,enumerable:!!i,writable:!0,configurable:!0})}function _(e){if(!$i.test(e)){var t=e.split(".");return function(e){for(var r=0;r<t.length;r++){if(!e)return;e=e[t[r]]}return e}}}function x(e){return/native code/.test(e.toString())}function w(e){dn.target&&fn.push(dn.target),dn.target=e}function T(){dn.target=fn.pop()}function M(e,t){e.__proto__=t}function S(e,t,r){for(var i=0,n=r.length;n>i;i++){var a=r[i];b(e,a,t[a])}}function E(e){if(h(e)){var t;return a(e,"__ob__")&&e.__ob__ instanceof bn?t=e.__ob__:yn.shouldConvert&&!on()&&(Array.isArray(e)||p(e))&&Object.isExtensible(e)&&!e._isVue&&(t=new bn(e)),t}}function P(e,t,r){var i=new dn,n=Object.getOwnPropertyDescriptor(e,t);if(!n||n.configurable!==!1){var a=n&&n.get,o=n&&n.set,s=E(r);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=a?a.call(e):r;return dn.target&&(i.depend(),s&&s.dep.depend(),Array.isArray(t)&&O(t)),t},set:function(t){var n=a?a.call(e):r;t===n||t!==t&&n!==n||(o?o.call(e,t):r=t,s=E(t),i.notify())}})}}function A(e,t,r){if(Array.isArray(e))return e.length=Math.max(e.length,t),e.splice(t,1,r),r;if(a(e,t))return void(e[t]=r);var i=e.__ob__;return e._isVue||i&&i.vmCount?void 0:i?(P(i.value,t,r),i.dep.notify(),r):void(e[t]=r)}function C(e,t){var r=e.__ob__;e._isVue||r&&r.vmCount||a(e,t)&&(delete e[t],r&&r.dep.notify())}function O(e){for(var t=void 0,r=0,i=e.length;i>r;r++)t=e[r],t&&t.__ob__&&t.__ob__.dep.depend(),Array.isArray(t)&&O(t)}function k(e,t){if(!t)return e;for(var r,i,n,o=Object.keys(t),s=0;s<o.length;s++)r=o[s],i=e[r],n=t[r],a(e,r)?p(i)&&p(n)&&k(i,n):A(e,r,n);return e}function L(e,t){return t?e?e.concat(t):Array.isArray(t)?t:[t]:e}function R(e,t){var r=Object.create(e||null);return t?c(r,t):r}function I(e){var t=e.props;if(t){var r,i,n,a={};if(Array.isArray(t))for(r=t.length;r--;)i=t[r],"string"==typeof i&&(n=zi(i),a[n]={type:null});else if(p(t))for(var o in t)i=t[o],n=zi(o),a[n]=p(i)?i:{type:i};e.props=a}}function D(e){var t=e.directives;if(t)for(var r in t){var i=t[r];"function"==typeof i&&(t[r]={bind:i,update:i})}}function F(e,t,r){function i(i){var n=_n[i]||xn;c[i]=n(e[i],t[i],r,i)}I(t),D(t);var n=t["extends"];if(n&&(e="function"==typeof n?F(e,n.options,r):F(e,n,r)),t.mixins)for(var o=0,s=t.mixins.length;s>o;o++){var l=t.mixins[o];l.prototype instanceof Be&&(l=l.options),e=F(e,l,r)}var u,c={};for(u in e)i(u);for(u in t)a(e,u)||i(u);return c}function N(e,t,r){if("string"==typeof r){var i=e[t],n=i[r]||i[zi(r)]||i[Hi(zi(r))];return n}}function B(e,t,r,i){var n=t[e],o=!a(r,e),s=r[e];if(V(n.type)&&(o&&!a(n,"default")?s=!1:""!==s&&s!==Xi(e)||(s=!0)),void 0===s){s=G(i,n,e);var l=yn.shouldConvert;yn.shouldConvert=!0,E(s),yn.shouldConvert=l}return s}function G(e,t,r){if(a(t,"default")){var i=t["default"];return h(i),e&&e.$options.propsData&&void 0===e.$options.propsData[r]&&void 0!==e[r]?e[r]:"function"==typeof i&&t.type!==Function?i.call(e):i}}function j(e){var t=e&&e.toString().match(/^\s*function (\w+)/);return t&&t[1]}function V(e){if(!Array.isArray(e))return"Boolean"===j(e);for(var t=0,r=e.length;r>t;t++)if("Boolean"===j(e[t]))return!0;return!1}function U(){Tn.length=0,Mn={},Sn=En=!1}function z(){for(En=!0,Tn.sort(function(e,t){return e.id-t.id}),Pn=0;Pn<Tn.length;Pn++){var e=Tn[Pn],t=e.id;Mn[t]=null,e.run()}sn&&cn.devtools&&sn.emit("flush"),U()}function H(e){var t=e.id;if(null==Mn[t]){if(Mn[t]=!0,En){for(var r=Tn.length-1;r>=0&&Tn[r].id>e.id;)r--;Tn.splice(Math.max(r,Pn)+1,0,e)}else Tn.push(e);Sn||(Sn=!0,ln(z))}}function W(e){On.clear(),X(e,On)}function X(e,t){var r,i,n=Array.isArray(e);if((n||h(e))&&Object.isExtensible(e)){if(e.__ob__){var a=e.__ob__.dep.id;if(t.has(a))return;t.add(a)}if(n)for(r=e.length;r--;)X(e[r],t);else for(i=Object.keys(e),r=i.length;r--;)X(e[i[r]],t)}}function Y(e){e._watchers=[],q(e),K(e),$(e),Q(e),J(e)}function q(e){var t=e.$options.props;if(t){var r=e.$options.propsData||{},i=e.$options._propKeys=Object.keys(t),n=!e.$parent;yn.shouldConvert=n;for(var a=function(n){var a=i[n];P(e,a,B(a,t,r,e))},o=0;o<i.length;o++)a(o);yn.shouldConvert=!0}}function K(e){var t=e.$options.data;t=e._data="function"==typeof t?t.call(e):t||{},p(t)||(t={});for(var r=Object.keys(t),i=e.$options.props,n=r.length;n--;)i&&a(i,r[n])||re(e,r[n]);E(t),t.__ob__&&t.__ob__.vmCount++}function $(e){var t=e.$options.computed;if(t)for(var r in t){var i=t[r];"function"==typeof i?(kn.get=Z(i,e),kn.set=f):(kn.get=i.get?i.cache!==!1?Z(i.get,e):l(i.get,e):f,kn.set=i.set?l(i.set,e):f),Object.defineProperty(e,r,kn)}}function Z(e,t){var r=new Cn(t,e,f,{lazy:!0});return function(){return r.dirty&&r.evaluate(),dn.target&&r.depend(),r.value}}function Q(e){var t=e.$options.methods;if(t)for(var r in t)e[r]=null==t[r]?f:l(t[r],e)}function J(e){var t=e.$options.watch;if(t)for(var r in t){var i=t[r];if(Array.isArray(i))for(var n=0;n<i.length;n++)ee(e,r,i[n]);else ee(e,r,i)}}function ee(e,t,r){var i;p(r)&&(i=r,r=r.handler),"string"==typeof r&&(r=e[r]),e.$watch(t,r,i)}function te(e){var t={};t.get=function(){return this._data},Object.defineProperty(e.prototype,"$data",t),e.prototype.$set=A,e.prototype.$delete=C,e.prototype.$watch=function(e,t,r){var i=this;r=r||{},r.user=!0;var n=new Cn(i,e,t,r);return r.immediate&&t.call(i,n.value),function(){n.teardown()}}}function re(e,t){y(t)||Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return e._data[t]},set:function(r){e._data[t]=r}})}function ie(e){var t=new Ln(e.tag,e.data,e.children,e.text,e.elm,e.ns,e.context,e.componentOptions);return t.isStatic=e.isStatic,t.key=e.key,t.isCloned=!0,t}function ne(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=ie(e[r]);return t}function ae(e,t,r,i){i+=t;var n=e.__injected||(e.__injected={});if(!n[i]){n[i]=!0;var a=e[t];e[t]=a?function(){a.apply(this,arguments),r.apply(this,arguments)}:r}}function oe(e,t,r,i){var n,a,o,s,l,u;for(n in e)if(a=e[n],o=t[n],a)if(o){if(a!==o)if(Array.isArray(o)){o.length=a.length;for(var c=0;c<o.length;c++)o[c]=a[c];e[n]=o}else o.fn=a,e[n]=o}else u="!"===n.charAt(0),l=u?n.slice(1):n,Array.isArray(a)?r(l,a.invoker=se(a),u):(a.invoker||(s=a,a=e[n]={},a.fn=s,a.invoker=le(a)),r(l,a.invoker,u));for(n in t)e[n]||(l="!"===n.charAt(0)?n.slice(1):n,i(l,t[n].invoker))}function se(e){return function(t){for(var r=arguments,i=1===arguments.length,n=0;n<e.length;n++)i?e[n](t):e[n].apply(null,r)}}function le(e){return function(t){var r=1===arguments.length;r?e.fn(t):e.fn.apply(null,arguments)}}function ue(e,t,r){if(o(e))return[ce(e)];if(Array.isArray(e)){for(var i=[],n=0,a=e.length;a>n;n++){var s=e[n],l=i[i.length-1];Array.isArray(s)?i.push.apply(i,ue(s,t,(r||"")+"_"+n)):o(s)?l&&l.text?l.text+=String(s):""!==s&&i.push(ce(s)):s instanceof Ln&&(s.text&&l&&l.text?l.isCloned||(l.text+=s.text):(t&&he(s,t),s.tag&&null==s.key&&null!=r&&(s.key="__vlist"+r+"_"+n+"__"),i.push(s)))}return i}}function ce(e){return new Ln(void 0,void 0,void 0,String(e))}function he(e,t){if(e.tag&&!e.ns&&(e.ns=t,e.children))for(var r=0,i=e.children.length;i>r;r++)he(e.children[r],t)}function pe(e){return e&&e.filter(function(e){return e&&e.componentOptions})[0]}function de(e){var t=e.$options,r=t.parent;if(r&&!t["abstract"]){for(;r.$options["abstract"]&&r.$parent;)r=r.$parent;r.$children.push(e)}e.$parent=r,e.$root=r?r.$root:e,e.$children=[],e.$refs={},e._watcher=null,e._inactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function fe(e){e.prototype._mount=function(e,t){var r=this;return r.$el=e,r.$options.render||(r.$options.render=Rn),me(r,"beforeMount"),r._watcher=new Cn(r,function(){r._update(r._render(),t)},f),t=!1,null==r.$vnode&&(r._isMounted=!0,me(r,"mounted")),r},e.prototype._update=function(e,t){var r=this;r._isMounted&&me(r,"beforeUpdate");var i=r.$el,n=In;In=r;var a=r._vnode;r._vnode=e,r.$el=a?r.__patch__(a,e):r.__patch__(r.$el,e,t),In=n,i&&(i.__vue__=null),r.$el&&(r.$el.__vue__=r),r.$vnode&&r.$parent&&r.$vnode===r.$parent._vnode&&(r.$parent.$el=r.$el),r._isMounted&&me(r,"updated")},e.prototype._updateFromParent=function(e,t,r,i){var n=this,a=!(!n.$options._renderChildren&&!i);if(n.$options._parentVnode=r,n.$vnode=r,n._vnode&&(n._vnode.parent=r),n.$options._renderChildren=i,e&&n.$options.props){yn.shouldConvert=!1;for(var o=n.$options._propKeys||[],s=0;s<o.length;s++){var l=o[s];n[l]=B(l,n.$options.props,e,n)}yn.shouldConvert=!0,n.$options.propsData=e}if(t){var u=n.$options._parentListeners;n.$options._parentListeners=t,n._updateListeners(t,u)}a&&(n.$slots=Le(i,n._renderContext),n.$forceUpdate())},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){me(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options["abstract"]||n(t.$children,e),e._watcher&&e._watcher.teardown();for(var r=e._watchers.length;r--;)e._watchers[r].teardown();e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,me(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.__patch__(e._vnode,null)}}}function me(e,t){var r=e.$options[t];if(r)for(var i=0,n=r.length;n>i;i++)r[i].call(e);e.$emit("hook:"+t)}function ve(e,t,r,i,n){if(e){var a=r.$options._base;if(h(e)&&(e=a.extend(e)),"function"==typeof e){if(!e.cid)if(e.resolved)e=e.resolved;else if(e=Te(e,a,function(){r.$forceUpdate()}),!e)return;Ne(e),t=t||{};var o=Me(t,e);if(e.options.functional)return ge(e,o,t,r,i);var s=t.on;t.on=t.nativeOn,e.options["abstract"]&&(t={}),Ee(t);var l=e.options.name||n,u=new Ln("vue-component-"+e.cid+(l?"-"+l:""),t,void 0,void 0,void 0,void 0,r,{Ctor:e,propsData:o,listeners:s,tag:n,children:i});return u}}}function ge(e,t,r,i,n){var a={},o=e.options.props;if(o)for(var s in o)a[s]=B(s,o,t);var u=e.options.render.call(null,l(Ae,{_self:Object.create(i)}),{props:a,data:r,parent:i,children:ue(n),slots:function(){return Le(n,i)}});return u instanceof Ln&&(u.functionalContext=i,r.slot&&((u.data||(u.data={})).slot=r.slot)),u}function ye(e,t){var r=e.componentOptions,i={_isComponent:!0,parent:t,propsData:r.propsData,_componentTag:r.tag,_parentVnode:e,_parentListeners:r.listeners,_renderChildren:r.children},n=e.data.inlineTemplate;return n&&(i.render=n.render,i.staticRenderFns=n.staticRenderFns),new r.Ctor(i)}function be(e,t){if(!e.child||e.child._isDestroyed){var r=e.child=ye(e,In);r.$mount(t?e.elm:void 0,t)}else if(e.data.keepAlive){var i=e;_e(i,i)}}function _e(e,t){var r=t.componentOptions,i=t.child=e.child;i._updateFromParent(r.propsData,r.listeners,t,r.children)}function xe(e){e.child._isMounted||(e.child._isMounted=!0,me(e.child,"mounted")),e.data.keepAlive&&(e.child._inactive=!1,me(e.child,"activated"))}function we(e){e.child._isDestroyed||(e.data.keepAlive?(e.child._inactive=!0,me(e.child,"deactivated")):e.child.$destroy())}function Te(e,t,r){if(!e.requested){e.requested=!0;var i=e.pendingCallbacks=[r],n=!0,a=function(r){if(h(r)&&(r=t.extend(r)),e.resolved=r,!n)for(var a=0,o=i.length;o>a;a++)i[a](r)},o=function(){},s=e(a,o);return s&&"function"==typeof s.then&&!e.resolved&&s.then(a,o),n=!1,e.resolved}e.pendingCallbacks.push(r)}function Me(e,t){var r=t.options.props;if(r){var i={},n=e.attrs,a=e.props,o=e.domProps;if(n||a||o)for(var s in r){var l=Xi(s);Se(i,a,s,l,!0)||Se(i,n,s,l)||Se(i,o,s,l)}return i}}function Se(e,t,r,i,n){if(t){if(a(t,r))return e[r]=t[r],n||delete t[r],!0;if(a(t,i))return e[r]=t[i],n||delete t[i],!0}return!1}function Ee(e){e.hook||(e.hook={});for(var t=0;t<Fn.length;t++){var r=Fn[t],i=e.hook[r],n=Dn[r];e.hook[r]=i?Pe(n,i):n}}function Pe(e,t){return function(r,i){e(r,i),t(r,i)}}function Ae(e,t,r){return t&&(Array.isArray(t)||"object"!=typeof t)&&(r=t,t=void 0),Ce(this._self,e,t,r)}function Ce(e,t,r,i){if(!r||!r.__ob__){if(!t)return Rn();if(Array.isArray(i)&&"function"==typeof i[0]&&(r=r||{},r.scopedSlots={"default":i[0]},i.length=0),"string"==typeof t){var n,a=cn.getTagNamespace(t);if(cn.isReservedTag(t))return new Ln(t,r,ue(i,a),void 0,void 0,a,e);if(n=N(e.$options,"components",t))return ve(n,r,e,i,t);var o="foreignObject"===t?"xhtml":a;return new Ln(t,r,ue(i,o),void 0,void 0,a,e)}return ve(t,r,e,i)}}function Oe(e){e.$vnode=null,e._vnode=null,e._staticTrees=null,e._renderContext=e.$options._parentVnode&&e.$options._parentVnode.context,e.$slots=Le(e.$options._renderChildren,e._renderContext),e.$scopedSlots={},e.$createElement=l(Ae,e),e.$options.el&&e.$mount(e.$options.el)}function ke(e){function i(e,t,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)e[i]&&"string"!=typeof e[i]&&n(e[i],t+"_"+i,r);else n(e,t,r)}function n(e,t,r){e.isStatic=!0,e.key=t,e.isOnce=r}e.prototype.$nextTick=function(e){return ln(e,this)},e.prototype._render=function(){var e=this,t=e.$options,r=t.render,i=t.staticRenderFns,n=t._parentVnode;if(e._isMounted)for(var a in e.$slots)e.$slots[a]=ne(e.$slots[a]);n&&n.data.scopedSlots&&(e.$scopedSlots=n.data.scopedSlots),i&&!e._staticTrees&&(e._staticTrees=[]),e.$vnode=n;var o;try{o=r.call(e._renderProxy,e.$createElement)}catch(t){if(cn.errorHandler)cn.errorHandler.call(null,t,e);else{if(on())throw t;console.error(t)}o=e._vnode}return o instanceof Ln||(o=Rn()),o.parent=n,o},e.prototype._h=Ae,e.prototype._s=t,e.prototype._n=r,e.prototype._e=Rn,e.prototype._q=v,e.prototype._i=g,e.prototype._m=function(e,t){var r=this._staticTrees[e];return r&&!t?Array.isArray(r)?ne(r):ie(r):(r=this._staticTrees[e]=this.$options.staticRenderFns[e].call(this._renderProxy),i(r,"__static__"+e,!1),r)},e.prototype._o=function(e,t,r){return i(e,"__once__"+t+(r?"_"+r:""),!0),e};var a=function(e){return e};e.prototype._f=function(e){return N(this.$options,"filters",e,!0)||a},e.prototype._l=function(e,t){var r,i,n,a,o;if(Array.isArray(e))for(r=new Array(e.length),i=0,n=e.length;n>i;i++)r[i]=t(e[i],i);else if("number"==typeof e)for(r=new Array(e),i=0;e>i;i++)r[i]=t(i+1,i);else if(h(e))for(a=Object.keys(e),r=new Array(a.length),i=0,n=a.length;n>i;i++)o=a[i],r[i]=t(e[o],o,i);return r},e.prototype._t=function(e,t,r){var i=this.$scopedSlots[e];if(i)return i(r||{})||t;var n=this.$slots[e];return n||t},e.prototype._b=function(e,t,r,i){if(r&&h(r)){Array.isArray(r)&&(r=d(r));for(var n in r)if("class"===n||"style"===n)e[n]=r[n];else{var a=i||cn.mustUseProp(t,n)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={});a[n]=r[n]}}return e},e.prototype._k=function(e){return cn.keyCodes[e]}}function Le(e,t){var r={};if(!e)return r;for(var i,n,a=ue(e)||[],o=[],s=0,l=a.length;l>s;s++)if(n=a[s],(n.context===t||n.functionalContext===t)&&n.data&&(i=n.data.slot)){var u=r[i]||(r[i]=[]);"template"===n.tag?u.push.apply(u,n.children):u.push(n)}else o.push(n);return o.length&&(1!==o.length||" "!==o[0].text&&!o[0].isComment)&&(r["default"]=o),r}function Re(e){e._events=Object.create(null);var t=e.$options._parentListeners,r=l(e.$on,e),i=l(e.$off,e);e._updateListeners=function(t,n){oe(t,n||{},r,i,e)},t&&e._updateListeners(t)}function Ie(e){e.prototype.$on=function(e,t){var r=this;return(r._events[e]||(r._events[e]=[])).push(t),r},e.prototype.$once=function(e,t){function r(){i.$off(e,r),t.apply(i,arguments)}var i=this;return r.fn=t,i.$on(e,r),i},e.prototype.$off=function(e,t){var r=this;if(!arguments.length)return r._events=Object.create(null),r;var i=r._events[e];if(!i)return r;if(1===arguments.length)return r._events[e]=null,r;for(var n,a=i.length;a--;)if(n=i[a],n===t||n.fn===t){i.splice(a,1);break}return r},e.prototype.$emit=function(e){var t=this,r=t._events[e];if(r){r=r.length>1?u(r):r;for(var i=u(arguments,1),n=0,a=r.length;a>n;n++)r[n].apply(t,i)}return t}}function De(e){e.prototype._init=function(e){var t=this;t._uid=Nn++,t._isVue=!0,e&&e._isComponent?Fe(t,e):t.$options=F(Ne(t.constructor),e||{},t),t._renderProxy=t,t._self=t,de(t),Re(t),me(t,"beforeCreate"),Y(t),me(t,"created"),Oe(t)}}function Fe(e,t){var r=e.$options=Object.create(e.constructor.options);r.parent=t.parent,r.propsData=t.propsData,r._parentVnode=t._parentVnode,r._parentListeners=t._parentListeners,r._renderChildren=t._renderChildren,r._componentTag=t._componentTag,t.render&&(r.render=t.render,r.staticRenderFns=t.staticRenderFns)}function Ne(e){var t=e.options;if(e["super"]){var r=e["super"].options,i=e.superOptions,n=e.extendOptions;r!==i&&(e.superOptions=r,n.render=t.render,n.staticRenderFns=t.staticRenderFns,n._scopeId=t._scopeId,t=e.options=F(r,n),t.name&&(t.components[t.name]=e))}return t}function Be(e){this._init(e)}function Ge(e){e.use=function(e){if(!e.installed){var t=u(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}}}function je(e){e.mixin=function(e){this.options=F(this.options,e)}}function Ve(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var r=this,i=r.cid,n=e._Ctor||(e._Ctor={});if(n[i])return n[i];var a=e.name||r.options.name,o=function(e){this._init(e)};return o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.cid=t++,o.options=F(r.options,e),o["super"]=r,o.extend=r.extend,o.mixin=r.mixin,o.use=r.use,cn._assetTypes.forEach(function(e){o[e]=r[e]}),a&&(o.options.components[a]=o),o.superOptions=r.options,o.extendOptions=e,n[i]=o,o}}function Ue(e){cn._assetTypes.forEach(function(t){e[t]=function(e,r){return r?("component"===t&&p(r)&&(r.name=r.name||e,r=this.options._base.extend(r)),"directive"===t&&"function"==typeof r&&(r={bind:r,update:r}),this.options[t+"s"][e]=r,r):this.options[t+"s"][e]}})}function ze(e,t){return"string"==typeof e?e.split(",").indexOf(t)>-1:e.test(t)}function He(e){var t={};t.get=function(){return cn},Object.defineProperty(e,"config",t),e.util=wn,e.set=A,e["delete"]=C,e.nextTick=ln,e.options=Object.create(null),cn._assetTypes.forEach(function(t){e.options[t+"s"]=Object.create(null)}),e.options._base=e,c(e.options.components,jn),Ge(e),je(e),Ve(e),Ue(e)}function We(e){for(var t=e.data,r=e,i=e;i.child;)i=i.child._vnode,i.data&&(t=Xe(i.data,t));for(;r=r.parent;)r.data&&(t=Xe(t,r.data));return Ye(t)}function Xe(e,t){return{staticClass:qe(e.staticClass,t.staticClass),"class":e["class"]?[e["class"],t["class"]]:t["class"]}}function Ye(e){var t=e["class"],r=e.staticClass;return r||t?qe(r,Ke(t)):""}function qe(e,t){return e?t?e+" "+t:e:t||""}function Ke(e){var t="";if(!e)return t;if("string"==typeof e)return e;if(Array.isArray(e)){for(var r,i=0,n=e.length;n>i;i++)e[i]&&(r=Ke(e[i]))&&(t+=r+" ");return t.slice(0,-1)}if(h(e)){for(var a in e)e[a]&&(t+=a+" ");return t.slice(0,-1)}return t}function $e(e){return ea(e)?"svg":"math"===e?"math":void 0}function Ze(e){if(!Qi)return!0;if(ra(e))return!1;if(e=e.toLowerCase(),null!=ia[e])return ia[e];var t=document.createElement(e);return ia[e]=e.indexOf("-")>-1?t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:/HTMLUnknownElement/.test(t.toString())}function Qe(e){return"string"!=typeof e||(e=document.querySelector(e))?e:document.createElement("div")}function Je(e,t){var r=document.createElement(e);return"select"!==e?r:(t.data&&t.data.attrs&&"multiple"in t.data.attrs&&r.setAttribute("multiple","multiple"),r)}function et(e,t){return document.createElementNS(Kn[e],t)}function tt(e){return document.createTextNode(e)}function rt(e){return document.createComment(e)}function it(e,t,r){e.insertBefore(t,r)}function nt(e,t){e.removeChild(t)}function at(e,t){e.appendChild(t)}function ot(e){return e.parentNode}function st(e){return e.nextSibling}function lt(e){return e.tagName}function ut(e,t){e.textContent=t}function ct(e){return e.childNodes}function ht(e,t,r){e.setAttribute(t,r)}function pt(e,t){var r=e.data.ref;if(r){var i=e.context,a=e.child||e.elm,o=i.$refs;t?Array.isArray(o[r])?n(o[r],a):o[r]===a&&(o[r]=void 0):e.data.refInFor?Array.isArray(o[r])&&o[r].indexOf(a)<0?o[r].push(a):o[r]=[a]:o[r]=a}}function dt(e){return null==e}function ft(e){return null!=e}function mt(e,t){return e.key===t.key&&e.tag===t.tag&&e.isComment===t.isComment&&!e.data==!t.data}function vt(e,t,r){var i,n,a={};for(i=t;r>=i;++i)n=e[i].key,ft(n)&&(a[n]=i);return a}function gt(e){function t(e){return new Ln(T.tagName(e).toLowerCase(),{},[],void 0,e)}function r(e,t){function r(){0===--r.listeners&&i(e)}return r.listeners=t,r}function i(e){var t=T.parentNode(e);t&&T.removeChild(t,e)}function n(e,t,r){var i,n=e.data;if(e.isRootInsert=!r,ft(n)&&(ft(i=n.hook)&&ft(i=i.init)&&i(e),ft(i=e.child)))return u(e,t),e.elm;var o=e.children,s=e.tag;return ft(s)?(e.elm=e.ns?T.createElementNS(e.ns,s):T.createElement(s,e),c(e),a(e,o,t),ft(n)&&l(e,t)):e.elm=e.isComment?T.createComment(e.text):T.createTextNode(e.text),e.elm}function a(e,t,r){if(Array.isArray(t))for(var i=0;i<t.length;++i)T.appendChild(e.elm,n(t[i],r,!0));else o(e.text)&&T.appendChild(e.elm,T.createTextNode(e.text))}function s(e){for(;e.child;)e=e.child._vnode;return ft(e.tag)}function l(e,t){for(var r=0;r<x.create.length;++r)x.create[r](oa,e);b=e.data.hook,ft(b)&&(b.create&&b.create(oa,e),b.insert&&t.push(e))}function u(e,t){e.data.pendingInsert&&t.push.apply(t,e.data.pendingInsert),e.elm=e.child.$el,s(e)?(l(e,t),c(e)):(pt(e),t.push(e))}function c(e){var t;ft(t=e.context)&&ft(t=t.$options._scopeId)&&T.setAttribute(e.elm,t,""),ft(t=In)&&t!==e.context&&ft(t=t.$options._scopeId)&&T.setAttribute(e.elm,t,"")}function h(e,t,r,i,a,o){for(;a>=i;++i)T.insertBefore(e,n(r[i],o),t)}function p(e){var t,r,i=e.data;if(ft(i))for(ft(t=i.hook)&&ft(t=t.destroy)&&t(e),t=0;t<x.destroy.length;++t)x.destroy[t](e);if(ft(t=e.children))for(r=0;r<e.children.length;++r)p(e.children[r])}function d(e,t,r,i){for(;i>=r;++r){var n=t[r];ft(n)&&(ft(n.tag)?(f(n),p(n)):T.removeChild(e,n.elm))}}function f(e,t){if(t||ft(e.data)){var n=x.remove.length+1;for(t?t.listeners+=n:t=r(e.elm,n),ft(b=e.child)&&ft(b=b._vnode)&&ft(b.data)&&f(b,t),b=0;b<x.remove.length;++b)x.remove[b](e,t);ft(b=e.data.hook)&&ft(b=b.remove)?b(e,t):t()}else i(e.elm)}function m(e,t,r,i,a){for(var o,s,l,u,c=0,p=0,f=t.length-1,m=t[0],g=t[f],y=r.length-1,b=r[0],_=r[y],x=!a;f>=c&&y>=p;)dt(m)?m=t[++c]:dt(g)?g=t[--f]:mt(m,b)?(v(m,b,i),m=t[++c],b=r[++p]):mt(g,_)?(v(g,_,i),g=t[--f],_=r[--y]):mt(m,_)?(v(m,_,i),x&&T.insertBefore(e,m.elm,T.nextSibling(g.elm)),m=t[++c],_=r[--y]):mt(g,b)?(v(g,b,i),x&&T.insertBefore(e,g.elm,m.elm),g=t[--f],b=r[++p]):(dt(o)&&(o=vt(t,c,f)),s=ft(b.key)?o[b.key]:null,dt(s)?(T.insertBefore(e,n(b,i),m.elm),b=r[++p]):(l=t[s],l.tag!==b.tag?(T.insertBefore(e,n(b,i),m.elm),b=r[++p]):(v(l,b,i),t[s]=void 0,x&&T.insertBefore(e,b.elm,m.elm),b=r[++p])));c>f?(u=dt(r[y+1])?null:r[y+1].elm,h(e,u,r,p,y,i)):p>y&&d(e,t,c,f)}function v(e,t,r,i){if(e!==t){if(t.isStatic&&e.isStatic&&t.key===e.key&&(t.isCloned||t.isOnce))return t.elm=e.elm,void(t.child=e.child);var n,a=t.data,o=ft(a);o&&ft(n=a.hook)&&ft(n=n.prepatch)&&n(e,t);var l=t.elm=e.elm,u=e.children,c=t.children;if(o&&s(t)){for(n=0;n<x.update.length;++n)x.update[n](e,t);ft(n=a.hook)&&ft(n=n.update)&&n(e,t)}dt(t.text)?ft(u)&&ft(c)?u!==c&&m(l,u,c,r,i):ft(c)?(ft(e.text)&&T.setTextContent(l,""),h(l,null,c,0,c.length-1,r)):ft(u)?d(l,u,0,u.length-1):ft(e.text)&&T.setTextContent(l,""):e.text!==t.text&&T.setTextContent(l,t.text),o&&ft(n=a.hook)&&ft(n=n.postpatch)&&n(e,t)}}function g(e,t,r){if(r&&e.parent)e.parent.data.pendingInsert=t;else for(var i=0;i<t.length;++i)t[i].data.hook.insert(t[i])}function y(e,t,r){t.elm=e;var i=t.tag,n=t.data,o=t.children;if(ft(n)&&(ft(b=n.hook)&&ft(b=b.init)&&b(t,!0),ft(b=t.child)))return u(t,r),!0;if(ft(i)){if(ft(o)){var s=T.childNodes(e);if(s.length){var c=!0;if(s.length!==o.length)c=!1;else for(var h=0;h<o.length;h++)if(!y(s[h],o[h],r)){c=!1;break}if(!c)return!1}else a(t,o,r)}ft(n)&&l(t,r)}return!0}var b,_,x={},w=e.modules,T=e.nodeOps;for(b=0;b<sa.length;++b)for(x[sa[b]]=[],_=0;_<w.length;++_)void 0!==w[_][sa[b]]&&x[sa[b]].push(w[_][sa[b]]);return function(e,r,i,a){if(!r)return void(e&&p(e));var o,l,u=!1,c=[];if(e){var h=ft(e.nodeType);if(!h&&mt(e,r))v(e,r,c,a);else{if(h){if(1===e.nodeType&&e.hasAttribute("server-rendered")&&(e.removeAttribute("server-rendered"),i=!0),i&&y(e,r,c))return g(r,c,!0),e;e=t(e)}if(o=e.elm,l=T.parentNode(o),n(r,c),r.parent){for(var f=r.parent;f;)f.elm=r.elm,f=f.parent;if(s(r))for(var m=0;m<x.create.length;++m)x.create[m](oa,r.parent)}null!==l?(T.insertBefore(l,r.elm,T.nextSibling(o)),d(l,[e],0,0)):ft(e.tag)&&p(e)}}else u=!0,n(r,c);return g(r,c,u),r.elm}}function yt(e,t){if(e.data.directives||t.data.directives){var r,i,n,a=e===oa,o=bt(e.data.directives,e.context),s=bt(t.data.directives,t.context),l=[],u=[];for(r in s)i=o[r],n=s[r],i?(n.oldValue=i.value,xt(n,"update",t,e),n.def&&n.def.componentUpdated&&u.push(n)):(xt(n,"bind",t,e),n.def&&n.def.inserted&&l.push(n));if(l.length){var c=function(){l.forEach(function(r){xt(r,"inserted",t,e)})};a?ae(t.data.hook||(t.data.hook={}),"insert",c,"dir-insert"):c()}if(u.length&&ae(t.data.hook||(t.data.hook={}),"postpatch",function(){u.forEach(function(r){xt(r,"componentUpdated",t,e);

})},"dir-postpatch"),!a)for(r in o)s[r]||xt(o[r],"unbind",e)}}function bt(e,t){var r=Object.create(null);if(!e)return r;var i,n;for(i=0;i<e.length;i++)n=e[i],n.modifiers||(n.modifiers=ua),r[_t(n)]=n,n.def=N(t.$options,"directives",n.name,!0);return r}function _t(e){return e.rawName||e.name+"."+Object.keys(e.modifiers||{}).join(".")}function xt(e,t,r,i){var n=e.def&&e.def[t];n&&n(r.elm,e,r,i)}function wt(e,t){if(e.data.attrs||t.data.attrs){var r,i,n,a=t.elm,o=e.data.attrs||{},s=t.data.attrs||{};s.__ob__&&(s=t.data.attrs=c({},s));for(r in s)i=s[r],n=o[r],n!==i&&Tt(a,r,i);for(r in o)null==s[r]&&(Xn(r)?a.removeAttributeNS(Wn,Yn(r)):zn(r)||a.removeAttribute(r))}}function Tt(e,t,r){Hn(t)?qn(r)?e.removeAttribute(t):e.setAttribute(t,t):zn(t)?e.setAttribute(t,qn(r)||"false"===r?"false":"true"):Xn(t)?qn(r)?e.removeAttributeNS(Wn,Yn(t)):e.setAttributeNS(Wn,t,r):qn(r)?e.removeAttribute(t):e.setAttribute(t,r)}function Mt(e,t){var r=t.elm,i=t.data,n=e.data;if(i.staticClass||i["class"]||n&&(n.staticClass||n["class"])){var a=We(t),o=r._transitionClasses;o&&(a=qe(a,Ke(o))),a!==r._prevClass&&(r.setAttribute("class",a),r._prevClass=a)}}function St(e,t){if(e.data.on||t.data.on){var r=t.data.on||{},i=e.data.on||{},n=t.elm._v_add||(t.elm._v_add=function(e,r,i){t.elm.addEventListener(e,r,i)}),a=t.elm._v_remove||(t.elm._v_remove=function(e,r){t.elm.removeEventListener(e,r)});oe(r,i,n,a,t.context)}}function Et(e,t){if(e.data.domProps||t.data.domProps){var r,i,n=t.elm,a=e.data.domProps||{},o=t.data.domProps||{};o.__ob__&&(o=t.data.domProps=c({},o));for(r in a)null==o[r]&&(n[r]="");for(r in o)if(i=o[r],"textContent"!==r&&"innerHTML"!==r||(t.children&&(t.children.length=0),i!==a[r]))if("value"===r){n._value=i;var s=null==i?"":String(i);n.value===s||n.composing||(n.value=s)}else n[r]=i}}function Pt(e){var t=At(e.style);return e.staticStyle?c(e.staticStyle,t):t}function At(e){return Array.isArray(e)?d(e):"string"==typeof e?ma(e):e}function Ct(e,t){var r,i={};if(t)for(var n=e;n.child;)n=n.child._vnode,n.data&&(r=Pt(n.data))&&c(i,r);(r=Pt(e.data))&&c(i,r);for(var a=e;a=a.parent;)a.data&&(r=Pt(a.data))&&c(i,r);return i}function Ot(e,t){var r=t.data,i=e.data;if(r.staticStyle||r.style||i.staticStyle||i.style){var n,a,o=t.elm,s=e.data.staticStyle,l=e.data.style||{},u=s||l,h=At(t.data.style)||{};t.data.style=h.__ob__?c({},h):h;var p=Ct(t,!0);for(a in u)null==p[a]&&ga(o,a,"");for(a in p)n=p[a],n!==u[a]&&ga(o,a,null==n?"":n)}}function kt(e,t){if(t&&t.trim())if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.add(t)}):e.classList.add(t);else{var r=" "+e.getAttribute("class")+" ";r.indexOf(" "+t+" ")<0&&e.setAttribute("class",(r+t).trim())}}function Lt(e,t){if(t&&t.trim())if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach(function(t){return e.classList.remove(t)}):e.classList.remove(t);else{for(var r=" "+e.getAttribute("class")+" ",i=" "+t+" ";r.indexOf(i)>=0;)r=r.replace(i," ");e.setAttribute("class",r.trim())}}function Rt(e){Aa(function(){Aa(e)})}function It(e,t){(e._transitionClasses||(e._transitionClasses=[])).push(t),kt(e,t)}function Dt(e,t){e._transitionClasses&&n(e._transitionClasses,t),Lt(e,t)}function Ft(e,t,r){var i=Nt(e,t),n=i.type,a=i.timeout,o=i.propCount;if(!n)return r();var s=n===wa?Sa:Pa,l=0,u=function(){e.removeEventListener(s,c),r()},c=function(t){t.target===e&&++l>=o&&u()};setTimeout(function(){o>l&&u()},a+1),e.addEventListener(s,c)}function Nt(e,t){var r,i=window.getComputedStyle(e),n=i[Ma+"Delay"].split(", "),a=i[Ma+"Duration"].split(", "),o=Bt(n,a),s=i[Ea+"Delay"].split(", "),l=i[Ea+"Duration"].split(", "),u=Bt(s,l),c=0,h=0;t===wa?o>0&&(r=wa,c=o,h=a.length):t===Ta?u>0&&(r=Ta,c=u,h=l.length):(c=Math.max(o,u),r=c>0?o>u?wa:Ta:null,h=r?r===wa?a.length:l.length:0);var p=r===wa&&Ca.test(i[Ma+"Property"]);return{type:r,timeout:c,propCount:h,hasTransform:p}}function Bt(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map(function(t,r){return Gt(t)+Gt(e[r])}))}function Gt(e){return 1e3*Number(e.slice(0,-1))}function jt(e){var t=e.elm;t._leaveCb&&(t._leaveCb.cancelled=!0,t._leaveCb());var r=Ut(e.data.transition);if(r&&!t._enterCb&&1===t.nodeType){var i=r.css,n=r.type,a=r.enterClass,o=r.enterActiveClass,s=r.appearClass,l=r.appearActiveClass,u=r.beforeEnter,c=r.enter,h=r.afterEnter,p=r.enterCancelled,d=r.beforeAppear,f=r.appear,m=r.afterAppear,v=r.appearCancelled,g=In.$vnode,y=g&&g.parent?g.parent.context:In,b=!y._isMounted||!e.isRootInsert;if(!b||f||""===f){var _=b?s:a,x=b?l:o,w=b?d||u:u,T=b&&"function"==typeof f?f:c,M=b?m||h:h,S=b?v||p:p,E=i!==!1&&!tn,P=T&&(T._length||T.length)>1,A=t._enterCb=zt(function(){E&&Dt(t,x),A.cancelled?(E&&Dt(t,_),S&&S(t)):M&&M(t),t._enterCb=null});e.data.show||ae(e.data.hook||(e.data.hook={}),"insert",function(){var r=t.parentNode,i=r&&r._pending&&r._pending[e.key];i&&i.tag===e.tag&&i.elm._leaveCb&&i.elm._leaveCb(),T&&T(t,A)},"transition-insert"),w&&w(t),E&&(It(t,_),It(t,x),Rt(function(){Dt(t,_),A.cancelled||P||Ft(t,n,A)})),e.data.show&&T&&T(t,A),E||P||A()}}}function Vt(e,t){function r(){v.cancelled||(e.data.show||((i.parentNode._pending||(i.parentNode._pending={}))[e.key]=e),u&&u(i),f&&(It(i,s),It(i,l),Rt(function(){Dt(i,s),v.cancelled||m||Ft(i,o,v)})),c&&c(i,v),f||m||v())}var i=e.elm;i._enterCb&&(i._enterCb.cancelled=!0,i._enterCb());var n=Ut(e.data.transition);if(!n)return t();if(!i._leaveCb&&1===i.nodeType){var a=n.css,o=n.type,s=n.leaveClass,l=n.leaveActiveClass,u=n.beforeLeave,c=n.leave,h=n.afterLeave,p=n.leaveCancelled,d=n.delayLeave,f=a!==!1&&!tn,m=c&&(c._length||c.length)>1,v=i._leaveCb=zt(function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[e.key]=null),f&&Dt(i,l),v.cancelled?(f&&Dt(i,s),p&&p(i)):(t(),h&&h(i)),i._leaveCb=null});d?d(r):r()}}function Ut(e){if(e){if("object"==typeof e){var t={};return e.css!==!1&&c(t,Oa(e.name||"v")),c(t,e),t}return"string"==typeof e?Oa(e):void 0}}function zt(e){var t=!1;return function(){t||(t=!0,e())}}function Ht(e,t){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var n,a,o=0,s=e.options.length;s>o;o++)if(a=e.options[o],i)n=g(r,Xt(a))>-1,a.selected!==n&&(a.selected=n);else if(v(Xt(a),r))return void(e.selectedIndex!==o&&(e.selectedIndex=o));i||(e.selectedIndex=-1)}}function Wt(e,t){for(var r=0,i=t.length;i>r;r++)if(v(Xt(t[r]),e))return!1;return!0}function Xt(e){return"_value"in e?e._value:e.value}function Yt(e){e.target.composing=!0}function qt(e){e.target.composing=!1,Kt(e.target,"input")}function Kt(e,t){var r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),e.dispatchEvent(r)}function $t(e){return!e.child||e.data&&e.data.transition?e:$t(e.child._vnode)}function Zt(e){var t=e&&e.componentOptions;return t&&t.Ctor.options["abstract"]?Zt(pe(t.children)):e}function Qt(e){var t={},r=e.$options;for(var i in r.propsData)t[i]=e[i];var n=r._parentListeners;for(var a in n)t[zi(a)]=n[a].fn;return t}function Jt(e,t){return/\d-keep-alive$/.test(t.tag)?e("keep-alive"):null}function er(e){for(;e=e.parent;)if(e.data.transition)return!0}function tr(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function rr(e){e.data.newPos=e.elm.getBoundingClientRect()}function ir(e){var t=e.data.pos,r=e.data.newPos,i=t.left-r.left,n=t.top-r.top;if(i||n){e.data.moved=!0;var a=e.elm.style;a.transform=a.WebkitTransform="translate("+i+"px,"+n+"px)",a.transitionDuration="0s"}}function nr(e,t){var r=document.createElement("div");return r.innerHTML='<div a="'+e+'">',r.innerHTML.indexOf(t)>0}function ar(e){return za=za||document.createElement("div"),za.innerHTML=e,za.textContent}function or(e,t){return t&&(e=e.replace(Do,"\n")),e.replace(Ro,"<").replace(Io,">").replace(Fo,"&").replace(No,'"')}function sr(e,t){function r(t){h+=t,e=e.substring(t)}function i(){var t=e.match(Za);if(t){var i={tagName:t[1],attrs:[],start:h};r(t[0].length);for(var n,a;!(n=e.match(Qa))&&(a=e.match(qa));)r(a[0].length),i.attrs.push(a);if(n)return i.unarySlash=n[1],r(n[0].length),i.end=h,i}}function n(e){var r=e.tagName,i=e.unarySlash;u&&("p"===s&&Jn(r)&&a("",s),Qn(r)&&s===r&&a("",r));for(var n=c(r)||"html"===r&&"head"===s||!!i,o=e.attrs.length,h=new Array(o),p=0;o>p;p++){var d=e.attrs[p];io&&-1===d[0].indexOf('""')&&(""===d[3]&&delete d[3],""===d[4]&&delete d[4],""===d[5]&&delete d[5]);var f=d[3]||d[4]||d[5]||"";h[p]={name:d[1],value:or(f,t.shouldDecodeNewlines)}}n||(l.push({tag:r,attrs:h}),s=r,i=""),t.start&&t.start(r,h,n,e.start,e.end)}function a(e,r,i,n){var a;if(null==i&&(i=h),null==n&&(n=h),r){var o=r.toLowerCase();for(a=l.length-1;a>=0&&l[a].tag.toLowerCase()!==o;a--);}else a=0;if(a>=0){for(var u=l.length-1;u>=a;u--)t.end&&t.end(l[u].tag,i,n);l.length=a,s=a&&l[a-1].tag}else"br"===r.toLowerCase()?t.start&&t.start(r,[],!0,i,n):"p"===r.toLowerCase()&&(t.start&&t.start(r,[],!1,i,n),t.end&&t.end(r,i,n))}for(var o,s,l=[],u=t.expectHTML,c=t.isUnaryTag||Ki,h=0;e;){if(o=e,s&&ko(s,t.sfc,l)){var p=s.toLowerCase(),d=Lo[p]||(Lo[p]=new RegExp("([\\s\\S]*?)(</"+p+"[^>]*>)","i")),f=0,m=e.replace(d,function(e,r,i){return f=i.length,"script"!==p&&"style"!==p&&"noscript"!==p&&(r=r.replace(/<!--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),t.chars&&t.chars(r),""});h+=e.length-m.length,e=m,a("</"+p+">",p,h-f,h)}else{var v=e.indexOf("<");if(0===v){if(to.test(e)){var g=e.indexOf("-->");if(g>=0){r(g+3);continue}}if(ro.test(e)){var y=e.indexOf("]>");if(y>=0){r(y+2);continue}}var b=e.match(eo);if(b){r(b[0].length);continue}var _=e.match(Ja);if(_){var x=h;r(_[0].length),a(_[0],_[1],x,h);continue}var w=i();if(w){n(w);continue}}var T=void 0,M=void 0,S=void 0;if(v>0){for(M=e.slice(v);!(Ja.test(M)||Za.test(M)||to.test(M)||ro.test(M)||(S=M.indexOf("<",1),0>S));)v+=S,M=e.slice(v);T=e.substring(0,v),r(v)}0>v&&(T=e,e=""),t.chars&&T&&t.chars(T)}if(e===o&&t.chars){t.chars(e);break}}a()}function lr(e){function t(){(o||(o=[])).push(e.slice(f,n).trim()),f=n+1}var r,i,n,a,o,s=!1,l=!1,u=!1,c=!1,h=0,p=0,d=0,f=0;for(n=0;n<e.length;n++)if(i=r,r=e.charCodeAt(n),s)39===r&&92!==i&&(s=!1);else if(l)34===r&&92!==i&&(l=!1);else if(u)96===r&&92!==i&&(u=!1);else if(c)47===r&&92!==i&&(c=!1);else if(124!==r||124===e.charCodeAt(n+1)||124===e.charCodeAt(n-1)||h||p||d)switch(r){case 34:l=!0;break;case 39:s=!0;break;case 96:u=!0;break;case 47:c=!0;break;case 40:d++;break;case 41:d--;break;case 91:p++;break;case 93:p--;break;case 123:h++;break;case 125:h--}else void 0===a?(f=n+1,a=e.slice(0,n).trim()):t();if(void 0===a?a=e.slice(0,n).trim():0!==f&&t(),o)for(n=0;n<o.length;n++)a=ur(a,o[n]);return a}function ur(e,t){var r=t.indexOf("(");if(0>r)return'_f("'+t+'")('+e+")";var i=t.slice(0,r),n=t.slice(r+1);return'_f("'+i+'")('+e+","+n}function cr(e,t){var r=t?jo(t):Bo;if(r.test(e)){for(var i,n,a=[],o=r.lastIndex=0;i=r.exec(e);){n=i.index,n>o&&a.push(JSON.stringify(e.slice(o,n)));var s=lr(i[1].trim());a.push("_s("+s+")"),o=n+i[0].length}return o<e.length&&a.push(JSON.stringify(e.slice(o))),a.join("+")}}function hr(e){console.error("[Vue parser]: "+e)}function pr(e,t){return e?e.map(function(e){return e[t]}).filter(function(e){return e}):[]}function dr(e,t,r){(e.props||(e.props=[])).push({name:t,value:r})}function fr(e,t,r){(e.attrs||(e.attrs=[])).push({name:t,value:r})}function mr(e,t,r,i,n,a){(e.directives||(e.directives=[])).push({name:t,rawName:r,value:i,arg:n,modifiers:a})}function vr(e,t,r,i,n){i&&i.capture&&(delete i.capture,t="!"+t);var a;i&&i["native"]?(delete i["native"],a=e.nativeEvents||(e.nativeEvents={})):a=e.events||(e.events={});var o={value:r,modifiers:i},s=a[t];Array.isArray(s)?n?s.unshift(o):s.push(o):a[t]=s?n?[o,s]:[s,o]:o}function gr(e,t,r){var i=yr(e,":"+t)||yr(e,"v-bind:"+t);if(null!=i)return lr(i);if(r!==!1){var n=yr(e,t);if(null!=n)return JSON.stringify(n)}}function yr(e,t){var r;if(null!=(r=e.attrsMap[t]))for(var i=e.attrsList,n=0,a=i.length;a>n;n++)if(i[n].name===t){i.splice(n,1);break}return r}function br(e){if(ao=e,no=ao.length,so=lo=uo=0,e.indexOf("[")<0||e.lastIndexOf("]")<no-1)return{exp:e,idx:null};for(;!xr();)oo=_r(),wr(oo)?Mr(oo):91===oo&&Tr(oo);return{exp:e.substring(0,lo),idx:e.substring(lo+1,uo)}}function _r(){return ao.charCodeAt(++so)}function xr(){return so>=no}function wr(e){return 34===e||39===e}function Tr(e){var t=1;for(lo=so;!xr();)if(e=_r(),wr(e))Mr(e);else if(91===e&&t++,93===e&&t--,0===t){uo=so;break}}function Mr(e){for(var t=e;!xr()&&(e=_r(),e!==t););}function Sr(e,t){co=t.warn||hr,ho=t.getTagNamespace||Ki,po=t.mustUseProp||Ki,fo=t.isPreTag||Ki,mo=pr(t.modules,"preTransformNode"),vo=pr(t.modules,"transformNode"),go=pr(t.modules,"postTransformNode"),yo=t.delimiters;var r,i,n=[],a=t.preserveWhitespace!==!1,o=!1,s=!1;return sr(e,{expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,shouldDecodeNewlines:t.shouldDecodeNewlines,start:function(e,a,l){function u(){}var c=i&&i.ns||ho(e);en&&"svg"===c&&(a=zr(a));var h={type:1,tag:e,attrsList:a,attrsMap:jr(a),parent:i,children:[]};c&&(h.ns=c),Ur(h)&&!on()&&(h.forbidden=!0);for(var p=0;p<mo.length;p++)mo[p](h,t);if(o||(Er(h),h.pre&&(o=!0)),fo(h.tag)&&(s=!0),o)Pr(h);else{Or(h),kr(h),Ir(h),Ar(h),h.plain=!h.key&&!a.length,Cr(h),Dr(h),Fr(h);for(var d=0;d<vo.length;d++)vo[d](h,t);Nr(h)}if(r?n.length||r["if"]&&(h.elseif||h["else"])&&(u(h),Rr(r,{exp:h.elseif,block:h})):(r=h,u(r)),i&&!h.forbidden)if(h.elseif||h["else"])Lr(h,i);else if(h.slotScope){i.plain=!1;var f=h.slotTarget||"default";(i.scopedSlots||(i.scopedSlots={}))[f]=h}else i.children.push(h),h.parent=i;l||(i=h,n.push(h));for(var m=0;m<go.length;m++)go[m](h,t)},end:function(){var e=n[n.length-1],t=e.children[e.children.length-1];t&&3===t.type&&" "===t.text&&e.children.pop(),n.length-=1,i=n[n.length-1],e.pre&&(o=!1),fo(e.tag)&&(s=!1)},chars:function(e){if(i&&(!en||"textarea"!==i.tag||i.attrsMap.placeholder!==e)&&(e=s||e.trim()?qo(e):a&&i.children.length?" ":"")){var t;i.children.push(!o&&" "!==e&&(t=cr(e,yo))?{type:2,expression:t,text:e}:{type:3,text:e})}}}),r}function Er(e){null!=yr(e,"v-pre")&&(e.pre=!0)}function Pr(e){var t=e.attrsList.length;if(t)for(var r=e.attrs=new Array(t),i=0;t>i;i++)r[i]={name:e.attrsList[i].name,value:JSON.stringify(e.attrsList[i].value)};else e.pre||(e.plain=!0)}function Ar(e){var t=gr(e,"key");t&&(e.key=t)}function Cr(e){var t=gr(e,"ref");t&&(e.ref=t,e.refInFor=Br(e))}function Or(e){var t;if(t=yr(e,"v-for")){var r=t.match(Uo);if(!r)return;e["for"]=r[2].trim();var i=r[1].trim(),n=i.match(zo);n?(e.alias=n[1].trim(),e.iterator1=n[2].trim(),n[3]&&(e.iterator2=n[3].trim())):e.alias=i}}function kr(e){var t=yr(e,"v-if");if(t)e["if"]=t,Rr(e,{exp:t,block:e});else{null!=yr(e,"v-else")&&(e["else"]=!0);var r=yr(e,"v-else-if");r&&(e.elseif=r)}}function Lr(e,t){var r=Vr(t.children);r&&r["if"]&&Rr(r,{exp:e.elseif,block:e})}function Rr(e,t){e.conditions||(e.conditions=[]),e.conditions.push(t)}function Ir(e){var t=yr(e,"v-once");null!=t&&(e.once=!0)}function Dr(e){if("slot"===e.tag)e.slotName=gr(e,"name");else{var t=gr(e,"slot");t&&(e.slotTarget='""'===t?'"default"':t),"template"===e.tag&&(e.slotScope=yr(e,"scope"))}}function Fr(e){var t;(t=gr(e,"is"))&&(e.component=t),null!=yr(e,"inline-template")&&(e.inlineTemplate=!0)}function Nr(e){var t,r,i,n,a,o,s,l,u=e.attrsList;for(t=0,r=u.length;r>t;t++)if(i=n=u[t].name,a=u[t].value,Vo.test(i))if(e.hasBindings=!0,s=Gr(i),s&&(i=i.replace(Yo,"")),Ho.test(i))i=i.replace(Ho,""),a=lr(a),s&&(s.prop&&(l=!0,i=zi(i),"innerHtml"===i&&(i="innerHTML")),s.camel&&(i=zi(i))),l||po(e.tag,i)?dr(e,i,a):fr(e,i,a);else if(Wo.test(i))i=i.replace(Wo,""),vr(e,i,a,s);else{i=i.replace(Vo,"");var c=i.match(Xo);c&&(o=c[1])&&(i=i.slice(0,-(o.length+1))),mr(e,i,n,a,o,s)}else fr(e,i,JSON.stringify(a))}function Br(e){for(var t=e;t;){if(void 0!==t["for"])return!0;t=t.parent}return!1}function Gr(e){var t=e.match(Yo);if(t){var r={};return t.forEach(function(e){r[e.slice(1)]=!0}),r}}function jr(e){for(var t={},r=0,i=e.length;i>r;r++)t[e[r].name]=e[r].value;return t}function Vr(e){for(var t=e.length;t--;)if(e[t].tag)return e[t]}function Ur(e){return"style"===e.tag||"script"===e.tag&&(!e.attrsMap.type||"text/javascript"===e.attrsMap.type)}function zr(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];Ko.test(i.name)||(i.name=i.name.replace($o,""),t.push(i))}return t}function Hr(e,t){e&&(bo=Zo(t.staticKeys||""),_o=t.isReservedTag||function(){return!1},Xr(e),Yr(e,!1))}function Wr(e){return i("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(e?","+e:""))}function Xr(e){if(e["static"]=Kr(e),1===e.type){if(!_o(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var t=0,r=e.children.length;r>t;t++){var i=e.children[t];Xr(i),i["static"]||(e["static"]=!1)}}}function Yr(e,t){if(1===e.type){if((e["static"]||e.once)&&(e.staticInFor=t),e["static"]&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var r=0,i=e.children.length;i>r;r++)Yr(e.children[r],t||!!e["for"]);e.conditions&&qr(e.conditions,t)}}function qr(e,t){for(var r=1,i=e.length;i>r;r++)Yr(e[r].block,t)}function Kr(e){return 2!==e.type&&(3===e.type||!(!e.pre&&(e.hasBindings||e["if"]||e["for"]||ji(e.tag)||!_o(e.tag)||$r(e)||!Object.keys(e).every(bo))))}function $r(e){for(;e.parent;){if(e=e.parent,"template"!==e.tag)return!1;if(e["for"])return!0}return!1}function Zr(e,t){var r=t?"nativeOn:{":"on:{";for(var i in e)r+='"'+i+'":'+Qr(i,e[i])+",";return r.slice(0,-1)+"}"}function Qr(e,t){if(t){if(Array.isArray(t))return"["+t.map(function(t){return Qr(e,t)}).join(",")+"]";if(t.modifiers){var r="",i=[],n=rs.test(e);for(var a in t.modifiers)ts[a]?r+=ts[a]:n&&is[a]?r+=is[a]:i.push(a);i.length&&(r=Jr(i)+r);var o=Jo.test(t.value)?t.value+"($event)":t.value;return"function($event){"+r+o+"}"}return Qo.test(t.value)||Jo.test(t.value)?t.value:"function($event){"+t.value+"}"}return"function(){}"}function Jr(e){var t=1===e.length?ei(e[0]):Array.prototype.concat.apply([],e.map(ei));return Array.isArray(t)?"if("+t.map(function(e){return"$event.keyCode!=="+e}).join("&&")+")return;":"if($event.keyCode!=="+t+")return;"}function ei(e){return parseInt(e,10)||es[e]||"_k("+JSON.stringify(e)+")"}function ti(e,t){e.wrapData=function(r){return"_b("+r+",'"+e.tag+"',"+t.value+(t.modifiers&&t.modifiers.prop?",true":"")+")"}}function ri(e,t){var r=So,i=So=[],n=Eo;Eo=0,Po=t,xo=t.warn||hr,wo=pr(t.modules,"transformCode"),To=pr(t.modules,"genData"),Mo=t.directives||{};var a=e?ii(e):'_h("div")';return So=r,Eo=n,{render:"with(this){return "+a+"}",staticRenderFns:i}}function ii(e){if(e.staticRoot&&!e.staticProcessed)return ni(e);if(e.once&&!e.onceProcessed)return ai(e);if(e["for"]&&!e.forProcessed)return li(e);if(e["if"]&&!e.ifProcessed)return oi(e);if("template"!==e.tag||e.slotTarget){if("slot"===e.tag)return gi(e);var t;if(e.component)t=yi(e.component,e);else{var r=e.plain?void 0:ui(e),i=e.inlineTemplate?null:fi(e);t="_h('"+e.tag+"'"+(r?","+r:"")+(i?","+i:"")+")"}for(var n=0;n<wo.length;n++)t=wo[n](e,t);return t}return fi(e)||"void 0"}function ni(e){return e.staticProcessed=!0,So.push("with(this){return "+ii(e)+"}"),"_m("+(So.length-1)+(e.staticInFor?",true":"")+")"}function ai(e){if(e.onceProcessed=!0,e["if"]&&!e.ifProcessed)return oi(e);if(e.staticInFor){for(var t="",r=e.parent;r;){if(r["for"]){t=r.key;break}r=r.parent}return t?"_o("+ii(e)+","+Eo++ +(t?","+t:"")+")":ii(e)}return ni(e)}function oi(e){return e.ifProcessed=!0,si(e.conditions)}function si(e){function t(e){return e.once?ai(e):ii(e)}if(!e.length)return"_e()";var r=e.shift();return r.exp?"("+r.exp+")?"+t(r.block)+":"+si(e):""+t(r.block)}function li(e){var t=e["for"],r=e.alias,i=e.iterator1?","+e.iterator1:"",n=e.iterator2?","+e.iterator2:"";return e.forProcessed=!0,"_l(("+t+"),function("+r+i+n+"){return "+ii(e)+"})"}function ui(e){var t="{",r=ci(e);r&&(t+=r+","),e.key&&(t+="key:"+e.key+","),e.ref&&(t+="ref:"+e.ref+","),e.refInFor&&(t+="refInFor:true,"),e.component&&(t+='tag:"'+e.tag+'",');for(var i=0;i<To.length;i++)t+=To[i](e);if(e.attrs&&(t+="attrs:{"+bi(e.attrs)+"},"),e.props&&(t+="domProps:{"+bi(e.props)+"},"),e.events&&(t+=Zr(e.events)+","),e.nativeEvents&&(t+=Zr(e.nativeEvents,!0)+","),e.slotTarget&&(t+="slot:"+e.slotTarget+","),e.scopedSlots&&(t+=pi(e.scopedSlots)+","),e.inlineTemplate){var n=hi(e);n&&(t+=n+",")}return t=t.replace(/,$/,"")+"}",e.wrapData&&(t=e.wrapData(t)),t}function ci(e){var t=e.directives;if(t){var r,i,n,a,o="directives:[",s=!1;for(r=0,i=t.length;i>r;r++){n=t[r],a=!0;var l=Mo[n.name]||ns[n.name];l&&(a=!!l(e,n,xo)),a&&(s=!0,o+='{name:"'+n.name+'",rawName:"'+n.rawName+'"'+(n.value?",value:("+n.value+"),expression:"+JSON.stringify(n.value):"")+(n.arg?',arg:"'+n.arg+'"':"")+(n.modifiers?",modifiers:"+JSON.stringify(n.modifiers):"")+"},")}return s?o.slice(0,-1)+"]":void 0}}function hi(e){var t=e.children[0];if(1===t.type){var r=ri(t,Po);return"inlineTemplate:{render:function(){"+r.render+"},staticRenderFns:["+r.staticRenderFns.map(function(e){return"function(){"+e+"}"}).join(",")+"]}"}}function pi(e){return"scopedSlots:{"+Object.keys(e).map(function(t){return di(t,e[t])}).join(",")+"}"}function di(e,t){return e+":function("+String(t.attrsMap.scope)+"){return "+("template"===t.tag?fi(t)||"void 0":ii(t))+"}"}function fi(e){return e.children.length?"["+e.children.map(mi).join(",")+"]":void 0}function mi(e){return 1===e.type?ii(e):vi(e)}function vi(e){return 2===e.type?e.expression:_i(JSON.stringify(e.text))}function gi(e){var t=e.slotName||'"default"',r=fi(e);return"_t("+t+(r?","+r:"")+(e.attrs?(r?"":",null")+",{"+e.attrs.map(function(e){return zi(e.name)+":"+e.value}).join(",")+"}":"")+")"}function yi(e,t){var r=t.inlineTemplate?null:fi(t);return"_h("+e+","+ui(t)+(r?","+r:"")+")"}function bi(e){for(var t="",r=0;r<e.length;r++){var i=e[r];t+='"'+i.name+'":'+_i(i.value)+","}return t.slice(0,-1)}function _i(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function xi(e,t){var r=Sr(e.trim(),t);Hr(r,t);var i=ri(r,t);return{ast:r,render:i.render,staticRenderFns:i.staticRenderFns}}function wi(e,t){var r=(t.warn||hr,yr(e,"class"));r&&(e.staticClass=JSON.stringify(r));var i=gr(e,"class",!1);i&&(e.classBinding=i)}function Ti(e){var t="";return e.staticClass&&(t+="staticClass:"+e.staticClass+","),e.classBinding&&(t+="class:"+e.classBinding+","),t}function Mi(e,t){var r=(t.warn||hr,yr(e,"style"));r&&(e.staticStyle=JSON.stringify(ma(r)));var i=gr(e,"style",!1);i&&(e.styleBinding=i)}function Si(e){var t="";return e.staticStyle&&(t+="staticStyle:"+e.staticStyle+","),e.styleBinding&&(t+="style:("+e.styleBinding+"),"),t}function Ei(e,t,r){Ao=r;var i=t.value,n=t.modifiers,a=e.tag,o=e.attrsMap.type;return"select"===a?Oi(e,i,n):"input"===a&&"checkbox"===o?Pi(e,i,n):"input"===a&&"radio"===o?Ai(e,i,n):Ci(e,i,n),!0}function Pi(e,t,r){var i=r&&r.number,n=gr(e,"value")||"null",a=gr(e,"true-value")||"true",o=gr(e,"false-value")||"false";dr(e,"checked","Array.isArray("+t+")?_i("+t+","+n+")>-1:_q("+t+","+a+")"),vr(e,"change","var $$a="+t+",$$el=$event.target,$$c=$$el.checked?("+a+"):("+o+");if(Array.isArray($$a)){var $$v="+(i?"_n("+n+")":n)+",$$i=_i($$a,$$v);if($$c){$$i<0&&("+t+"=$$a.concat($$v))}else{$$i>-1&&("+t+"=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{"+t+"=$$c}",null,!0)}function Ai(e,t,r){var i=r&&r.number,n=gr(e,"value")||"null";n=i?"_n("+n+")":n,dr(e,"checked","_q("+t+","+n+")"),vr(e,"change",ki(t,n),null,!0)}function Ci(e,t,r){var i=e.attrsMap.type,n=r||{},a=n.lazy,o=n.number,s=n.trim,l=a||en&&"range"===i?"change":"input",u=!a&&"range"!==i,c="input"===e.tag||"textarea"===e.tag,h=c?"$event.target.value"+(s?".trim()":""):s?"(typeof $event === 'string' ? $event.trim() : $event)":"$event";h=o||"number"===i?"_n("+h+")":h;var p=ki(t,h);c&&u&&(p="if($event.target.composing)return;"+p),dr(e,"value",c?"_s("+t+")":"("+t+")"),vr(e,l,p,null,!0)}function Oi(e,t,r){var i=r&&r.number,n='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+(i?"_n(val)":"val")+"})"+(null==e.attrsMap.multiple?"[0]":""),a=ki(t,n);vr(e,"change",a,null,!0)}function ki(e,t){var r=br(e);return null===r.idx?e+"="+t:"var $$exp = "+r.exp+", $$idx = "+r.idx+";if (!Array.isArray($$exp)){"+e+"="+t+"}else{$$exp.splice($$idx, 1, "+t+")}"}function Li(e,t){t.value&&dr(e,"textContent","_s("+t.value+")")}function Ri(e,t){t.value&&dr(e,"innerHTML","_s("+t.value+")")}function Ii(e,t){return t=t?c(c({},cs),t):cs,xi(e,t)}function Di(e,t){var r=(t&&t.warn||hn,t&&t.delimiters?String(t.delimiters)+e:e);if(us[r])return us[r];var i={},n=Ii(e,t);i.render=Fi(n.render);var a=n.staticRenderFns.length;i.staticRenderFns=new Array(a);for(var o=0;a>o;o++)i.staticRenderFns[o]=Fi(n.staticRenderFns[o]);return us[r]=i}function Fi(e){try{return new Function(e)}catch(e){return f}}function Ni(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}var Bi,Gi,ji=i("slot,component",!0),Vi=Object.prototype.hasOwnProperty,Ui=/-(\w)/g,zi=s(function(e){return e.replace(Ui,function(e,t){return t?t.toUpperCase():""})}),Hi=s(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}),Wi=/([^-])([A-Z])/g,Xi=s(function(e){return e.replace(Wi,"$1-$2").replace(Wi,"$1-$2").toLowerCase()}),Yi=Object.prototype.toString,qi="[object Object]",Ki=function(){return!1},$i=/[^\w.$]/,Zi="__proto__"in{},Qi="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),Ji=Qi&&window.navigator.userAgent.toLowerCase(),en=Ji&&/msie|trident/.test(Ji),tn=Ji&&Ji.indexOf("msie 9.0")>0,rn=Ji&&Ji.indexOf("edge/")>0,nn=Ji&&Ji.indexOf("android")>0,an=Ji&&/iphone|ipad|ipod|ios/.test(Ji),on=function(){return void 0===Bi&&(Bi=!Qi&&"undefined"!=typeof e&&"server"===e.process.env.VUE_ENV),Bi},sn=Qi&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,ln=function(){function e(){i=!1;var e=r.slice(0);r.length=0;for(var t=0;t<e.length;t++)e[t]()}var t,r=[],i=!1;if("undefined"!=typeof Promise&&x(Promise)){var n=Promise.resolve();t=function(){n.then(e),an&&setTimeout(f)}}else if("undefined"==typeof MutationObserver||!x(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())t=function(){setTimeout(e,0)};else{var a=1,o=new MutationObserver(e),s=document.createTextNode(String(a));o.observe(s,{characterData:!0}),t=function(){a=(a+1)%2,s.data=String(a)}}return function(e,n){var a;return r.push(function(){e&&e.call(n),a&&a(n)}),i||(i=!0,t()),e||"undefined"==typeof Promise?void 0:new Promise(function(e){a=e})}}();Gi="undefined"!=typeof Set&&x(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return void 0!==this.set[e]},e.prototype.add=function(e){this.set[e]=1},e.prototype.clear=function(){this.set=Object.create(null)},e}();var un,cn={optionMergeStrategies:Object.create(null),silent:!1,devtools:!1,errorHandler:null,ignoredElements:null,keyCodes:Object.create(null),isReservedTag:Ki,isUnknownElement:Ki,getTagNamespace:f,mustUseProp:Ki,_assetTypes:["component","directive","filter"],_lifecycleHooks:["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated"],_maxUpdateCount:100},hn=f,pn=0,dn=function(){this.id=pn++,this.subs=[]};dn.prototype.addSub=function(e){this.subs.push(e)},dn.prototype.removeSub=function(e){n(this.subs,e)},dn.prototype.depend=function(){dn.target&&dn.target.addDep(this)},dn.prototype.notify=function(){for(var e=this.subs.slice(),t=0,r=e.length;r>t;t++)e[t].update()},dn.target=null;var fn=[],mn=Array.prototype,vn=Object.create(mn);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=mn[e];b(vn,e,function(){for(var r=arguments,i=arguments.length,n=new Array(i);i--;)n[i]=r[i];var a,o=t.apply(this,n),s=this.__ob__;switch(e){case"push":a=n;break;case"unshift":a=n;break;case"splice":a=n.slice(2)}return a&&s.observeArray(a),s.dep.notify(),o})});var gn=Object.getOwnPropertyNames(vn),yn={shouldConvert:!0,isSettingProps:!1},bn=function(e){if(this.value=e,this.dep=new dn,this.vmCount=0,b(e,"__ob__",this),Array.isArray(e)){var t=Zi?M:S;t(e,vn,gn),this.observeArray(e)}else this.walk(e)};bn.prototype.walk=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)P(e,t[r],e[t[r]])},bn.prototype.observeArray=function(e){for(var t=0,r=e.length;r>t;t++)E(e[t])};var _n=cn.optionMergeStrategies;_n.data=function(e,t,r){return r?e||t?function(){var i="function"==typeof t?t.call(r):t,n="function"==typeof e?e.call(r):void 0;return i?k(i,n):n}:void 0:t?"function"!=typeof t?e:e?function(){return k(t.call(this),e.call(this))}:t:e},cn._lifecycleHooks.forEach(function(e){_n[e]=L}),cn._assetTypes.forEach(function(e){_n[e+"s"]=R}),_n.watch=function(e,t){if(!t)return e;if(!e)return t;var r={};c(r,e);for(var i in t){var n=r[i],a=t[i];n&&!Array.isArray(n)&&(n=[n]),r[i]=n?n.concat(a):[a]}return r},_n.props=_n.methods=_n.computed=function(e,t){if(!t)return e;if(!e)return t;var r=Object.create(null);return c(r,e),c(r,t),r};var xn=function(e,t){return void 0===t?e:t},wn=Object.freeze({defineReactive:P,_toString:t,toNumber:r,makeMap:i,isBuiltInTag:ji,remove:n,hasOwn:a,isPrimitive:o,cached:s,camelize:zi,capitalize:Hi,hyphenate:Xi,bind:l,toArray:u,extend:c,isObject:h,isPlainObject:p,toObject:d,noop:f,no:Ki,genStaticKeys:m,looseEqual:v,looseIndexOf:g,isReserved:y,def:b,parsePath:_,hasProto:Zi,inBrowser:Qi,UA:Ji,isIE:en,isIE9:tn,isEdge:rn,isAndroid:nn,isIOS:an,isServerRendering:on,devtools:sn,nextTick:ln,get _Set(){return Gi},mergeOptions:F,resolveAsset:N,warn:hn,formatComponentName:un,validateProp:B}),Tn=[],Mn={},Sn=!1,En=!1,Pn=0,An=0,Cn=function(e,t,r,i){void 0===i&&(i={}),this.vm=e,e._watchers.push(this),this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.expression=t.toString(),this.cb=r,this.id=++An,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new Gi,this.newDepIds=new Gi,"function"==typeof t?this.getter=t:(this.getter=_(t),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};Cn.prototype.get=function(){w(this);var e=this.getter.call(this.vm,this.vm);return this.deep&&W(e),T(),this.cleanupDeps(),e},Cn.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Cn.prototype.cleanupDeps=function(){for(var e=this,t=this.deps.length;t--;){var r=e.deps[t];e.newDepIds.has(r.id)||r.removeSub(e)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},Cn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():H(this)},Cn.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||h(e)||this.deep){var t=this.value;if(this.value=e,this.user)try{this.cb.call(this.vm,e,t)}catch(e){if(!cn.errorHandler)throw e;cn.errorHandler.call(null,e,this.vm)}else this.cb.call(this.vm,e,t)}}},Cn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Cn.prototype.depend=function(){for(var e=this,t=this.deps.length;t--;)e.deps[t].depend()},Cn.prototype.teardown=function(){var e=this;if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||n(this.vm._watchers,this);for(var t=this.deps.length;t--;)e.deps[t].removeSub(e);this.active=!1}};var On=new Gi,kn={enumerable:!0,configurable:!0,get:f,set:f},Ln=function(e,t,r,i,n,a,o,s){this.tag=e,this.data=t,this.children=r,this.text=i,this.elm=n,this.ns=a,this.context=o,this.functionalContext=void 0,this.key=t&&t.key,this.componentOptions=s,this.child=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1},Rn=function(){var e=new Ln;return e.text="",e.isComment=!0,e},In=null,Dn={init:be,prepatch:_e,insert:xe,destroy:we},Fn=Object.keys(Dn),Nn=0;De(Be),te(Be),Ie(Be),fe(Be),ke(Be);var Bn=[String,RegExp],Gn={name:"keep-alive","abstract":!0,props:{include:Bn,exclude:Bn},created:function(){this.cache=Object.create(null)},render:function(){var e=pe(this.$slots["default"]);if(e&&e.componentOptions){var t=e.componentOptions,r=t.Ctor.options.name||t.tag;if(r&&(this.include&&!ze(this.include,r)||this.exclude&&ze(this.exclude,r)))return e;

var i=null==e.key?t.Ctor.cid+(t.tag?"::"+t.tag:""):e.key;this.cache[i]?e.child=this.cache[i].child:this.cache[i]=e,e.data.keepAlive=!0}return e},destroyed:function(){var e=this;for(var t in this.cache){var r=e.cache[t];me(r.child,"deactivated"),r.child.$destroy()}}},jn={KeepAlive:Gn};He(Be),Object.defineProperty(Be.prototype,"$isServer",{get:on}),Be.version="2.1.3";var Vn,Un=function(e,t){return"value"===t&&("input"===e||"textarea"===e||"option"===e)||"selected"===t&&"option"===e||"checked"===t&&"input"===e||"muted"===t&&"video"===e},zn=i("contenteditable,draggable,spellcheck"),Hn=i("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Wn="http://www.w3.org/1999/xlink",Xn=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Yn=function(e){return Xn(e)?e.slice(6,e.length):""},qn=function(e){return null==e||e===!1},Kn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML",xhtml:"http://www.w3.org/1999/xhtml"},$n=i("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template"),Zn=i("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr",!0),Qn=i("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source",!0),Jn=i("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track",!0),ea=i("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font,font-face,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ta=function(e){return"pre"===e},ra=function(e){return $n(e)||ea(e)},ia=Object.create(null),na=Object.freeze({createElement:Je,createElementNS:et,createTextNode:tt,createComment:rt,insertBefore:it,removeChild:nt,appendChild:at,parentNode:ot,nextSibling:st,tagName:lt,setTextContent:ut,childNodes:ct,setAttribute:ht}),aa={create:function(e,t){pt(t)},update:function(e,t){e.data.ref!==t.data.ref&&(pt(e,!0),pt(t))},destroy:function(e){pt(e,!0)}},oa=new Ln("",{},[]),sa=["create","update","remove","destroy"],la={create:yt,update:yt,destroy:function(e){yt(e,oa)}},ua=Object.create(null),ca=[aa,la],ha={create:wt,update:wt},pa={create:Mt,update:Mt},da={create:St,update:St},fa={create:Et,update:Et},ma=s(function(e){var t={},r=e.indexOf("background")>=0,i=r?/;(?![^(]*\))/g:";",n=r?/:(.+)/:":";return e.split(i).forEach(function(e){if(e){var r=e.split(n);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}),va=/^--/,ga=function(e,t,r){va.test(t)?e.style.setProperty(t,r):e.style[ba(t)]=r},ya=["Webkit","Moz","ms"],ba=s(function(e){if(Vn=Vn||document.createElement("div"),e=zi(e),"filter"!==e&&e in Vn.style)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<ya.length;r++){var i=ya[r]+t;if(i in Vn.style)return i}}),_a={create:Ot,update:Ot},xa=Qi&&!tn,wa="transition",Ta="animation",Ma="transition",Sa="transitionend",Ea="animation",Pa="animationend";xa&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ma="WebkitTransition",Sa="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Ea="WebkitAnimation",Pa="webkitAnimationEnd"));var Aa=Qi&&window.requestAnimationFrame||setTimeout,Ca=/\b(transform|all)(,|$)/,Oa=s(function(e){return{enterClass:e+"-enter",leaveClass:e+"-leave",appearClass:e+"-enter",enterActiveClass:e+"-enter-active",leaveActiveClass:e+"-leave-active",appearActiveClass:e+"-enter-active"}}),ka=Qi?{create:function(e,t){t.data.show||jt(t)},remove:function(e,t){e.data.show?t():Vt(e,t)}}:{},La=[ha,pa,da,fa,_a,ka],Ra=La.concat(ca),Ia=gt({nodeOps:na,modules:Ra});tn&&document.addEventListener("selectionchange",function(){var e=document.activeElement;e&&e.vmodel&&Kt(e,"input")});var Da={inserted:function(e,t,r){if("select"===r.tag){var i=function(){Ht(e,t,r.context)};i(),(en||rn)&&setTimeout(i,0)}else"textarea"!==r.tag&&"text"!==e.type||t.modifiers.lazy||(nn||(e.addEventListener("compositionstart",Yt),e.addEventListener("compositionend",qt)),tn&&(e.vmodel=!0))},componentUpdated:function(e,t,r){if("select"===r.tag){Ht(e,t,r.context);var i=e.multiple?t.value.some(function(t){return Wt(t,e.options)}):t.value!==t.oldValue&&Wt(t.value,e.options);i&&Kt(e,"change")}}},Fa={bind:function(e,t,r){var i=t.value;r=$t(r);var n=r.data&&r.data.transition;i&&n&&!tn&&jt(r);var a="none"===e.style.display?"":e.style.display;e.style.display=i?a:"none",e.__vOriginalDisplay=a},update:function(e,t,r){var i=t.value,n=t.oldValue;if(i!==n){r=$t(r);var a=r.data&&r.data.transition;a&&!tn?i?(jt(r),e.style.display=e.__vOriginalDisplay):Vt(r,function(){e.style.display="none"}):e.style.display=i?e.__vOriginalDisplay:"none"}}},Na={model:Da,show:Fa},Ba={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String},Ga={name:"transition",props:Ba,"abstract":!0,render:function(e){var t=this,r=this.$slots["default"];if(r&&(r=r.filter(function(e){return e.tag}),r.length)){var i=this.mode,n=r[0];if(er(this.$vnode))return n;var a=Zt(n);if(!a)return n;if(this._leaving)return Jt(e,n);var o=a.key=null==a.key||a.isStatic?"__v"+(a.tag+this._uid)+"__":a.key,s=(a.data||(a.data={})).transition=Qt(this),l=this._vnode,u=Zt(l);if(a.data.directives&&a.data.directives.some(function(e){return"show"===e.name})&&(a.data.show=!0),u&&u.data&&u.key!==o){var h=u.data.transition=c({},s);if("out-in"===i)return this._leaving=!0,ae(h,"afterLeave",function(){t._leaving=!1,t.$forceUpdate()},o),Jt(e,n);if("in-out"===i){var p,d=function(){p()};ae(s,"afterEnter",d,o),ae(s,"enterCancelled",d,o),ae(h,"delayLeave",function(e){p=e},o)}}return n}}},ja=c({tag:String,moveClass:String},Ba);delete ja.mode;var Va={props:ja,render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",r=Object.create(null),i=this.prevChildren=this.children,n=this.$slots["default"]||[],a=this.children=[],o=Qt(this),s=0;s<n.length;s++){var l=n[s];l.tag&&null!=l.key&&0!==String(l.key).indexOf("__vlist")&&(a.push(l),r[l.key]=l,(l.data||(l.data={})).transition=o)}if(i){for(var u=[],c=[],h=0;h<i.length;h++){var p=i[h];p.data.transition=o,p.data.pos=p.elm.getBoundingClientRect(),r[p.key]?u.push(p):c.push(p)}this.kept=e(t,null,u),this.removed=c}return e(t,null,a)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(tr),e.forEach(rr),e.forEach(ir),document.body.offsetHeight,e.forEach(function(e){if(e.data.moved){var r=e.elm,i=r.style;It(r,t),i.transform=i.WebkitTransform=i.transitionDuration="",r.addEventListener(Sa,r._moveCb=function n(e){e&&!/transform$/.test(e.propertyName)||(r.removeEventListener(Sa,n),r._moveCb=null,Dt(r,t))})}}))},methods:{hasMove:function(e,t){if(!xa)return!1;if(null!=this._hasMove)return this._hasMove;It(e,t);var r=Nt(e);return Dt(e,t),this._hasMove=r.hasTransform}}},Ua={Transition:Ga,TransitionGroup:Va};Be.config.isUnknownElement=Ze,Be.config.isReservedTag=ra,Be.config.getTagNamespace=$e,Be.config.mustUseProp=Un,c(Be.options.directives,Na),c(Be.options.components,Ua),Be.prototype.__patch__=Qi?Ia:f,Be.prototype.$mount=function(e,t){return e=e&&Qi?Qe(e):void 0,this._mount(e,t)},setTimeout(function(){cn.devtools&&sn&&sn.emit("init",Be)},0);var za,Ha=!!Qi&&nr("\n","&#10;"),Wa=/([^\s"'<>\/=]+)/,Xa=/(?:=)/,Ya=[/"([^"]*)"+/.source,/'([^']*)'+/.source,/([^\s"'=<>`]+)/.source],qa=new RegExp("^\\s*"+Wa.source+"(?:\\s*("+Xa.source+")\\s*(?:"+Ya.join("|")+"))?"),Ka="[a-zA-Z_][\\w\\-\\.]*",$a="((?:"+Ka+"\\:)?"+Ka+")",Za=new RegExp("^<"+$a),Qa=/^\s*(\/?)>/,Ja=new RegExp("^<\\/"+$a+"[^>]*>"),eo=/^<!DOCTYPE [^>]+>/i,to=/^<!--/,ro=/^<!\[/,io=!1;"x".replace(/x(.)?/g,function(e,t){io=""===t});var no,ao,oo,so,lo,uo,co,ho,po,fo,mo,vo,go,yo,bo,_o,xo,wo,To,Mo,So,Eo,Po,Ao,Co=i("script,style",!0),Oo=function(e){return"lang"===e.name&&"html"!==e.value},ko=function(e,t,r){return!(!Co(e)&&(!t||1!==r.length||"template"===e&&!r[0].attrs.some(Oo)))},Lo={},Ro=/&lt;/g,Io=/&gt;/g,Do=/&#10;/g,Fo=/&amp;/g,No=/&quot;/g,Bo=/\{\{((?:.|\n)+?)\}\}/g,Go=/[-.*+?^${}()|[\]\/\\]/g,jo=s(function(e){var t=e[0].replace(Go,"\\$&"),r=e[1].replace(Go,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+r,"g")}),Vo=/^v-|^@|^:/,Uo=/(.*?)\s+(?:in|of)\s+(.*)/,zo=/\((\{[^}]*\}|[^,]*),([^,]*)(?:,([^,]*))?\)/,Ho=/^:|^v-bind:/,Wo=/^@|^v-on:/,Xo=/:(.*)$/,Yo=/\.[^.]+/g,qo=s(ar),Ko=/^xmlns:NS\d+/,$o=/^NS\d+:/,Zo=s(Wr),Qo=/^\s*([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,Jo=/^\s*[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?']|\[".*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*\s*$/,es={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,"delete":[8,46]},ts={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:"if($event.target !== $event.currentTarget)return;"},rs=/^mouse|^pointer|^(click|dblclick|contextmenu|wheel)$/,is={ctrl:"if(!$event.ctrlKey)return;",shift:"if(!$event.shiftKey)return;",alt:"if(!$event.altKey)return;",meta:"if(!$event.metaKey)return;"},ns={bind:ti,cloak:f},as={staticKeys:["staticClass"],transformNode:wi,genData:Ti},os={staticKeys:["staticStyle"],transformNode:Mi,genData:Si},ss=[as,os],ls={model:Ei,text:Li,html:Ri},us=Object.create(null),cs={expectHTML:!0,modules:ss,staticKeys:m(ss),directives:ls,isReservedTag:ra,isUnaryTag:Zn,mustUseProp:Un,getTagNamespace:$e,isPreTag:ta},hs=s(function(e){var t=Qe(e);return t&&t.innerHTML}),ps=Be.prototype.$mount;return Be.prototype.$mount=function(e,t){if(e=e&&Qe(e),e===document.body||e===document.documentElement)return this;var r=this.$options;if(!r.render){var i=r.template;if(i)if("string"==typeof i)"#"===i.charAt(0)&&(i=hs(i));else{if(!i.nodeType)return this;i=i.innerHTML}else e&&(i=Ni(e));if(i){var n=Di(i,{warn:hn,shouldDecodeNewlines:Ha,delimiters:r.delimiters},this),a=n.render,o=n.staticRenderFns;r.render=a,r.staticRenderFns=o}}return ps.call(this,e,t)},Be.compile=Di,Be})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],29:[function(e,t){t.exports={name:"memorabilia",version:"0.0.1",description:"Memorabilia - Christmas Experiment 2016",main:"src/index.js","private":!0,license:"MIT",author:"Fabien Motte <contact@fabienmotte.com>",contributors:[{name:"Alexandre Delalleau",url:"http://alexandredelalleau.fr/"}],scripts:{parse_splines:"node workflow parse_splines",gzip:"node workflow gzip",budo:"node workflow budo",template:"node workflow template","stylus:compile":"node workflow stylus -s","stylus:watch":"node workflow stylus -s -w","stylus:build":"node workflow stylus -m","browserify:compile":"node workflow browserify -s","browserify:watch":"node workflow browserify -s -w","browserify:build":"node workflow browserify -m",watcher:"node workflow watcher",server:"node workflow server",uglify:"node workflow uglify",compile:"node workflow stylus:compile browserify:compile",watch:"node workflow stylus:watch browserify:watch watcher",build:"node workflow stylus:build browserify:build uglify",start:"node workflow budo & node workflow stylus:watch",test:'echo "Error: no test specified" && exit 1'},homepage:"https://github.com/FabienMotte/Memorabilia",repository:{type:"git",url:"https://github.com/FabienMotte/Memorabilia.git"},bugs:{url:"https://github.com/FabienMotte/Memorabilia/issues"},devDependencies:{"autoprefixer-stylus":"^0.11.0","babel-plugin-add-module-exports":"^0.2.1","babel-preset-es2015":"^6.18.0","babel-preset-stage-0":"^6.16.0",babelify:"^7.3.0","browser-sync":"^2.18.2",browserify:"^13.1.1",budo:"^9.2.2",colors:"^1.1.2","dat.gui":"github:fabienmotte/dat.gui","fs-extra":"^1.0.0",glslify:"^6.0.0","glslify-bare":"github:fabienmotte/glslify-bare",jsonminify:"^0.4.1",keyfinder:"^1.0.0","lodash.flattendeep":"^4.4.0","lodash.merge":"^4.6.0",mustache:"^2.3.0",ncp:"^2.0.0",partialify:"^3.1.6",stylus:"^0.54.5",subarg:"^1.0.0",uglifyjs:"^2.4.10",watchify:"^3.7.0",xml2js:"^0.4.17"},dependencies:{"analyser-frequency-average":"^1.0.0","assets-loader":"^0.4.0",beats:"0.0.0",bodymovin:"^4.4.26","color-shader-functions":"0.0.2","document-visibility":"^1.0.1","glsl-curl-noise":"0.0.4","glsl-noise":"0.0.0","glsl-random":"0.0.5",gsap:"^1.19.0","lodash.capitalize":"^4.2.1","lodash.chunk":"^4.2.0","lodash.debounce":"^4.0.8","min-signal":"0.0.6","mobile-detect":"^1.3.5","raf-loop":"^1.1.3",screenfull:"^3.0.2","shader-particle-engine":"github:fabienmotte/ShaderParticleEngine",sono:"github:fabienmotte/sono",three:"^0.82.1","three-orbit-controls":"^82.1.0",vue:"^2.1.3"},workflow:{config:"./workflow/config/tasks.js"},standard:{parser:"babel-eslint",globals:["__DEV__","__PROD__","THREE","dat","Vue","TweenMax","TimelineMax","Back","Bounce","Circ","Cubic","Ease","Elastic","Expo","Linear","Power0","Power1","Power2","Power3","Power4","Quad","RoughEase","SlowMo","Sine","SplitText"]}}},{}],30:[function(e,t){t.exports='<div class="controls">\n  <div\n    class="controls__sound-button"\n    ref="sound"\n    @click="mute"\n  >\n    <span></span>\n    <span></span>\n    <span></span>\n    <span></span>\n    <span></span>\n  </div>\n\n  <div\n    :class="{ \'controls__fullscreen-button\': true, \'fullscreen\': isFullScreen }"\n    ref="fullscreen"\n    @click="fullscreen"\n  >\n    <span class="controls__fullscreen-button--top-left"></span>\n    <span class="controls__fullscreen-button--top-right"></span>\n    <span class="controls__fullscreen-button--bottom-left"></span>\n    <span class="controls__fullscreen-button--bottom-right"></span>\n  </div>\n</div>\n'},{}],31:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("sono"),o=n(a),s=e("screenfull"),l=n(s),u=e("document-visibility"),c=n(u),h=e("signals/Store"),p=n(h),d="in",f="out";r["default"]=i.extend({name:"controls",template:e("./controls.html"),data:function(){return{isFullScreen:!1}},created:function(){this.audioMuted=!1,this.onFullScreenChange=this.onFullScreenChange.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.addEventListeners()},mounted:function(){this.createTls(),this.enterTl.play(0)},beforeDestroy:function(){this.removeEventListeners(),this.enterTl.clear(),this.leaveTl.clear()},methods:{addEventListeners:function(){l["default"].enabled&&document.addEventListener(l["default"].raw.fullscreenchange,this.onFullScreenChange),this.visibility=c["default"](),this.visibilityListener=this.visibility.onChange(this.onVisibilityChange)},removeEventListeners:function(){document.addEventListener(l["default"].raw.fullscreenchange,this.onFullScreenChange),this.visibilityListener()},onFullScreenChange:function(){this.isFullScreen=l["default"].isFullscreen},onVisibilityChange:function(e){this.fadeAudioMaster(e?d:f)},createTls:function(){this.enterTl=new TimelineMax({paused:!0}),this.enterTl.staggerFromTo([this.$refs.fullscreen,this.$refs.sound],2,{x:10,opacity:0},{x:0,opacity:1,ease:Expo.easeOut},.2,1.5),this.leaveTl=new TimelineMax({paused:!0}),this.leaveTl.staggerTo([this.$refs.fullscreen,this.$refs.sound],1,{x:10,opacity:0,ease:Expo.easeOut},.1,.6)},fadeAudioMaster:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;e===d?(this.audioMuted=!1,this.$refs.sound.classList.remove("muted"),o["default"].fade(1,1),p["default"].scene&&p["default"].scene.audioListener&&(p["default"].scene.audioListener.gain.gain.value=1)):(this.audioMuted=!0,this.$refs.sound.classList.add("muted"),o["default"].fade(0,1),p["default"].scene&&p["default"].scene.audioListener&&(p["default"].scene.audioListener.gain.gain.value=0))},mute:function(){this.fadeAudioMaster(this.audioMuted?d:f)},fullscreen:function(){l["default"].enabled&&(this.isFullScreen=l["default"].isFullscreen,l["default"].toggle())}}}),t.exports=r["default"]}).call(this,e("vue/dist/vue.min.js"))},{"./controls.html":30,"document-visibility":11,screenfull:23,"signals/Store":166,sono:25,"vue/dist/vue.min.js":28}],32:[function(e,t){t.exports='<div class="end">\n  <div class="end__whishes">\n    <div class="end_wishes__english" ref="wishesEnglish">Happy new year 2017 from Gobelins!</div>\n    <div class="end_wishes__french" ref="whishesFrench">Gobelins vous présente ses meilleurs vœux 2017 !</div>\n  </div>\n  <ul class="end__departments" ref="departments">\n    <li>\n      <div class="end__departments--english">Animated filmmaking</div>\n      <div class="end__departments--french">Cinéma d\'animation</div>\n    </li>\n    <li>\n      <div class="end__departments--english">Photography</div>\n      <div class="end__departments--french">Photographie</div>\n    </li>\n    <li>\n      <div class="end__departments--english">Interactive design</div>\n      <div class="end__departments--french">Design interactif</div>\n    </li>\n    <li>\n      <div class="end__departments--english">Preparatory class</div>\n      <div class="end__departments--french">Prépa</div>\n    </li>\n    <li>\n      <div class="end__departments--english">Graphic and motion design</div>\n      <div class="end__departments--french">Design graphique et motion design</div>\n    </li>\n    <li>\n      <div class="end__departments--english">Printed and digital communication</div>\n      <div class="end__departments--french">Communication imprimée et plurimédia</div>\n    </li>\n    <li>\n      <div class="end__departments--english">Video gaming</div>\n      <div class="end__departments--french">Jeu vidéo</div>\n    </li>\n  </ul>\n  <div class="end__logo-gobelins" ref="logo"><img src="./assets/images/logo_gobelins.png" alt="Logo Gobelins"></div>\n  <div class="end__credits" ref="credits">\n    Memorabilia is a <a href="http://christmasexperiments.com/" target="_blank">Christmas Experiment</a> made by <a href="https://fabienmotte.com/" target="_blank">Fabien Motte</a> and <a href="https://alexandredelalleau.fr/" target="_blank">Alexandre Delalleau</a>\n  </div>\n</div>\n'},{}],33:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("signals/Scene"),o=n(a),s=e("signals/Subtitle"),l=n(s),u=e("signals/Store"),c=n(u),h=e("utils/dom/split-string"),p=n(h);r["default"]=i.extend({name:"end",template:e("./end.html"),created:function(){this.endOverlay=this.endOverlay.bind(this)},mounted:function(){this.addSignals(),this.createTls()},methods:{addSignals:function(){o["default"].endOverlay.add(this.endOverlay)},removeSignals:function(){o["default"].endOverlay.remove(this.endOverlay)},endOverlay:function(){this.enterAnimation()},createTls:function(){var e=p["default"](this.$refs.wishesEnglish.innerHTML);this.$refs.wishesEnglish.innerHTML="",this.$refs.wishesEnglish.appendChild(e);var t=[].slice.call(this.$refs.wishesEnglish.querySelectorAll("span")),r=t.splice(0,19),i=this.$refs.departments.querySelectorAll(".end__departments--english"),n=this.$refs.departments.querySelectorAll(".end__departments--french");this.enterTl=new TimelineMax({paused:!0,onComplete:function(){return c["default"].scene.dispose()}}),this.enterTl.addCallback(function(){return l["default"].add.dispatch("merry_christmas")}).fromTo(this.$el,.5,{autoAlpha:0},{autoAlpha:1,ease:Expo.easeOut},0).staggerFromTo(r,2.5,{autoAlpha:0,y:-10},{autoAlpha:1,y:0,ease:Expo.easeOut},.1,0).staggerFromTo(t.reverse(),2.5,{autoAlpha:0,y:10},{autoAlpha:1,y:0,ease:Expo.easeOut},.1,0).fromTo(this.$refs.whishesFrench,2.5,{autoAlpha:0,y:10},{autoAlpha:1,y:0,ease:Expo.easeOut},1.2).staggerFromTo(i,3.5,{autoAlpha:0,x:-10},{autoAlpha:1,x:0,ease:Expo.easeOut},.1,1.8).staggerFromTo(n,3.5,{autoAlpha:0,x:-10},{autoAlpha:1,x:0,ease:Expo.easeOut},.1,2).staggerFromTo([this.$refs.logo,this.$refs.credits],2.5,{y:10,autoAlpha:0},{y:0,autoAlpha:1,ease:Expo.easeOut},.2,3)},enterAnimation:function(){this.enterTl.play()}}}),t.exports=r["default"]}).call(this,e("vue/dist/vue.min.js"))},{"./end.html":32,"signals/Scene":165,"signals/Store":166,"signals/Subtitle":167,"utils/dom/split-string":170,"vue/dist/vue.min.js":28}],34:[function(e,t){t.exports='<div class="exp-instruction">\n  Hold \n  <div class="exp-instruction__space">\n    space\n    <div class="exp-instruction__space__border">\n      <div class="exp-instruction__space__progress" :style="{ transform: \'scale(\'+ progress +\', 1)\' }"></div>\n    </div>\n  </div> \n  to help Dö remember this moment\n</div>\n'},{}],35:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("signals/Experience"),o=n(a);r["default"]=i.extend({name:"exp-instruction",template:e("./exp-instruction.html"),data:function(){return{progress:0}},mounted:function(){this.onProgressChanged=this.onProgressChanged.bind(this),this.onCompleted=this.onCompleted.bind(this),this.addSignals(),this.createTls()},methods:{addSignals:function(){o["default"].progress.add(this.onProgressChanged),o["default"].complete.add(this.onCompleted)},removeSignals:function(){o["default"].progress.remove(this.onProgressChanged),o["default"].complete.remove(this.onCompleted)},onProgressChanged:function(e){this.progress=e},onCompleted:function(){this.leaveAnimation()},createTls:function(){this.enterTl=new TimelineMax({paused:!0}),this.enterTl.fromTo(this.$el,2,{autoAlpha:0,y:10},{autoAlpha:1,y:0,ease:Expo.easeOut}),this.leaveTl=new TimelineMax({paused:!0}),this.leaveTl.to(this.$el,1,{autoAlpha:0,y:10,ease:Expo.easeOut})},enterAnimation:function(){this.leaveTl.pause(),this.enterTl.play(0)},leaveAnimation:function(){this.enterTl.pause(),this.leaveTl.play(0)}}}),t.exports=r["default"]}).call(this,e("vue/dist/vue.min.js"))},{"./exp-instruction.html":34,"signals/Experience":161,"vue/dist/vue.min.js":28}],36:[function(e,t){t.exports='<div class="exp-introduction" v-show="isTransitioning">\n  <div class="exp-introduction__container">\n    <div class="exp-introduction__id" ref="id">Memorabilia #{{ id }}</div>\n    <div class="exp-introduction__title" ref="title"></div>\n    <div class="exp-introduction__subtitle" ref="subtitle">{{ year }} - {{ subtitle }}</div>\n  </div>\n</div>\n'},{}],37:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("signals/Scene"),o=n(a),s=e("consts/scenes"),l=n(s),u=e("utils/dom/split-string"),c=n(u);r["default"]=i.extend({name:"subtitle",template:e("./exp-introduction.html"),data:function(){return{id:1,year:0,subtitle:"",isTransitioning:!1}},created:function(){this.onSceneChanged=this.onSceneChanged.bind(this),this.addSignals()},methods:{addSignals:function(){o["default"].changed.add(this.onSceneChanged)},removeSignals:function(){o["default"].changed.remove(this.onSceneChanged)},createTls:function(){var e=this,t=[].slice.call(this.$refs.title.querySelectorAll("span")),r=Math.ceil(t.length/2),i=t.splice(0,r);this.enterTl=new TimelineMax({paused:!0,onStart:function(){e.isTransitioning=!0},onComplete:function(){e.enterTl.kill(),e.enterTl.clear(),e.enterTl.remove(),e.isTransitioning=!1,e.$emit("introCompleted")}}),this.enterTl.fromTo(this.$el,2,{opacity:0},{opacity:1,ease:Expo.easeOut}).fromTo(this.$refs.id,2,{opacity:0,y:10},{opacity:1,y:0,ease:Expo.easeOut},2).fromTo(this.$refs.subtitle,2,{opacity:0,y:-10},{opacity:1,y:0,ease:Expo.easeOut},2).staggerFromTo(i,3,{opacity:0,y:-10},{opacity:1,y:0,ease:Expo.easeOut},.1,1.5).staggerFromTo(t.reverse(),3,{opacity:0,y:10},{opacity:1,y:0,ease:Expo.easeOut},.1,1.5).fromTo(this.$refs.id,2,{opacity:1,y:0},{opacity:0,y:10,ease:Expo.easeOut,immediateRender:!1},4.5).fromTo(this.$refs.subtitle,2,{opacity:1,y:0},{opacity:0,y:-10,ease:Expo.easeOut,immediateRender:!1},4.5).staggerFromTo(i,3,{opacity:1,y:0},{opacity:0,y:-10,ease:Expo.easeOut,immediateRender:!1},.1,4.5).staggerFromTo(t.reverse(),3,{opacity:1,y:0},{opacity:0,y:10,ease:Expo.easeOut,immediateRender:!1},.1,4.5).fromTo(this.$el,2,{opacity:1},{opacity:0,ease:Expo.easeOut,immediateRender:!1},5)},onSceneChanged:function(e){var t=l["default"][e.toUpperCase()];if(t.isExperience){this.id=t.id;var r=c["default"](t.title);this.$refs.title.innerHTML="",this.$refs.title.appendChild(r),this.year=t.year,this.subtitle=t.subtitle,this.enterTl&&(this.enterTl.kill(),this.enterTl.clear(),this.enterTl.remove()),this.createTls(),this.enterTl.play()}}}}),t.exports=r["default"]}).call(this,e("vue/dist/vue.min.js"))},{"./exp-introduction.html":36,"consts/scenes":52,"signals/Scene":165,"utils/dom/split-string":170,"vue/dist/vue.min.js":28}],38:[function(e,t){t.exports='<div class="main-instruction">Click on the screen to help Dö</div>\n'},{}],39:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("signals/Timeline"),o=n(a),s=e("signals/Scene"),l=n(s);r["default"]=i.extend({name:"main-instruction",template:e("./main-instruction.html"),created:function(){this.onInstruction=this.onInstruction.bind(this),this.onSceneChangeStarted=this.onSceneChangeStarted.bind(this)},mounted:function(){this.addSignals(),this.createTls()},methods:{addSignals:function(){o["default"].instruction.add(this.onInstruction),l["default"].changeStarted.add(this.onSceneChangeStarted)},removeSignals:function(){o["default"].instruction.remove(this.onInstruction),l["default"].changeStarted.remove(this.onSceneChangeStarted)},onInstruction:function(){this.enterAnimation()},onSceneChangeStarted:function(){this.leaveAnimation(),this.removeSignals()},createTls:function(){this.enterTl=new TimelineMax({paused:!0}),this.enterTl.fromTo(this.$el,2,{autoAlpha:0,y:10},{autoAlpha:1,y:0,ease:Expo.easeOut}),this.leaveTl=new TimelineMax({paused:!0}),this.leaveTl.to(this.$el,2,{autoAlpha:0,y:10,ease:Expo.easeOut})},enterAnimation:function(){this.leaveTl.pause(),this.enterTl.play(0)},leaveAnimation:function(){this.enterTl.pause(),this.leaveTl.play(0)}}}),t.exports=r["default"]}).call(this,e("vue/dist/vue.min.js"))},{"./main-instruction.html":38,"signals/Scene":165,"signals/Timeline":168,"vue/dist/vue.min.js":28}],40:[function(e,t){t.exports='<div class="subtitle-set">\n  <transition-group name="fade">\n    <subtitle v-for="(subtitle, index) in subtitles" :key="index" :text="subtitle.text"></subtitle>\n  </transition-group>\n</div>\n'},{}],41:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("sono"),o=n(a),s=e("components/subtitle/subtitle"),l=n(s),u=e("signals/Subtitle"),c=n(u),h=e("managers/AssetsManager"),p=e("data/subtitles"),d=n(p),f={DURATION_OFFSET:1600};r["default"]=i.extend({name:"subtitle-set",template:e("./subtitle-set.html"),data:function(){return{subtitles:[]}},created:function(){this.addSubtitle=this.addSubtitle.bind(this),this.addSignals()},methods:{addSignals:function(){c["default"].add.add(this.addSubtitle)},removeSignals:function(){c["default"].add.remove(this.addSubtitle)},addSubtitle:function(e){var t=this,r=d["default"].find(function(t){return t.id===e}),i=this.playVoiceOver(r.audioId);this.subtitles.push(r),setTimeout(function(){return t.removeSubtitle(e)},1e3*i+f.DURATION_OFFSET)},removeSubtitle:function(e){for(var t=0;t<this.subtitles.length;t++)this.subtitles[t].id===e&&this.subtitles.splice(t,1)},playVoiceOver:function(e){var t=h.assets[e],r=o["default"].createSound(t);return r.play(),r.on("ended",function(){return r.destroy()}),r.duration}},components:{subtitle:l["default"]}}),t.exports=r["default"]}).call(this,e("vue/dist/vue.min.js"))},{"./subtitle-set.html":40,"components/subtitle/subtitle":43,"data/subtitles":54,"managers/AssetsManager":153,"signals/Subtitle":167,sono:25,"vue/dist/vue.min.js":28}],42:[function(e,t){t.exports='<div class="subtitle">\n  {{ text }}\n</div>\n'},{}],43:[function(e,t,r){(function(i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=i.extend({name:"subtitle",template:e("./subtitle.html"),props:{text:String}}),t.exports=r["default"]}).call(this,e("vue/dist/vue.min.js"))},{"./subtitle.html":42,"vue/dist/vue.min.js":28}],44:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.material;return[{name:"mainCharacter",model:"mainCharacterModel",material:t,type:s["default"].ANIMATED,loop:!1,duration:1.6,spline:{name:"main_character",scale:1,offset:new i.Vector3(0,1,0),lookAtOffset:.01}},{name:"childRun",model:"childRunModel",material:t,type:s["default"].ANIMATED,loop:!0,duration:.8,spline:{name:"main_child_run",scale:1,offset:new i.Vector3(0,1,0),lookAtOffset:.01}},{name:"childHappy",model:"childHappyModel",material:t,type:s["default"].ANIMATED,loop:!0,duration:2,spline:{name:"main_child_happy",scale:1,offset:new i.Vector3(0,1,0),lookAtOffset:.01}}]}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=a;var o=e("consts/characters"),s=n(o);t.exports=r["default"]}).call(this,e("three"))},{"consts/characters":49,three:27}],45:[function(e,t,r){(function(i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("gl/postProcessing/passes");r["default"]={active:!0,passes:[{active:!0,name:"bloomPass",constructor:new n.BloomUnrealPass({resolution:new i.Vector2(256,256),strength:.3,radius:.2,threshold:.9})},{active:!0,name:"postPass",constructor:new n.PostPass}]},t.exports=r["default"]}).call(this,e("three"))},{"gl/postProcessing/passes":132,three:27}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=[{name:"reineer_body",lineWidth:2.5,color:14737632,dashSize:.2,gapSize:.02,loopDuration:6},{name:"reineer_body_legs",lineWidth:1.5,color:13882323,dashSize:.15,gapSize:.03,loopDuration:13},{name:"reineer_body_wood",lineWidth:.8,color:11908533,dashSize:.08,gapSize:.04,loopDuration:9},{name:"reineer_face",lineWidth:1.5,color:12500670,dashSize:.18,gapSize:.02,loopDuration:8},{name:"reineer_legs",lineWidth:2,color:8158332,dashSize:.12,gapSize:.03,loopDuration:10},{name:"reineer_wood_bottom",lineWidth:1,color:12829635,dashSize:.17,gapSize:.04,loopDuration:11}],t.exports=r["default"]},{}],47:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=[{particleCount:6e4,maxAge:{value:4,spread:1},position:{value:new e.Vector3(980,400,1360),spread:new e.Vector3(2760,750,2670)},velocity:{value:new e.Vector3(0,-25,0),spread:new e.Vector3(0,-10,0)},acceleration:{value:new e.Vector3(-10,0,-15),spread:new e.Vector3(-5,0,-10)},drag:{value:.5,spread:.5},wiggle:{value:15,spread:10},color:{value:[new e.Color(5131854),new e.Color(9474192),new e.Color(11974326)]},opacity:{value:[.1,1,0],spread:.2},size:{value:[4,3],spread:2}}],t.exports=r["default"]}).call(this,e("three"))},{three:27}],48:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=[{particleCount:6e4,maxAge:{value:3,spread:1},position:{value:new e.Vector3(0,500,0),spread:new e.Vector3(2500,800,2500)},velocity:{
value:new e.Vector3(0,0,0),spread:new e.Vector3(0,0,0)},acceleration:{value:new e.Vector3(0,0,0),spread:new e.Vector3(0,0,0)},drag:{value:.5,spread:.5},wiggle:{value:15,spread:10},color:{value:[new e.Color(3947580),new e.Color(8618883),new e.Color(11119017)]},opacity:{value:[.1,1,0],spread:.2},size:{value:[4,3],spread:2}}],t.exports=r["default"]}).call(this,e("three"))},{three:27}],49:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]={DEFAULT:"default",ANIMATED:"animated"},t.exports=r["default"]},{}],50:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=[{name:"entrance",position:new e.Vector3(0,130,0),distance:310,once:!0},{name:"showcase",position:new e.Vector3(-100,150,-750),distance:300,once:!0,isSubtitle:!0},{name:"screen_offline",position:new e.Vector3(-140,150,-1670),distance:270,once:!0,isSubtitle:!0},{name:"first_screen",position:new e.Vector3(-130,150,-1900),distance:120,once:!0,isSubtitle:!0,delay:800},{name:"instruction",position:new e.Vector3(-130,150,-1900),distance:120,once:!0,delay:6500}],t.exports=r["default"]}).call(this,e("three"))},{three:27}],51:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]="color: #FFFFFF; background-color: #1A1A1A; padding: 5px;",t.exports=r["default"]},{}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]={MAIN:{name:"main",isExperience:!1},TRAIN:{id:1,name:"train",isExperience:!0,year:1980,title:"Little train",subtitle:"First gift"},FIREPLACE:{id:2,name:"fireplace",isExperience:!0,year:1985,title:"On fire!",subtitle:"Fireplace"}},t.exports=r["default"]},{}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i="./assets";r["default"]={home:[{type:"mp3",id:"homeAmbient",url:i+"/audio/ambient/home.mp3"},{type:"json",id:"logo",url:i+"/misc/logo.json"}],homeMobile:[{type:"json",id:"logo",url:i+"/misc/logo.json"}],gl:{textures:[{type:"png",id:"snowParticleTexture",url:i+"/textures/snow_particle.png"},{type:"png",id:"strokeTexture",url:i+"/textures/stroke.png"},{type:"jpg",id:"trainDisplayTexture",url:i+"/textures/displays/train.jpg"},{type:"jpg",id:"fireplaceDisplayTexture",url:i+"/textures/displays/fireplace.jpg"},{type:"jpg",id:"bricksNormalTexture",url:i+"/textures/scenes/fireplace/bricks/bricks_normal.jpg"},{type:"jpg",id:"bricksSpecularTexture",url:i+"/textures/scenes/fireplace/bricks/bricks_specular.jpg"},{type:"jpg",id:"flooringNormalTexture",url:i+"/textures/scenes/fireplace/flooring/flooring_normal.jpg"},{type:"jpg",id:"flooringSpecularTexture",url:i+"/textures/scenes/fireplace/flooring/flooring_specular.jpg"},{type:"jpg",id:"picture1Texture",url:i+"/textures/scenes/fireplace/pictures/picture_1.jpg"},{type:"jpg",id:"picture2Texture",url:i+"/textures/scenes/fireplace/pictures/picture_2.jpg"},{type:"jpg",id:"picture3Texture",url:i+"/textures/scenes/fireplace/pictures/picture_3.jpg"},{type:"jpg",id:"picture4Texture",url:i+"/textures/scenes/fireplace/pictures/picture_4.jpg"}],models:[{type:"bin",id:"mainModel",url:i+"/models/scenes/main.awd"},{type:"bin",id:"locomotiveModel",url:i+"/models/scenes/locomotive.awd"},{type:"bin",id:"railsModel",url:i+"/models/scenes/rails.awd"},{type:"bin",id:"fireplaceModel",url:i+"/models/scenes/fireplace.awd"},{type:"bin",id:"treeTrainModel",url:i+"/models/trees/tree_train.awd"},{type:"bin",id:"treeShowcaseModel",url:i+"/models/trees/tree_showcase.awd"},{type:"bin",id:"treeFrontShowcaseModel",url:i+"/models/trees/tree_front_showcase.awd"},{type:"bin",id:"treeFireplaceModel",url:i+"/models/trees/tree_fireplace.awd"},{type:"text",id:"mainCharacterModel",url:i+"/models/characters/main_character.fbx"},{type:"text",id:"childRunModel",url:i+"/models/characters/child_run.fbx"},{type:"text",id:"childHappyModel",url:i+"/models/characters/child_happy.fbx"},{type:"bin",id:"mirrorsModel",url:i+"/models/misc/mirrors.awd"}],audio:[{type:"mp3",id:"mainAmbient",url:i+"/audio/ambient/main.mp3"},{type:"mp3",id:"trainAmbient",url:i+"/audio/ambient/train.mp3"},{type:"mp3",id:"fireplaceAmbient",url:i+"/audio/ambient/fireplace.mp3"},{type:"mp3",id:"endAmbient",url:i+"/audio/ambient/end.mp3"},{type:"mp3",id:"trainAudioEffect",url:i+"/audio/effects/train.mp3"},{type:"mp3",id:"wooshAudioEffect",url:i+"/audio/effects/woosh.mp3"},{type:"mp3",id:"wooshLightsAudioEffect",url:i+"/audio/effects/woosh_lights.mp3"},{type:"mp3",id:"lightsFlickeringAudioEffect",url:i+"/audio/effects/lights_flickering.mp3"},{type:"mp3",id:"showcaseVoice",url:i+"/audio/voice-over/common/showcase.mp3"},{type:"mp3",id:"screensOfflineVoice",url:i+"/audio/voice-over/common/screens_offline.mp3"},{type:"mp3",id:"firstScreenVoice",url:i+"/audio/voice-over/common/first_screen.mp3"},{type:"mp3",id:"endVoice",url:i+"/audio/voice-over/common/end.mp3"},{type:"mp3",id:"merryChristmasVoice",url:i+"/audio/voice-over/common/merry_christmas.mp3"},{type:"mp3",id:"trainVoice",url:i+"/audio/voice-over/scenes/train.mp3"},{type:"mp3",id:"fireplaceVoice",url:i+"/audio/voice-over/scenes/fireplace.mp3"}],misc:[{type:"json",id:"splines",url:i+"/misc/splines.json"}]}},t.exports=r["default"]},{}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=[{id:"showcase",audioId:"showcaseVoice",text:"Oh, this showcase lights up more than the others!"},{id:"screen_offline",audioId:"screensOfflineVoice",text:"Hmmm, these screens seems to be offline..."},{id:"first_screen",audioId:"firstScreenVoice",text:"I get the impression that the first screen tries to display an image"},{id:"end",audioId:"endVoice",text:"It was really fun to remember all these thoughts, it looks like the showcase of memories. Or maybe Santa Claus really does exist...?"},{id:"merry_christmas",audioId:"merryChristmasVoice",text:""},{id:"train",audioId:"trainVoice",text:"It looks like the first train I had for Christmas!"},{id:"fireplace",audioId:"fireplaceVoice",text:"I remember when dad taught me to start a fire!"}],t.exports=r["default"]},{}],55:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e("mobile-detect"),s=i(o),l="outdated",u="desktop",c="tablet",h="mobile",p=function(){function e(){n(this,e),this.userAgent=window.navigator.userAgent,this.mobileDetect=new s["default"](this.userAgent),this.deviceType=this.getDeviceType(),this.isDesktop=this.deviceType===u,this.isTablet=this.deviceType===c,this.isMobile=this.deviceType===h,this.isOutdated=this.isIE()&&this.isIE()<11,this.addClass()}return a(e,[{key:"getDeviceType",value:function(){return this.isIE()&&this.isIE()<11?l:this.mobileDetect.tablet()?c:this.mobileDetect.mobile()?h:u}},{key:"isIE",value:function(){return-1!==this.userAgent.toLowerCase().indexOf("msie")?parseInt(this.userAgent.toLowerCase().split("msie")[1]):!1}},{key:"addClass",value:function(){document.body.classList.add(this.deviceType+"-device")}}]),e}();r["default"]=new p,t.exports=r["default"]},{"mobile-detect":22}],56:[function(e,t){t.exports='<div class="container">\n  <home\n    v-if="homeAssetsLoaded"\n    :assets="assets"\n    @started="onStarted"\n    @expAssetsLoaded="onExpAssetsLoaded"\n  ></home>\n\n  <subtitle-set></subtitle-set>\n  \n  <exp-introduction @introCompleted="onIntroCompleted"></exp-introduction>\n\n  <main-instruction></main-instruction>\n\n  <exp-instruction ref="expInstruction"></exp-instruction>\n\n  <end></end>\n\n  <gl ref="gl"></gl>\n\n  <controls></controls>\n</div>\n'},{}],57:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("assets-loader"),o=n(a),s=e("sections/Home/home-desktop"),l=n(s),u=e("sections/GL/gl"),c=n(u),h=e("components/controls/controls"),p=n(h),d=e("components/subtitle-set/subtitle-set"),f=n(d),m=e("components/exp-introduction/exp-introduction"),v=n(m),g=e("components/exp-instruction/exp-instruction"),y=n(g),b=e("components/main-instruction/main-instruction"),_=n(b),x=e("components/end/end"),w=n(x),T=e("mixins/LogDeviceMixin"),M=n(T),S=e("data/manifest");r["default"]=i.extend({name:"desktop",template:e("./desktop.html"),mixins:[M["default"]],data:function(){return{homeAssetsLoaded:!1,homeAssetsProgress:0,expAssetsLoaded:!1,assets:{},started:!1}},created:function(){var e=this;this.loader=o["default"]({assets:S.home,crossOrigin:"anonymous"}),this.loader.start(),this.loader.on("error",function(e){console.error("Assets loading error : "+e)}).on("progress",function(t){e.homeAssetsProgress=t}).on("complete",function(t){t.map(function(t){var r=t.id,i=t.file;e.assets[r]=i}),e.homeAssetsLoaded=!0})},methods:{onStarted:function(){this.started=!0,this.$refs.gl.start()},onExpAssetsLoaded:function(){this.expAssetsLoaded=!0,this.$refs.gl.init()},onIntroCompleted:function(){var e=this;setTimeout(function(){e.$refs.expInstruction.enterAnimation(),e.$refs.gl.sceneManager.scene.addSignals()},1800)}},components:{home:l["default"],gl:c["default"],controls:p["default"],"subtitle-set":f["default"],"exp-introduction":v["default"],"exp-instruction":y["default"],"main-instruction":_["default"],end:w["default"]}}),t.exports=r["default"]}).call(this,e("vue/dist/vue.min.js"))},{"./desktop.html":56,"assets-loader":4,"components/controls/controls":31,"components/end/end":33,"components/exp-instruction/exp-instruction":35,"components/exp-introduction/exp-introduction":37,"components/main-instruction/main-instruction":39,"components/subtitle-set/subtitle-set":41,"data/manifest":53,"mixins/LogDeviceMixin":155,"sections/GL/gl":157,"sections/Home/home-desktop":158,"vue/dist/vue.min.js":28}],58:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.outdated=r.mobile=r.desktop=void 0;var n=e("./desktop/desktop"),a=i(n),o=e("./mobile/mobile"),s=i(o),l=e("./outdated/outdated"),u=i(l);r.desktop=a["default"],r.mobile=s["default"],r.outdated=u["default"]},{"./desktop/desktop":57,"./mobile/mobile":60,"./outdated/outdated":62}],59:[function(e,t){t.exports='<div>\n  <home\n    v-if="homeAssetsLoaded"\n    :assets="assets"\n    @started="onStarted"\n    ref="home"\n  ></home>\n\n  <video src="./assets/video/mobile.mp4" preload="auto" ref="video"></video>\n</div>\n'},{}],60:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("screenfull"),o=n(a),s=e("mixins/LogDeviceMixin"),l=n(s),u=e("sections/Home/home-mobile"),c=n(u),h=e("assets-loader"),p=n(h),d=e("data/manifest");r["default"]=i.extend({name:"mobile",template:e("./mobile.html"),mixins:[l["default"]],data:function(){return{homeAssetsProgress:0,homeAssetsLoaded:!1,assets:{}}},created:function(){var e=this;this.loader=p["default"]({assets:d.homeMobile,crossOrigin:"anonymous"}),this.loader.start(),this.loader.on("error",function(e){console.error("Assets loading error : "+e)}).on("progress",function(t){e.homeAssetsProgress=t}).on("complete",function(t){t.map(function(t){var r=t.id,i=t.file;e.assets[r]=i}),e.homeAssetsLoaded=!0})},mounted:function(){this.onEnded=this.onEnded.bind(this),this.addEventsListeners()},methods:{addEventsListeners:function(){this.$refs.video.addEventListener("ended",this.onEnded)},onStarted:function(){o["default"].enabled&&o["default"].request(),this.$refs.video.play()},onEnded:function(){this.$refs.home.enterAnimation()}},components:{home:c["default"]}}),t.exports=r["default"]}).call(this,e("vue/dist/vue.min.js"))},{"./mobile.html":59,"assets-loader":4,"data/manifest":53,"mixins/LogDeviceMixin":155,screenfull:23,"sections/Home/home-mobile":159,"vue/dist/vue.min.js":28}],61:[function(e,t){t.exports=""},{}],62:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("mixins/LogDeviceMixin"),o=n(a);r["default"]=i.extend({name:"outdated",template:e("./outdated.html"),mixins:[o["default"]],components:{}}),t.exports=r["default"]}).call(this,e("vue/dist/vue.min.js"))},{"./outdated.html":61,"mixins/LogDeviceMixin":155,"vue/dist/vue.min.js":28}],63:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("signals/Window"),c=n(u),h=e("signals/Keyboard"),p=n(h),d=e("gl/helpers/GUI"),f=n(d),m=function(e){function t(e){var r=e.fov,i=void 0===r?75:r,n=e.aspect,s=void 0===n?c["default"].metrics.width/c["default"].metrics.height:n,l=e.near,u=void 0===l?1:l,h=e.far,p=void 0===h?8e3:h,d=e.isDefault,f=void 0===d?!1:d;a(this,t);var m=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i,s,u,p));return m.isDefault=f,m.onResize=m.onResize.bind(m),m.handleKeydown=m.handleKeydown.bind(m),m.addSignals(),m.addHelpers(),m}return s(t,e),l(t,[{key:"addSignals",value:function(){p["default"].keydown.add(this.handleKeydown),c["default"].resize.add(this.onResize)}},{key:"removeSignals",value:function(){p["default"].keydown.remove(this.handleKeydown),c["default"].resize.remove(this.onResize)}},{key:"createGUI",value:function(){var e=this;if(!f["default"].__folders[this.name]){var t=f["default"].addFolder(this.name);t.add(this,"near",1,1e4,1).name("Near").onChange(function(){return e.updateProjectionMatrix()}),t.add(this,"far",1,1e4,1).name("Far").onChange(function(){return e.updateProjectionMatrix()}),t.add(this,"fov",0,180,1).name("FOV").onChange(function(){return e.updateProjectionMatrix()}),t.add(this.cameraHelper,"visible").name("Camera helper");var r=t.addFolder("Position");r.add({log:function(){return console.log(e.position)}},"log").name("Log"),r.add(this.position,"x").step(.1).name("X"),r.add(this.position,"y").step(.1).name("Y"),r.add(this.position,"z").step(.1).name("Z");var i=t.addFolder("Rotation");return i.add({log:function(){return console.log(e.rotation)}},"log").name("Log"),i.add(this.rotation,"x").step(.1).name("X"),i.add(this.rotation,"y").step(.1).name("Y"),i.add(this.rotation,"z").step(.1).name("Z"),t}return!1}},{key:"addHelpers",value:function(){this.cameraHelper=new i.CameraHelper(this),this.cameraHelper.name="CameraHelper",this.cameraHelper.material.fog=!1}},{key:"handleKeydown",value:function(e){e.keyCode}},{key:"dispose",value:function(){f["default"].removeFolder(this.name),this.cameraHelper.remove(),this.removeSignals()}},{key:"update",value:function(){this.cameraHelper.visible&&(this.updateMatrixWorld(),this.cameraHelper.update())}},{key:"onResize",value:function(e,t){this.aspect=e/t,this.updateProjectionMatrix()}}]),t}(i.PerspectiveCamera);r["default"]=m,t.exports=r["default"]}).call(this,e("three"))},{"gl/helpers/GUI":77,"signals/Keyboard":162,"signals/Window":169,three:27}],64:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=e("./AbstractCamera"),l=i(s),u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.name=e.name||"Basic camera",r.createGUI(),r}return o(t,e),t}(l["default"]);r["default"]=u,t.exports=r["default"]},{"./AbstractCamera":63}],65:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function m(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:m(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("./AbstractCamera"),h=n(c),p=e("gl/helpers/OrbitControls"),d=n(p),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.name=e.name||"Orbit camera",r.controls=new d["default"](r,e.domEl),r.controls.enableKeys=!1,r.controls.target.set(0,0,0),r.position.set(300,300,300),r.createGUI(),r}return s(t,e),l(t,[{key:"createGUI",value:function(){var e=this,r=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createGUI",this).call(this);if(r){r.add(this.controls,"enabled").name("Controls enabled");var i=r.addFolder("Target");i.add({log:function(){return console.log(e.controls.target)}},"log").name("Log"),i.add(this.controls.target,"x").step(.1).name("X"),i.add(this.controls.target,"y").step(.1).name("Y"),i.add(this.controls.target,"z").step(.1).name("Z");var n=r.addFolder("Views");n.add(this,"setTopView").name("Top"),n.add(this,"setBottomView").name("Bottom"),n.add(this,"setFrontView").name("Front"),r.add(this.controls,"autoRotate").name("Auto rotate"),r.add(this.controls,"autoRotateSpeed",0,60,1).name("Auto rotate speed")}}},{key:"handleKeydown",value:function(e){var t=e.keyCode;switch(t){case 84:this.setTopView();break;case 70:this.setFrontView();break;case 66:this.setBottomView()}}},{key:"setTopView",value:function(){this.controls.target.copy(new i.Vector3),this.position.set(0,1200,0)}},{key:"setBottomView",value:function(){this.controls.target.copy(new i.Vector3),this.position.set(0,-1200,0)}},{key:"setFrontView",value:function(){this.controls.target.copy(new i.Vector3),this.position.setY(0)}},{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),this.controls.enabled&&this.controls.update()}}]),t}(h["default"]);r["default"]=f,t.exports=r["default"]}).call(this,e("three"))},{"./AbstractCamera":63,"gl/helpers/OrbitControls":78,three:27}],66:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.BasicCamera=r.OrbitCamera=void 0;var n=e("./OrbitCamera"),a=i(n),o=e("./BasicCamera"),s=i(o);r.OrbitCamera=a["default"],r.BasicCamera=s["default"]},{"./BasicCamera":64,"./OrbitCamera":65}],67:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("sono"),c=n(u),h=e("gl/gui/StatsGUI"),p=n(h),d=e("gl/gui/SceneGUI"),f=n(d),m=e("gl/cameras/OrbitCamera"),v=n(m),g=e("gl/managers/CameraManager"),y=n(g),b=e("managers/AssetsManager"),_=e("signals/Store"),x=n(_),w=e("consts/console"),T=n(w),M=function(e){function t(e){var r=e.domEl,i=e.renderer,n=e.name;a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.domEl=r,s.renderer=i,s.name=n,s.assets=b.assets,s.started=window.performance.now(),s.cameras=[],s.audio=[],s.textures=[],s.materials=[],s}return s(t,e),l(t,[{key:"addGUI",value:function(){this.sceneGUI=new f["default"]({scene:this}),this.sceneFolder=this.sceneGUI.folder,this.statsGUI=new p["default"]({renderer:this.renderer,started:this.started})}},{key:"removeGUI",value:function(){this.sceneGUI&&this.statsGUI&&(this.sceneGUI.remove(),this.statsGUI.remove())}},{key:"addSignals",value:function(){}},{key:"removeSignals",value:function(){}},{key:"init",value:function(){this.createCameras(),this.cameraManager=new y["default"]({scene:this,cameras:this.cameras})}},{key:"create",value:function(){this.createEnvironment(),this.createAudio(),this.createTextures(),this.createMaterials(),this.createLights(),this.createMeshes(),this.createPostProcessing(),this.createTls(),this.addGUI()}},{key:"dispose",value:function(){this.disposeDebug={objects:0,materials:0,geometries:0,textures:0,audio:0},this.disposeScene(),this.disposeTextures(),this.disposeMaterials(),this.disposeAudio(),this.removeSignals(),this.removeGUI(),this.cameraManager&&this.cameraManager.dispose(),console.log("%c["+this.name.toUpperCase()+"] DISPOSE - Objects : "+this.disposeDebug.objects+" | Materials : "+this.disposeDebug.materials+" | Geometries : "+this.disposeDebug.geometries+" | Textures : "+this.disposeDebug.textures+" | Audio : "+this.disposeDebug.audio,T["default"])}},{key:"createTls",value:function(){var e=x["default"].postProcessing.getUniform("postPass","uWhiteTransition"),t=this.cameraManager.camera;this.enterTl=new TimelineMax({paused:!0}),this.enterTl.fromTo(t,3,{fov:t.fov-15},{fov:t.fov,ease:Power2.easeOut,onUpdate:function(){return t.updateProjectionMatrix()}},0).to(e,2,{value:0,ease:Power2.easeOut},0),this.leaveTl=new TimelineMax({paused:!0}),this.leaveTl.fromTo(t,3,{fov:t.fov},{fov:t.fov-15,ease:Power2.easeOut,onUpdate:function(){return t.updateProjectionMatrix()}},0).to(e,2,{value:1,ease:Power2.easeOut},0)}},{key:"createCameras",value:function(){return this.camera=new v["default"]({domEl:this.domEl}),this.cameras.push(this.camera),this.cameras}},{key:"createEnvironment",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#1A1A1A";this.environmentColor=e,this.fogColor=this.environmentColor,this.fog=new i.FogExp2(new i.Color(this.fogColor),.002),this.backgroundColor=this.environmentColor,this.background=this.backgroundColor,this.renderer.setClearColor(this.environmentColor,1)}},{key:"createAudio",value:function(){var e=this.name+"Ambient";this.ambientAudio=c["default"].createSound(this.assets[e]),this.ambientAudio.loop=!0,this.wooshAudioEffect=c["default"].createSound(this.assets.wooshAudioEffect);var t=c["default"].effect.gain(5);this.wooshAudioEffect.effect.add(t),this.audio.push(this.ambientAudio,this.wooshAudioEffect)}},{key:"createTextures",value:function(){}},{key:"createMaterials",value:function(){}},{key:"createLights",value:function(){}},{key:"createMeshes",value:function(){}},{key:"createPostProcessing",value:function(){}},{key:"disposeScene",value:function(){var e=this;this.traverse(function(t){"function"==typeof t.remove&&(t.remove(),e.disposeDebug.objects++),"function"==typeof t.removeSignals&&t.removeSignals(),"undefined"!=typeof t.material&&"function"==typeof t.material.dispose&&(t.material.dispose(),e.disposeDebug.materials++),"undefined"!=typeof t.geometry&&"function"==typeof t.geometry.dispose&&(t.geometry.dispose(),e.disposeDebug.geometries++),"undefined"!=typeof t.bufferGeometry&&"function"==typeof t.bufferGeometry.dispose&&(t.bufferGeometry.dispose(),e.disposeDebug.geometries++)})}},{key:"disposeTextures",value:function(){for(var e=0,t=this.textures.length;t>e;e++)this.textures[e].dispose(),this.disposeDebug.textures++}},{key:"disposeMaterials",value:function(){for(var e=0,t=this.materials.length;t>e;e++)this.materials[e].dispose(),this.disposeDebug.materials++}},{key:"disposeAudio",value:function(){var e=this;this.listener&&this.listener.removeFilter();for(var t=function(t){var r=e.audio[t];e.disposeDebug.audio++,"undefined"!=typeof r.type&&"Audio"===r.type?TweenMax.to(r.gain.gain,1,{value:0,onComplete:function(){r.stop(),r.disconnect()}}):"function"==typeof r.destroy&&(r.fade(0,1),TweenMax.delayedCall(1,function(){r.effect.removeAll(),r.destroy()}))},r=0,i=this.audio.length;i>r;r++)t(r,i)}},{key:"disposeTls",value:function(){this.enterTl.kill(),this.enterTl.clear(),this.leaveTl.kill(),this.leaveTl.clear()}},{key:"enterAnimation",value:function(){return this.leaveTl.pause(),this.enterTl.play(0)}},{key:"leaveAnimation",value:function(){return this.enterTl.pause(),this.leaveTl.play(0)}},{key:"start",value:function(){this.startAudio(),this.enterAnimation()}},{key:"startAudio",value:function(){this.ambientAudio.play(),this.ambientAudio.volume=0,this.ambientAudio.fade(1,1)}},{key:"update",value:function(e,t){this.cameraManager&&this.cameraManager.update(e,t),this.sceneGUI&&this.sceneGUI.update(),this.onUpdate(e,t)}},{key:"onUpdate",value:function(){}}]),t}(i.Scene);r["default"]=M,t.exports=r["default"]}).call(this,e("three"))},{"consts/console":51,"gl/cameras/OrbitCamera":65,"gl/gui/SceneGUI":74,"gl/gui/StatsGUI":75,"gl/managers/CameraManager":82,"managers/AssetsManager":153,"signals/Store":166,sono:25,three:27}],68:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function d(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:d(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("./Spline"),h=n(c),p=function(e){function t(e){var r=e.points,n=void 0===r?[]:r,s=e.divisions,l=void 0===s?100:s,u=e.lookAtOffset,c=void 0===u?.05:u,h=e.loop,p=void 0===h?!0:h,d=e.loopDuration,f=void 0===d?20:d,m=e.positionOffset,v=void 0===m?new i.Vector3:m,g=e.lookAtPosOffset,y=void 0===g?new i.Vector3:g;a(this,t);var b=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{points:n,divisions:l}));return b.name="Animated spline",b.progress=0,b.lookAtProgress=0,b.lookAtOffset=c,b.positionTarget=new i.Vector3,b.lookAtTarget=new i.Vector3,b.positionOffset=v,b.lookAtPosOffset=y,b.loop=p,b.loopDuration=f,b.playing=!0,b.endReached=!1,b}return s(t,e),l(t,[{key:"createGUI",value:function(e){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createGUI",this).call(this,e);var r=e.addFolder(this.name);r.add(this,"progress",0,1,.01).name("Progress"),r.add(this,"loopDuration",1,120,.1).name("Loop duration"),r.add(this,"lookAtProgress",0,1,.01).name("LookAt progress"),r.add(this,"lookAtOffset",.1,1,.01).name("LookAt offset");var i=r.addFolder("LookAt Y offset");i.add(this.lookAtPosOffset,"x",-1e3,1e3,.1).name("X"),i.add(this.lookAtPosOffset,"y",-1e3,1e3,.1).name("Y"),i.add(this.lookAtPosOffset,"z",-1e3,1e3,.1).name("Z");var n=r.addFolder("Pos Y offset");n.add(this.positionOffset,"x",-1e3,1e3,.1).name("X"),n.add(this.positionOffset,"y",-1e3,1e3,.1).name("Y"),n.add(this.positionOffset,"z",-1e3,1e3,.1).name("Z")}},{key:"animate",value:function(e){e.position.copy(this.positionTarget),e.lookAt(this.lookAtTarget)}},{key:"update",value:function(e){this.playing&&(this.progress=this.progress+1/(1*this.loopDuration/e),this.lookAtProgress=this.progress+this.lookAtOffset,this.loop?(this.progress%=1,this.lookAtProgress%=1):(!this.endReached&&this.progress>=.9&&(this.endReached=!0),this.progress>=.99&&(this.playing=!1)),this.positionTarget=this.getPoint(this.progress).add(this.positionOffset),this.lookAtTarget=this.getPoint(this.lookAtProgress).add(this.lookAtPosOffset))}}]),t}(h["default"]);r["default"]=p,t.exports=r["default"]}).call(this,e("three"))},{"./Spline":71,three:27}],69:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=function S(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:S(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},u=e("./AbstractScene"),c=i(u),h=e("consts/scenes"),p=i(h),d=e("signals/Subtitle"),f=i(d),m=e("signals/Keyboard"),v=i(m),g=e("signals/Window"),y=i(g),b=e("signals/Experience"),_=i(b),x=e("signals/Scene"),w=i(x),T={DURATION:5},M=function(e){
function t(){var e;n(this,t);for(var r=arguments.length,i=Array(r),o=0;r>o;o++)i[o]=arguments[o];var s=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return s.repeatKeyFlag=!1,s.progress=0,s.handleKeydown=s.handleKeydown.bind(s),s.handleKeyup=s.handleKeyup.bind(s),s.handleWindowBlur=s.handleWindowBlur.bind(s),s}return o(t,e),s(t,[{key:"start",value:function(){var e=this;this.startAudio(),this.enterAnimation().eventCallback("onComplete",function(){f["default"].add.dispatch(e.name)})}},{key:"addSignals",value:function(){v["default"].keydown.add(this.handleKeydown),v["default"].keyup.add(this.handleKeyup),y["default"].blur.add(this.handleWindowBlur)}},{key:"removeSignals",value:function(){v["default"].keydown.remove(this.handleKeydown),v["default"].keyup.remove(this.handleKeyup),y["default"].blur.remove(this.handleWindowBlur)}},{key:"handleKeydown",value:function(e){var t=e.keyCode;this.repeatKeyFlag||32===t&&(this.spaceToggle(!0),this.repeatKeyFlag=!0)}},{key:"handleKeyup",value:function(e){var t=e.keyCode;this.repeatKeyFlag=!1,32===t&&this.spaceToggle(!1)}},{key:"handleWindowBlur",value:function(){this.repeatKeyFlag&&(this.repeatKeyFlag=!1,this.spaceToggle(!1))}},{key:"spaceToggle",value:function(e){var t=this;e?TweenMax.to(this,T.DURATION,{progress:1,onUpdate:function(){return _["default"].progress.dispatch(t.progress)},onComplete:function(){return t.completed()}}):TweenMax.to(this,T.DURATION,{progress:0,onUpdate:function(){return _["default"].progress.dispatch(t.progress)}})}},{key:"completed",value:function(){this.removeSignals(),_["default"].complete.dispatch(),setTimeout(function(){return w["default"].change.dispatch(p["default"].MAIN.name)},1200)}},{key:"leaveAnimation",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leaveAnimation",this).call(this);return this.wooshAudioEffect.play(),e}}]),t}(c["default"]);r["default"]=M,t.exports=r["default"]},{"./AbstractScene":67,"consts/scenes":52,"signals/Experience":161,"signals/Keyboard":162,"signals/Scene":165,"signals/Subtitle":167,"signals/Window":169}],70:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),c=e("gl/helpers/GUI"),h=n(c),p=e("signals/Window"),d=n(p),f=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l({antialias:!1,alpha:!0},e)));return r.name=e.name,r.options={"Pixel ratio":1,"Clear color":"#1A1A1A"},r.setSize(d["default"].metrics.width,d["default"].metrics.height),r.setPixelRatio(r.options["Pixel ratio"]),r.setClearColor(new i.Color(r.options["Clear color"]),1),r.onResize=r.onResize.bind(r),r.addSignals(),r.addGUI(),r}return s(t,e),u(t,[{key:"addGUI",value:function(){var e=this,t=h["default"].addFolder(this.name);t.add(this.options,"Pixel ratio",[1,2,3]).onChange(function(t){return e.setPixelRatio(t)}),t.addColor(this.options,"Clear color").onChange(function(t){return e.setClearColor(t)}),t.add(this,"gammaInput").name("Gamma input"),t.add(this,"gammaOutput").name("Gamma output"),t.add({log:function(){return console.log(e.domElement)}},"log").name("Log dom element"),t.add({log:function(){return console.log(e.context)}},"log").name("Log context");var r=t.addFolder("Shadow map");r.add(this.shadowMap,"enabled").name("Enabled"),r.add(this.shadowMap,"type",{BasicShadowMap:i.BasicShadowMap,PCFShadowMap:i.PCFShadowMap,PCFSoftShadowMap:i.PCFSoftShadowMap}).name("Type"),r.add(this.shadowMap,"renderReverseSided").name("Render reverse sided"),r.add(this.shadowMap,"renderSingleSided").name("Render single sided")}},{key:"removeGUI",value:function(){h["default"].removeFolder(this.name)}},{key:"addSignals",value:function(){d["default"].resize.add(this.onResize)}},{key:"removeSignals",value:function(){d["default"].resize.remove(this.onResize)}},{key:"destroy",value:function(){this.domElement.remove(),this.removeSignals()}},{key:"onResize",value:function(e,t){this.setSize(e,t)}}]),t}(i.WebGLRenderer);r["default"]=f,t.exports=r["default"]}).call(this,e("three"))},{"gl/helpers/GUI":77,"signals/Window":169,three:27}],71:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("utils/gl/parse-vector-3"),c=n(u),h=function(e){function t(e){var r=e.points,i=e.divisions,n=void 0===i?100:i;a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c["default"](r)));return s.points=s.getSpacedPoints(n),s.createHelpers(),s}return s(t,e),l(t,[{key:"createHelpers",value:function(){this.geometry=new i.Geometry,this.geometry.vertices=this.points;var e=new i.LineBasicMaterial({linewidth:1,color:16711680,fog:!1});this.helper=new i.Line(this.geometry,e),this.helper.name="SplineHelper"}},{key:"createGUI",value:function(e){e.add(this.helper,"visible",.1,1,.01).name("Spline helper")}},{key:"setOffset",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i.Vector3,t=0,r=this.points.length;r>t;t++)this.points[t].add(e);return this.points}},{key:"setScale",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0,r=this.points.length;r>t;t++)this.points[t].multiplyScalar(e);return this.points}}]),t}(i.CatmullRomCurve3);r["default"]=h,t.exports=r["default"]}).call(this,e("three"))},{three:27,"utils/gl/parse-vector-3":171}],72:[function(e,t,r){(function(e){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=function(){function t(e){var r=e.images,n=void 0===r?{}:r,a=e.configuration;i(this,t),this.images=n,this.configuration=a,this.textures={},this.createTextures()}return n(t,[{key:"createTextures",value:function(){var t=this.configuration,r=t.mapping,i=t.wrapS,n=t.wrapT,a=t.magFilter,o=t.minFilter,s=t.format,l=t.type,u=t.anisotropy,c=t.repeat;for(var h in this.images){var p=this.images[h],d=new e.Texture(p,r||e.UVMapping,i||e.ClampToEdgeWrapping,n||e.ClampToEdgeWrapping,a||e.LinearFilter,o||e.LinearMipMapLinearFilter,s||e.RGBAFormat,l||e.UnsignedByteType,u||1);c&&c.u&&c.v&&(d.wrapS=e.RepeatWrapping,d.wrapT=e.RepeatWrapping,d.repeat.set(c.u,c.v)),d.needsUpdate=!0,this.textures[h]=d}}},{key:"get",value:function(e){return this.textures[e]?this.textures[e]:null}},{key:"getTextures",value:function(){var e=[];for(var t in this.textures){var r=this.textures[t];e.push(r)}return e}}]),t}();r["default"]=a,t.exports=r["default"]}).call(this,e("three"))},{three:27}],73:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e("gl/helpers/GUI"),s=i(o),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.folderName;n(this,e),this.folderName=r,this.folder=s["default"].addFolder(this.folderName)}return a(e,[{key:"remove",value:function(){s["default"].removeFolder(this.folderName),this.removeSignals()}},{key:"removeController",value:function(e){this.folder.remove(e)}},{key:"addSignals",value:function(){}},{key:"removeSignals",value:function(){}}]),e}();r["default"]=l,t.exports=r["default"]},{"gl/helpers/GUI":77}],74:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("./Folder"),c=n(u),h=e("signals/Keyboard"),p=(n(h),e("signals/Store")),d=n(p),f=e("utils/gui/parse-object"),m=n(f),v={HELPERS:{AXIS_SIZE:500,GRID:{SIZE:1500,STEP:20},LIGHTS:{DIRECTIONAL:50,SPOT:50,HEMISPHERE:50}}},g=function(e){function t(e){var r,n=e.scene;a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{folderName:"Scene"}));s.scene=n,s.createHelpers();var l=s.folder.addFolder("Common");l.add(s.scene,"name").name("Name"),l.addColor(s.scene,"environmentColor").name("Environment").onChange(function(e){s.scene.background=new i.Color(e),s.scene.fog.color=new i.Color(e),s.scene.renderer.setClearColor(e,1)}),l.addColor(s.scene,"backgroundColor").name("Background").onChange(function(e){s.scene.background=new i.Color(e)}),l.add(s.scene.cameraManager,"cameraId",s.getCamerasOptions()).onChange((r=s.scene.cameraManager).changeCamera.bind(r)).name("Active camera"),l.add(s,"toggleHelpers").name("Toggle helpers");var u=l.addFolder("Fog");s.fogEnabled=!!s.scene.fog.density,u.add(s,"fogEnabled").onChange(s.toggleFog.bind(s)).name("Enabled"),u.add(s.scene.fog,"density",0,.05,1e-4).name("Density"),u.addColor(s.scene,"fogColor").name("Color").onChange(function(e){s.scene.fog.color=new i.Color(e),s.scene.background=s.scene.fog.color,s.scene.backgroundColor=e});var c=l.addFolder("Helpers");c.add(s.axisHelper,"visible").name("Axis"),c.add(s.gridHelper,"visible").name("Grid");var h=["color","intensity","position","castShadow","distance","angle","penumbra","decay"],p=s.folder.addFolder("Lights");return s.lightsHelpers=[],n.traverse(function(e){if(e instanceof i.Light){var t=e.name,r=m["default"]({object:e,propertiesWhitelist:h,folder:p}),n=["HemisphereLight","PointLight","SpotLight","DirectionalLight"];if(-1!==n.indexOf(t)){var a=t+"Helper",o=void 0;switch(t){case"DirectionalLight":o=new i[a](e,v.HELPERS.LIGHTS.DIRECTIONAL);break;case"PointLight":o=new i[a](e,v.HELPERS.LIGHTS.SPOT);break;case"HemisphereLight":o=new i[a](e,v.HELPERS.LIGHTS.HEMISPHERE);break;default:o=new i[a](e)}o.name=a,s.lightsHelpers.push(o),s.scene.add(o),"SpotLight"===t&&m["default"]({object:e.target,propertiesWhitelist:["position"],folder:r,folderName:"Target"}),r.add(o,"visible").name("Helper")}}}),s.helpersVisible=!1,s.guiVisible=!1,s.toggleHelpers(s.helpersVisible),s.toggleGUI(s.guiVisible),s.addSignals(),s}return s(t,e),l(t,[{key:"addSignals",value:function(){}},{key:"removeSignals",value:function(){}},{key:"createHelpers",value:function(){this.axisHelper=new i.AxisHelper(v.HELPERS.AXIS_SIZE),this.axisHelper.name="AxisHelper",this.axisHelper.material.fog=!1,this.scene.add(this.axisHelper),this.gridHelper=new i.GridHelper(v.HELPERS.GRID.SIZE,v.HELPERS.GRID.STEP),this.gridHelper.name="GridHelper",this.gridHelper.material.fog=!1,this.scene.add(this.gridHelper)}},{key:"handleKeydown",value:function(e){var t=e.keyCode;switch(t){case 221:this.toggleFog();break;case 72:this.toggleHelpers(),this.toggleGUI();break;case 80:this.togglePostProcessing()}}},{key:"toggleHelpers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.helpersVisible=-1!==t?t:!this.helpersVisible,this.scene.traverse(function(t){var r=-1!==t.name.toLowerCase().search("helper");r&&e.scene.cameraManager.camera.cameraHelper!==t&&(t.visible=e.helpersVisible)})}},{key:"toggleGUI",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this.guiVisible=-1!==e?e:!this.guiVisible,this.guiVisible?document.body.querySelector(".dg").classList.remove("hide"):document.body.querySelector(".dg").classList.add("hide")}},{key:"togglePostProcessing",value:function(){d["default"].postProcessing.active=!d["default"].postProcessing.active}},{key:"toggleFog",value:function(){0===this.scene.fog.density?this.scene.fog.density=this.oldFogDensity:(this.oldFogDensity=this.scene.fog.density,this.scene.fog.density=0),this.fogEnabled=!!this.scene.fog.density}},{key:"getCamerasOptions",value:function(){for(var e={},t=0;t<this.scene.cameraManager.cameras.length;t++){var r=this.scene.cameraManager.cameras[t];e[r.name]=t}return e}},{key:"update",value:function(){for(var e=0,t=this.lightsHelpers.length;t>e;e++)this.lightsHelpers[e].update()}}]),t}(c["default"]);r["default"]=g,t.exports=r["default"]}).call(this,e("three"))},{"./Folder":73,"signals/Keyboard":162,"signals/Store":166,three:27,"utils/gui/parse-object":176}],75:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e("./Folder"),u=i(l),c=e("managers/AssetsManager"),h=function(e){function t(e){var r=e.renderer,i=e.started;n(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{folderName:"Stats"}));return o.renderer=r,o.started=i,setTimeout(o.addFolder.bind(o),1),o}return o(t,e),s(t,[{key:"addFolder",value:function(){var e={"Seconds to load":(window.performance.now()-this.started)/1e3,Programs:this.renderer.info.programs.length,Geometries:this.renderer.info.memory.geometries,Textures:this.renderer.info.memory.textures,Calls:this.renderer.info.render.calls,Vertices:this.renderer.info.render.vertices,Faces:this.renderer.info.render.faces,Points:this.renderer.info.render.points,Resources:Object.keys(c.assets).length};this.folder.add(e,"Seconds to load"),this.folder.addLabel("Memory"),this.folder.add(e,"Programs"),this.folder.add(e,"Geometries"),this.folder.add(e,"Textures"),this.folder.addLabel("Render"),this.folder.add(e,"Calls"),this.folder.add(e,"Vertices"),this.folder.add(e,"Faces"),this.folder.add(e,"Points"),this.folder.addLabel("Misc"),this.folder.add(e,"Resources")}}]),t}(u["default"]);r["default"]=h,t.exports=r["default"]},{"./Folder":73,"managers/AssetsManager":153}],76:[function(e,t,r){(function(e){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=function(e){function t(){return i(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,!0))}return a(t,e),o(t,[{key:"delta",get:function(){return this.getDelta()}},{key:"time",get:function(){return this.getElapsedTime()}}]),t}(e.Clock);r["default"]=s,t.exports=r["default"]}).call(this,e("three"))},{three:27}],77:[function(e,t,r){(function(e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=new e.GUI({autoPlace:!1,scrollable:!0});i.domElement.classList.add("hide"),document.body.appendChild(i.domElement),r["default"]=i,t.exports=r["default"]}).call(this,e("dat.gui/build/dat.gui.min.js"))},{"dat.gui/build/dat.gui.min.js":10}],78:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("three-orbit-controls"),o=n(a);r["default"]=o["default"](i),t.exports=r["default"]}).call(this,e("three"))},{three:27,"three-orbit-controls":26}],79:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();e("gsap");var a=function(){function e(){i(this,e),this.datas=[],this.binded=!1}return n(e,[{key:"bind",value:function(){this.binded||(this.binded=!0,this.update=this.update.bind(this),TweenMax.ticker.addEventListener("tick",this.update))}},{key:"unbind",value:function(){this.binded=!1,TweenMax.ticker.removeEventListener("tick",this.update);for(var e=0,t=this.datas.length;t>e;e++)this.remove(this.datas[e].callback);this.datas=[]}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1;if("function"!=typeof e)return!1;var n=new Date,a={id:this.datas.length,callback:e,interval:t,delay:r,once:i,time:0,delayCount:0,lastTime:n.getTime()};return this.datas.push(a),this.binded||this.bind(),a}},{key:"addOnce",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.add(e,t,r,!0)}},{key:"remove",value:function(e){for(var t=0,r=this.datas.length;r>t;t++)if(this.datas[t].callback===e){this.datas.splice(t,1);break}}},{key:"update",value:function(){for(var e=new Date,t=e.getTime(),r=0,i=this.datas.length;i>r;r++){var n=this.datas[r],a=t-n.lastTime,o=1e3/n.interval;n.lastTime=t-a%o;var s=n.time+=a;n.delay>0&&(n.delayCount++,n.delayCount<n.delay)||(n.callback(a,s),n.once&&this.remove(n.callback))}}}]),e}();r["default"]=new a,t.exports=r["default"]},{gsap:17}],80:[function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function n(){this.id=0,this.data=null}Object.defineProperty(r,"__esModule",{value:!0});var a=e("three"),o=i(a),s=1,l=2,u=3,c=4,h=5,p=6,d=7,f=8,m=21,v=23,g=41,y=42,b=43,_=44,x=45,w=46,T=47,M=21,S=23,E=4,P=5,A=7,C=8,O=!0,k=function(){};k.prototype={set:function(e,t){this[e]=t},get:function(e,t){return this.hasOwnProperty(e)?this[e]:t}};var L=function(e){this.manager=void 0!==e?e:o.DefaultLoadingManager,this.trunk=new o.Object3D,this.materialFactory=void 0,this._url="",this._baseDir="",this._data,this._ptr=0,this._version=[],this._streaming=!1,this._optimized_for_accuracy=!1,this._compression=0,this._bodylen=4294967295,this._blocks=[new n],this._accuracyMatrix=!1,this._accuracyGeo=!1,this._accuracyProps=!1};L.prototype={constructor:L,load:function(e,t,r,i){var n=this;this._url=e,this._baseDir=e.substr(0,e.lastIndexOf("/")+1);var a=new o.XHRLoader(this.manager);a.setResponseType("arraybuffer"),a.load(e,function(e){t(n.parse(e))},r,i)},parse:function(e){var t=e.byteLength;for(this._ptr=0,this._data=new DataView(e),this._parseHeader(),0!=this._compression&&console.error("compressed AWD not supported"),this._streaming||this._bodylen==e.byteLength-this._ptr||console.error("AWDLoader: body len does not match file length",this._bodylen,t-this._ptr);this._ptr<t;)this.parseNextBlock();return this.trunk},parseNextBlock:function(){var e,t,r,i,a=this.readU32(),t=(this.readU8(),this.readU8()),r=(this.readU8(),this.readU32());switch(t){case 1:e=this.parseMeshData(r);break;case 22:e=this.parseContainer(r);break;case 23:e=this.parseMeshInstance(r);break;case 81:e=this.parseMaterial(r);break;case 82:e=this.parseTexture(r);break;case 101:e=this.parseSkeleton(r);break;case 112:e=this.parseMeshPoseAnimation(r,!1);break;case 113:e=this.parseVertexAnimationSet(r);break;case 102:e=this.parseSkeletonPose(r);break;case 103:e=this.parseSkeletonAnimation(r);break;case 122:e=this.parseAnimatorSet(r);break;default:this._ptr+=r}this._blocks[a]=i=new n,i.data=e,i.id=a},_parseHeader:function(){var e=this._version,t=this.readU8()<<16|this.readU8()<<8|this.readU8();if(4282180!=t)throw new Error("AWDLoader - bad magic");e[0]=this.readU8(),e[1]=this.readU8();var r=this.readU16();this._streaming=1==(1&r),2===e[0]&&1===e[1]&&(this._accuracyMatrix=2===(2&r),this._accuracyGeo=4===(4&r),this._accuracyProps=8===(8&r)),this._geoNrType=this._accuracyGeo?C:A,this._matrixNrType=this._accuracyMatrix?C:A,this._propsNrType=this._accuracyProps?C:A,this._optimized_for_accuracy=2===(2&r),this._compression=this.readU8(),this._bodylen=this.readU32()},parseContainer:function(){var e,t=new o.Object3D,r=this.readU32(),i=this.parseMatrix4();return t.name=this.readUTF(),t.applyMatrix(i),e=this._blocks[r].data||this.trunk,e.add(t),this.parseProperties({1:this._matrixNrType,2:this._matrixNrType,3:this._matrixNrType,4:E}),t.extra=this.parseUserAttributes(),t},parseMeshInstance:function(){var e,t,r,i,n,a,s,l,u,c,h,p,d,f,m;for(a=this.readU32(),l=this.parseMatrix4(),e=this.readUTF(),s=this.readU32(),p=this.readU16(),r=this.getBlock(s),u=[],d=0,m=0;p>m;m++)h=this.readU32(),c=this.getBlock(h),u.push(c);if(i=r.length,n=[],i>1)for(t=new o.Object3D,m=0;i>m;m++){var v=new o.Mesh(r[m]);n.push(v),t.add(v)}else t=new o.Mesh(r[0]),n.push(t);t.applyMatrix(l),t.name=e,f=this.getBlock(a)||this.trunk,f.add(t);var g=u.length,y=Math.max(i,g);for(m=0;y>m;m++)n[m%i].material=u[m%g];return this.parseProperties(null),t.extra=this.parseUserAttributes(),t},parseMaterial:function(){var e,t,r,i,n,a,s;for(e=this.readUTF(),t=this.readU8(),a=this.readU8(),r=this.parseProperties({1:u,2:v,11:m,12:d,13:m}),s=0;a>s;){{this.readU16()}this.parseProperties(null),this.parseUserAttributes()}if(n=this.parseUserAttributes(),void 0!==this.materialFactory&&(i=this.materialFactory(e)))return i;if(i=new o.MeshPhongMaterial,1===t)i.color.setHex(r.get(1,13421772));else if(2===t){var l=r.get(2,0);i.map=this.getBlock(l)}return i.extra=n,i.alphaThreshold=r.get(12,0),i.repeat=r.get(13,!1),i},parseTexture:function(){var e,t,r=(this.readUTF(),this.readU8());if(0===r){t=this.readU32();var i=this.readUTFBytes(t);console.log(i),e=this.loadTexture(i)}return this.parseProperties(null),this.parseUserAttributes(),e},loadTexture:function(e){var t=new o.Texture,r=new o.ImageLoader(this.manager);return r.load(this._baseDir+e,function(e){t.image=e,t.needsUpdate=!0}),t},parseSkeleton:function(){var e=(this.readUTF(),this.readU16()),t=[],r=0;for(this.parseProperties(null);e>r;){var i,n;this.readU16(),i=new o.Bone,i.parent=this.readU16()-1,i.name=this.readUTF(),n=this.parseMatrix4(),i.skinMatrix=n,i.position.setFromMatrixPosition(n),this.parseProperties(null),this.parseUserAttributes(),t.push(i),r++}return this.parseUserAttributes(),t},parseSkeletonPose:function(){var e=(this.readUTF(),this.readU16());this.parseProperties(null);for(var t=[],r=0;e>r;){var i,n;i=this.readU8(),n=1===i?this.parseMatrix4():new o.Matrix4,t[r]=n,r++}return this.parseUserAttributes(),t},parseSkeletonAnimation:function(){var e,t,r,i=(this.readUTF(),[]),n=this.readU16();this.parseProperties(null);for(var a=0;n>a;)t=this.readU32(),e=this.readU16(),r=this._blocks[t].data,i.push({pose:r,duration:e}),a++;return 0!==i.length?(this.parseUserAttributes(),i):void 0},parseVertexAnimationSet:function(){for(var e,t=(this.readUTF(),this.readU16()),r=(this.parseProperties({1:P}),0),i=[];t>r;)e=this.readU32(),i.push(this._blocks[e].data),r++;return this.parseUserAttributes(),i},parseAnimatorSet:function(){var e,t,r=(this.readUTF(),this.readU16()),i=this.parseProperties({1:S});e=this.readU32();for(var n=this.readU16(),a=[],o=0;n>o;o++)a.push(this.readU32());this.readU16(),Boolean(this.readU8());this.parseUserAttributes(),this.parseUserAttributes();var s=[];for(o=0;o<a.length;o++)s.push(this._blocks[a[o]].data);t=this._blocks[e].data;var l;for(1==r&&(l={animationSet:t,skeleton:this._blocks[i.get(1,0)].data}),o=0;o<s.length;o++)s[o].animator=l;return l},parseMeshData:function(){var e,t,r,i,n,a=this.readUTF(),s=this.readU16(),l=0,u=[];for(t=this.parseProperties({1:this._geoNrType,2:this._geoNrType});s>l;){var c,h,p;for(e=new o.BufferGeometry,e.name=a,u.push(e),c=this.readU32(),h=this._ptr+c,this.parseProperties({1:this._geoNrType,2:this._geoNrType});this._ptr<h;){var d=0,f=this.readU8(),m=(this.readU8(),this.readU32()),v=m+this._ptr;if(1===f)for(r=new Float32Array(m/12*3),p=new o.BufferAttribute(r,3),e.addAttribute("position",p),d=0;this._ptr<v;)r[d]=-this.readF32(),r[d+1]=this.readF32(),r[d+2]=this.readF32(),d+=3;else if(2===f)for(r=new Uint16Array(m/2),p=new o.BufferAttribute(r,1),e.setIndex(p),d=0;this._ptr<v;)r[d+1]=this.readU16(),r[d]=this.readU16(),r[d+2]=this.readU16(),d+=3;else if(3===f)for(r=new Float32Array(m/8*2),p=new o.BufferAttribute(r,2),e.addAttribute("uv",p),d=0;this._ptr<v;)r[d]=this.readF32(),r[d+1]=1-this.readF32(),d+=2;else if(4===f)for(r=new Float32Array(m/12*3),p=new o.BufferAttribute(r,3),e.addAttribute("normal",p),d=0;this._ptr<v;)r[d]=-this.readF32(),r[d+1]=this.readF32(),r[d+2]=this.readF32(),d+=3;else if(6==f)for(n=new Float32Array(m>>1),d=0;this._ptr<v;)n[d]=this.readU16(),d++;else if(7==f)for(i=new Float32Array(m>>2),d=0;this._ptr<v;)i[d]=this.readF32(),d++;else this._ptr=v}this.parseUserAttributes(),e.computeBoundingSphere(),l++}return this.parseUserAttributes(),u},parseMeshPoseAnimation:function(e,t){var r,i,n,a,s,l,u,c,h,p,d=1,f=0,m={},v=[],g=(this.readUTF(),this.readU32()),y=this.getBlock(g);if(null===y)return void console.log("parseMeshPoseAnimation target mesh not found at:",g);for(u=y.geometry,u.morphTargets=[],t||(d=this.readU16()),r=this.readU16(),c=this.readU16(),h=0;c>h;)v.push(this.readU16()),h++;for(p=this.parseProperties({1:M,2:M}),m.looping=p.get(1,!0),m.stitchFinalFrame=p.get(2,!1),i=0;d>i;){for(a=this.readU16(),n=0;r>n;)for(h=0,s=this.readU32(),l=this._ptr+s;c>h;){if(1===v[h]){var b=new Float32Array(s/4);for(f=0;this._ptr<l;)b[f]=this.readF32(),b[f+1]=this.readF32(),b[f+2]=this.readF32(),f+=3;for(var _=[],x=0;x<b.length;x+=3)_.push(new o.Vector3(b[x],b[x+1],b[x+2]));u.morphTargets.push({vertices:_,name:"morphTarget"+(i+1)}),n++}else this._ptr=l;h++}i++}return this.parseUserAttributes(),null},getBlock:function(e){return this._blocks[e].data},parseMatrix4:function(){var e=new o.Matrix4,t=e.elements;return t[0]=this.readF32(),t[1]=this.readF32(),t[2]=this.readF32(),t[3]=0,t[4]=this.readF32(),t[5]=this.readF32(),t[6]=this.readF32(),t[7]=0,t[8]=this.readF32(),t[9]=this.readF32(),t[10]=this.readF32(),t[11]=0,t[12]=-this.readF32(),t[13]=this.readF32(),t[14]=this.readF32(),t[15]=1,e},parseProperties:function(e){var t=this.readU32(),r=this._ptr+t,i=new k;if(e)for(;this._ptr<r;){var n,a=this.readU16(),o=this.readU32();e.hasOwnProperty(a)?(n=e[a],i.set(a,this.parseAttrValue(n,o))):this._ptr+=o}return i},parseUserAttributes:function(){return this._ptr=this.readU32()+this._ptr,null},parseAttrValue:function(e,t){var r,i;switch(e){case s:r=1,i=this.readI8;break;case l:r=2,i=this.readI16;break;case u:r=4,i=this.readI32;break;case m:case c:r=1,i=this.readU8;break;case h:r=2,i=this.readU16;break;case p:case v:r=4,i=this.readU32;break;case d:r=4,i=this.readF32;break;case f:r=8,i=this.readF64;break;case g:case y:case b:case _:case x:case w:case T:r=8,i=this.readF64}if(t>r){var n,a,o;for(n=[],a=0,o=t/r;o>a;)n.push(i.call(this)),a++;return n}return i.call(this)},readU8:function(){return this._data.getUint8(this._ptr++)},readI8:function(){return this._data.getInt8(this._ptr++)},readU16:function(){var e=this._data.getUint16(this._ptr,O);return this._ptr+=2,e},readI16:function(){var e=this._data.getInt16(this._ptr,O);return this._ptr+=2,e},readU32:function(){var e=this._data.getUint32(this._ptr,O);return this._ptr+=4,e},readI32:function(){var e=this._data.getInt32(this._ptr,O);return this._ptr+=4,e},readF32:function(){var e=this._data.getFloat32(this._ptr,O);return this._ptr+=4,e},readF64:function(){var e=this._data.getFloat64(this._ptr,O);return this._ptr+=8,e},readUTF:function(){var e=this.readU16();return this.readUTFBytes(e)},readUTFBytes:function(e){for(var t=[],r=0;t.length<e;){var i=this._data.getUint8(this._ptr++,O);if(128>i)t[r++]=String.fromCharCode(i);else if(i>191&&224>i){var n=this._data.getUint8(this._ptr++,O);t[r++]=String.fromCharCode((31&i)<<6|63&n)}else{var n=this._data.getUint8(this._ptr++,O),a=this._data.getUint8(this._ptr++,O);t[r++]=String.fromCharCode((15&i)<<12|(63&n)<<6|63&a)}}return t.join("")}},r["default"]=L,t.exports=r["default"]},{three:27}],81:[function(e){(function(e){"use strict";function t(){}function r(){}function i(){}function n(){this.skinIndices=[],this.skinWeights=[],this.matrices=[]}function a(){this.hierarchy=[]}function o(){this.node=null,this.name=null,this.id=null,this.vertices=[],this.indices=[],this.normals=[],this.uvs=[],this.bones=[],this.skins=null}function s(){this.uv=null,this.map=null,this.ref=null,this.node=null,this.index=null}
function l(){this.normal=null,this.map=null,this.ref=null,this.node=null,this.index=null}function u(){this.version=null,this.id=null,this.internalId=null,this.times=null,this.values=null,this.attrFlag=null,this.attrData=null}function c(){this.id=null,this.attr=null,this.attrX=!1,this.attrY=!1,this.attrZ=!1,this.internalId=null,this.containerInternalId=null,this.containerBoneId=null,this.curveIdx=null,this.curves=[]}function h(){this.curves={},this.length=0,this.fps=35,this.frames=0}function p(){this.textures=[],this.perGeoMap={}}function d(){this.fileName="",this.name="",this.id=null,this.parentIds=[]}function f(){this.materials=[],this.perGeoMap={}}function m(){this.fileName="",this.name="",this.id=null,this.parentIds=[]}function v(e,t,r){for(var i=[],n=0;n<t.length;++n)for(var a=0;r>a;++a)i.push(e[t[n]*r+a]);return i}function g(e,t,r){for(var i={},n=[],a=0,o=0;o<t.length;++o)if(!(t[o]in i)){i[t[o]]={};for(var s=0;r>s;++s)i[t[o]][s]=e[o*r+s];a=a<t[o]?t[o]:a}try{for(o=0;a>=o;o++)for(var l=0;r>l;l++)n.push(i[o][l])}catch(u){}return n}e.FBXLoader=function(t){e.Loader.call(this),this.manager=void 0!==t?t:e.DefaultLoadingManager,this.textureLoader=null,this.textureBasePath=null},e.FBXLoader.prototype=Object.create(e.Loader.prototype),e.FBXLoader.prototype.constructor=e.FBXLoader,e.FBXLoader.prototype.load=function(t,r,i,n){var a=this,o=new e.FileLoader(a.manager);o.load(t,function(e){a.isFbxFormatASCII(e)?a.isFbxVersionSupported(e)?(a.textureBasePath=a.extractUrlBase(t),r(a.parse(e))):console.warn("FBXLoader: !!! FBX Version below 7 not supported !!!"):console.warn("FBXLoader: !!! FBX Binary format not supported !!!")},i,n)},e.FBXLoader.prototype.setCrossOrigin=function(e){this.crossOrigin=e},e.FBXLoader.prototype.isFbxFormatASCII=function(e){for(var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],r=0,i=function(t){var i=e[t-1];return e=e.slice(r+t),r++,i},n=0;n<t.length;++n){var a=i(1);if(a==t[n])return!1}return!0},e.FBXLoader.prototype.isFbxVersionSupported=function(e){var t=/FBXVersion: (\d+)/,r=e.match(t);if(r){var i=parseInt(r[1]);return console.log("FBXLoader: FBX version "+i),i>=7e3}return!1},e.FBXLoader.prototype.parse=function(t){var i=this,o=(new r).parse(t);i.hierarchy=(new a).parseHierarchy(o),i.weights=(new n).parse(o,i.hierarchy),i.animations=(new h).parse(o,i.hierarchy);for(var s=this.parseGeometries(o),l=new e.Group,u=0;u<s.length;++u)void 0!==s[u]&&l.add(s[u]);return l},e.FBXLoader.prototype.parseGeometries=function(e){if(!("Geometry"in e.Objects.subNodes))return[];var t=0;for(var r in e.Objects.subNodes.Geometry)r.match(/^\d+$/)&&t++;var i=[];if(t>0)for(r in e.Objects.subNodes.Geometry)"Mesh"===e.Objects.subNodes.Geometry[r].attrType&&i.push(this.parseGeometry(e.Objects.subNodes.Geometry[r],e));else i.push(this.parseGeometry(e.Objects.subNodes.Geometry,e));return i},e.FBXLoader.prototype.parseGeometry=function(t){var r=(new o).parse(t);r.addBones(this.hierarchy.hierarchy);var i=new e.BufferGeometry;i.name=r.name,i.addAttribute("position",new e.BufferAttribute(new Float32Array(r.vertices),3)),void 0!==r.normals&&r.normals.length>0&&i.addAttribute("normal",new e.BufferAttribute(new Float32Array(r.normals),3)),void 0!==r.uvs&&r.uvs.length>0&&i.addAttribute("uv",new e.BufferAttribute(new Float32Array(r.uvs),2)),void 0!==r.indices&&r.indices.length>65535?i.setIndex(new e.BufferAttribute(new Uint32Array(r.indices),1)):void 0!==r.indices&&i.setIndex(new e.BufferAttribute(new Uint16Array(r.indices),1)),i.verticesNeedUpdate=!0,i.computeBoundingSphere(),i.computeBoundingBox();var n,a;a=new e.MeshBasicMaterial(void 0!==n?{map:n}:{color:3342591}),i=(new e.Geometry).fromBufferGeometry(i),i.bones=r.bones,i.skinIndices=this.weights.skinIndices,i.skinWeights=this.weights.skinWeights;var s=null;return void 0===r.bones||void 0===r.skins||void 0===this.animations||0===this.animations.length?s=new e.Mesh(i,a):(a.skinning=!0,s=new e.SkinnedMesh(i,a),this.addAnimation(s,this.weights.matrices,this.animations)),s},e.FBXLoader.prototype.addAnimation=function(t,r,i){for(var n={name:"animationtest",fps:30,length:i.length,hierarchy:[]},a=0;a<t.geometry.bones.length;++a){var o=t.geometry.bones[a].name;o=o.replace(/.*:/,""),n.hierarchy.push({parent:t.geometry.bones[a].parent,name:o,keys:[]})}for(var s=function(e,t){if(void 0===e)return!1;var r;switch(t){case"S":if(void 0===e.S)return!1;r=e.S;break;case"R":if(void 0===e.R)return!1;r=e.R;break;case"T":if(void 0===e.T)return!1;r=e.T}return void 0===r.curves.x?!1:void 0===r.curves.y?!1:void 0===r.curves.z?!1:!0},l=function(e,t){var r=u(e.curves.x,t),i=u(e.curves.y,t),n=u(e.curves.z,t);return r&&i&&n},u=function(e,t){var r=e.values[t];return void 0!==r},c=function(t,r){var i={};if(i.time=p/30,i.pos=r.pos,i.rot=r.rotq,i.scl=r.scl,void 0===t)return i;try{if(s(t,"T")&&l(t.T,p)){var n=new e.Vector3(t.T.curves.x.values[p],t.T.curves.y.values[p],t.T.curves.z.values[p]);i.pos=[n.x,n.y,n.z]}else delete i.pos;if(s(t,"R")&&l(t.R,p)){var a=_(t.R.curves.x.values[p]),o=_(t.R.curves.y.values[p]),u=_(t.R.curves.z.values[p]),c=new e.Vector3(a,o,u),h=x(c.x,c.y,c.z);i.rot=[h.x,h.y,h.z,h.w]}else delete i.rot;if(s(t,"S")&&l(t.S,p)){var d=new e.Vector3(t.S.curves.x.values[p],t.S.curves.y.values[p],t.S.curves.z.values[p]);i.scl=[d.x,d.y,d.z]}else delete i.scl}catch(f){console.log(r),console.log(f)}return i},h=t.geometry.bones,p=0;p<i.frames;p++)for(a=0;a<h.length;a++)for(var d=h[a],f=i.curves[a],m=0;m<n.hierarchy.length;m++)n.hierarchy[m].name===d.name&&n.hierarchy[m].keys.push(c(f,d));void 0===t.geometry.animations&&(t.geometry.animations=[]),t.geometry.animations.push(e.AnimationClip.parseAnimation(n,t.geometry.bones))},e.FBXLoader.prototype.loadFile=function(t,r,i,n,a){var o=new e.FileLoader(this.manager);o.setResponseType(a);var s=o.load(t,function(e){r(e)},i,n);return s},e.FBXLoader.prototype.loadFileAsBuffer=function(e,t,r,i){this.loadFile(e,onLoad,r,i,"arraybuffer")},e.FBXLoader.prototype.loadFileAsText=function(e,t,r,i){this.loadFile(e,t,r,i,"text")},t.prototype.add=function(e,t){this[e]=t},t.prototype.searchConnectionParent=function(e){if(void 0===this.__cache_search_connection_parent&&(this.__cache_search_connection_parent=[]),void 0!==this.__cache_search_connection_parent[e])return this.__cache_search_connection_parent[e];this.__cache_search_connection_parent[e]=[];for(var t=this.Connections.properties.connections,r=[],i=0;i<t.length;++i)if(t[i][0]==e){var n=0===t[i][1]?-1:t[i][1];r.push(n)}return r.length>0?(this.__cache_search_connection_parent[e]=this.__cache_search_connection_parent[e].concat(r),r):(this.__cache_search_connection_parent[e]=[-1],[-1])},t.prototype.searchConnectionChildren=function(e){if(void 0===this.__cache_search_connection_children&&(this.__cache_search_connection_children=[]),void 0!==this.__cache_search_connection_children[e])return this.__cache_search_connection_children[e];this.__cache_search_connection_children[e]=[];for(var t=this.Connections.properties.connections,r=[],i=0;i<t.length;++i)t[i][1]==e&&r.push(0===t[i][0]?-1:t[i][0]);return r.length>0?(this.__cache_search_connection_children[e]=this.__cache_search_connection_children[e].concat(r),r):(this.__cache_search_connection_children[e]=[-1],[-1])},t.prototype.searchConnectionType=function(e,t){var r=e+","+t;if(void 0===this.__cache_search_connection_type&&(this.__cache_search_connection_type={}),void 0!==this.__cache_search_connection_type[r])return this.__cache_search_connection_type[r];this.__cache_search_connection_type[r]="";for(var i=this.Connections.properties.connections,n=0;n<i.length;++n)if(i[n][0]==e&&i[n][1]==t)return this.__cache_search_connection_type[r]=i[n][2],i[n][2];return this.__cache_search_connection_type[e]=null,null},r.prototype={getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new t,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var r=e.split("\n");for(var i in r){var n=r[i];if(!n.match(/^[\s\t]*;/)&&!n.match(/^[\s\t]*$/)){var a=new RegExp("^\\t{"+this.currentIndent+"}(\\w+):(.*){",""),o=n.match(a);if(o){var s=o[1].trim().replace(/^"/,"").replace(/"$/,""),l=o[2].split(",").map(function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")});this.parseNodeBegin(n,s,l||null)}else{var u=new RegExp("^\\t{"+this.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),o=n.match(u);if(o){var c=o[1].replace(/^"/,"").replace(/"$/,"").trim(),h=o[2].replace(/^"/,"").replace(/"$/,"").trim();this.parseNodeProperty(n,c,h)}else{var p=new RegExp("^\\t{"+(this.currentIndent-1)+"}}");n.match(p)?this.nodeEnd():n.match(/^[^\s\t}]/)&&this.parseNodePropertyContinued(n)}}}}return this.allNodes},parseNodeBegin:function(e,t,r){var i={name:t,properties:{},subNodes:{}},n=this.parseNodeAttr(r),a=this.getCurrentNode();if(0===this.currentIndent)this.allNodes.add(t,i);else if(t in a.subNodes){var o=a.subNodes[t];this.isFlattenNode(a.subNodes[t])&&(""===n.id?(a.subNodes[t]=[],a.subNodes[t].push(o)):(a.subNodes[t]={},a.subNodes[t][o.id]=o)),""===n.id?a.subNodes[t].push(i):a.subNodes[t][n.id]=i}else a.subNodes[t]=i;r&&(i.id=n.id,i.attrName=n.name,i.attrType=n.type),this.pushStack(i)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var r,i;return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:t,name:r||"",type:i||""}},parseNodeProperty:function(e,t,r){var i=this.getCurrentNode(),n=i.name;if(void 0!==n){var a=n.match(/Properties(\d)+/);if(a)return void this.parseNodeSpecialProperty(e,t,r)}if("C"==t){var o=r.split(",").slice(1),s=parseInt(o[0]),l=parseInt(o[1]),u=r.split(",").slice(3);t="connections",r=[s,l],r=r.concat(u),void 0===i.properties[t]&&(i.properties[t]=[])}if("Node"==t){var c=parseInt(r);i.properties.id=c,i.id=c}t in i.properties?Array.isArray(i.properties[t])?i.properties[t].push(r):i.properties[t]+=r:Array.isArray(i.properties[t])?i.properties[t].push(r):i.properties[t]=r,this.setCurrentProp(i.properties,t)},parseNodePropertyContinued:function(e){this.currentProp[this.currentPropName]+=e},parseNodeSpecialProperty:function(t,r,i){var n=i.split('",').map(function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")}),a=n[0],o=n[1],s=n[2],l=n[3],u=n[4];switch(o){case"int":u=parseInt(u);break;case"double":u=parseFloat(u);break;case"ColorRGB":case"Vector3D":var c=u.split(",");u=new e.Vector3(c[0],c[1],c[2])}this.getPrevNode().properties[a]={type:o,type2:s,flag:l,value:u},this.setCurrentProp(this.getPrevNode().properties,a)},nodeEnd:function(){this.popStack()},isFlattenNode:function(e){return"subNodes"in e&&"properties"in e?!0:!1}},i.prototype={},n.prototype.parseCluster=function(e,t,r){var i=e.searchConnectionParent(t),n=w(r.subNodes.Indexes.properties.a.split(",")),a=T(r.subNodes.Weights.properties.a.split(",")),o=S(T(r.subNodes.Transform.properties.a.split(","))),s=S(T(r.subNodes.TransformLink.properties.a.split(",")));return{parent:i,id:parseInt(t),indices:n,weights:a,transform:o,transformlink:s,linkMode:r.properties.Mode}},n.prototype.parse=function(t,r){this.skinIndices=[],this.skinWeights=[],this.matrices=[];var i=t.Objects.subNodes.Deformer,n={};for(var a in i)if("Cluster"===i[a].attrType){if(!("Indexes"in i[a].subNodes))continue;var o=this.parseCluster(t,a,i[a]),s=t.searchConnectionChildren(o.id)[0];n[s]=o}for(var l=[],u=r.hierarchy,c=0;c<u.length;++c){var h=u[c].internalId;if(void 0!==n[h]){var p=n[h];this.matrices.push(p.transform);for(var d=0;d<p.indices.length;++d){void 0===l[p.indices[d]]&&(l[p.indices[d]]={},l[p.indices[d]].joint=[],l[p.indices[d]].weight=[]);var f=t.searchConnectionChildren(p.id);f.length>1&&console.warn("FBXLoader: node "+p.id+" have many weight kids: "+f),l[p.indices[d]].joint.push(r.getBoneIdfromInternalId(t,f[0])),l[p.indices[d]].weight.push(p.weights[d])}}else this.matrices.push(new e.Matrix4)}for(var m=0;m<l.length;m++){var v=new e.Vector4(l[m].joint[0]?l[m].joint[0]:0,l[m].joint[1]?l[m].joint[1]:0,l[m].joint[2]?l[m].joint[2]:0,l[m].joint[3]?l[m].joint[3]:0),g=new e.Vector4(l[m].weight[0]?l[m].weight[0]:0,l[m].weight[1]?l[m].weight[1]:0,l[m].weight[2]?l[m].weight[2]:0,l[m].weight[3]?l[m].weight[3]:0);this.skinIndices.push(v),this.skinWeights.push(g)}return this},a.prototype.parseHierarchy=function(t){var r=t.Objects,i=r.subNodes.Model,n=[];for(var a in i)void 0!==i[a].attrType&&n.push(i[a]);this.hierarchy=[];for(var o=0;o<n.length;++o){var s=n[o],l=t.searchConnectionParent(s.id)[0],u=[0,0,0],c=[0,0,0,1],h=[1,1,1];if("Lcl_Translation"in s.properties&&(u=T(s.properties.Lcl_Translation.value.split(","))),"Lcl_Rotation"in s.properties){c=M(T(s.properties.Lcl_Rotation.value.split(",")));var p=new e.Quaternion;p.setFromEuler(new e.Euler(c[0],c[1],c[2],"ZYX")),c=[p.x,p.y,p.z,p.w]}"Lcl_Scaling"in s.properties&&(h=T(s.properties.Lcl_Scaling.value.split(",")));var d=s.attrName;d=d.replace(/:/,""),d=d.replace(/_/,""),d=d.replace(/-/,""),this.hierarchy.push({parent:l,name:d,pos:u,rotq:c,scl:h,internalId:s.id})}return this.reindexParentId(),this.restoreBindPose(t),this},a.prototype.reindexParentId=function(){for(var e=0;e<this.hierarchy.length;e++)for(var t=0;t<this.hierarchy.length;++t)if(this.hierarchy[e].parent==this.hierarchy[t].internalId){this.hierarchy[e].parent=t;break}},a.prototype.restoreBindPose=function(t){var r=t.Objects.subNodes.Pose;if(void 0!==r){for(var i=r.subNodes.PoseNode,n={},a={},o=0;o<i.length;++o){var s=S(i[o].subNodes.Matrix.properties.a.split(",")),l=S(i[o].subNodes.Matrix.properties.a.split(","));n[i[o].id]=s,a[i[o].id]=l}for(var u=0;u<this.hierarchy.length;++u){var c=this.hierarchy[u],h=c.internalId;if(void 0!==a[h]){for(var p,d=new e.Vector3(0,0,0),f=new e.Quaternion,m=new e.Vector3(1,1,1),v=t.searchConnectionParent(h),g=0;g<v.length;++g)if(this.isBoneNode(v[g])){p=v[g];break}if(void 0!==p&&void 0!==n[p]){var y=new e.Matrix4;y.getInverse(a[p]),y.multiply(n[h]),n[h]=y}n[h].decompose(d,f,m),c.pos=[d.x,d.y,d.z],c.rotq=[f.x,f.y,f.z,f.w],c.scl=[m.x,m.y,m.z]}}}},a.prototype.searchRealId=function(e){for(var t=0;t<this.hierarchy.length;t++)if(e==this.hierarchy[t].internalId)return t;return-1},a.prototype.getByInternalId=function(e){for(var t=0;t<this.hierarchy.length;t++)if(e==this.hierarchy[t].internalId)return this.hierarchy[t];return null},a.prototype.isBoneNode=function(e){for(var t=0;t<this.hierarchy.length;++t)if(e===this.hierarchy[t].internalId)return!0;return!1},a.prototype.getBoneIdfromInternalId=function(e,t){if(void 0===e.__cache_get_boneid_from_internalid&&(e.__cache_get_boneid_from_internalid=[]),void 0!==e.__cache_get_boneid_from_internalid[t])return e.__cache_get_boneid_from_internalid[t];for(var r=0;r<this.hierarchy.length;++r)if(this.hierarchy[r].internalId==t){return e.__cache_get_boneid_from_internalid[t]=r,r}return-1},o.prototype.parse=function(e){if(this.node=e,this.name=e.attrName,this.id=e.id,this.vertices=this.getVertices(),void 0===this.vertices)return void console.log("FBXLoader: Geometry.parse(): pass"+this.node.id);if(this.indices=this.getPolygonVertexIndices(),this.uvs=(new s).parse(this.node,this),this.normals=(new l).parse(this.node,this),this.getPolygonTopologyMax()>3){var t=this.convertPolyIndicesToTri(this.indices,this.getPolygonTopologyArray());this.indices=t.res,this.polyIndices=t.polyIndices}return this},o.prototype.getVertices=function(){if(this.node.__cache_vertices)return this.node.__cache_vertices;if(void 0===this.node.subNodes.Vertices)return console.warn("this.node: "+this.node.attrName+"("+this.node.id+") does not have Vertices"),this.node.__cache_vertices=void 0,null;var e=this.node.subNodes.Vertices.properties.a,t=e.split(",").map(function(e){return parseFloat(e)});return this.node.__cache_vertices=t,this.node.__cache_vertices},o.prototype.getPolygonVertexIndices=function(){if(this.node.__cache_indices&&this.node.__cache_poly_topology_max)return this.node.__cache_indices;if(void 0===this.node.subNodes)return console.error("this.node.subNodes undefined"),void console.log(this.node);if(void 0===this.node.subNodes.PolygonVertexIndex)return console.warn("this.node: "+this.node.attrName+"("+this.node.id+") does not have PolygonVertexIndex "),void(this.node.__cache_indices=void 0);for(var e=this.node.subNodes.PolygonVertexIndex.properties.a,t=e.split(","),r=1,i=null,n=[],a=0;a<t.length;++a){var o=parseInt(t[a]);0>o?(r>i&&(i=r),t[a]=-1^o,n.push(r),r=1):(t[a]=o,r++)}return null===i&&(console.warn("FBXLoader: topology N not found: "+this.node.attrName),console.warn(this.node),i=3),this.node.__cache_poly_topology_max=i,this.node.__cache_poly_topology_arr=n,this.node.__cache_indices=t,this.node.__cache_indices},o.prototype.getPolygonTopologyMax=function(){return this.node.__cache_indices&&this.node.__cache_poly_topology_max?this.node.__cache_poly_topology_max:(this.getPolygonVertexIndices(this.node),this.node.__cache_poly_topology_max)},o.prototype.getPolygonTopologyArray=function(){return this.node.__cache_indices&&this.node.__cache_poly_topology_max?this.node.__cache_poly_topology_arr:(this.getPolygonVertexIndices(this.node),this.node.__cache_poly_topology_arr)},o.prototype.convertPolyIndicesToTri=function(e,t){for(var r=[],i=0,n=0,a=0,o=[];i<e.length;){a=t[n];for(var s=0;a-3>=s;s++)r.push(e[i]),r.push(e[i+(a-2-s)]),r.push(e[i+(a-1-s)]),o.push(n);n++,i+=a}return{res:r,polyIndices:o}},o.prototype.addBones=function(e){this.bones=e},s.prototype.getUV=function(e){return this.node&&this.uv&&this.map&&this.ref?this.uv:this._parseText(e)},s.prototype.getMap=function(e){return this.node&&this.uv&&this.map&&this.ref?this.map:(this._parseText(e),this.map)},s.prototype.getRef=function(e){return this.node&&this.uv&&this.map&&this.ref?this.ref:(this._parseText(e),this.ref)},s.prototype.getIndex=function(e){return this.node&&this.uv&&this.map&&this.ref?this.index:(this._parseText(e),this.index)},s.prototype.getNode=function(e){return null!==this.node?this.node:(this.node=e.subNodes.LayerElementUV,this.node)},s.prototype._parseText=function(e){var t=this.getNode(e);if(void 0===t)return[];var r=0,i="";for(var n in t)n.match(/^\d+$/)&&(r++,i=n);r>0&&(console.warn("multi uv not supported"),t=t[n]);var a=t.subNodes.UVIndex.properties.a,o=t.subNodes.UV.properties.a,s=t.properties.MappingInformationType,l=t.properties.ReferenceInformationType;return this.uv=T(o.split(",")),this.index=w(a.split(",")),this.map=s,this.ref=l,this.uv},s.prototype.parse=function(e,t){this.uvNode=this.getNode(e),this.uv=this.getUV(e);var r=this.getMap(e),i=this.getRef(e),n=this.getIndex(e),a=t.getPolygonTopologyArray();switch(r){case"ByPolygonVertex":switch(i){case"Direct":this.uv=this.parseUV_ByPolygonVertex_Direct(this.uv,n,a,2);break;case"IndexToDirect":this.uv=this.parseUV_ByPolygonVertex_IndexToDirect(this.uv,n)}this.uv=g(this.uv,t.getPolygonVertexIndices(e),2);break;case"ByPolygon":switch(i){case"Direct":this.uv=this.parseUV_ByPolygon_Direct();break;case"IndexToDirect":this.uv=this.parseUV_ByPolygon_IndexToDirect()}}return this.uv},s.prototype.parseUV_ByPolygonVertex_Direct=function(e,t,r,i){return y(e,t,r,i)},s.prototype.parseUV_ByPolygonVertex_IndexToDirect=function(e,t){return v(e,t,2)},s.prototype.parseUV_ByPolygon_Direct=function(e){return console.warn("not implemented"),e},s.prototype.parseUV_ByPolygon_IndexToDirect=function(e){return console.warn("not implemented"),e},s.prototype.parseUV_ByVertex_Direct=function(e){return console.warn("not implemented"),e},l.prototype.getNormal=function(e){return this.node&&this.normal&&this.map&&this.ref?this.normal:(this._parseText(e),this.normal)},l.prototype.getMap=function(e){return this.node&&this.normal&&this.map&&this.ref?this.map:(this._parseText(e),this.map)},l.prototype.getRef=function(e){return this.node&&this.normal&&this.map&&this.ref?this.ref:(this._parseText(e),this.ref)},l.prototype.getNode=function(e){return this.node?this.node:(this.node=e.subNodes.LayerElementNormal,this.node)},l.prototype._parseText=function(e){var t=this.getNode(e);if(void 0===t)return void console.warn("node: "+e.attrName+"("+e.id+") does not have LayerElementNormal");var r=t.properties.MappingInformationType,i=t.properties.ReferenceInformationType,n=t.subNodes.Normals.properties.a;this.normal=T(n.split(",")),this.map=r,this.ref=i},l.prototype.parse=function(e,t){var r=this.getNormal(e),i=(this.getNode(e),this.getMap(e)),n=this.getRef(e),a=t.getPolygonVertexIndices(e),o=t.getPolygonTopologyArray(e);switch(i){case"ByPolygonVertex":switch(n){case"Direct":r=this.parseNormal_ByPolygonVertex_Direct(r,a,o,3);break;case"IndexToDirect":r=this.parseNormal_ByPolygonVertex_IndexToDirect()}break;case"ByPolygon":switch(n){case"Direct":r=this.parseNormal_ByPolygon_Direct();break;case"IndexToDirect":r=this.parseNormal_ByPolygon_IndexToDirect()}}return r},l.prototype.parseNormal_ByPolygonVertex_Direct=function(e,t,r,i){return y(e,t,r,i)},l.prototype.parseNormal_ByPolygonVertex_IndexToDirect=function(e){return console.warn("not implemented"),e},l.prototype.parseNormal_ByPolygon_Direct=function(e){return console.warn("not implemented"),e},l.prototype.parseNormal_ByPolygon_IndexToDirect=function(e){return console.warn("not implemented"),e},l.prototype.parseNormal_ByVertex_Direct=function(e){return console.warn("not implemented"),e},u.prototype.fromNode=function(e){return this.id=e.id,this.internalId=e.id,this.times=e.subNodes.KeyTime.properties.a,this.values=e.subNodes.KeyValueFloat.properties.a,this.attrFlag=e.subNodes.KeyAttrFlags.properties.a,this.attrData=e.subNodes.KeyAttrDataFloat.properties.a,this.times=T(this.times.split(",")),this.values=T(this.values.split(",")),this.attrData=T(this.attrData.split(",")),this.attrFlag=w(this.attrFlag.split(",")),this.times=this.times.map(function(e){return b(e)}),this},u.prototype.getLength=function(){return this.times[this.times.length-1]},c.prototype.fromNode=function(e,t,r){if(this.id=t.id,this.attr=t.attrName,this.internalId=t.id,!this.attr.match(/S|R|T/))return null;for(var i in t.properties)i.match(/X/)&&(this.attrX=!0),i.match(/Y/)&&(this.attrY=!0),i.match(/Z/)&&(this.attrZ=!0);this.containerIndices=e.searchConnectionParent(this.id),this.curveIdx=e.searchConnectionChildren(this.id);for(var n=this.containerIndices.length-1;n>=0;--n){var a=r.searchRealId(this.containerIndices[n]);if(a>=0&&(this.containerBoneId=a,this.containerId=this.containerIndices[n]),a>=0)break}return this},c.prototype.setCurve=function(e){this.curves.push(e)},h.prototype.parse=function(e,t){var r=e.Objects.subNodes.AnimationCurveNode,i=e.Objects.subNodes.AnimationCurve,n=[];for(var a in r)if(a.match(/\d+/)){var o=(new c).fromNode(e,r[a],t);n.push(o)}for(var s={},l=0;l<n.length;++l)null!==n[l]&&(s[n[l].id]=n[l]);var h=[],p=0;for(a in i)if(a.match(/\d+/)){var d=(new u).fromNode(i[a]);h.push(d),p=d.getLength()?d.getLength():p;var f=e.searchConnectionParent(d.id)[0],m=e.searchConnectionType(d.id,f);m.match(/X/)&&(m="x"),m.match(/Y/)&&(m="y"),m.match(/Z/)&&(m="z"),s[f].curves[m]=d}for(var v in s){var g=s[v].containerBoneId;void 0===this.curves[g]&&(this.curves[g]={}),this.curves[g][s[v].attr]=s[v]}return this.length=p,this.frames=this.length*this.fps,this},p.prototype.add=function(e){void 0===this.textures&&(this.textures=[]),this.textures.push(e);for(var t=0;t<e.parentIds.length;++t)void 0===this.perGeoMap[e.parentIds[t]]&&(this.perGeoMap[e.parentIds[t]]=[]),this.perGeoMap[e.parentIds[t]].push(this.textures[this.textures.length-1])},p.prototype.parse=function(e){var t=e.Objects.subNodes.Texture;for(var r in t){var i=(new d).parse(t[r],e);this.add(i)}return this},p.prototype.getById=function(e){return this.perGeoMap[e]},d.prototype.parse=function(e,t){return this.id=e.id,this.name=e.attrName,this.fileName=this.parseFileName(e.properties.FileName),this.parentIds=this.searchParents(this.id,t),this},d.prototype.parseFileName=function(e){if(void 0===e)return"";var t=e.split(/[\\\/]/);return t.length>0?t[t.length-1]:e},d.prototype.searchParents=function(e,t){var r=t.searchConnectionParent(e);return r},f.prototype.add=function(e){void 0===this.materials&&(this.materials=[]),this.materials.push(e);for(var t=0;t<e.parentIds.length;++t)void 0===this.perGeoMap[e.parentIds[t]]&&(this.perGeoMap[e.parentIds[t]]=[]),this.perGeoMap[e.parentIds[t]].push(this.materials[this.materials.length-1])},f.prototype.parse=function(e){var t=e.Objects.subNodes.Material;for(var r in t){var i=(new m).parse(t[r],e);this.add(i)}return this},f.prototype.getById=function(e){return this.perGeoMap[e]},m.prototype.parse=function(e,t){return console.log(e,t),this.id=e.id,this.name=e.attrName,this.type=e.properties.ShadingModel,console.log(this.type),this.parameters=this.getParameters(e.properties),this.parentIds=this.searchParents(this.id,t),this},m.prototype.getParameters=function(t){var r={};return r.color=(new e.Color).fromArray(T([t.DiffuseColor.value.x,t.DiffuseColor.value.y,t.DiffuseColor.value.z])),r.specular=(new e.Color).fromArray(T([t.SpecularColor.value.x,t.SpecularColor.value.y,t.SpecularColor.value.z])),r.shininess=t.Shininess.value,r.emissive=(new e.Color).fromArray(T([t.EmissiveColor.value.x,t.EmissiveColor.value.y,t.EmissiveColor.value.z])),r.emissiveIntensity=t.EmissiveFactor.value,r.reflectivity=t.Reflectivity.value,r.opacity=t.Opacity.value,r.opacity<1&&(r.transparent=!0),r},m.prototype.searchParents=function(e,t){var r=t.searchConnectionParent(e);return r};var y=function(e,t,r,i){for(var n=[],a=0,o=0;o<t.length;++o){n[t[o]]=[];for(var s=0;i>s;++s)n[t[o]][s]=e[a+s];a+=i}for(var l=[],u=0;u<n.length;++u)if(void 0!==n[u])for(var c=0;i>c;++c)void 0!==n[u][c]&&l.push(n[u][c]);return l},b=function(e){return e/46186158e3},_=function(e){return e*Math.PI/180},x=function(t,r,i){var n=new e.Euler(t,r,i,"ZYX"),a=new e.Quaternion;return a.setFromEuler(n),a},w=function(e){return e.map(function(e){return parseInt(e)})},T=function(e){return e.map(function(e){return parseFloat(e)})},M=function(e){return e.map(function(e){return _(e)})},S=function(t){var r=new e.Matrix4;return r.set(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]),r}}).call(this,e("three"))},{three:27}],82:[function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e("signals/Keyboard"),l=(n(s),e("signals/Store")),u=n(l),c=e("utils/math/loop-index"),h=n(c),p=e("gl/cameras"),d=i(p),f=function(){function e(t){var r=t.scene,i=t.cameras,n=void 0===i?[]:i;a(this,e),this.scene=r,this.cameras=n,this.addHelpers(),this.camera=this.getDefaultCamera(),this.cameraId=this.getCameraIndex(this.camera),this.camera.cameraHelper.visible=!1,this.addSignals()}return o(e,[{key:"addSignals",value:function(){}},{key:"removeSignals",value:function(){}},{key:"handleKeydown",value:function(e){var t=e.keyCode;219===t&&this.nextCamera()}},{key:"addHelpers",value:function(){for(var e=0,t=this.cameras.length;t>e;e++)this.scene.add(this.cameras[e].cameraHelper)}},{key:"getDefaultCamera",value:function(){for(var e=0,t=this.cameras.length;t>e;e++)if(this.cameras[e].isDefault)return this.cameras[e];return this.cameras[0]}},{key:"getCameraIndex",value:function(e){for(var t=0,r=this.cameras.length;r>t;t++)if(this.cameras[t]===e)return t}},{key:"nextCamera",value:function t(){this.cameraId++;var t=h["default"](this.cameraId,this.cameras.length);this.changeCamera(t)}},{key:"prevCamera",value:function r(){this.cameraId--;var r=h["default"](this.cameraId,this.cameras.length);this.changeCamera(r)}},{key:"changeCamera",value:function(e){var t=this.camera;t.cameraHelper.visible=!0,t instanceof d.OrbitCamera&&(this.camera.controls.enabled=!1),this.camera=this.cameras[e],this.camera instanceof d.OrbitCamera&&(this.camera.controls.enabled=!0),this.camera.cameraHelper.visible=!1,u["default"].postProcessing.camera=this.camera}},{key:"dispose",value:function(){this.removeSignals();for(var e=0,t=this.cameras.length;t>e;e++)this.cameras[e].dispose()}},{key:"update",value:function(e,t){for(var r=0,i=this.cameras.length;i>r;r++)this.cameras[r].update(e,t)}}]),e}();r["default"]=f,t.exports=r["default"]},{"gl/cameras":66,"signals/Keyboard":162,"signals/Store":166,"utils/math/loop-index":182}],83:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function _(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:_(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("gl/helpers/GUI"),h=n(c),p=e("managers/AssetsManager"),d=e("consts/characters"),f=n(d),m=e("gl/meshes/Character/Character"),v=n(m),g=e("gl/meshes/AnimatedCharacter/AnimatedCharacter"),y=n(g),b=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.configuration=e,r.characters=[],r.createCharacters(),r.createGUI(),r}return s(t,e),l(t,[{key:"createCharacters",value:function(){for(var e=0,t=this.configuration.length;t>e;e++){var r=this.createCharacter(this.configuration[e]);this.characters.push(r),this.add(r)}}},{key:"createCharacter",value:function(e){var t=e.name,r=e.model,i=e.material,n=e.loop,a=e.duration,o=e.type,s=e.audio,l=void 0===s?!1:s,u=e.spline,c=void 0===u?{}:u,h=void 0;switch(o){case f["default"].ANIMATED:h=new y["default"]({name:t,material:i,model:p.assets[r],points:p.assets.splines[c.name],loop:n,duration:a,audio:l,lookAtOffset:c.lookAtOffset}),h.spline.setScale(c.scale),h.spline.setOffset(c.offset);break;case f["default"].DEFAULT:default:h=new v["default"]({name:t,material:i,model:p.assets[r],duration:a,audio:l})}return h}},{key:"createGUI",value:function(){this.gui=h["default"].addFolder("Character manager"),this.gui.add(this,"play").name("Play"),this.gui.add(this,"stop").name("Stop");for(var e=this.gui.addFolder("Characters"),t=0,r=this.characters.length;r>t;t++)this.characters[t].createGUI(e)}},{key:"get",value:function(e){return this.characters.find(function(t){return t.name===e})}},{key:"play",value:function(){for(var e=0,t=this.characters.length;t>e;e++)this.characters[e].playAnimations()}},{key:"stop",value:function(){for(var e=0,t=this.characters.length;t>e;e++)this.characters[e].stopAnimations()}},{key:"remove",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),h["default"].removeFolder("Character manager")}},{key:"update",value:function(e,t){for(var r=0,i=this.characters.length;i>r;r++)this.characters[r].update(e,t);

}}]),t}(i.Object3D);r["default"]=b,t.exports=r["default"]}).call(this,e("three"))},{"consts/characters":49,"gl/helpers/GUI":77,"gl/meshes/AnimatedCharacter/AnimatedCharacter":92,"gl/meshes/Character/Character":93,"managers/AssetsManager":153,three:27}],84:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e("gl/scenes"),l=n(s),u=e("gl/helpers/GUI"),c=i(u),h=e("consts/scenes"),p=i(h),d=e("signals/Keyboard"),f=i(d),m=e("signals/Scene"),v=i(m),g=e("signals/Store"),y=i(g),b=e("gl/postProcessing/PostProcessing"),_=i(b),x=e("config/postProcessing"),w=i(x),T=function(){function e(t){var r=t.domEl,i=t.renderer;a(this,e),this.domEl=r,this.renderer=i,this.sceneName=null,this.scene=null,this.handleKeydown=this.handleKeydown.bind(this),this.changeScene=this.changeScene.bind(this),this.changeScene(e.DEFAULT_SCENE),this.postProcessing=new _["default"]({scene:this.scene,camera:this.scene.cameraManager.camera,renderer:this.renderer,config:w["default"]}),this.scene.create(),this.addSignals(),this.addGUI()}return o(e,[{key:"addSignals",value:function(){f["default"].keydown.add(this.handleKeydown),v["default"].change.add(this.changeScene)}},{key:"removeSignals",value:function(){f["default"].keydown.remove(this.handleKeydown),v["default"].change.remove(this.changeScene)}},{key:"addGUI",value:function(){var e={};for(var t in l){var r=l[t];e[r.name]=t}var i=c["default"].addFolder("Scene manager");i.add(this,"sceneName",e).onChange(this.changeScene).name("Active scene")}},{key:"instanciateScene",value:function(e){this.sceneName=e;var t=new l[e]({domEl:this.domEl,renderer:this.renderer,name:e});return t.init(),v["default"].changed.dispatch(e),y["default"].scene=t,t}},{key:"changeScene",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.DEFAULT_SCENE;return this.scene?!function(){var e=t.scene;e.dispose(),document.body.classList.remove(e.name+"-scene"),t.updateProgression(),e.leaveAnimation().eventCallback("onComplete",function(){e.disposeTls(),t.scene=t.instanciateScene(r),t.scene.create(),t.scene.start(),y["default"].progression===y["default"].nbExperiences&&t.scene.name===p["default"].MAIN.name&&(document.body.classList.add("end"),v["default"].end.dispatch()),document.body.classList.add(t.scene.name+"-scene"),t.postProcessing.scene=t.scene,t.postProcessing.camera=t.scene.cameraManager.camera})}():(this.scene=this.instanciateScene(r),document.body.classList.add(this.scene.name+"-scene")),this.scene}},{key:"updateProgression",value:function(){this.sceneName===p["default"].MAIN.name&&(y["default"].mainCompleted=!0,y["default"].progression++)}},{key:"handleKeydown",value:function(e){var t=e.keyCode,r=this.sceneName;switch(t){case 192:r=p["default"].MAIN.name;break;case 49:r=p["default"].TRAIN.name;break;case 50:r=p["default"].FIREPLACE.name}r!==this.sceneName}},{key:"update",value:function(e,t){this.postProcessing.update(e,t),this.scene.update(e,t)}}]),e}();T.DEFAULT_SCENE=p["default"].MAIN.name,r["default"]=T,t.exports=r["default"]},{"config/postProcessing":45,"consts/scenes":52,"gl/helpers/GUI":77,"gl/postProcessing/PostProcessing":121,"gl/scenes":139,"signals/Keyboard":162,"signals/Scene":165,"signals/Store":166}],85:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=e("signals/Timeline"),l=n(s),u=e("signals/Store"),c=n(u),h=e("signals/Subtitle"),p=n(h),d=e("utils/math/random-hex-color"),f=n(d),m=e("consts/checkpoints"),v=n(m),g=function(){function e(t){var r=t.scene;a(this,e),this.scene=r,this.lastTime=0,this.checkDelay=1500,this.checkpoints=v["default"].slice(0),this.createHelpers()}return o(e,[{key:"check",value:function(){for(var e=this,t=c["default"].scene.cameraController.cameraGroup.position,r=function(r){var i=e.checkpoints[r];t.distanceTo(i.position)<=i.distance&&(i.delay?setTimeout(function(){return e.dispatch(i)},i.delay):e.dispatch(i),i.once&&e.checkpoints.splice(r,1))},i=0;i<this.checkpoints.length;i++)r(i)}},{key:"dispatch",value:function(e){e.isSubtitle?p["default"].add.dispatch(e.name):l["default"][e.name].dispatch()}},{key:"createHelpers",value:function(){for(var e=0,t=this.checkpoints.length;t>e;e++){var r=this.checkpoints[e],n=new i.SphereBufferGeometry(r.distance,8,6),a=new i.MeshBasicMaterial({color:new i.Color(f["default"]()),wireframe:!0,transparent:!0,opacity:.2,fog:!1}),o=new i.Mesh(n,a);o.name="SphereHelper",o.position.copy(r.position),this.scene.add(o)}}},{key:"update",value:function(e,t){1e3*t>=this.lastTime+this.checkDelay&&this.checkpoints.length&&(this.lastTime=1e3*t,this.check())}}]),e}();r["default"]=g,t.exports=r["default"]}).call(this,e("three"))},{"consts/checkpoints":50,"signals/Store":166,"signals/Subtitle":167,"signals/Timeline":168,three:27,"utils/math/random-hex-color":186}],86:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),c=function x(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:x(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},h=e("signals/Window"),p=n(h),d=e("utils/math/random-float"),f=n(d),m=e("managers/AssetsManager"),v=e("./shaders/display.vert"),g=n(v),y=e("./shaders/display.frag"),b=n(y),_=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.type="ShaderMaterial",r.displayTexture=new i.Texture(m.assets[r.name+"DisplayTexture"]),r.displayTexture.needsUpdate=!0;var n=i.ShaderLib.basic,s=i.UniformsUtils.clone(n.uniforms);return r.uniforms=l({},s,{uTime:{value:0},uResolution:{value:new i.Vector2(p["default"].metrics.width,p["default"].metrics.height)},uDisplayTexture:{value:r.displayTexture},uTextureOpacity:{value:0}}),r.defines={USE_MAP:""},r.vertexShader=g["default"],r.fragmentShader=b["default"],r.offset=f["default"](0,50),r.speed=f["default"](.6,1.5),r.onResize=r.onResize.bind(r),r.addSignals(),r.createTls(),r}return s(t,e),u(t,[{key:"createTls",value:function(){this.hoverTl=new TimelineMax({paused:!0}),this.unHoverTl=new TimelineMax({paused:!0}),this.clickTl=new TimelineMax({paused:!0});var e=this.uniforms.uTextureOpacity,t=RoughEase.ease.config({template:Power0.easeNone,strength:1.5,points:30,taper:"none",randomize:!0,clamp:!0});this.hoverTl.to(e,.5,{value:.15,ease:t}),this.unHoverTl.to(e,.5,{value:0,ease:t}),this.clickTl.to(e,1,{value:1,ease:Expo.easeOut})}},{key:"completedDisplay",value:function(){this.uniforms.uTextureOpacity.value=1}},{key:"addSignals",value:function(){p["default"].resize.add(this.onResize)}},{key:"removeSignals",value:function(){p["default"].resize.remove(this.onResize)}},{key:"dispose",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this.displayTexture.dispose()}},{key:"onResize",value:function(e,t){this.uniforms.uResolution.value.set(e,t)}},{key:"update",value:function(e,t){this.uniforms.uTime.value=t*this.speed+this.offset}}]),t}(i.MeshBasicMaterial);r["default"]=_,t.exports=r["default"]}).call(this,e("three"))},{"./shaders/display.frag":87,"./shaders/display.vert":88,"managers/AssetsManager":153,"signals/Window":169,three:27,"utils/math/random-float":185}],87:[function(e,t){t.exports="#define GLSLIFY 1\nhighp float random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\nfloat mapValue(float value, float inMin, float inMax, float outMin, float outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvec2 mapValue(vec2 value, vec2 inMin, vec2 inMax, vec2 outMin, vec2 outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvec3 mapValue(vec3 value, vec3 inMin, vec3 inMax, vec3 outMin, vec3 outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvec4 mapValue(vec4 value, vec4 inMin, vec4 inMax, vec4 outMin, vec4 outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n	varying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>	\n\n// ====================\n// CUSTOM\n// ====================\nuniform float uTime;\nuniform vec2 uResolution;\nuniform sampler2D uDisplayTexture;\nuniform float uTextureOpacity;\n\nvec4 custom() {\n\n  vec4 customColor = vec4(0.0);\n\n  // Lines\n  // ---------------------------\n  float mx = 50.0;\n  float my = 8.0;\n\n  vec2 p = vUv;\n  p.x = mod(p.x + uTime, 0.01);\n  p.y /= mod(p.y + uTime, 0.01);\n  float z = random(vec2(p.x / my, p.y / mx));\n\n  customColor += vec4(vec3(z) * mapValue(sin(z + uTime * 1.5), -1.0, 1.0, 0.15, 0.6), 1.0);\n\n  // Display texture\n  // ---------------------------\n  vec4 displayColor = texture2D(uDisplayTexture, vUv);\n\n  vec4 finalColor = mix(customColor, displayColor, uTextureOpacity);\n\n  return finalColor;\n}\n// ====================\n\nvoid main() {\n\n	#include <clipping_planes_fragment>\n\n	vec4 diffuseColor = vec4( diffuse, opacity );\n\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n	// accumulation (baked indirect lighting only)\n	#ifdef USE_LIGHTMAP\n\n		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n	#else\n\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n\n	#endif\n\n	// modulation\n	#include <aomap_fragment>\n\n  diffuseColor = custom();\n\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n	#include <normal_flip>\n	#include <envmap_fragment>\n\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n\n}\n"},{}],88:[function(e,t){t.exports="#define GLSLIFY 1\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <skinbase_vertex>\n\n	#ifdef USE_ENVMAP\n\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n\n	#endif\n\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	#include <envmap_vertex>\n\n}\n"},{}],89:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),c=e("./shaders/instanced.vert"),h=n(c),p=e("./shaders/instanced.frag"),d=n(p),f=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r.type="ShaderMaterial",r.defines={};var n=i.ShaderLib.phong,s=i.UniformsUtils.clone(n.uniforms);return r.uniforms=l({},s,{uTime:{value:0},uModelHeight:{value:0},uWaveSpeed:{value:0},uWaveLength:{value:0},uBendAmount:{value:0}}),r.vertexShader=h["default"],r.fragmentShader=d["default"],r}return s(t,e),u(t,[{key:"update",value:function(e,t){this.uniforms.uTime.value=t}}]),t}(i.MeshPhongMaterial);r["default"]=f,t.exports=r["default"]}).call(this,e("three"))},{"./shaders/instanced.frag":90,"./shaders/instanced.vert":91,three:27}],90:[function(e,t){t.exports="#define GLSLIFY 1\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n	#include <clipping_planes_fragment>\n\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_flip>\n	#include <normal_fragment>\n	#include <emissivemap_fragment>\n\n	// accumulation\n	#include <lights_phong_fragment>\n	#include <lights_template>\n\n	// modulation\n	#include <aomap_fragment>\n\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n	#include <envmap_fragment>\n\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n\n}\n"},{}],91:[function(e,t){t.exports="#define GLSLIFY 1\nattribute vec3 offset;\nattribute float scale;\nattribute float orientation;\nattribute float random;\n\nuniform float uTime;\nuniform float uModelHeight;\n\nuniform float uWaveSpeed;\nuniform float uWaveLength;\nuniform float uBendAmount;\n\n// varying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nmat3 rotationMatrix(vec3 axis, float angle) {\n  axis = normalize(axis);\n  float s = sin(angle);\n  float c = cos(angle);\n  float oc = 1.0 - c;\n\n  return mat3(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,\n              oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,\n              oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c\n  );\n}\n\nfloat mapValue(float value, float inMin, float inMax, float outMin, float outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvec2 mapValue(vec2 value, vec2 inMin, vec2 inMax, vec2 outMin, vec2 outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvec3 mapValue(vec3 value, vec3 inMin, vec3 inMax, vec3 outMin, vec3 outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvec4 mapValue(vec4 value, vec4 inMin, vec4 inMax, vec4 outMin, vec4 outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n	#include <uv2_vertex>\n\n  mat3 rotation = rotationMatrix(vec3(0.0, 1.0, 0.0), orientation);\n\n  vec3 position = position * scale * rotation + offset;\n\n  vec4 viewModelPosition = modelViewMatrix * vec4(position, 1.0);\n\n  float modelHeight = uModelHeight * scale;\n\n  float mult = -position.y / modelHeight;\n\n  float s = sin((uTime + random * 10.0) * uWaveSpeed * mapValue(random, 0.0, 1.0, 0.3, 1.0) + mult * uWaveLength);\n  float wave = pow(mult, 2.0) * s * uBendAmount * mapValue(random, 0.0, 1.0, 0.3, 1.0);\n\n  viewModelPosition += vec4(wave, 0.0, 0.0, 0.0);\n\n  #include <begin_vertex>\n\n  transformed = position + vec3(wave, 0.0, 0.0);\n\n  vViewPosition = -viewModelPosition.xyz;\n\n	vec3 normal = normal * rotation;\n  // vNormal = normalize(normalMatrix * normal);\n\n  gl_Position = projectionMatrix * viewModelPosition;\n}\n"},{}],92:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=function m(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:m(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},u=e("gl/meshes/Character/Character"),c=i(u),h=e("gl/core/AnimatedSpline"),p=i(h),d={BASE_LOOP_DURATION:48,BASE_SPLINE_LENGTH:6e3,SPLINE:{DIVISIONS:200}},f=function(e){function t(e){var r=e.name,i=e.material,o=e.model,s=e.points,l=e.audio,u=e.loop,c=void 0===u?!0:u,h=e.duration,f=void 0===h?1:h,m=e.lookAtOffset,v=void 0===m?.01:m;n(this,t);var g=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:r,material:i,model:o,duration:f,audio:l}));return g.duration=f,g.lookAtOffset=v,g.weight=1,g.playing=!1,g.isTransitioning=!1,g.isPlayingTransitioning=!1,g.spline=new p["default"]({points:s,lookAtOffset:v,loop:c,divisions:d.SPLINE.DIVISIONS}),g.setLoopDuration(f),g.createHelpers(),g}return o(t,e),s(t,[{key:"createHelpers",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createHelpers",this).call(this),this.add(this.spline.helper)}},{key:"createGUI",value:function(e){var r=this,i=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createGUI",this).call(this,e);this.spline.createGUI(i),i.add(this,"duration",.01,10,.01).name("Duration").onChange(function(e){r.setLoopDuration(e),r.setAnimationsDuration(e)})}},{key:"setLoopDuration",value:function(e){this.spline.loopDuration=d.BASE_LOOP_DURATION*e*this.spline.getLength()/d.BASE_SPLINE_LENGTH}},{key:"playAnimations",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"playAnimations",this).call(this),this.playing=!0}},{key:"stopAnimations",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"stopAnimations",this).call(this),this.playing=!1}},{key:"fadeOutAnimations",value:function(){var e=this;TweenMax.to(this,2,{duration:2,weight:.8,ease:Power2.easeOut,onUpdate:function(){e.setLoopDuration(e.duration),e.setAnimationsDuration(e.duration),e.setAnimationsWeight(e.weight)}})}},{key:"update",value:function(e,r){var i=this;l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e,r),this.playing&&this.spline.playing&&(this.spline.update(e,r),this.spline.animate(this.skinnedMesh)),!this.isTransitioning&&this.spline.endReached&&(this.isTransitioning=!0,this.fadeOutAnimations()),this.isPlayingTransitioning||this.spline.playing||!function(){i.isPlayingTransitioning=!0;var e={timescale:i.actions[0].getEffectiveTimeScale()};TweenMax.to(e,1,{timescale:0,ease:Power2.easeOut,onUpdate:function(){i.setAnimationsTimeScale(e.timescale)}})}()}}]),t}(c["default"]);r["default"]=f,t.exports=r["default"]},{"gl/core/AnimatedSpline":68,"gl/meshes/Character/Character":93}],93:[function(e,t,r){(function(e){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=function u(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:u(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},l=function(t){function r(t){var a=t.name,o=t.material,s=t.model,l=t.duration,u=t.audio;i(this,r);var c=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));c.name=a,c.material=o,c.model=s,c.duration=l,c.audio=u;var h=new e.FBXLoader;return c.object=h.parse(c.model),c.skinnedMesh=c.object.children[0],c.geometry=c.skinnedMesh.geometry,c.animationClips=c.geometry.animations,c.actions=[],c.skinnedMesh.material=c.material,c.audio instanceof e.PositionalAudio&&c.skinnedMesh.add(c.audio),c.add(c.skinnedMesh),c.createAnimations(),c}return a(r,t),o(r,[{key:"createAnimations",value:function(){this.mixer=new e.AnimationMixer(this.skinnedMesh);for(var t=0,r=this.animationClips.length;r>t;t++){var i=this.animationClips[t],n=this.mixer.clipAction(i);n.setDuration(this.duration),this.actions.push(n)}}},{key:"setAnimationsDuration",value:function(e){for(var t=0,r=this.actions.length;r>t;t++)this.actions[t].setDuration(e)}},{key:"playAnimations",value:function(){for(var e=0,t=this.actions.length;t>e;e++)this.actions[e].play()}},{key:"stopAnimations",value:function(){for(var e=0,t=this.actions.length;t>e;e++)this.actions[e].stop()}},{key:"setAnimationsTimeScale",value:function(e){for(var t=0,r=this.actions.length;r>t;t++)this.actions[t].setEffectiveTimeScale(e)}},{key:"setAnimationsWeight",value:function(e){for(var t=0,r=this.actions.length;r>t;t++)this.actions[t].setEffectiveWeight(e)}},{key:"createHelpers",value:function(){this.skeletonHelper=new e.SkeletonHelper(this.skinnedMesh),this.skeletonHelper.name="SkeletonHelper",this.skeletonHelper.material.linewidth=1,this.skeletonHelper.material.visible=!0,this.add(this.skeletonHelper)}},{key:"createGUI",value:function(e){var t=e.addFolder(this.name);return t}},{key:"remove",value:function(){s(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"remove",this).call(this),this.mixer.stopAllAction();for(var e=0,t=this.animationClips.length;t>e;e++)this.mixer.uncacheClip(this.animationClips[e])}},{key:"update",value:function(e){this.mixer.update(e),this.skeletonHelper&&this.skeletonHelper.update()}}]),r}(e.Object3D);r["default"]=l,t.exports=r["default"]}).call(this,e("three"))},{three:27}],94:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),c=e("signals/Window"),h=n(c),p=e("utils/math/map"),d=n(p),f=e("./shaders/curl.vert"),m=n(f),v=e("./shaders/curl.frag"),g=n(v),y={TIME:{DAMPING:.04,AMPLITUDE:.2}},b=function(e){function t(e){var r=e.scene;a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.scene=r;for(var s={w2:h["default"].metrics.width/2,h2:h["default"].metrics.height/2},u=Math.pow(256,2),c=2e3,p=new Float32Array(3*u),d=0;d<p.length;d+=3)p[d+0]=s.w2/c-Math.random()*s.w2/(c/2),p[d+1]=s.h2/c-Math.random()*s.h2/(c/2),p[d+2]=820/c-820*Math.random()/(c/2);n.geometry=new i.BufferGeometry,n.geometry.addAttribute("position",new i.BufferAttribute(p,3));var f=i.UniformsLib.fog;return n.material=new i.ShaderMaterial({uniforms:l({color1:{value:new i.Color(15494448)},color2:{value:new i.Color(15909222)},color3:{value:new i.Color(12329498)},time:{value:0}},f),transparent:!0,fog:!0,vertexShader:m["default"],fragmentShader:g["default"]}),n.points=new i.Points(n.geometry,n.material),n.add(n.points),n.baseColor1HSL=n.material.uniforms.color1.value.clone().getHSL(),n.baseColor2HSL=n.material.uniforms.color2.value.clone().getHSL(),n.baseColor3HSL=n.material.uniforms.color3.value.clone().getHSL(),n}return s(t,e),u(t,[{key:"update",value:function(e,t){this.material.uniforms.time.value-=(this.material.uniforms.time.value+this.scene.amplitude+t*y.TIME.AMPLITUDE)*y.TIME.DAMPING,this.material.uniforms.color1.value.setHSL(this.baseColor1HSL.h,this.baseColor1HSL.s,d["default"](this.scene.amplitude,0,.8,.4,.6)),this.material.uniforms.color2.value.setHSL(this.baseColor1HSL.h,this.baseColor1HSL.s,d["default"](this.scene.amplitude,0,.8,.55,.7)),this.material.uniforms.color3.value.setHSL(this.baseColor1HSL.h,this.baseColor1HSL.s,d["default"](this.scene.amplitude,0,.8,.3,.6))}}]),t}(i.Object3D);r["default"]=b,t.exports=r["default"]}).call(this,e("three"))},{"./shaders/curl.frag":95,"./shaders/curl.vert":96,"signals/Window":169,three:27,"utils/math/map":183}],95:[function(e,t){t.exports="#define GLSLIFY 1\nvarying vec3 vPosition;\n\nuniform float time;\n\nuniform vec3 color1;\nuniform vec3 color2;\nuniform vec3 color3;\n\n#include <common>\n#include <fog_pars_fragment>\n\nfloat map(float value, float inMin, float inMax, float outMin, float outMax) {\n  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);\n}\n\nvoid main() {\n  vec3 color1 = mix(color1, color2, vPosition.x);\n  vec3 color2 = mix(color2, color3, vPosition.y);\n  vec3 color3 = mix(color1, color3, vPosition.z);\n\n  vec3 finalColor = (color1 + color2 + color3) / 3.0;\n  float alpha = map(distance(vPosition.xy, vec2(0.0)), 1.0, 0.0, 0.0, 0.8);\n\n  gl_FragColor = vec4(finalColor, alpha);\n\n  #ifdef USE_FOG\n    float density = 0.00025;\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n		float fogFactor = whiteCompliment( exp2( - density * density * depth * depth * LOG2 ) );\n\n	  gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n  #endif\n}\n"},{}],96:[function(e,t){t.exports="#define GLSLIFY 1\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nvec3 snoiseVec3( vec3 x ){\n\n  float s  = snoise(vec3( x ));\n  float s1 = snoise(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));\n  float s2 = snoise(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));\n  vec3 c = vec3( s , s1 , s2 );\n  return c;\n\n}\n\nvec3 curlNoise( vec3 p ){\n  \n  const float e = .1;\n  vec3 dx = vec3( e   , 0.0 , 0.0 );\n  vec3 dy = vec3( 0.0 , e   , 0.0 );\n  vec3 dz = vec3( 0.0 , 0.0 , e   );\n\n  vec3 p_x0 = snoiseVec3( p - dx );\n  vec3 p_x1 = snoiseVec3( p + dx );\n  vec3 p_y0 = snoiseVec3( p - dy );\n  vec3 p_y1 = snoiseVec3( p + dy );\n  vec3 p_z0 = snoiseVec3( p - dz );\n  vec3 p_z1 = snoiseVec3( p + dz );\n\n  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n\n  const float divisor = 1.0 / ( 2.0 * e );\n  return normalize( vec3( x , y , z ) * divisor );\n\n}\n\nvarying vec3 vPosition;\n\nuniform float time;\n\nvoid main() {\n  vec3 curlP = vec3(curlNoise(position + time + 67.0).x, curlNoise(position + time - 12.0).y, position.z);\n  curlP.y = abs(curlP.y);\n\n  vec4 mvPosition = modelViewMatrix * vec4(curlP, 1.0);\n\n  vPosition = curlP;\n\n  gl_Position = projectionMatrix * mvPosition;\n  gl_PointSize = 1.0;\n}\n";

},{}],97:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function m(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:m(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("gl/materials/DisplayMaterial/DisplayMaterial"),h=n(c),p=e("signals/Store"),d=n(p),f=function(e){function t(e){var r=e.mesh,i=e.configuration;a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.mesh=r,n.configuration=i,n.name=n.mesh.name,n.completed=!1,n.material=new h["default"]({name:n.name}),n.mesh.material=n.material,d["default"].progression>=n.configuration.id&&(n.completed=!0,n.material.completedDisplay()),n}return s(t,e),l(t,[{key:"remove",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.material.removeSignals(),this.material.dispose()}},{key:"update",value:function(e,t){this.material.update(e,t)}}]),t}(i.Object3D);r["default"]=f,t.exports=r["default"]}).call(this,e("three"))},{"gl/materials/DisplayMaterial/DisplayMaterial":86,"signals/Store":166,three:27}],98:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function M(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:M(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("signals/Mouse"),h=n(c),p=e("signals/Window"),d=n(p),f=e("signals/Scene"),m=n(f),v=e("signals/Store"),g=n(v),y=e("consts/scenes"),b=n(y),_=e("gl/meshes/Displays/Display"),x=n(_),w={MAX_DISTANCE:1200},T=function(e){function t(e){var r=e.buildingObject,n=e.defaultMaterial;a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.buildingObject=r,s.defaultMaterial=n,s.scenes=Object.keys(b["default"]).filter(function(e){return b["default"][e].isExperience}),s.scenesNames=s.scenes.map(function(e){return e.toLowerCase()}),s.displays=[],s.notCompletedDisplaysMeshes=[],s.mousePos=new i.Vector2,s.raycaster=new i.Raycaster,s.raycastPoint=null,s.raycastObject=null,s.lastRaycastObject=null,s.intersects=[],s.selectedSceneName=null,s.isTransitioning=!1,s.isHovered=!1,s.wasHovered=!1,s.onMouseMove=s.onMouseMove.bind(s),s.onMouseClick=s.onMouseClick.bind(s),s.createDisplays(),s}return s(t,e),l(t,[{key:"addSignals",value:function(){h["default"].move.add(this.onMouseMove),h["default"].click.add(this.onMouseClick)}},{key:"removeSignals",value:function(){h["default"].move.remove(this.onMouseMove),h["default"].click.remove(this.onMouseClick)}},{key:"onMouseMove",value:function(e){var t=e.clientX,r=e.clientY;this.mousePos.x=t/d["default"].metrics.width*2-1,this.mousePos.y=2*-(r/d["default"].metrics.height)+1,this.isTransitioning?document.body.classList.remove("cursor-pointer"):this.raycast()}},{key:"onMouseClick",value:function(e){var t=this,r=e.button;if(r===h["default"].LEFT_BUTTON&&this.isHovered){this.selectedSceneName=this.raycastObject.name;var i=g["default"].postProcessing.getUniform("postPass","uWhiteTransition");new TimelineMax({onStart:function(){t.isTransitioning=!0,m["default"].changeStarted.dispatch(t.selectedSceneName)},onComplete:function(){t.isTransitioning=!1,m["default"].change.dispatch(t.selectedSceneName)}}).addCallback(function(){return g["default"].scene.wooshAudioEffect.play()},.6).to(g["default"].postProcessing.camera,2.5,{fov:20,ease:SlowMo.ease.config(.5,.7,!1),onUpdate:function(){return g["default"].postProcessing.camera.updateProjectionMatrix()}},0).to(i,2,{value:1,ease:Power2.easeIn},0).addCallback(function(){t.raycastObject.material.hoverTl.pause(),t.raycastObject.material.unHoverTl.pause(),t.raycastObject.material.clickTl.play(0)},1.5)}}},{key:"remove",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.removeSignals(),this.removeDisplays(),document.body.classList.remove("cursor-pointer")}},{key:"removeDisplays",value:function(){for(var e=0,t=this.displays.length;t>e;e++)this.displays[e].remove()}},{key:"raycast",value:function(){this.raycaster.setFromCamera(this.mousePos,g["default"].postProcessing.camera),this.intersects=this.raycaster.intersectObjects(this.notCompletedDisplaysMeshes),this.isHovered=this.intersects.length>0&&this.intersects[0].object instanceof i.Mesh&&this.lastRaycastObject&&this.intersects[0].object.name===this.lastRaycastObject.name&&this.intersects[0].distance<w.MAX_DISTANCE,this.intersects.length>0&&(this.lastRaycastObject=this.intersects[0].object),this.isHovered&&!this.wasHovered?(this.wasHovered=!0,this.raycastPoint=this.intersects[0].point,this.raycastObject=this.intersects[0].object,this.raycastObject.material.unHoverTl.pause(),this.raycastObject.material.hoverTl.play(0),document.body.classList.add("cursor-pointer")):!this.isHovered&&this.wasHovered&&(this.raycastObject.material.hoverTl.pause(),this.raycastObject.material.unHoverTl.play(0),this.wasHovered=!1,this.raycastPoint=this.raycastObject=null,document.body.classList.remove("cursor-pointer"))}},{key:"createDisplays",value:function(){var e=this;this.buildingObject.traverse(function(t){if(-1!==e.scenesNames.indexOf(t.name)){var r=b["default"][t.name.toUpperCase()];if(g["default"].progression+1>=r.id){var i=new x["default"]({mesh:t,configuration:r});e.displays.push(i),i.completed||e.notCompletedDisplaysMeshes.push(t)}else t.material=e.defaultMaterial}})}},{key:"update",value:function(e,t){for(var r=0,i=this.displays.length;i>r;r++)this.displays[r].update(e,t)}}]),t}(i.Object3D);r["default"]=T,t.exports=r["default"]}).call(this,e("three"))},{"consts/scenes":52,"gl/meshes/Displays/Display":97,"signals/Mouse":163,"signals/Scene":165,"signals/Store":166,"signals/Window":169,three:27}],99:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function d(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:d(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("utils/math/random-float"),h=n(c),p=function(e){function t(e){var r=e.name,i=e.positions,n=e.scales,s=e.orientations,l=e.randoms,u=void 0===l?[]:l,c=e.geometry,h=e.material;a(this,t);var p=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return p.name=r,p.positions=i,p.scales=n,p.orientations=s,p.randoms=u,p.instanceNb=i.length,p.geometry=c,p.material=h,p.frustumCulled=!1,p.setGeometry(),p}return s(t,e),l(t,[{key:"setGeometry",value:function(){this.geometry.isInstancedBufferGeometry=!0;for(var e=new i.InstancedBufferAttribute(new Float32Array(3*this.instanceNb),3,1),t=new i.InstancedBufferAttribute(new Float32Array(this.instanceNb),1,1),r=new i.InstancedBufferAttribute(new Float32Array(this.instanceNb),1,1),n=new i.InstancedBufferAttribute(new Float32Array(this.instanceNb),1,1),a=0;a<this.instanceNb;a++){var o=this.positions[a].x,s=this.positions[a].y,l=this.positions[a].z;e.setXYZ(a,o,s,l),t.setX(a,this.scales[a]),r.setX(a,this.orientations[a]),this.randoms.length?n.setX(a,this.randoms[a]):n.setX(a,h["default"](0,1))}this.geometry.addAttribute("offset",e),this.geometry.addAttribute("scale",t),this.geometry.addAttribute("orientation",r),this.geometry.addAttribute("random",n)}},{key:"remove",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(e,t){this.material.update(e,t)}}]),t}(i.Mesh);r["default"]=p,t.exports=r["default"]}).call(this,e("three"))},{three:27,"utils/math/random-float":185}],100:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),c=e("gl/core/Spline"),h=n(c),p=e("gl/meshes/MeshLine/MeshLine"),d=n(p),f=function(e){function t(e){var r=e.splinePoints,i=e.divisions,n=void 0===i?100:i,s=e.configuration,u=void 0===s?{}:s;a(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return c.splinePoints=r,c.divisions=n,c.configuration=u,c.spline=new h["default"]({points:c.splinePoints,divisions:c.divisions}),c.meshLine=new d["default"](c.spline.geometry,l({useMap:!1,sizeAttenuation:!0,useDash:!0},c.configuration)),c.add(c.meshLine),c}return s(t,e),u(t,[{key:"update",value:function(e,t){this.meshLine.update(e,t)}}]),t}(i.Object3D);r["default"]=f,t.exports=r["default"]}).call(this,e("three"))},{"gl/core/Spline":71,"gl/meshes/MeshLine/MeshLine":102,three:27}],101:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function S(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:S(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("gl/loaders/AWDLoader"),h=n(c),p=e("gl/core/AnimatedSpline"),d=n(p),f=e("signals/Mouse"),m=n(f),v=e("signals/Window"),g=n(v),y=e("managers/AssetsManager"),b=e("gl/helpers/GUI"),_=n(b),x=e("utils/math/to-radians"),w=n(x),T={SPEED:1,BASE_LOOP_DURATION:20,LOOK_AT_OFFSET:.001,CAMERA:{ROTATION:{X:w["default"](36),Y:w["default"](36)},DAMPING:{X:.03,Y:.03}}},M=function(e){function t(e){var r=e.materials,n=e.audio,s=e.camera;a(this,t);var l=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));l.name="Locomotive",l.materials=r,l.camera=s,l.camera.rotation.y=Math.PI,l.camera.position.set(-100,800,-400),l.cameraLookAt=new i.Vector3(0,100,200),l.camera.lookAt(l.cameraLookAt),l.speed=T.SPEED,l.barSpeed=l.speed,l.spline=new d["default"]({points:y.assets.splines.rails,divisions:500,loopDuration:T.BASE_LOOP_DURATION/l.speed,lookAtOffset:T.LOOK_AT_OFFSET}),l.add(l.spline.helper);var u=new h["default"];return l.locomotiveObject=u.parse(y.assets.locomotiveModel),l.locomotiveObject.add(n),l.locomotiveObject.add(l.camera),l.locomotiveMesh=l.locomotiveObject.children[0],l.locomotiveMesh.material=l.materials.locomotiveMaterial,l.wheelBackMesh=l.locomotiveObject.children[1],l.wheelMiddleMesh=l.locomotiveObject.children[2],l.wheelFrontMesh=l.locomotiveObject.children[3],l.wheelBackMesh.material=l.wheelMiddleMesh.material=l.wheelFrontMesh.material=l.materials.wheelMaterial,l.bar=l.locomotiveObject.children[4],l.bar.material=l.materials.barMaterial,l.wheelBackMesh.position.x=-1,l.wheelMiddleMesh.position.x=-1,l.wheelFrontMesh.position.x=-1,l.bar.position.x=-4.5,l.add(l.locomotiveObject),l.rotationTarget=new i.Quaternion,l.mousePosition=new i.Vector2,l.isTransitioning=!0,l.handleMouseMove=l.handleMouseMove.bind(l),l.addSignals(),l.createGUI(),l}return s(t,e),l(t,[{key:"createTls",value:function(){var e=this;this.enterTl=new TimelineMax({paused:!0}),this.enterTl.to(this.camera.position,8,{x:-105,y:132,z:-80,ease:Power2.easeInOut,delay:2},0).to(this.cameraLookAt,8,{x:-105,y:132,z:80,ease:Power2.easeInOut,delay:2,onUpdate:function(){e.camera.lookAt(e.cameraLookAt)},onComplete:function(){e.isTransitioning=!1}},0)}},{key:"createGUI",value:function(){var e=_["default"].addFolder(this.name);this.spline.createGUI(e)}},{key:"removeGUI",value:function(){_["default"].removeFolder(this.name)}},{key:"addSignals",value:function(){m["default"].move.add(this.handleMouseMove)}},{key:"removeSignals",value:function(){m["default"].move.remove(this.handleMouseMove)}},{key:"handleMouseMove",value:function(e){this.mousePosition.x=e.clientX/g["default"].metrics.width*2-1,this.mousePosition.y=2*-(e.clientY/g["default"].metrics.height)+1}},{key:"remove",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.removeGUI(),this.removeSignals(),this.locomotiveObject.remove()}},{key:"update",value:function(e,t){this.wheelBackMesh.rotation.x+=.1*this.speed,this.wheelMiddleMesh.rotation.x+=.1*this.speed,this.wheelFrontMesh.rotation.x+=.1*this.speed,this.bar.position.z=9*-Math.cos(8*t*this.barSpeed),this.bar.position.y=4*Math.sin(8*t*this.barSpeed),this.spline.update(e,t),this.spline.animate(this.locomotiveObject),this.isTransitioning||(this.rotationTarget.x=this.mousePosition.y*T.CAMERA.ROTATION.X,this.rotationTarget.y=-this.mousePosition.x*T.CAMERA.ROTATION.Y,this.camera.rotation.x-=(this.rotationTarget.x+this.camera.rotation.x+Math.PI)*T.CAMERA.DAMPING.X,this.camera.rotation.y-=(this.rotationTarget.y+this.camera.rotation.y)*T.CAMERA.DAMPING.Y)}}]),t}(i.Object3D);r["default"]=M,t.exports=r["default"]}).call(this,e("three"))},{"gl/core/AnimatedSpline":68,"gl/helpers/GUI":77,"gl/loaders/AWDLoader":80,"managers/AssetsManager":153,"signals/Mouse":163,"signals/Window":169,three:27,"utils/math/to-radians":187}],102:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),c=function v(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:v(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},h=e("./MeshLineGeometry"),p=n(h),d=e("./MeshLineMaterial"),f=n(d),m=function(e){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.geometry=new p["default"](e,n),s.material=new f["default"](l({},r,{totalLineDistance:s.geometry.getTotalLineDistance()})),s.options=r,s.mesh=new i.Mesh(s.geometry,s.material),s.add(s.mesh),s}return s(t,e),u(t,[{key:"remove",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.material.removeSignals(),this.material.dispose()}},{key:"update",value:function(e,t){this.material.update(e,t)}}]),t}(i.Object3D);r["default"]=m,t.exports=r["default"]}).call(this,e("three"))},{"./MeshLineGeometry":103,"./MeshLineMaterial":104,three:27}],103:[function(e,t,r){(function(e){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),s=function(t){function r(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,r);var o=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));if(o.positions=[],o.previous=[],o.next=[],o.side=[],o.width=[],o.indices_array=[],o.uvs=[],o.counters=[],o.lineDistances=[],o.widthCallback=a,t instanceof e.BufferGeometry&&(t=(new e.Geometry).fromBufferGeometry(t)),t instanceof e.Geometry)for(var s=0;s<t.vertices.length;s++){var l=t.vertices[s],u=s/t.vertices.length;o.positions.push(l.x,l.y,l.z),o.positions.push(l.x,l.y,l.z),o.counters.push(u),o.counters.push(u)}if(t instanceof Float32Array||t instanceof Array)for(var c=0;c<t.length;c+=3){var h=c/t.length;o.positions.push(t[c],t[c+1],t[c+2]),o.positions.push(t[c],t[c+1],t[c+2]),o.counters.push(h),o.counters.push(h)}return o.process(),o}return a(r,t),o(r,[{key:"process",value:function(){for(var t=this.positions.length/6,r=0;t>r;r++)this.side.push(1),this.side.push(-1);for(var i=void 0,n=0;t>n;n++)i=this.widthCallback?this.widthCallback(n/(t-1)):1,this.width.push(i),this.width.push(i);for(var a=0;t>a;a++)this.uvs.push(a/(t-1),0),this.uvs.push(a/(t-1),1);var o=void 0;o=this.copyV3(this.compareV3(0,t-1)?t-2:0),this.previous.push(o[0],o[1],o[2]),this.previous.push(o[0],o[1],o[2]);for(var s=0;t-1>s;s++)o=this.copyV3(s),this.previous.push(o[0],o[1],o[2]),this.previous.push(o[0],o[1],o[2]);for(var l=1;t>l;l++)o=this.copyV3(l),this.next.push(o[0],o[1],o[2]),this.next.push(o[0],o[1],o[2]);o=this.copyV3(this.compareV3(t-1,0)?1:t-1),this.next.push(o[0],o[1],o[2]),this.next.push(o[0],o[1],o[2]);for(var u=0;t-1>u;u++){var c=2*u;this.indices_array.push(c,c+1,c+2),this.indices_array.push(c+2,c+1,c+3)}this.computeLineDistances(),this.attributes={position:new e.BufferAttribute(new Float32Array(this.positions),3),previous:new e.BufferAttribute(new Float32Array(this.previous),3),next:new e.BufferAttribute(new Float32Array(this.next),3),side:new e.BufferAttribute(new Float32Array(this.side),1),width:new e.BufferAttribute(new Float32Array(this.width),1),uv:new e.BufferAttribute(new Float32Array(this.uvs),2),index:new e.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new e.BufferAttribute(new Float32Array(this.counters),1),lineDistance:new e.BufferAttribute(new Float32Array(this.lineDistances),1)},this.addAttribute("position",this.attributes.position),this.addAttribute("previous",this.attributes.previous),this.addAttribute("next",this.attributes.next),this.addAttribute("side",this.attributes.side),this.addAttribute("width",this.attributes.width),this.addAttribute("uv",this.attributes.uv),this.addAttribute("counters",this.attributes.counters),this.setIndex(this.attributes.index)}},{key:"computeLineDistances",value:function(){for(var e=this.positions,t=0,r=0;r<this.positions.length;r+=3){if(r>0){var i=e[r],n=e[r+1],a=e[r+2],o=e[r-3],s=e[r-2],l=e[r-1],u=i-o,c=n-s,h=a-l;t+=Math.sqrt(u*u+c*c+h*h)}this.lineDistances[r/3]=t}}},{key:"getTotalLineDistance",value:function(){return this.lineDistances[this.lineDistances.length-1]}},{key:"compareV3",value:function(e,t){var r=6*e,i=6*t;return this.positions[r]===this.positions[i]&&this.positions[r+1]===this.positions[i+1]&&this.positions[r+2]===this.positions[i+2]}},{key:"copyV3",value:function(e){var t=6*e;return[this.positions[t],this.positions[t+1],this.positions[t+2]]}}]),r}(e.BufferGeometry);r["default"]=s,t.exports=r["default"]}).call(this,e("three"))},{three:27}],104:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),c=function y(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:y(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},h=e("signals/Window"),p=n(h),d=e("./shaders/mesh-line.vert"),f=n(d),m=e("./shaders/mesh-line.frag"),v=n(m),g=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.lineWidth,n=void 0===r?1:r,s=e.resolution,u=void 0===s?new i.Vector2(p["default"].metrics.width,p["default"].metrics.height):s,c=e.color,h=void 0===c?16777215:c,d=e.opacity,m=void 0===d?1:d,g=e.alphaTest,y=void 0===g?.5:g,b=e.visibility,_=void 0===b?1:b,x=e.map,w=void 0===x?null:x,T=e.useMap,M=void 0===T?!1:T,S=e.sizeAttenuation,E=void 0===S?!0:S,P=e.useDash,A=void 0===P?!1:P,C=e.dashSize,O=void 0===C?0:C,k=e.gapSize,L=void 0===k?0:k,R=e.totalLineDistance,I=void 0===R?0:R,D=e.loopDuration,F=void 0===D?1:D,N=e.time,B=void 0===N?0:N,G=e.transparent,j=void 0===G?!1:G,V=e.side,U=void 0===V?i.FrontSide:V,z=e.blending,H=void 0===z?i.NormalBlending:z,W=e.depthTest,X=void 0===W?!0:W,Y=e.depthWrite,q=void 0===Y?!0:Y,K=e.depthFunc,$=void 0===K?i.LessEqualDepth:K,Z=e.fog,Q=void 0===Z?!0:Z,J=e.vertexShader,ee=void 0===J?f["default"]:J,te=e.fragmentShader,re=void 0===te?v["default"]:te,ie=e.uniforms,ne=void 0===ie?{}:ie;a(this,t),ne.lineWidth=ne.lineWidth||{value:n},ne.resolution=ne.resolution||{value:u},ne.color=ne.color||{value:new i.Color(h)},ne.opacity=ne.opacity||{value:m},ne.sizeAttenuation=ne.sizeAttenuation||{value:E},ne.alphaTest=ne.alphaTest||{value:y},ne.visibility=ne.visibility||{value:_},!w||w instanceof i.Texture||(w=new i.Texture(w),w.magFilter=i.NearestFilter,w.minFilter=i.NearestFilter,w.needsUpdate=!0),ne.map=ne.map||{value:w},ne.useMap=ne.useMap||{value:M},ne.useDash=ne.useDash||{value:A},ne.dashSize=ne.dashSize*I||{value:O*I},ne.gapSize=ne.gapSize*I||{value:L*I},ne.time=ne.time||{value:B},ne.loopDuration=I/ne.loopDuration||{value:I/F},ne=l({},ne,i.UniformsLib.fog);var ae=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{uniforms:ne,vertexShader:ee,fragmentShader:re,transparent:j,side:U,blending:H,depthTest:X,depthWrite:q,depthFunc:$,fog:Q}));return ae.onResize=ae.onResize.bind(ae),ae.addSignals(),ae}return s(t,e),u(t,[{key:"addSignals",value:function(){p["default"].resize.add(this.onResize)}},{key:"removeSignals",value:function(){p["default"].resize.remove(this.onResize)}},{key:"onResize",value:function(e,t){this.uniforms.resolution.value=new i.Vector2(e,t)}},{key:"dispose",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this.uniforms.map instanceof i.Texture&&this.uniforms.map.dispose()}},{key:"update",value:function(e,t){this.uniforms.time.value=t}}]),t}(i.ShaderMaterial);r["default"]=g,t.exports=r["default"]}).call(this,e("three"))},{"./shaders/mesh-line.frag":105,"./shaders/mesh-line.vert":106,"signals/Window":169,three:27}],105:[function(e,t){t.exports="precision highp float;\n#define GLSLIFY 1\n\n#include <common>\n#include <fog_pars_fragment>\n\nuniform sampler2D map;\nuniform float useMap;\nuniform float useDash;\nuniform float dashSize;\nuniform float gapSize;\nuniform float visibility;\nuniform float alphaTest;\n\nuniform float time;\nuniform float loopDuration;\n\nvarying vec2 vUV;\nvarying vec4 vColor;\nvarying float vCounters;\nvarying float vLineDistance;\n\nvoid main() {\n 	float totalSize = dashSize + gapSize;\n	vec4 c = vColor;\n	vec2 nUV = vUV;\n\n	float lineDistance = time * loopDuration + vLineDistance;\n	\n	if(useDash == 1.0 && totalSize >= 1.0) {\n    nUV.x = mod(lineDistance, totalSize) / dashSize;\n\n    if(mod(lineDistance, totalSize) >= dashSize) {\n      discard;\n    }\n  }\n\n	if(useMap == 1.0) {\n		c *= texture2D(map, nUV);\n	}\n\n	if(c.a < alphaTest) {\n		discard;\n	}\n\n	gl_FragColor = c;\n	gl_FragColor.a *= step(vCounters, visibility);\n\n	#include <fog_fragment>\n}\n"},{}],106:[function(e,t){t.exports="precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 previous;\nattribute vec3 next;\nattribute float side;\nattribute float width;\nattribute float counters;\nattribute float lineDistance;\n\nuniform vec2 resolution;\nuniform float lineWidth;\nuniform vec3 color;\nuniform float opacity;\nuniform float sizeAttenuation;\n\nvarying vec2 vUV;\nvarying vec4 vColor;\nvarying float vCounters;\nvarying float vLineDistance;\n\nvec2 fix( vec4 i, float aspect ) {\n	vec2 res = i.xy / i.w;\n	res.x *= aspect;\n	vCounters = counters;\n	return res;\n}\n\nvoid main() {\n	float aspect = resolution.x / resolution.y;\n	float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);\n\n	mat4 m = projectionMatrix * modelViewMatrix;\n	vec4 finalPosition = m * vec4( position, 1.0 );\n	vec4 prevPos = m * vec4( previous, 1.0 );\n	vec4 nextPos = m * vec4( next, 1.0 );\n\n	vec2 currentP = fix( finalPosition, aspect );\n	vec2 prevP = fix( prevPos, aspect );\n	vec2 nextP = fix( nextPos, aspect );\n\n	float pixelWidth = finalPosition.w * pixelWidthRatio;\n	float w = 1.8 * pixelWidth * lineWidth * width;\n\n	if( sizeAttenuation == 1. ) {\n		w = 1.8 * lineWidth * width;\n	}\n\n	vec2 dir;\n	if( nextP == currentP ) {\n		dir = normalize( currentP - prevP );\n	} else if( prevP == currentP ) {\n		dir = normalize( nextP - currentP );\n	} else {\n		vec2 dir1 = normalize( currentP - prevP );\n		vec2 dir2 = normalize( nextP - currentP );\n		dir = normalize( dir1 + dir2 );\n	}\n\n	vec2 normal = vec2( -dir.y, dir.x );\n	normal.x /= aspect;\n	normal *= 0.5 * w;\n\n	vec4 offset = vec4( normal * side, 0.0, 1.0 );\n	finalPosition.xy += offset.xy;\n\n	gl_Position = finalPosition;\n\n	vColor = vec4(color, opacity);\n	vUV = uv;\n 	vLineDistance = lineDistance;\n}\n"},{}],107:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),c=function y(e,t,r){
null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:y(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},h=e("./shaders/mirror.vert"),p=n(h),d=e("./shaders/mirror.frag"),f=n(d),m=e("signals/Window"),v=n(m),g=function(e){function t(e){var r=e.renderer,n=e.camera,s=e.options;a(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));u.name="mirror_"+u.id;var c=s.textureWidth,h=void 0===c?512:c,d=s.textureHeight,m=void 0===d?512:d,g=s.clipBias,y=void 0===g?0:g,b=s.color,_=void 0===b?new i.Color(8355711):b;u.matrixNeedsUpdate=!0,u.clipBias=y,u.renderer=r,u.mirrorPlane=new i.Plane,u.normal=new i.Vector3(0,0,1),u.mirrorWorldPosition=new i.Vector3,u.cameraWorldPosition=new i.Vector3,u.rotationMatrix=new i.Matrix4,u.lookAtPosition=new i.Vector3(0,0,-1),u.clipPlane=new i.Vector4,n instanceof i.PerspectiveCamera?u.camera=n:(u.camera=new i.PerspectiveCamera,console.log(u.name+": camera is not a Perspective Camera!")),u.textureMatrix=new i.Matrix4,u.mirrorCamera=u.camera.clone(),u.mirrorCamera.matrixAutoUpdate=!0;var x={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBFormat,stencilBuffer:!1};return u.renderTarget=new i.WebGLRenderTarget(h,m,x),u.renderTarget2=new i.WebGLRenderTarget(h,m,x),u.material=new i.ShaderMaterial({vertexShader:p["default"],fragmentShader:f["default"],fog:!0,defines:{KERNEL_RADIUS:3,SIGMA:3},uniforms:l({},i.UniformsLib.fog,{mirrorColor:{value:new i.Color(8355711)},mirrorSampler:{value:null},textureMatrix:{value:new i.Matrix4},uResolution:{value:new i.Vector2(v["default"].metrics.width,v["default"].metrics.height)},direction:{value:new i.Vector2(.5,.5)}})}),u.material.uniforms.mirrorSampler.value=u.renderTarget.texture,u.material.uniforms.mirrorColor.value=_,u.material.uniforms.textureMatrix.value=u.textureMatrix,i.Math.isPowerOfTwo(h)&&i.Math.isPowerOfTwo(m)||(u.renderTarget.texture.generateMipmaps=!1,u.renderTarget2.texture.generateMipmaps=!1),u.updateTextureMatrix(),u.render(),u.addHelpers(),u}return s(t,e),u(t,[{key:"addHelpers",value:function(){var e=new i.ArrowHelper(new i.Vector3(0,0,1),new i.Vector3(0,0,0),100,16777088);e.name="ArrowHelper";var t=new i.Geometry;t.vertices.push(new i.Vector3(-10,-10,0)),t.vertices.push(new i.Vector3(10,-10,0)),t.vertices.push(new i.Vector3(10,10,0)),t.vertices.push(new i.Vector3(-10,10,0)),t.vertices.push(t.vertices[0]);var r=new i.Line(t,new i.LineBasicMaterial({color:16777088,fog:!1}));r.name="PlaneHelper",this.add(e),this.add(r)}},{key:"remove",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.material.dispose(),this.renderTarget.dispose(),this.renderTarget2.dispose()}},{key:"renderWithMirror",value:function(e){this.updateTextureMatrix(),this.matrixNeedsUpdate=!1;var t=e.camera;e.camera=this.mirrorCamera,e.renderTemp(),e.material.uniforms.mirrorSampler.value=e.renderTarget2.texture,this.render(),this.matrixNeedsUpdate=!0,e.material.uniforms.mirrorSampler.value=e.renderTarget.texture,e.camera=t,e.updateTextureMatrix()}},{key:"updateTextureMatrix",value:function(){this.updateMatrixWorld(),this.camera.updateMatrixWorld(),this.mirrorWorldPosition.setFromMatrixPosition(this.matrixWorld),this.cameraWorldPosition.setFromMatrixPosition(this.camera.matrixWorld),this.rotationMatrix.extractRotation(this.matrixWorld),this.normal.set(0,0,1),this.normal.applyMatrix4(this.rotationMatrix);var e=this.mirrorWorldPosition.clone().sub(this.cameraWorldPosition);e.reflect(this.normal).negate(),e.add(this.mirrorWorldPosition),this.rotationMatrix.extractRotation(this.camera.matrixWorld),this.lookAtPosition.set(0,0,-1),this.lookAtPosition.applyMatrix4(this.rotationMatrix),this.lookAtPosition.add(this.cameraWorldPosition);var t=this.mirrorWorldPosition.clone().sub(this.lookAtPosition);t.reflect(this.normal).negate(),t.add(this.mirrorWorldPosition),this.up.set(0,-1,0),this.up.applyMatrix4(this.rotationMatrix),this.up.reflect(this.normal).negate(),this.mirrorCamera.position.copy(e),this.mirrorCamera.up=this.up,this.mirrorCamera.lookAt(t),this.mirrorCamera.updateProjectionMatrix(),this.mirrorCamera.updateMatrixWorld(),this.mirrorCamera.matrixWorldInverse.getInverse(this.mirrorCamera.matrixWorld),this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.mirrorCamera.projectionMatrix),this.textureMatrix.multiply(this.mirrorCamera.matrixWorldInverse),this.mirrorPlane.setFromNormalAndCoplanarPoint(this.normal,this.mirrorWorldPosition),this.mirrorPlane.applyMatrix4(this.mirrorCamera.matrixWorldInverse),this.clipPlane.set(this.mirrorPlane.normal.x,this.mirrorPlane.normal.y,this.mirrorPlane.normal.z,this.mirrorPlane.constant);var r=new i.Vector4,n=this.mirrorCamera.projectionMatrix;r.x=(Math.sign(this.clipPlane.x)+n.elements[8])/n.elements[0],r.y=(Math.sign(this.clipPlane.y)+n.elements[9])/n.elements[5],r.z=-1,r.w=(1+n.elements[10])/n.elements[14];var a=new i.Vector4;a=this.clipPlane.multiplyScalar(2/this.clipPlane.dot(r)),n.elements[2]=a.x,n.elements[6]=a.y,n.elements[10]=a.z+1-this.clipBias,n.elements[14]=a.w}},{key:"render",value:function(){this.matrixNeedsUpdate&&this.updateTextureMatrix(),this.matrixNeedsUpdate=!0;for(var e=this;null!==e.parent;)e=e.parent;if(void 0!==e&&e instanceof i.Scene){var t=this.material.visible;this.material.visible=!1,this.renderer.render(e,this.mirrorCamera,this.renderTarget,!0),this.material.visible=t}}},{key:"renderTemp",value:function(){this.matrixNeedsUpdate&&this.updateTextureMatrix(),this.matrixNeedsUpdate=!0;for(var e=this;null!==e.parent;)e=e.parent;void 0!==e&&e instanceof i.Scene&&this.renderer.render(e,this.mirrorCamera,this.renderTarget2,!0)}}]),t}(i.Object3D);r["default"]=g,t.exports=r["default"]}).call(this,e("three"))},{"./shaders/mirror.frag":108,"./shaders/mirror.vert":109,"signals/Window":169,three:27}],108:[function(e,t){t.exports="#define GLSLIFY 1\n#include <common>\n#include <fog_pars_fragment>\n\nuniform vec3 mirrorColor;\nuniform sampler2D mirrorSampler;\n\nvarying vec4 mirrorCoord;\n\nuniform vec2 uResolution;\nuniform vec2 direction;\n\nfloat blendOverlay(float base, float blend) {\n  return( base < 0.5 ? ( 2.0 * base * blend ) : (1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n}\n\nfloat gaussianPdf(in float x, in float sigma) {\n  return 0.39894 * exp(-0.5 * x * x / (sigma * sigma)) / sigma;\n}\n\nvec4 blur(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec2 invSize = 1.0 / resolution;\n  float fSigma = float(SIGMA);\n  float weightSum = gaussianPdf(0.0, fSigma);\n  vec3 diffuseSum = texture2D(image, uv).rgb * weightSum;\n  \n  for (int i = 1; i < KERNEL_RADIUS; i ++) {\n    float x = float(i);\n    float w = gaussianPdf(x, fSigma);\n    vec2 uvOffset = direction * invSize * x;\n    vec3 sample1 = texture2D(image, uv + uvOffset).rgb;\n    vec3 sample2 = texture2D(image, uv - uvOffset).rgb;\n    diffuseSum += (sample1 + sample2) * w;\n    weightSum += 2.0 * w;\n  }\n\n  return vec4(diffuseSum / weightSum, 1.0);\n}\n\nvoid main() {\n  vec2 uv = mirrorCoord.xy / mirrorCoord.w;\n\n  vec4 color = blur(mirrorSampler, uv, mirrorCoord.xz, vec2(0.5, 0.5));\n  color = vec4(blendOverlay(mirrorColor.r, color.r), blendOverlay(mirrorColor.g, color.g), blendOverlay(mirrorColor.b, color.b), 1.0);\n\n  gl_FragColor = color;\n\n  #include <fog_fragment>\n}\n"},{}],109:[function(e,t){t.exports="#define GLSLIFY 1\nuniform mat4 textureMatrix;\n\nvarying vec4 mirrorCoord;\n\nvoid main() {\n  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n  mirrorCoord = textureMatrix * worldPosition;\n\n  gl_Position = projectionMatrix * mvPosition;\n}\n"},{}],110:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function g(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:g(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("signals/Window"),h=n(c),p=e("./shaders/noise.vert"),d=n(p),f=e("./shaders/noise.frag"),m=n(f),v=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.material=new i.ShaderMaterial({uniforms:{time:{value:0},resolution:{value:new i.Vector2(h["default"].metrics.width,h["default"].metrics.height)}},vertexShader:d["default"],fragmentShader:m["default"],transparent:!0}),e.quad=new i.Mesh(new i.PlaneBufferGeometry(2,2),e.material),e.add(e.quad),e.onResize=e.onResize.bind(e),e.addSignals(),e}return s(t,e),l(t,[{key:"addSignals",value:function(){h["default"].resize.add(this.onResize)}},{key:"removeSignals",value:function(){h["default"].resize.remove(this.onResize)}},{key:"remove",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.material.dispose(),this.quad.remove(),this.removeSignals()}},{key:"onResize",value:function(e,t){this.material.uniforms.resolution.value=new i.Vector2(e,t)}},{key:"update",value:function(e,t){this.material.uniforms.time.value=t}}]),t}(i.Object3D);r["default"]=v,t.exports=r["default"]}).call(this,e("three"))},{"./shaders/noise.frag":111,"./shaders/noise.vert":112,"signals/Window":169,three:27}],111:[function(e,t){t.exports="#define GLSLIFY 1\nhighp float random(vec2 co)\n{\n    highp float a = 12.9898;\n    highp float b = 78.233;\n    highp float c = 43758.5453;\n    highp float dt= dot(co.xy ,vec2(a,b));\n    highp float sn= mod(dt,3.14);\n    return fract(sin(sn) * c);\n}\n\nuniform float time;\nuniform vec2 resolution;\n\nvoid main() {\n  float opacity = 0.1;\n  float amount = 0.25;\n  float speed = 0.001;\n\n  vec2 uv = gl_FragCoord.xy + time * speed / resolution.xy;\n  gl_FragColor = vec4(vec3(amount * random(uv)), opacity);\n}\n"},{}],112:[function(e,t){t.exports="#define GLSLIFY 1\nvoid main() {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n"},{}],113:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},l=e("shader-particle-engine"),u=i(l),c={particleCount:1},h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s({},c,e)))}return o(t,e),t}(u["default"].Emitter);r["default"]=h,t.exports=r["default"]},{"shader-particle-engine":24}],114:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u=e("shader-particle-engine"),c=n(u),h={texture:"",blending:i.NormalBlending,transparent:!0,maxParticleCount:1e5,fog:!0},p=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,l({},h,e)))}return s(t,e),t}(c["default"].Group);r["default"]=p,t.exports=r["default"]}).call(this,e("three"))},{"shader-particle-engine":24,three:27}],115:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function g(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:g(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("./Group"),h=n(c),p=e("./Emitter"),d=n(p),f=e("shader-particle-engine"),m=n(f),v=function(e){function t(e,r){a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));i.group=new h["default"](e),i.group.mesh.frustumCulled=!1,i.add(i.group.mesh),i.emitters=[];for(var n=0;n<r.length;n++){var s=new d["default"](r[n]);i.emitters.push(s),i.group.addEmitter(s)}return i}return s(t,e),l(t,[{key:"addHelpers",value:function(){for(var e=0,t=this.emitters.length;t>e;e++){var r=this.emitters[e],n=r.position.value,a=new i.LineBasicMaterial({color:65280,fog:!1}),o=void 0;switch(r.type){case m["default"].distributions.BOX:var s=r.position.spread,l=new i.BoxBufferGeometry(s.x,s.y,s.z);o=new i.LineSegments(new i.EdgesGeometry(l),a);break;case m["default"].distributions.SPHERE:var u=r.position.radius,c=r.position.radiusScale,h=new i.SphereBufferGeometry(u,32,32);o=new i.LineSegments(new i.EdgesGeometry(h),a),o.scale.multiply(c)}o.name="EmitterHelper",o.position.copy(n),this.add(o)}}},{key:"update",value:function(e){this.group.tick(e)}},{key:"remove",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.group.dispose(),this.group.texture instanceof i.Texture&&this.group.texture.dispose()}},{key:"defaultEmitter",get:function(){return this.emitters[0]}}]),t}(i.Object3D);r["default"]=v,t.exports=r["default"]}).call(this,e("three"))},{"./Emitter":113,"./Group":114,"shader-particle-engine":24,three:27}],116:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),c=e("gl/core/Spline"),h=n(c),p=e("gl/meshes/MeshLine/MeshLine"),d=n(p),f=e("config/reineer"),m=n(f),v=e("utils/math/to-radians"),g=n(v),y=e("managers/AssetsManager"),b=function(e){function t(e){var r=e.strokeTexture;a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.strokeTexture=r,n.splines=[],n.meshLines=[],n.meshLinesGroup=new i.Group,n.createSplines(),n.createMeshLines(),n.meshLinesGroup.position.x=-490,n.meshLinesGroup.position.y=30,n.meshLinesGroup.position.z=-1540,n.meshLinesGroup.rotation.y=g["default"](-70),n.add(n.meshLinesGroup),n.createTls(),n}return s(t,e),u(t,[{key:"createSplines",value:function(){for(var e=0,t=m["default"].length;t>e;e++){var r=m["default"][e].name,i=y.assets.splines[r],n=new h["default"]({points:i,divisions:100});this.splines.push(n)}}},{key:"createMeshLines",value:function(){for(var e=0,t=this.splines.length;t>e;e++){var r=this.splines[e],n=m["default"][e];n.lineWidth+=4,n.loopDuration+=4;var a=new d["default"](r.geometry,l({useMap:!0,map:this.strokeTexture,sizeAttenuation:!0,transparent:!0,opacity:0,alphaTest:.8,useDash:!0,side:i.DoubleSide},n));this.meshLines.push(a),this.meshLinesGroup.add(a)}}},{key:"createTls",value:function(){this.meshLightsOpacities=this.meshLines.map(function(e){return e.material.uniforms.opacity}),this.enterTl=new TimelineMax,this.enterTl.staggerTo(this.meshLightsOpacities,1.5,{value:1,ease:RoughEase.ease.config({template:Power0.easeNone,strength:1.5,points:40,taper:"none",randomize:!0,clamp:!0})},.5)}},{key:"update",value:function(e,t){for(var r=0,i=this.meshLines.length;i>r;r++)this.meshLines[r].update(e,t)}}]),t}(i.Object3D);r["default"]=b,t.exports=r["default"]}).call(this,e("three"))},{"config/reineer":46,"gl/core/Spline":71,"gl/meshes/MeshLine/MeshLine":102,"managers/AssetsManager":153,three:27,"utils/math/to-radians":187}],117:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=e("shader-particle-engine"),u=n(l),c=e("gl/meshes/ParticleSystem"),h=n(c),p=[{type:u["default"].distributions.BOX,particleCount:3e4,maxAge:{value:5,spread:2},position:{value:new i.Vector3(0,0,0),spread:new i.Vector3(0,0,0),randomise:!0},velocity:{value:new i.Vector3(0,0,0),spread:new i.Vector3(0,0,0)},acceleration:{value:new i.Vector3(0,0,0),spread:new i.Vector3(0,0,0)},drag:{value:.5,spread:.5},wiggle:{value:15,spread:10},color:{value:[new i.Color(16777215),new i.Color(15395562),new i.Color(13224393)]},opacity:{value:[.1,1,0],spread:.2},size:{value:[4,3],spread:2}}],d=function(e){function t(e){var r=e.texture,i=e.emitterCustomConfig,n=void 0===i?[]:i;a(this,t);var s={texture:{value:r}};return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,s,n.length?n:p))}return s(t,e),t}(h["default"]);r["default"]=d,t.exports=r["default"]}).call(this,e("three"))},{"gl/meshes/ParticleSystem":115,"shader-particle-engine":24,three:27}],118:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function m(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:m(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("gl/loaders/AWDLoader"),h=n(c),p=e("gl/meshes/InstancedMesh/InstancedMesh"),d=n(p),f=function(e){function t(e){var r=e.model,i=e.trunkMaterial,n=e.branchMaterial;a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.model=r;var l=new h["default"];return s.treeObject=l.parse(r).clone(),s.trunkMesh=s.treeObject.children.find(function(e){return"trunk"===e.name}),s.branchMesh=s.treeObject.children.find(function(e){return"branch"===e.name}),s.trunkGeometry=s.trunkMesh.geometry,s.branchGeometry=s.branchMesh.geometry,s.trunkGeometry.computeBoundingBox(),s.trunkMeshHeight=s.trunkGeometry.boundingBox.max.y-s.trunkGeometry.boundingBox.min.y,s.trunkMaterial=i,s.branchMaterial=n,s.trunkMaterial.uniforms.uModelHeight.value=s.branchMaterial.uniforms.uModelHeight.value=s.trunkMeshHeight,s.trunk=s.branch=null,s.treesPositions=[],s.treesScales=[],s.treesOrientations=[],s.treesRandoms=[],s.generateTrees(),s.instanciateTrees(),s}return s(t,e),l(t,[{key:"generateTrees",value:function(){}},{key:"instanciateTrees",value:function(){this.trunk=new d["default"]({name:"trunk",positions:this.treesPositions,scales:this.treesScales,orientations:this.treesOrientations,randoms:this.treesRandoms,geometry:this.trunkGeometry,material:this.trunkMaterial}),this.branch=new d["default"]({name:"branch",positions:this.treesPositions,scales:this.treesScales,orientations:this.treesOrientations,randoms:this.treesRandoms,geometry:this.branchGeometry,material:this.branchMaterial}),this.add(this.trunk),this.add(this.branch)}},{key:"remove",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.trunkMaterial.dispose(),this.branchMaterial.dispose()}},{key:"update",value:function(e,t){this.trunk instanceof d["default"]&&this.branch instanceof d["default"]&&(this.trunk.update(e,t),this.branch.update(e,t))}}]),t}(i.Object3D);r["default"]=f,t.exports=r["default"]}).call(this,e("three"))},{"gl/loaders/AWDLoader":80,"gl/meshes/InstancedMesh/InstancedMesh":99,three:27}],119:[function(e,t,r){(function(i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e("gl/postProcessing/passes"),s=function(){function e(t,r){if(n(this,e),this.renderer=t,void 0===r){var a={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat,stencilBuffer:!1},s=this.renderer.getSize();r=new i.WebGLRenderTarget(s.width,s.height,a)}this.renderTarget1=r,this.renderTarget2=r.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],this.copyPass=new o.ShaderPass}return a(e,[{key:"swapBuffers",value:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}},{key:"addPass",value:function(e){this.passes.push(e);var t=this.renderer.getSize(),r=this.renderer.getPixelRatio();e.setSize(t.width*r,t.height*r)}},{key:"insertPass",value:function(e,t){this.passes.splice(t,0,e)}},{key:"render",value:function(e,t){for(var r=!1,i=this.passes.length,n=0;i>n;n++){var a=this.passes[n];if(a.render(this.renderer,this.writeBuffer,this.readBuffer,e,t,r),a.needsSwap){if(r){var s=this.renderer.context;s.stencilFunc(s.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),s.stencilFunc(s.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==o.MaskPass&&(a instanceof o.MaskPass?r=!0:a instanceof o.ClearMaskPass&&(r=!1))}}},{key:"dispose",value:function(){this.copyPass.dispose(),this.renderTarget1.dispose(),this.renderTarget2.dispose()}},{key:"reset",value:function(e){if(void 0===e){var t=this.renderer.getSize();e=this.renderTarget1.clone(),e.setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}},{key:"setSize",value:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(e,t)}}]),e}();r["default"]=s,t.exports=r["default"]}).call(this,e("three"))},{"gl/postProcessing/passes":132,three:27}],120:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=function f(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:f(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},u=e("./Composer"),c=i(u),h=e("signals/Window"),p=i(h),d=function(e){function t(e){n(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.renderer=e,r.onResize=r.onResize.bind(r),r.addSignals(),r}return o(t,e),s(t,[{key:"addSignals",value:function(){p["default"].resize.add(this.onResize)}},{key:"removeSignals",value:function(){p["default"].resize.remove(this.onResize)}},{key:"dispose",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this),this.removeSignals()}},{key:"onResize",value:function(e,t){this.setSize(e*this.renderer.getPixelRatio(),t*this.renderer.getPixelRatio())}}]),t}(c["default"]);r["default"]=d,t.exports=r["default"]},{"./Composer":119,"signals/Window":169}],121:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e("./EffectComposer"),s=i(o),l=e("signals/PostProcessing"),u=i(l),c=e("signals/Store"),h=i(c),p=e("gl/helpers/GUI"),d=i(p),f=e("lodash.capitalize"),m=i(f),v=e("gl/postProcessing/passes"),g=e("utils/gui/parse-object"),y=i(g),b=function(){function e(t){var r=t.scene,i=t.camera,a=t.renderer,o=t.config;n(this,e),this.name="PostProcessing",this.scene=r,this.camera=i,this.renderer=a,this.configuration=o,this.passes=this.configuration.passes.filter(function(e){return e.active}),this.active=this.configuration.active,this.composer=new s["default"](this.renderer),this.renderPass=new v.RenderPass(this.scene,this.camera),this.composer.addPass(this.renderPass);for(var l=0,c=this.passes.length;c>l;l++)this.composer.addPass(this.passes[l].constructor),l===c-1&&(this.passes[l].constructor.renderToScreen=!0);h["default"].postProcessing=this,u["default"].created.dispatch(this),this.addGUI()}return a(e,[{key:"addGUI",value:function(){this.gui=d["default"].addFolder(this.name),this.gui.add(this,"active").name("Enabled");for(var e=0,t=this.passes.length;t>e;e++){var r=this.passes[e],i=m["default"](r.name),n=r.constructor,a=n.material;y["default"](n instanceof v.BloomUnrealPass?{object:n,folder:this.gui,folderName:i,propertiesWhitelist:["strength","radius","threshold"]}:{object:a.uniforms,folder:this.gui,folderName:i,propertiesWhitelist:["uWhiteTransition","uRadialBlur"]})}}},{key:"removeGUI",value:function(){d["default"].removeFolder(this.name)}},{key:"dispose",value:function(){for(var e=0,t=this.passes.length;t>e;e++)this.passes[e].constructor.dispose();this.removeGUI(),this.composer.dispose()}},{key:"getPass",value:function(e){return this.passes.find(function(t){return t.name===e}).constructor}},{key:"getUniform",value:function(e,t){return this.getPass(e).material.uniforms[t]}},{key:"update",value:function(e,t){this.active&&this.passes.length?(this.renderPass.scene=this.scene,this.renderPass.camera=this.camera,this.composer.render(e,t)):this.renderer.render(this.scene,this.camera)}}]),e}();r["default"]=b,t.exports=r["default"]},{"./EffectComposer":120,"gl/helpers/GUI":77,"gl/postProcessing/passes":132,"lodash.capitalize":18,"signals/PostProcessing":164,"signals/Store":166,"utils/gui/parse-object":176}],122:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,
i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("../Pass"),c=n(u),h=e("../../shaders/basic.vert"),p=n(h),d=e("../../shaders/copy.frag"),f=n(d),m=e("../../shaders/luminosity-high.frag"),v=n(m),g=e("./blur.frag"),y=n(g),b=e("./composite.frag"),_=n(b),x={x:new i.Vector2(1,0),y:new i.Vector2(0,1)},w=function(e){function t(e){var r=e.resolution,n=void 0===r?new i.Vector2(256,256):r,s=e.strength,l=void 0===s?1:s,u=e.radius,c=void 0===u?1:u,h=e.threshold,d=void 0===h?.8:h;a(this,t);var m=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));m.resolution=n,m.strength=l,m.radius=c,m.threshold=d;var g={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat};m.renderTargetsHorizontal=[],m.renderTargetsVertical=[],m.nMips=5;var b=Math.round(m.resolution.x/2),x=Math.round(m.resolution.y/2);m.renderTargetBright=new i.WebGLRenderTarget(b,x,g),m.renderTargetBright.texture.generateMipmaps=!1;for(var w=0;w<m.nMips;w++){var T=new i.WebGLRenderTarget(b,x,g);T.texture.generateMipmaps=!1,m.renderTargetsHorizontal.push(T),T=new i.WebGLRenderTarget(b,x,g),T.texture.generateMipmaps=!1,m.renderTargetsVertical.push(T),b=Math.round(b/2),x=Math.round(x/2)}m.materialHighPassFilter=new i.ShaderMaterial({uniforms:{tInput:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new i.Color(0)},defaultOpacity:{value:0}},vertexShader:p["default"],fragmentShader:v["default"]}),m.materialHighPassFilter.uniforms.luminosityThreshold.value=d,m.materialHighPassFilter.uniforms.smoothWidth.value=.01,m.separableBlurMaterials=[];for(var M=[3,5,7,9,11],S=0;S<m.nMips;S++){var E=M[S],P=new i.ShaderMaterial({defines:{KERNEL_RADIUS:E,SIGMA:E},uniforms:{colorTexture:{value:null},texSize:{value:new i.Vector2(.5,.5)},direction:{value:new i.Vector2(.5,.5)}},vertexShader:p["default"],fragmentShader:y["default"]});m.separableBlurMaterials.push(P),m.separableBlurMaterials[S].uniforms.texSize.value=new i.Vector2(b,x),b=Math.round(b/2),x=Math.round(x/2)}m.compositeMaterial=new i.ShaderMaterial({defines:{NUM_MIPS:m.nMips},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:p["default"],fragmentShader:_["default"]}),m.compositeMaterial.uniforms.blurTexture1.value=m.renderTargetsVertical[0].texture,m.compositeMaterial.uniforms.blurTexture2.value=m.renderTargetsVertical[1].texture,m.compositeMaterial.uniforms.blurTexture3.value=m.renderTargetsVertical[2].texture,m.compositeMaterial.uniforms.blurTexture4.value=m.renderTargetsVertical[3].texture,m.compositeMaterial.uniforms.blurTexture5.value=m.renderTargetsVertical[4].texture,m.compositeMaterial.uniforms.bloomStrength.value=l,m.compositeMaterial.uniforms.bloomRadius.value=.1,m.compositeMaterial.needsUpdate=!0;var A=[1,.8,.6,.4,.2];return m.compositeMaterial.uniforms.bloomFactors.value=A,m.bloomTintColors=[new i.Vector3(1,1,1),new i.Vector3(1,1,1),new i.Vector3(1,1,1),new i.Vector3(1,1,1),new i.Vector3(1,1,1)],m.compositeMaterial.uniforms.bloomTintColors.value=m.bloomTintColors,m.materialCopy=new i.ShaderMaterial({uniforms:{tInput:{value:null},uOpacity:{value:1}},vertexShader:p["default"],fragmentShader:f["default"],blending:i.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),m.enabled=!0,m.needsSwap=!1,m.oldClearColor=new i.Color,m.oldClearAlpha=1,m.camera=new i.OrthographicCamera(-1,1,1,-1,0,1),m.scene=new i.Scene,m.quad=new i.Mesh(new i.PlaneBufferGeometry(2,2),null),m.scene.add(m.quad),m}return s(t,e),l(t,[{key:"dispose",value:function(){for(var e=0,t=this.renderTargetsHorizontal.length;t>e;e++)this.renderTargetsHorizontal[e].dispose();for(var r=0,i=this.renderTargetsVertical.length;i>r;r++)this.renderTargetsVertical[r].dispose();for(var n=0,a=this.separableBlurMaterials.length;a>n;n++)this.separableBlurMaterials[n].dispose();this.renderTargetBright.dispose(),this.materialHighPassFilter.dispose(),this.compositeMaterial.dispose(),this.materialCopy.dispose(),this.quad.remove(),this.scene.remove()}},{key:"setSize",value:function(e,t){var r=Math.round(e/2),n=Math.round(t/2);this.renderTargetBright.setSize(r,n);for(var a=0;a<this.nMips;a++)this.renderTargetsHorizontal[a].setSize(r,n),this.renderTargetsVertical[a].setSize(r,n),this.separableBlurMaterials[a].uniforms.texSize.value=new i.Vector2(r,n),r=Math.round(r/2),n=Math.round(n/2)}},{key:"render",value:function(e,t,r,n,a,o){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var s=e.autoClear;e.autoClear=!1,e.setClearColor(new i.Color(0,0,0),0),o&&e.context.disable(e.context.STENCIL_TEST),this.materialHighPassFilter.uniforms.tInput.value=r.texture,this.materialHighPassFilter.uniforms.luminosityThreshold.value=this.threshold,this.quad.material=this.materialHighPassFilter,e.render(this.scene,this.camera,this.renderTargetBright,!0);for(var l=this.renderTargetBright,u=0;u<this.nMips;u++)this.quad.material=this.separableBlurMaterials[u],this.separableBlurMaterials[u].uniforms.colorTexture.value=l.texture,this.separableBlurMaterials[u].uniforms.direction.value=x.x,e.render(this.scene,this.camera,this.renderTargetsHorizontal[u],!0),this.separableBlurMaterials[u].uniforms.colorTexture.value=this.renderTargetsHorizontal[u].texture,this.separableBlurMaterials[u].uniforms.direction.value=x.y,e.render(this.scene,this.camera,this.renderTargetsVertical[u],!0),l=this.renderTargetsVertical[u];this.quad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.render(this.scene,this.camera,this.renderTargetsHorizontal[0],!0),this.quad.material=this.materialCopy,this.materialCopy.uniforms.tInput.value=this.renderTargetsHorizontal[0].texture,o&&e.context.enable(e.context.STENCIL_TEST),e.render(this.scene,this.camera,r,this.clear),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=s}}]),t}(c["default"]);r["default"]=w,t.exports=r["default"]}).call(this,e("three"))},{"../../shaders/basic.vert":133,"../../shaders/copy.frag":134,"../../shaders/luminosity-high.frag":135,"../Pass":127,"./blur.frag":123,"./composite.frag":124,three:27}],123:[function(e,t){t.exports="#define GLSLIFY 1\n#include <common>\n\nuniform sampler2D colorTexture;\nuniform vec2 texSize;\nuniform vec2 direction;\n\nvarying vec2 vUv;\n\nfloat gaussianPdf(in float x, in float sigma) {\n  return 0.39894 * exp(-0.5 * x * x / (sigma * sigma)) / sigma;\n}\n\nvoid main() {\n  vec2 invSize = 1.0 / texSize;\n  float fSigma = float(SIGMA);\n  float weightSum = gaussianPdf(0.0, fSigma);\n  vec3 diffuseSum = texture2D(colorTexture, vUv).rgb * weightSum;\n  \n  for (int i = 1; i < KERNEL_RADIUS; i ++) {\n    float x = float(i);\n    float w = gaussianPdf(x, fSigma);\n    vec2 uvOffset = direction * invSize * x;\n    vec3 sample1 = texture2D(colorTexture, vUv + uvOffset).rgb;\n    vec3 sample2 = texture2D(colorTexture, vUv - uvOffset).rgb;\n    diffuseSum += (sample1 + sample2) * w;\n    weightSum += 2.0 * w;\n  }\n\n  gl_FragColor = vec4(diffuseSum / weightSum, 1.0);\n}\n"},{}],124:[function(e,t){t.exports="#define GLSLIFY 1\nuniform sampler2D blurTexture1;\nuniform sampler2D blurTexture2;\nuniform sampler2D blurTexture3;\nuniform sampler2D blurTexture4;\nuniform sampler2D blurTexture5;\nuniform sampler2D dirtTexture;\n\nuniform float bloomStrength;\nuniform float bloomRadius;\n\nuniform float bloomFactors[NUM_MIPS];\nuniform vec3 bloomTintColors[NUM_MIPS];\n\nvarying vec2 vUv;\n\nfloat lerpBloomFactor(const in float factor) { \n  float mirrorFactor = 1.2 - factor;\n  return mix(factor, mirrorFactor, bloomRadius);\n}\n\nvoid main() {\n  gl_FragColor = bloomStrength * (lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \n                  lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \n                  lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \n                  lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \n                  lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv));\n}\n"},{}],125:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e("../Pass"),u=i(l),c=function(e){function t(){n(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.needsSwap=!1,e}return o(t,e),s(t,[{key:"render",value:function(e){e.state.buffers.stencil.setTest(!1)}}]),t}(u["default"]);r["default"]=c,t.exports=r["default"]},{"../Pass":127}],126:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e("../Pass"),u=i(l),c=function(e){function t(e,r){n(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.scene=e,i.camera=r,i.clear=!0,i.needsSwap=!1,i.inverse=!1,i}return o(t,e),s(t,[{key:"render",value:function(e,t,r){var i=e.context,n=e.state;n.buffers.color.setMask(!1),n.buffers.depth.setMask(!1),n.buffers.color.setLocked(!0),n.buffers.depth.setLocked(!0);var a,o;this.inverse?(a=0,o=1):(a=1,o=0),n.buffers.stencil.setTest(!0),n.buffers.stencil.setOp(i.REPLACE,i.REPLACE,i.REPLACE),n.buffers.stencil.setFunc(i.ALWAYS,a,4294967295),n.buffers.stencil.setClear(o),e.render(this.scene,this.camera,r,this.clear),e.render(this.scene,this.camera,t,this.clear),n.buffers.color.setLocked(!1),n.buffers.depth.setLocked(!1),n.buffers.stencil.setFunc(i.EQUAL,1,4294967295),n.buffers.stencil.setOp(i.KEEP,i.KEEP,i.KEEP)}}]),t}(u["default"]);r["default"]=c,t.exports=r["default"]},{"../Pass":127}],127:[function(e,t,r){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),a=function(){function e(){i(this,e),this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}return n(e,[{key:"setSize",value:function(){}},{key:"dipose",value:function(){}},{key:"render",value:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}]),e}();r["default"]=a,t.exports=r["default"]},{}],128:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),c=function y(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:y(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},h=e("signals/Window"),p=n(h),d=e("../ShaderPass/ShaderPass"),f=n(d),m=e("./post.frag"),v=n(m),g=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.material.uniforms=l({},e.material.uniforms,{uResolution:{value:new i.Vector2(p["default"].metrics.width,p["default"].metrics.height)},uTime:{value:0},uWhiteTransition:{value:0},uRadialBlur:{value:new i.Vector2(0,1)},uNoiseAmount:{value:.01}}),e.material.fragmentShader=v["default"],e}return s(t,e),u(t,[{key:"setSize",value:function(e,t){this.material.uniforms.uResolution.value=new i.Vector2(e,t)}},{key:"render",value:function(e,r,i,n,a,o){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e,r,i,n,a,o),this.material.uniforms.uTime.value=a}}]),t}(f["default"]);r["default"]=g,t.exports=r["default"]}).call(this,e("three"))},{"../ShaderPass/ShaderPass":131,"./post.frag":129,"signals/Window":169,three:27}],129:[function(e,t){t.exports="#define GLSLIFY 1\n#define FXAA_REDUCE_MIN (1.0 / 128.0)\n#define FXAA_REDUCE_MUL (1.0 / 8.0)\n#define FXAA_SPAN_MAX    8.0\n\nvec4 fxaa(sampler2D tInput, vec2 uv, vec2 resolution) {\n  vec2 res = 1. / resolution;\n\n  vec3 rgbNW = texture2D( tInput, ( uv.xy + vec2( -1.0, -1.0 ) * res ) ).xyz;\n  vec3 rgbNE = texture2D( tInput, ( uv.xy + vec2( 1.0, -1.0 ) * res ) ).xyz;\n  vec3 rgbSW = texture2D( tInput, ( uv.xy + vec2( -1.0, 1.0 ) * res ) ).xyz;\n  vec3 rgbSE = texture2D( tInput, ( uv.xy + vec2( 1.0, 1.0 ) * res ) ).xyz;\n  vec4 rgbaM  = texture2D( tInput,  uv.xy  * res );\n  vec3 rgbM  = rgbaM.xyz;\n  vec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n  float lumaNW = dot( rgbNW, luma );\n  float lumaNE = dot( rgbNE, luma );\n  float lumaSW = dot( rgbSW, luma );\n  float lumaSE = dot( rgbSE, luma );\n  float lumaM  = dot( rgbM,  luma );\n  float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\n  float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\n\n  vec2 dir;\n  dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n  dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n  float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\n\n  float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\n  dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),\n        max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * res;\n  vec4 rgbA = (1.0 / 2.0) * (\n  texture2D(tInput, uv.xy + dir * (1.0 / 3.0 - 0.5)) +\n  texture2D(tInput, uv.xy + dir * (2.0 / 3.0 - 0.5)));\n  vec4 rgbB = rgbA * (1.0 / 2.0) + (1.0 / 4.0) * (\n  texture2D(tInput, uv.xy + dir * (0.0 / 3.0 - 0.5)) +\n  texture2D(tInput, uv.xy + dir * (3.0 / 3.0 - 0.5)));\n  float lumaB = dot(rgbB, vec4(luma, 0.0));\n\n  if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {\n    return rgbA;\n  } else {\n    return rgbB;\n  }\n}\n\nvec4 radialBlur(sampler2D tInput, vec2 uv, vec2 center, float strength, float brightness) {\n  vec2 radial_size = vec2(0.0);\n  vec2 nUv = uv;\n\n  vec4 color = vec4(0.0, 0.0, 0.0, 0.0);\n  nUv += radial_size * 0.5 - center;\n \n  for (int i = 0; i < 12; i++) \n  {\n    float scale = 1.0 - strength * (float(i) / 11.0);\n    color += texture2D(tInput, nUv * scale + center);\n  }\n \n  vec4 finalColor = color / 12.0 * brightness;\n\n  return finalColor;\n}\n\nvec4 bsc(vec4 color, float brightness, float saturation, float contrast) {\n   vec3 bColor = color.rgb * brightness;\n   float intensity = dot(bColor, vec3(0.2125, 0.7154, 0.0721));\n   return vec4(mix(vec3(0.5), mix(vec3(intensity), bColor, saturation), contrast), color.a);\n}\n\nfloat random(vec2 n, float offset ){\n  return 0.5 - fract(sin(dot(n.xy + vec2( offset, 0. ), vec2(12.9898, 78.233)))* 43758.5453);\n}\n\nvec4 noise(vec4 color, vec2 pos, float time, float amount, float speed) {\n  return color + vec4(vec3(amount * random(pos, 0.00001 * speed * time)), 1.0);\n}\n\nuniform sampler2D tInput;\nuniform float uTime;\nuniform vec2 uResolution;\n\nuniform float uWhiteTransition;\nuniform vec2 uRadialBlur;\nuniform float uNoiseAmount;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 color = texture2D(tInput, vUv);\n\n  if(uRadialBlur.x != 0.0) {\n    color = radialBlur(tInput, vUv, vec2(0.5), uRadialBlur.x, uRadialBlur.y);\n  } else {\n    color = fxaa(tInput, vUv, uResolution);\n  }\n\n  color = bsc(color, 1.0, 1.0, 1.0);\n  color = noise(color, vUv, uTime, uNoiseAmount, 0.1);\n\n  color += clamp(uWhiteTransition, 0.0, 1.0);\n  \n  gl_FragColor = color;\n}\n"},{}],130:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e("../Pass"),u=i(l),c=function(e){function t(e,r,i,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;n(this,t);var l=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l.scene=e,l.camera=r,l.overrideMaterial=i,l.clearColor=o,l.clearAlpha=s,l.clear=!0,l.needsSwap=!1,l}return o(t,e),s(t,[{key:"render",value:function(e,t,r){var i=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial;var n=void 0,a=void 0;this.clearColor&&(n=e.getClearColor().getHex(),a=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),e.render(this.scene,this.camera,this.renderToScreen?null:r,this.clear),this.clearColor&&e.setClearColor(n,a),this.scene.overrideMaterial=null,e.autoClear=i}}]),t}(u["default"]);r["default"]=c,t.exports=r["default"]},{"../Pass":127}],131:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("../Pass"),c=n(u),h=e("../../shaders/basic.vert"),p=n(h),d=e("../../shaders/copy.frag"),f=n(d),m=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.material=new i.ShaderMaterial({uniforms:{tInput:{value:null},uOpacity:{value:1}},vertexShader:p["default"],fragmentShader:f["default"]}),e.camera=new i.OrthographicCamera(-1,1,1,-1,0,1),e.scene=new i.Scene,e.quad=new i.Mesh(new i.PlaneBufferGeometry(2,2),e.material),e.scene.add(e.quad),e}return s(t,e),l(t,[{key:"dispose",value:function(){this.material.dispose(),this.camera.remove(),this.quad.remove(),this.scene.remove()}},{key:"render",value:function(e,t,r){this.material.uniforms.tInput.value=r.texture,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}}]),t}(c["default"]);r["default"]=m,t.exports=r["default"]}).call(this,e("three"))},{"../../shaders/basic.vert":133,"../../shaders/copy.frag":134,"../Pass":127,three:27}],132:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.ClearMaskPass=r.ShaderPass=r.MaskPass=r.BloomUnrealPass=r.PostPass=r.RenderPass=void 0;var n=e("./RenderPass/RenderPass"),a=i(n),o=e("./PostPass/PostPass"),s=i(o),l=e("./BloomUnrealPass/BloomUnrealPass"),u=i(l),c=e("./MaskPass/MaskPass"),h=i(c),p=e("./ShaderPass/ShaderPass"),d=i(p),f=e("./ClearMaskPass/ClearMaskPass"),m=i(f);r.RenderPass=a["default"],r.PostPass=s["default"],r.BloomUnrealPass=u["default"],r.MaskPass=h["default"],r.ShaderPass=d["default"],r.ClearMaskPass=m["default"]},{"./BloomUnrealPass/BloomUnrealPass":122,"./ClearMaskPass/ClearMaskPass":125,"./MaskPass/MaskPass":126,"./PostPass/PostPass":128,"./RenderPass/RenderPass":130,"./ShaderPass/ShaderPass":131}],133:[function(e,t){t.exports="#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"},{}],134:[function(e,t){t.exports="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform float uOpacity;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec4 color = texture2D(tInput, vUv);\n  gl_FragColor = color * uOpacity;\n}\n"},{}],135:[function(e,t){t.exports="#define GLSLIFY 1\nuniform sampler2D tInput;\nuniform vec3 defaultColor;\nuniform float defaultOpacity;\nuniform float luminosityThreshold;\nuniform float smoothWidth;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n  vec4 texel = texture2D(tInput, vUv);\n  vec3 luma = vec3(0.299, 0.587, 0.114 );\n  float v = dot(texel.xyz, luma);\n\n  vec4 outputColor = vec4(defaultColor.rgb, defaultOpacity);\n  float alpha = smoothstep(luminosityThreshold, luminosityThreshold + smoothWidth, v);\n\n  gl_FragColor = mix(outputColor, texel, alpha);\n}\n"},{}],136:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),c=function N(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:N(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},h=e("gl/meshes/Curl"),p=n(h),d=e("gl/loaders/AWDLoader"),f=n(d),m=e("gl/core/Experience"),v=n(m),g=e("gl/core/TextureSet"),y=n(g),b=e("./FireplaceTree"),_=n(b),x=e("gl/cameras/BasicCamera"),w=n(x),T=e("utils/math/to-radians"),M=n(T),S=e("utils/sound/get-amplitude"),E=n(S),P=e("utils/math/map"),A=n(P),C=e("signals/Mouse"),O=n(C),k=e("signals/Window"),L=n(k),R=e("signals/Store"),I=n(R),D={CANVAS_NB:4,ROCKING_CHAIR_ROTATION:8,CAMERA:{ROTATION:{X:M["default"](3),Y:M["default"](3)},DAMPING:{X:.03,Y:.03}},BLOOM_PASS:{STRENGTH:2.8,RADIUS:.4,THRESHOLD:.15}},F=function(e){function t(){var e;o(this,t);for(var r=arguments.length,n=Array(r),a=0;r>a;a++)n[a]=arguments[a];var l=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return l.isFadeIn=!1,l.isFadeOut=!1,l.rotationTarget=new i.Quaternion,l.mousePosition=new i.Vector2,l.handleMouseMove=l.handleMouseMove.bind(l),l}return l(t,e),u(t,[{key:"addSignals",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addSignals",this).call(this),O["default"].move.add(this.handleMouseMove)}},{key:"removeSignals",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeSignals",this).call(this),O["default"].move.remove(this.handleMouseMove)}},{key:"handleMouseMove",value:function(e){this.mousePosition.x=e.clientX/L["default"].metrics.width*2-1,this.mousePosition.y=2*-(e.clientY/L["default"].metrics.height)+1}},{key:"spaceToggle",value:function(e){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"spaceToggle",this).call(this,e),this.tree.animationAction.paused=!1,this.tree.visible=!0,e?(this.isFadeOut=!1,this.isFadeIn=!0,TweenMax.to(I["default"].postProcessing.getPass("bloomPass"),1,{strength:.3}),TweenMax.to(I["default"].postProcessing.getPass("bloomPass"),1,{radius:.2}),TweenMax.to(I["default"].postProcessing.getPass("bloomPass"),1,{threshold:.3}),TweenMax.to(this.spotLight,5,{intensity:2.5}),TweenMax.to(this.spotLight,5,{angle:M["default"](100)})):(this.isFadeIn=!1,this.isFadeOut=!0,TweenMax.to(I["default"].postProcessing.getPass("bloomPass"),3,{strength:D.BLOOM_PASS.STRENGTH,ease:Expo.easeIn}),TweenMax.to(I["default"].postProcessing.getPass("bloomPass"),3,{radius:D.BLOOM_PASS.RADIUS,ease:Expo.easeIn}),TweenMax.to(I["default"].postProcessing.getPass("bloomPass"),3.5,{threshold:D.BLOOM_PASS.THRESHOLD,ease:Expo.easeIn}),TweenMax.to(this.spotLight,5,{intensity:0}),TweenMax.to(this.spotLight,5,{angle:.01}))}},{key:"createTls",value:function(){var e=this,t=I["default"].postProcessing.getUniform("postPass","uWhiteTransition"),r=I["default"].postProcessing.getPass("bloomPass");this.enterTl=new TimelineMax({paused:!0}),this.enterTl.fromTo(this.defaultCamera,3,{fov:21},{fov:36,ease:Power2.easeOut,onUpdate:function(){return e.defaultCamera.updateProjectionMatrix()}},0).to(t,2,{value:0,ease:Power2.easeOut},0).to(r,1,{strength:D.BLOOM_PASS.STRENGTH,ease:Expo.easeIn},0).to(r,1,{radius:D.BLOOM_PASS.RADIUS,ease:Expo.easeIn},0).to(r,1,{threshold:D.BLOOM_PASS.THRESHOLD,ease:Expo.easeIn},0),this.leaveTl=new TimelineMax({paused:!0}),this.leaveTl.fromTo(this.defaultCamera,2,{fov:36},{fov:21,ease:Power2.easeOut,onUpdate:function(){return e.defaultCamera.updateProjectionMatrix()}},0).to(t,2,{value:1,ease:Power2.easeOut},0).to(r,1,{strength:.3,ease:Expo.easeIn},0).to(r,1,{radius:.2,ease:Expo.easeIn},0).to(r,1,{threshold:.9,ease:Expo.easeIn},0)}},{key:"createEnvironment",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEnvironment",this).call(this,"#1A1A1A"),this.fog.density=6e-4}},{key:"createCameras",value:function(){c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createCameras",this).call(this),this.camera.position.set(0,900,2595),this.defaultCamera=new w["default"]({fov:36,isDefault:!0}),this.defaultCamera.position.set(-921,172,1914),this.defaultCamera.rotation.set(M["default"](8),M["default"](-20),0,"YXZ"),this.defaultCameraBaseRotation=(new i.Quaternion).copy(this.defaultCamera.rotation),this.cameras.push(this.defaultCamera)}},{key:"createAudio",value:function(){var e=this;c(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createAudio",this).call(this),this.amplitude=0,E["default"](this.ambientAudio,function(t){e.amplitude=t})}},{key:"createLights",value:function(){this.ambientLight=new i.AmbientLight(2894892,.1),this.ambientLight.name="AmbientLight",this.add(this.ambientLight),this.spotLight=new i.SpotLight(15461355,0,0,Math.PI/10,1,2),this.spotLight.name="SpotLight",this.spotLight.position.set(0,1200,3e3),this.add(this.spotLight),this.add(this.spotLight.target)}},{key:"createTextures",value:function(){var e;this.wallTextureSet=new y["default"]({images:{normal:this.assets.bricksNormalTexture,specular:this.assets.bricksSpecularTexture},configuration:{repeat:{u:3,v:2.8}}}),this.flooringTextureSet=new y["default"]({images:{normal:this.assets.flooringNormalTexture,specular:this.assets.flooringSpecularTexture},configuration:{repeat:{u:4,v:3.8}}}),(e=this.textures).push.apply(e,a(this.wallTextureSet.getTextures()).concat(a(this.flooringTextureSet.getTextures())))}},{key:"createMaterials",value:function(){this.defaultMaterial=new i.MeshPhongMaterial({color:13224393,specular:0,shading:i.FlatShading,side:i.DoubleSide}),this.fireplaceMaterial=new i.MeshPhongMaterial({color:10724259,specular:0,shading:i.FlatShading,side:i.DoubleSide}),this.rockingChairMaterial=new i.MeshPhongMaterial({color:5526612,shading:i.FlatShading}),this.carpetMaterial=new i.MeshPhongMaterial({color:2829099,specular:4276545,shininess:50,shading:i.FlatShading}),this.wallMaterial=new i.MeshPhongMaterial({color:2039583,normalMap:this.wallTextureSet.get("normal"),specularMap:this.wallTextureSet.get("specular"),shading:i.FlatShading}),this.flooringMaterial=new i.MeshPhongMaterial({color:4079166,specular:5066061,shininess:80,normalMap:this.flooringTextureSet.get("normal"),specularMap:this.flooringTextureSet.get("specular"),shading:i.FlatShading}),this.treeMaterial=new i.MeshPhongMaterial({color:13224393,specular:0,morphTargets:!0,morphNormals:!0,side:i.DoubleSide}),this.materials.push(this.defaultMaterial,this.fireplaceMaterial,this.rockingChairMaterial,this.carpetMaterial,this.wallMaterial,this.flooringMaterial,this.treeMaterial)}},{key:"createMeshes",value:function(){var e=this;this.curl=new p["default"]({scene:this}),this.curl.scale.multiplyScalar(200),this.curl.position.y=10,this.curl.position.z=-300,this.add(this.curl);var t=new f["default"];this.fireplaceScene=t.parse(this.assets.fireplaceModel).clone(),this.add(this.fireplaceScene),this.fireplaceMesh=this.fireplaceScene.children.find(function(e){return"fireplace"===e.name}),this.fireplaceMesh.position.y=1,
this.fireplaceMesh.material=this.fireplaceMaterial,this.spotLight.target.position.copy(this.fireplaceMesh.position),this.mainMesh=this.fireplaceScene.children.find(function(e){return"main"===e.name}),this.mainMesh.material=this.defaultMaterial,this.rockingChairMesh=this.fireplaceScene.children.find(function(e){return"rocking_chair"===e.name}),this.rockingChairMesh.rotation.y=M["default"](30),this.rockingChairMesh.material=this.rockingChairMaterial,this.carpetMesh=this.fireplaceScene.children.find(function(e){return"carpet"===e.name}),this.carpetMesh.material=this.carpetMaterial,this.wallMesh=this.fireplaceScene.children.find(function(e){return"wall"===e.name}),this.wallMesh.material=this.wallMaterial,this.tree=new _["default"]({material:this.treeMaterial,model:this.assets.treeFireplaceModel}),this.add(this.tree),this.groundMesh=this.fireplaceScene.children.find(function(e){return"ground"===e.name}),this.groundMesh.material=this.flooringMaterial;for(var r=function(t){var r=new i.Texture(e.assets["picture"+(t+1)+"Texture"]);r.magFilter=r.minFilter=i.LinearFitler,r.needsUpdate=!0;var n=new i.MeshPhongMaterial({map:r,color:8355711,shading:i.FlatShading}),a=e.fireplaceScene.children.find(function(e){return e.name==="texture_"+(t+1)});a.material=n},n=0;n<D.CANVAS_NB;n++)r(n)}},{key:"onUpdate",value:function(e,t){this.curl.update(e,t),this.tree.mixer.time>=5*this.tree.clip.duration&&this.isFadeIn?(this.tree.mixer.time=5*this.tree.clip.duration,this.isFadeIn=!1,this.tree.animationAction.paused=!0):this.tree.mixer.time<=0&&this.isFadeOut&&(this.tree.mixer.time=0,this.isFadeOut=!1,this.tree.animationAction.paused=!0,this.tree.visible=!1),this.isFadeIn&&this.tree.mixer.update(e),this.isFadeOut&&this.tree.mixer.time>=.1&&this.tree.mixer.update(-e),this.rotationTarget.x=-this.mousePosition.y*D.CAMERA.ROTATION.X,this.rotationTarget.y=this.mousePosition.x*D.CAMERA.ROTATION.Y,this.defaultCamera.rotation.x-=(this.rotationTarget.x+this.defaultCamera.rotation.x-this.defaultCameraBaseRotation.x)*D.CAMERA.DAMPING.X,this.defaultCamera.rotation.y-=(this.rotationTarget.y+this.defaultCamera.rotation.y-this.defaultCameraBaseRotation.y)*D.CAMERA.DAMPING.Y,this.rockingChairMesh.rotation.set(A["default"](Math.sin(.9*t)*M["default"](D.ROCKING_CHAIR_ROTATION),M["default"](-D.ROCKING_CHAIR_ROTATION),M["default"](D.ROCKING_CHAIR_ROTATION),M["default"](-D.ROCKING_CHAIR_ROTATION),M["default"](D.ROCKING_CHAIR_ROTATION-2)),this.rockingChairMesh.rotation.y,this.rockingChairMesh.rotation.z,"YXZ")}}]),t}(v["default"]);r["default"]=F,t.exports=r["default"]}).call(this,e("three"))},{"./FireplaceTree":137,"gl/cameras/BasicCamera":64,"gl/core/Experience":69,"gl/core/TextureSet":72,"gl/loaders/AWDLoader":80,"gl/meshes/Curl":94,"signals/Mouse":163,"signals/Store":166,"signals/Window":169,three:27,"utils/math/map":183,"utils/math/to-radians":187,"utils/sound/get-amplitude":188}],137:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function d(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:d(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("gl/loaders/AWDLoader"),h=n(c),p=function(e){function t(e){var r=e.material,n=e.model;a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.material=r,s.model=n;var l=new h["default"];s.treeObject=l.parse(s.model).clone(),s.treeMesh=s.treeObject.children[0],s.treeGeometry=s.treeMesh.geometry,s.treeAnimatedGeometry=(new i.Geometry).fromBufferGeometry(s.treeGeometry),s.morphTargets=[];for(var u=0,c=s.treeGeometry.morphTargets.length;c>u;u++)s.morphTargets.push(s.treeGeometry.morphTargets[u]);return s.treeAnimatedGeometry.morphTargets=s.morphTargets,s.treeAnimatedGeometry.computeMorphNormals(),s.treeMeshAnimated=new i.Mesh(s.treeAnimatedGeometry,s.material),s.treeMeshAnimated.position.set(473,0,429),s.add(s.treeMeshAnimated),s.mixer=new i.AnimationMixer(s.treeMeshAnimated),s.clip=i.AnimationClip.CreateFromMorphTargetSequence("tree",s.treeAnimatedGeometry.morphTargets,13,!1),s.animationAction=s.mixer.clipAction(s.clip),s.animationAction.clampWhenFinished=!0,s.animationAction.setLoop(i.LoopRepeat),s.animationAction.setDuration(5),s.animationAction.play(),s.mixer.update(.01),s}return s(t,e),l(t,[{key:"remove",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.mixer.stopAllAction(),this.mixer.uncacheClip(this.clip)}}]),t}(i.Object3D);r["default"]=p,t.exports=r["default"]}).call(this,e("three"))},{"gl/loaders/AWDLoader":80,three:27}],138:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("gl/core/AbstractScene"),c=n(u),h=e("gl/meshes/NoiseQuad"),p=n(h),d=function(e){function t(){var e;a(this,t);for(var r=arguments.length,i=Array(r),n=0;r>n;n++)i[n]=arguments[n];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return s.createCameras(),s.createMeshes(),s}return s(t,e),l(t,[{key:"createCameras",value:function(){this.camera=new i.OrthographicCamera(-1,1,1,-1,0,1),this.cameras=[this.camera]}},{key:"createMeshes",value:function(){this.noiseQuad=new p["default"],this.add(this.noiseQuad)}},{key:"update",value:function(e,t){this.noiseQuad.update(e,t)}}]),t}(c["default"]);r["default"]=d,t.exports=r["default"]}).call(this,e("three"))},{"gl/core/AbstractScene":67,"gl/meshes/NoiseQuad":110,three:27}],139:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.main=r.train=r.fireplace=void 0;var n=e("./fireplace/Fireplace"),a=i(n),o=e("./train/Train"),s=i(o),l=e("./main/Main"),u=i(l);r.fireplace=a["default"],r.train=s["default"],r.main=u["default"]},{"./fireplace/Fireplace":136,"./main/Main":140,"./train/Train":150}],140:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function I(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:I(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("sono"),h=n(c),p=e("gl/core/AbstractScene"),d=n(p),f=e("gl/meshes/Snow"),m=n(f),v=e("./MainBuilding"),g=n(v),y=e("gl/materials/TreeInstancedMaterial/TreeInstancedMaterial"),b=n(y),_=e("gl/managers/TimelineManager"),x=n(_),w=e("gl/managers/CharacterManager"),T=n(w),M=e("./MainCameraController"),S=n(M),E=e("signals/Store"),P=n(E),A=e("config/characters"),C=n(A),O=e("config/snow/main"),k=n(O),L={DEBUG:{SHOWCASE:{POSITION:new i.Vector3(-155,236,-1902),LOOK_AT:new i.Vector3(501,189,-2280)},FRONT:{POSITION:new i.Vector3(193,447,1163),LOOK_AT:new i.Vector3(216,-458,-1954)},CHARACTER:{POSITION:new i.Vector3(-208,513,-2838),LOOK_AT:new i.Vector3(702,-181,-1269)},REINEER:{POSITION:new i.Vector3(129,282,-1134),LOOK_AT:new i.Vector3(-637,84,-1740)},ENTER:{POSITION:new i.Vector3(-22,298,-443),LOOK_AT:new i.Vector3(-47,8,-2083)}}},R=function(e){function t(){var e;a(this,t);for(var r=arguments.length,i=Array(r),n=0;r>n;n++)i[n]=arguments[n];var s=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return s.timelineManager=new x["default"]({scene:s}),s}return s(t,e),l(t,[{key:"createTls",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createTls",this).call(this),this.spotLightTl=new TimelineMax({paused:!1,repeat:-1,yoyo:!0}),this.spotLightTl.to(this.spotLight,10,{angle:.4,ease:RoughEase.ease.config({template:Power3.easeInOut,strength:1,points:25,taper:"none",randomize:!0,clamp:!0})},0)}},{key:"disposeTls",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"disposeTls",this).call(this),this.spotLightTl.kill(),this.spotLightTl.clear()}},{key:"createPostProcessing",value:function(){var e=P["default"].postProcessing.getPass("bloomPass");e.strength=.4,e.radius=.2,e.threshold=.35}},{key:"createEnvironment",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEnvironment",this).call(this,"#191919"),this.fog.density=6e-4}},{key:"createAudio",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createAudio",this).call(this),this.audioListener=new i.AudioListener,this.cameraManager.camera.add(this.audioListener),this.wooshLightsAudioEffect=h["default"].createSound(this.assets.wooshLightsAudioEffect),this.wooshLightsAudioEffect.volume=.4,this.lightsFlickeringAudioEffect=h["default"].createSound(this.assets.lightsFlickeringAudioEffect),this.lightsFlickeringAudioEffect.volume=.85,this.endAmbientAudio=h["default"].createSound(this.assets.endAmbient),this.endAmbientAudio.loop=!0,this.audio.push(this.wooshLightsAudioEffect,this.lightsFlickeringAudioEffect)}},{key:"createCameras",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createCameras",this).call(this),this.camera.fov=36,this.camera.updateProjectionMatrix(),this.camera.position.copy(L.DEBUG.SHOWCASE.POSITION),this.camera.controls.target.copy(L.DEBUG.SHOWCASE.LOOK_AT),this.cameraController=new S["default"],this.add(this.cameraController),this.cameras.push(this.cameraController.camera)}},{key:"createLights",value:function(){this.spotLight=new i.SpotLight(16777215,280,1100,.58,1,2),this.spotLight.position.set(930,430,-2268),this.spotLight.target.position.set(315,110,-2268),this.spotLight.name="SpotLight",this.add(this.spotLight.target),this.add(this.spotLight)}},{key:"createTextures",value:function(){this.snowParticuleTexture=new i.Texture(this.assets.snowParticleTexture),this.snowParticuleTexture.needsUpdate=!0,this.strokeTexture=new i.Texture(this.assets.strokeTexture),this.strokeTexture.magFilter=i.NearestFilter,this.strokeTexture.minFilter=i.NearestFilter,this.strokeTexture.needsUpdate=!0,this.textures.push(this.snowParticuleTexture,this.strokeTexture)}},{key:"createMaterials",value:function(){this.defaultMaterial=new i.MeshPhongMaterial({color:657930,shading:i.FlatShading}),this.whiteMaterial=new i.MeshBasicMaterial({color:16777215,shading:i.FlatShading}),this.glassMaterial=new i.MeshBasicMaterial({color:4671303,transparent:!0,opacity:.25,shading:i.FlatShading}),this.skinningMaterial=new i.MeshPhongMaterial({color:2171169,shading:i.FlatShading,skinning:!0}),this.defaultTreeMaterial=new b["default"]({color:657930,shading:i.FlatShading}),this.trunkMaterial=new b["default"]({color:3223857,shading:i.FlatShading}),this.branchMaterial=new b["default"]({color:6381921,shading:i.FlatShading}),this.materials.push(this.defaultMaterial,this.whiteMaterial,this.glassMaterial,this.skinningMaterial,this.defaultTreeMaterial,this.trunkMaterial,this.branchMaterial)}},{key:"createMeshes",value:function(){this.snow=new m["default"]({texture:this.snowParticuleTexture,emitterCustomConfig:k["default"]}),this.snow.addHelpers(),this.add(this.snow),this.ground=new i.Mesh(new i.PlaneBufferGeometry(12e3,12e3),this.defaultMaterial),this.ground.rotation.x=-Math.PI/2,this.add(this.ground);var e={defaultMaterial:this.defaultMaterial,whiteMaterial:this.whiteMaterial,glassMaterial:this.glassMaterial,defaultTreeMaterial:this.defaultTreeMaterial,trunkMaterial:this.trunkMaterial,branchMaterial:this.branchMaterial},t={wooshLightsAudioEffect:this.wooshLightsAudioEffect,lightsFlickeringAudioEffect:this.lightsFlickeringAudioEffect};if(this.characterManager=new T["default"](C["default"]({material:this.skinningMaterial})),this.characterManager.play(),this.add(this.characterManager),P["default"].mainCompleted){var r=this.characterManager.get("mainCharacter");r.playing=!1,r.setAnimationsWeight(.8),r.setAnimationsTimeScale(0);var n=r.spline.getPoint(.99),a=r.spline.getPoint(1);r.skinnedMesh.position.copy(n),r.skinnedMesh.lookAt(a)}this.building=new g["default"]({materials:e,audio:t,strokeTexture:this.strokeTexture}),this.add(this.building)}},{key:"start",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this),this.addSignals(),this.building.showcase.displays.addSignals()}},{key:"onUpdate",value:function(e,t){this.building.update(e,t),this.snow.update(e),this.cameraController.updateCameraRotations(),this.characterManager.update(e,t),P["default"].mainCompleted||(this.timelineManager.update(e,t),this.cameraController.update(e,t))}}]),t}(d["default"]);r["default"]=R,t.exports=r["default"]}).call(this,e("three"))},{"./MainBuilding":141,"./MainCameraController":142,"config/characters":44,"config/snow/main":47,"gl/core/AbstractScene":67,"gl/managers/CharacterManager":83,"gl/managers/TimelineManager":85,"gl/materials/TreeInstancedMaterial/TreeInstancedMaterial":89,"gl/meshes/Snow":117,"signals/Store":166,sono:25,three:27}],141:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("gl/loaders/AWDLoader"),c=n(u),h=e("./MainShowcase"),p=n(h),d=e("./MainMirrors"),f=n(d),m=e("./MainFrontTrees"),v=n(m),g=e("./MainDecoration"),y=n(g),b=e("managers/AssetsManager"),_=function(e){function t(e){var r=e.materials,i=e.audio,n=e.strokeTexture;a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));s.materials=r,s.audio=i,s.strokeTexture=n;var l=new c["default"];s.buildingObject=l.parse(b.assets.mainModel).clone(),s.mainMesh=s.buildingObject.children.find(function(e){return"main"===e.name}),s.mainMesh.material=s.materials.defaultMaterial,s.whiteMesh=s.buildingObject.children.find(function(e){return"white"===e.name}),s.whiteMesh.material=s.materials.whiteMaterial,s.glassMesh=s.buildingObject.children.find(function(e){return"glass"===e.name}),s.glassMesh.renderOrder=1,s.glassMesh.material=s.materials.glassMaterial,s.add(s.buildingObject),s.showcase=new p["default"]({buildingObject:s.buildingObject,materials:r}),s.add(s.showcase),s.frontShowcaseTrees=new v["default"]({model:b.assets.treeFrontShowcaseModel,trunkMaterial:s.materials.defaultTreeMaterial,branchMaterial:s.materials.defaultTreeMaterial}),s.add(s.frontShowcaseTrees);var u=new c["default"];return s.rightShowcaseTreeObject=u.parse(b.assets.treeShowcaseModel),s.rightShowcaseTreeObject.traverse(function(e){e.material=s.materials.defaultMaterial}),s.rightShowcaseTreeObject.position.set(508,30,-1623),s.add(s.rightShowcaseTreeObject),s.decoration=new y["default"]({audio:s.audio,strokeTexture:s.strokeTexture}),s.add(s.decoration),s.mirrors=new f["default"],s.add(s.mirrors),s}return s(t,e),l(t,[{key:"update",value:function(e,t){this.mirrors.update(e,t),this.showcase.update(e,t),this.decoration.update(e,t)}}]),t}(i.Object3D);r["default"]=_,t.exports=r["default"]}).call(this,e("three"))},{"./MainDecoration":143,"./MainFrontTrees":144,"./MainMirrors":146,"./MainShowcase":147,"gl/loaders/AWDLoader":80,"managers/AssetsManager":153,three:27}],142:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function S(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:S(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("gl/cameras/BasicCamera"),h=n(c),p=e("gl/core/AnimatedSpline"),d=n(p),f=e("signals/Store"),m=n(f),v=e("signals/Window"),g=n(v),y=e("signals/Mouse"),b=n(y),_=e("managers/AssetsManager"),x=e("utils/math/to-radians"),w=n(x),T={CAMERA:{ROTATION:{X:w["default"](10),Y:w["default"](10)},DAMPING:{X:.04,Y:.04}}},M=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.rotationTarget=new i.Quaternion,e.mousePosition=new i.Vector2,e.handleMouseMove=e.handleMouseMove.bind(e),e.camera=new h["default"]({fov:36,isDefault:!0}),e.camera.rotation.y=-Math.PI,e.baseRotation=(new i.Euler).copy(e.camera.rotation),e.cameraGroup=new i.Group,e.cameraGroup.add(e.camera),e.add(e.cameraGroup),e.cameraLookAt=new i.Vector3,e.cameraLookAtTarget=new i.Vector3(501,189,-2280),e.cameraPosition=new i.Vector3,e.isPositionTransitioning=!1,e.isLookAtTransitioning=!1,e.positionSplinePoints=_.assets.splines.main_camera,e.lookAtSplinePoints=_.assets.splines.main_camera_look_at,e.positionSpline=new d["default"]({points:e.positionSplinePoints,loopDuration:62,loop:!1,divisions:150}),e.positionSpline.helper.material.color=new i.Color(14745855),e.lookAtSpline=new d["default"]({points:e.lookAtSplinePoints,loopDuration:52,loop:!1,divisions:150}),e.lookAtSpline.helper.material.color=new i.Color(16737227),e.add(e.positionSpline.helper),e.add(e.lookAtSpline.helper),m["default"].mainCompleted&&(e.lastPositionPoint=e.positionSpline.getPoint(1),e.lastLookAtPoint=e.lookAtSpline.getPoint(1),e.cameraGroup.position.copy(e.lastPositionPoint),e.cameraGroup.lookAt(e.lastLookAtPoint)),e.createTls(),e.addSignals(),e}return s(t,e),l(t,[{key:"addSignals",value:function(){b["default"].move.add(this.handleMouseMove)}},{key:"removeSignals",value:function(){b["default"].move.remove(this.handleMouseMove)}},{key:"handleMouseMove",value:function(e){this.mousePosition.x=e.clientX/g["default"].metrics.width*2-1,this.mousePosition.y=2*-(e.clientY/g["default"].metrics.height)+1}},{key:"createTls",value:function(){this.baseLookAtLoopDuration=this.lookAtSpline.loopDuration,this.lookAtEnterTL=new TimelineMax,this.lookAtEnterTL.fromTo(this.lookAtSpline,8,{loopDuration:10},{loopDuration:this.baseLookAtLoopDuration,ease:Power2.easeOut})}},{key:"positionTween",value:function(){this.cameraPositionProgress=this.positionSpline.progress,TweenMax.to(this,10,{cameraPositionProgress:1,ease:Power1.easeOut})}},{key:"lookAtTween",value:function(){this.cameraLookAtProgress=this.lookAtSpline.progress,TweenMax.to(this,10,{cameraLookAtProgress:1,ease:Power1.easeOut})}},{key:"remove",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.lookAtEnterTL.kill(),this.lookAtEnterTL.clear(),this.removeSignals()}},{key:"updateCameraRotations",value:function(){this.rotationTarget.x=this.mousePosition.y*T.CAMERA.ROTATION.X,this.rotationTarget.y=this.mousePosition.x*T.CAMERA.ROTATION.Y,this.camera.rotation.x-=(this.rotationTarget.x+this.camera.rotation.x-this.baseRotation.x)*T.CAMERA.DAMPING.X,this.camera.rotation.y-=(this.rotationTarget.y+this.camera.rotation.y-this.baseRotation.y)*T.CAMERA.DAMPING.Y}},{key:"update",value:function(e,t){this.camera.update(e,t),this.positionSpline.update(e,t),this.lookAtSpline.update(e,t),this.cameraGroup.position.copy(this.isPositionTransitioning?this.positionSpline.getPoint(this.cameraPositionProgress):this.positionSpline.positionTarget),!this.isPositionTransitioning&&this.positionSpline.endReached&&(this.isPositionTransitioning=!0,this.positionTween()),this.cameraGroup.lookAt(this.isLookAtTransitioning?this.lookAtSpline.getPoint(this.cameraLookAtProgress):this.lookAtSpline.positionTarget),!this.isLookAtTransitioning&&this.lookAtSpline.endReached&&(this.isLookAtTransitioning=!0,this.lookAtTween())}}]),t}(i.Object3D);r["default"]=M,t.exports=r["default"]}).call(this,e("three"))},{"gl/cameras/BasicCamera":64,"gl/core/AnimatedSpline":68,"managers/AssetsManager":153,"signals/Mouse":163,"signals/Store":166,"signals/Window":169,three:27,"utils/math/to-radians":187}],143:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function _(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:_(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("./MainHallTreesLights"),h=n(c),p=e("gl/meshes/Reineer/Reineer"),d=n(p),f=e("gl/meshes/LightMeshLine/LightMeshLine"),m=n(f),v=e("signals/Timeline"),g=n(v),y=e("managers/AssetsManager"),b=function(e){function t(e){var r=e.audio,i=e.strokeTexture;a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.audio=r,n.strokeTexture=i,n.reineer=new d["default"]({strokeTexture:n.strokeTexture}),n.add(n.reineer),n.lightString=new m["default"]({splinePoints:y.assets.splines.main_light_string,divisions:250,configuration:{transparent:!0,opacity:0,lineWidth:5,color:16777215,dashSize:.085,gapSize:.01,loopDuration:35}}),n.add(n.lightString),n.hallTreesLights=new h["default"],n.add(n.hallTreesLights),n.onEntrance=n.onEntrance.bind(n),n.createTls(),n.addSignals(),n}return s(t,e),l(t,[{key:"createTls",value:function(){this.enterTl=new TimelineMax({paused:!0}),this.enterTl.to(this.lightString.meshLine.material.uniforms.opacity,1,{value:1,ease:RoughEase.ease.config({template:Power0.easeNone,strength:1.5,points:40,taper:"none",randomize:!0,clamp:!0})}).add(this.hallTreesLights.enterTl).add(this.reineer.enterTl,5)}},{key:"enterAnimation",value:function(){this.enterTl.play(),this.audio.wooshLightsAudioEffect.play(.8),this.audio.lightsFlickeringAudioEffect.play(.7)}},{key:"addSignals",value:function(){g["default"].entrance.add(this.onEntrance)}},{key:"removeSignals",value:function(){g["default"].entrance.remove(this.onEntrance)}},{key:"onEntrance",value:function(){this.enterAnimation()}},{key:"remove",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.removeSignals()}},{key:"update",value:function(e,t){this.reineer.update(e,t),this.lightString.update(e,t),this.hallTreesLights.update(e,t)}}]),t}(i.Object3D);r["default"]=b,t.exports=r["default"]}).call(this,e("three"))},{"./MainHallTreesLights":145,"gl/meshes/LightMeshLine/LightMeshLine":100,"gl/meshes/Reineer/Reineer":116,"managers/AssetsManager":153,"signals/Timeline":168,three:27}],144:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("gl/meshes/Trees/Trees"),c=n(u),h=e("utils/math/random-float"),p=n(h),d={POSITIONS:[new i.Vector3(-415,29,-730),new i.Vector3(-665,29,-352),new i.Vector3(-420,29,-508),new i.Vector3(-970,29,-660),new i.Vector3(-745,29,-471),new i.Vector3(-603,29,-780),new i.Vector3(-925,29,-220),new i.Vector3(-1090,29,-471)],SCALE:{MIN:.7,MAX:1},ORIENTATION:{MIN:0,MAX:2*Math.PI}},f=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"generateTrees",value:function(){for(var e=0,t=d.POSITIONS.length;t>e;e++){var r=d.POSITIONS[e];this.treesPositions.push(r);var i=p["default"](d.SCALE.MIN,d.SCALE.MAX);this.treesScales.push(i);var n=p["default"](d.ORIENTATION.MIN,d.ORIENTATION.MAX);this.treesOrientations.push(n);var a=p["default"](0,1);this.treesRandoms.push(a)}}}]),t}(c["default"]);r["default"]=f,t.exports=r["default"]}).call(this,e("three"))},{"gl/meshes/Trees/Trees":118,three:27,"utils/math/random-float":185}],145:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("gl/meshes/LightMeshLine/LightMeshLine"),c=n(u),h=e("utils/math/random-float"),p=n(h),d=e("managers/AssetsManager"),f={POSITIONS:[new i.Vector3(253,0,-1019),new i.Vector3(-253,0,-1019),new i.Vector3(253,0,-1763),new i.Vector3(-253,0,-1763),new i.Vector3(253,0,-3360),new i.Vector3(-253,0,-3360)]},m=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.lights=[],e.splinePoints=d.assets.splines.main_light_tree,e.createLights(),e.createTls(),e}return s(t,e),l(t,[{key:"createLights",value:function(){for(var e=0,t=f.POSITIONS.length;t>e;e++){var r=f.POSITIONS[e],i=new c["default"]({splinePoints:this.splinePoints,divisions:80,configuration:{transparent:!0,opacity:0,lineWidth:2.5,color:16777215,dashSize:.085,gapSize:.01,loopDuration:p["default"](25,35)}});i.position.copy(r),i.scale.setX(1.1),i.scale.setZ(1.1),this.add(i),this.lights.push(i)}}},{key:"createTls",value:function(){this.lightsOpacities=this.lights.map(function(e){return e.meshLine.material.uniforms.opacity}),this.enterTl=new TimelineMax,this.enterTl.staggerTo(this.lightsOpacities,.6,{value:1,ease:RoughEase.ease.config({template:Power0.easeNone,strength:1.5,points:40,taper:"none",randomize:!0,clamp:!0})},.5)}},{key:"update",value:function(e,t){for(var r=0,i=this.lights.length;i>r;r++)this.lights[r].update(e,t)}}]),t}(i.Object3D);r["default"]=m,t.exports=r["default"]}).call(this,e("three"))},{"gl/meshes/LightMeshLine/LightMeshLine":100,"managers/AssetsManager":153,three:27,"utils/math/random-float":185}],146:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t);

}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function x(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:x(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("gl/meshes/Mirror/Mirror"),h=n(c),p=e("signals/Window"),d=n(p),f=e("gl/loaders/AWDLoader"),m=n(f),v=e("signals/Store"),g=n(v),y=e("managers/AssetsManager"),b=[{POSITION:new i.Vector3(690,30.6,-1259),ROTATION:new i.Euler(-Math.PI/2,0,0)},{POSITION:new i.Vector3(980,275,-2418),ROTATION:new i.Euler(0,-Math.PI/2,0)}],_=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r=new m["default"];e.mirrorsObject=r.parse(y.assets.mirrorsModel).clone(),e.mirrorsGeometries=e.mirrorsObject.children.map(function(e){return e.geometry}),e.mirrors=[];for(var n=0,s=b.length;s>n;n++){var l=b[n],u=new h["default"]({renderer:g["default"].postProcessing.renderer,camera:g["default"].scene.cameraManager.camera,options:{clipBias:.003,textureWidth:d["default"].metrics.width,textureHeight:d["default"].metrics.height,color:new i.Color(5526612)}});e.mirrors.push(u);var c=e.mirrorsGeometries[n],p=new i.Mesh(c,u.material);p.position.copy(l.POSITION),p.rotation.copy(l.ROTATION),p.add(u),e.add(p)}return e}return s(t,e),l(t,[{key:"remove",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this);for(var e=0,r=this.mirrorsGeometries.length;r>e;e++)this.mirrorsGeometries[e].dispose()}},{key:"update",value:function(){for(var e=0,t=this.mirrors.length;t>e;e++)this.mirrors[e].render()}}]),t}(i.Object3D);r["default"]=_,t.exports=r["default"]}).call(this,e("three"))},{"gl/loaders/AWDLoader":80,"gl/meshes/Mirror/Mirror":107,"managers/AssetsManager":153,"signals/Store":166,"signals/Window":169,three:27}],147:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function M(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:M(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("gl/meshes/Displays/Displays"),h=n(c),p=e("./MainTrees"),d=n(p),f=e("./MainTimeline"),m=n(f),v=e("signals/Store"),g=n(v),y=e("signals/Scene"),b=n(y),_=e("signals/Subtitle"),x=n(_),w=e("managers/AssetsManager"),T=function(e){function t(e){var r=e.buildingObject,i=e.materials;a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.buildingObject=r,n.materials=i,n.displays=new h["default"]({buildingObject:n.buildingObject,defaultMaterial:n.materials.defaultMaterial}),n.trees=new d["default"]({model:w.assets.treeShowcaseModel,trunkMaterial:n.materials.trunkMaterial,branchMaterial:n.materials.branchMaterial}),n.add(n.trees),n.timeline=new m["default"]({defaultMaterial:n.materials.defaultMaterial}),n.add(n.timeline),n.onEnd=n.onEnd.bind(n),g["default"].mainCompleted&&n.createTls(),n.addSignals(),n}return s(t,e),l(t,[{key:"createTls",value:function(){var e=g["default"].scene.cameraController.cameraGroup,t=g["default"].scene.cameraController.lastLookAtPoint,r=new i.Vector3(-255,220,-2180),n=this.displays.displays[0].mesh,a=this.displays.displays[1].mesh,o=g["default"].postProcessing.getUniform("postPass","uWhiteTransition");this.endTl=new TimelineMax({paused:!0}),this.endTl.addCallback(function(){return x["default"].add.dispatch("end")},2).to(e.position,10,{x:r.x,y:r.y,z:r.z,ease:Power3.easeInOut},0).to(t,10,{x:500,y:220,z:-2180,ease:Power3.easeInOut,onUpdate:function(){return e.lookAt(t)}},0).to(n.position,10,{z:9.4,ease:Power3.easeInOut},0).to(a.position,10,{z:-9.4,ease:Power3.easeInOut},0).addCallback(function(){return g["default"].scene.spotLightTl.kill()}).to(g["default"].scene.spotLight,3,{intensity:0}).to(e.position,2.8,{x:r.x+250,ease:Power2.easeInOut},"zoom-=1").addCallback(function(){TweenMax.to(g["default"].scene.audioListener.gain.gain,1,{value:0}),g["default"].scene.ambientAudio.fade(0,1),g["default"].scene.endAmbientAudio.play(),g["default"].scene.endAmbientAudio.volume=0,g["default"].scene.endAmbientAudio.fade(1,1),g["default"].scene.wooshAudioEffect.play()},"zoom+=0.8").to(o,4,{value:1,ease:Power3.easeOut},"zoom+=1").addCallback(function(){return b["default"].endOverlay.dispatch()},"-=1.8")}},{key:"addSignals",value:function(){b["default"].end.add(this.onEnd)}},{key:"removeSignals",value:function(){b["default"].end.remove(this.onEnd)}},{key:"onEnd",value:function(){var e=this;setTimeout(function(){return e.endTl.play()},5e3)}},{key:"remove",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.removeSignals(),this.trees.remove(),this.displays.remove()}},{key:"update",value:function(e,t){this.displays.update(e,t),this.trees.update(e,t)}}]),t}(i.Object3D);r["default"]=T,t.exports=r["default"]}).call(this,e("three"))},{"./MainTimeline":148,"./MainTrees":149,"gl/meshes/Displays/Displays":98,"managers/AssetsManager":153,"signals/Scene":165,"signals/Store":166,"signals/Subtitle":167,three:27}],148:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("gl/core/Spline"),c=n(u),h=e("gl/meshes/MeshLine/MeshLine"),p=n(h),d=e("signals/Store"),f=n(d),m=e("utils/math/clamp"),v=n(m),g=e("managers/AssetsManager"),y=function(e){function t(e){var r=e.defaultMaterial;a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.defaultMaterial=r,n.splinePoints=g.assets.splines.main_timeline,n.spline=new c["default"]({points:n.splinePoints,divisions:100}),n.progressionPercentage=(v["default"](f["default"].progression,0,f["default"].nbExperiences)/f["default"].nbExperiences).toFixed(2)/1,n.dashSize=n.progressionPercentage,n.gapSize=1-n.progressionPercentage,n.meshLine=new p["default"](n.spline.geometry,{sizeAttenuation:!0,useDash:!0,lineWidth:9,color:16777215,transparent:!0,dashSize:n.dashSize,gapSize:n.gapSize}),n.meshLine.position.x=-6.6,n.meshLine.position.y=1.4,n.meshLine.position.z=1.9,n.meshLineColorHue=n.meshLine.material.uniforms.color.value.getHSL().h,n.meshLineColorSaturation=n.meshLine.material.uniforms.color.value.getHSL().s,n.meshLineColorLightness=n.meshLine.material.uniforms.color.value.getHSL().l,n.add(n.meshLine),n.tubeGeometry=new i.TubeGeometry(n.spline,100,1.8,14,!1),n.tube=new i.Mesh(n.tubeGeometry,n.defaultMaterial),n.add(n.tube),n.createTweens(),n}return s(t,e),l(t,[{key:"createTweens",value:function(){TweenMax.fromTo(this.meshLine.material.uniforms.opacity,2,{value:1},{value:.4,repeat:-1,ease:RoughEase.ease.config({template:Power0.easeNone,strength:1.3,points:40,taper:"none",randomize:!0,clamp:!0})})}}]),t}(i.Object3D);r["default"]=y,t.exports=r["default"]}).call(this,e("three"))},{"gl/core/Spline":71,"gl/meshes/MeshLine/MeshLine":102,"managers/AssetsManager":153,"signals/Store":166,three:27,"utils/math/clamp":181}],149:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("gl/meshes/Trees/Trees"),c=n(u),h=e("utils/math/random-float"),p=n(h),d={POSITIONS:[new i.Vector3(505,29,-2550),new i.Vector3(564,29,-1988),new i.Vector3(750,29,-2600),new i.Vector3(766,29,-2447),new i.Vector3(915,29,-2248)],SCALE:{MIN:.8,MAX:1},ORIENTATION:{MIN:0,MAX:2*Math.PI}},f=function(e){function t(e){var r=e.model,i=e.trunkMaterial,n=e.branchMaterial;a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{model:r,trunkMaterial:i,branchMaterial:n}));return i.uniforms.uWaveSpeed.value=n.uniforms.uWaveSpeed.value=1.3,i.uniforms.uWaveLength.value=n.uniforms.uWaveLength.value=1.8,i.uniforms.uBendAmount.value=n.uniforms.uBendAmount.value=40,s}return s(t,e),l(t,[{key:"generateTrees",value:function(){for(var e=0,t=d.POSITIONS.length;t>e;e++){var r=d.POSITIONS[e];this.treesPositions.push(r);var i=p["default"](d.SCALE.MIN,d.SCALE.MAX);this.treesScales.push(i);var n=p["default"](d.ORIENTATION.MIN,d.ORIENTATION.MAX);this.treesOrientations.push(n);var a=p["default"](0,1);this.treesRandoms.push(a)}}}]),t}(c["default"]);r["default"]=f,t.exports=r["default"]}).call(this,e("three"))},{"gl/meshes/Trees/Trees":118,three:27,"utils/math/random-float":185}],150:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function k(e,t,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(void 0===i){var n=Object.getPrototypeOf(e);return null===n?void 0:k(n,t,r)}if("value"in i)return i.value;var a=i.get;return void 0===a?void 0:a.call(r)},c=e("beats"),h=n(c),p=e("gl/core/Experience"),d=n(p),f=e("gl/loaders/AWDLoader"),m=n(f),v=e("gl/meshes/Snow"),g=n(v),y=e("gl/meshes/Locomotive/Locomotive"),b=n(y),_=e("./TrainTrees"),x=n(_),w=e("gl/materials/TreeInstancedMaterial/TreeInstancedMaterial"),T=n(w),M=e("gl/cameras/BasicCamera"),S=n(M),E=e("signals/Store"),P=n(E),A=e("config/snow/train"),C=n(A),O=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),l(t,[{key:"create",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"create",this).call(this),this.baseFov=this.locomotiveCamera.fov,this.baseLoopDuration=this.locomotive.spline.loopDuration,this.baseSpeed=this.locomotive.speed,this.audioPlaybackRate=1}},{key:"spaceToggle",value:function(e){var r=this;u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"spaceToggle",this).call(this,e);var i=P["default"].postProcessing.getUniform("postPass","uRadialBlur");e?(TweenMax.to(this.locomotiveCamera,5,{fov:45,onUpdate:function(){return r.locomotiveCamera.updateProjectionMatrix()}}),TweenMax.to(this.locomotive,5,{speed:1.5,onUpdate:function(){r.locomotive.spline.loopDuration=r.baseLoopDuration/r.locomotive.speed}}),TweenMax.to(i.value,5,{x:.05,y:1.05}),TweenMax.to(this,5,{audioPlaybackRate:1.5,onUpdate:function(){r.ambientAudio.playbackRate=r.audioPlaybackRate,r.trainAudioEffect.setPlaybackRate(r.audioPlaybackRate)}}),this.locomotive.barSpeed=1.5):(TweenMax.to(this.locomotiveCamera,5,{fov:this.baseFov,onUpdate:function(){return r.locomotiveCamera.updateProjectionMatrix()}}),TweenMax.to(this.locomotive,5,{speed:this.baseSpeed,onUpdate:function(){r.locomotive.spline.loopDuration=r.baseLoopDuration/r.locomotive.speed}}),TweenMax.to(i.value,5,{x:0,y:1}),TweenMax.to(this,5,{audioPlaybackRate:1,onUpdate:function(){r.ambientAudio.playbackRate=r.audioPlaybackRate,r.trainAudioEffect.setPlaybackRate(r.audioPlaybackRate)}}),this.locomotive.barSpeed=this.baseSpeed)}},{key:"enterAnimation",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"enterAnimation",this).call(this);return this.locomotive.enterTl.play(),e}},{key:"createEnvironment",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createEnvironment",this).call(this,"#ffffff"),this.fog.density=.0014}},{key:"createPostProcessing",value:function(){var e=P["default"].postProcessing.getPass("bloomPass");e.strength=.05,e.radius=.05,e.threshold=.98}},{key:"createCameras",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createCameras",this).call(this),this.locomotiveCamera=new S["default"]({isDefault:!0}),this.cameras.push(this.locomotiveCamera)}},{key:"createAudio",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createAudio",this).call(this),this.audioListener=new i.AudioListener,this.locomotiveCamera.add(this.audioListener),this.trainAudioEffect=new i.PositionalAudio(this.audioListener),this.trainAudioEffect.setLoop(!0),this.trainAudioEffect.setBuffer(this.assets.trainAudioEffect),this.trainAudioEffect.setDistanceModel("inverse"),this.trainAudioEffect.setRefDistance(50),this.trainAudioEffect.setRolloffFactor(1),this.audio.push(this.trainAudioEffect),this.frequencies=[],this.beat=[],this.analyser=this.ambientAudio.effect.analyser({fftSize:1024,smoothingTimeConstant:.85}),this.detectBeat=h["default"]({lo:0,hi:512,threshold:0,decay:.005})}},{key:"createTls",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createTls",this).call(this);var e=P["default"].postProcessing.getUniform("postPass","uWhiteTransition"),r=P["default"].postProcessing.getUniform("postPass","uRadialBlur"),i=this.cameraManager.camera;this.leaveTl=new TimelineMax({paused:!0}),this.leaveTl.fromTo(i,2,{fov:i.fov},{fov:i.fov-15,ease:Power2.easeOut,onUpdate:function(){return i.updateProjectionMatrix()}},0).to(e,2,{value:1,ease:Power2.easeOut},0).to(r.value,2,{x:0,y:1,ease:Power2.easeOut},0),this.locomotive.createTls(),this.locomotive.enterTl.play()}},{key:"createLights",value:function(){this.ambientLight=new i.AmbientLight(4144959,.3),this.ambientLight.name="AmbientLight",this.add(this.ambientLight),this.directionalLight=new i.DirectionalLight(16579836,.6),this.directionalLight.name="DirectionalLight",this.directionalLight.position.set(10,50,15),this.add(this.directionalLight),this.hemisphereLight=new i.HemisphereLight(14737632,3158064,.3),this.hemisphereLight.name="HemisphereLight",this.add(this.hemisphereLight)}},{key:"createTextures",value:function(){this.snowParticuleTexture=new i.Texture(this.assets.snowParticleTexture),this.snowParticuleTexture.needsUpdate=!0,this.textures.push(this.snowParticuleTexture)}},{key:"createMaterials",value:function(){this.defaultMaterial=new i.MeshPhongMaterial({color:16777215,shading:i.FlatShading}),this.locomotiveMaterial=new i.MeshPhongMaterial({color:11308154,specular:986895,shininess:5,shading:i.FlatShading}),this.wheelMaterial=new i.MeshPhongMaterial({color:11308154,specular:986895,shininess:5,shading:i.FlatShading}),this.barMaterial=new i.MeshPhongMaterial({color:9661782,specular:986895,shininess:5,shading:i.FlatShading}),this.trunkMaterial=new T["default"]({color:7829367,shading:i.FlatShading}),this.branchMaterial=new T["default"]({color:8355711,shading:i.FlatShading}),this.materials.push(this.defaultMaterial,this.trunkMaterial,this.branchMaterial)}},{key:"createMeshes",value:function(){this.snow=new g["default"]({texture:this.snowParticuleTexture,emitterCustomConfig:C["default"]}),this.snow.addHelpers(),this.add(this.snow),this.ground=new i.Mesh(new i.PlaneBufferGeometry(1e4,1e4),this.defaultMaterial),this.ground.rotation.x=-Math.PI/2,this.add(this.ground);var e=new m["default"];this.railsMesh=e.parse(this.assets.railsModel).children[0],this.railsMesh.position.y=4,this.railsMesh.material=this.defaultMaterial,this.add(this.railsMesh);var t={locomotiveMaterial:this.locomotiveMaterial,wheelMaterial:this.wheelMaterial,barMaterial:this.barMaterial};this.locomotive=new b["default"]({materials:t,audio:this.trainAudioEffect,camera:this.locomotiveCamera}),this.locomotive.position.y=3.7,this.add(this.locomotive),this.trees=new x["default"]({model:this.assets.treeTrainModel,trunkMaterial:this.trunkMaterial,branchMaterial:this.branchMaterial}),this.add(this.trees)}},{key:"start",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"start",this).call(this),this.trainAudioEffect.play(),TweenMax.from(this.trainAudioEffect.gain.gain,2,{value:0,delay:1})}},{key:"onUpdate",value:function(e,t){this.frequencies=this.analyser.getFrequencies(),this.beat=this.detectBeat(this.frequencies)[0],this.snow.update(e),this.locomotive.update(e,t),this.trees.update(e,t),this.snow.defaultEmitter.velocity.value=new i.Vector3(0,-this.beat/512*1e3,0),this.snow.defaultEmitter.velocity.spread=new i.Vector3(0,-this.beat/512*1e3,0),this.snow.defaultEmitter.acceleration.value=this.locomotive.locomotiveObject.position.clone().multiplyScalar(.1),this.snow.defaultEmitter.acceleration.spread=this.locomotive.locomotiveObject.position.clone().multiplyScalar(.05),this.snow.defaultEmitter.size.value=this.beat/512*60}}]),t}(d["default"]);r["default"]=O,t.exports=r["default"]}).call(this,e("three"))},{"./TrainTrees":151,beats:7,"config/snow/train":48,"gl/cameras/BasicCamera":64,"gl/core/Experience":69,"gl/loaders/AWDLoader":80,"gl/materials/TreeInstancedMaterial/TreeInstancedMaterial":89,"gl/meshes/Locomotive/Locomotive":101,"gl/meshes/Snow":117,"signals/Store":166,three:27}],151:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var l=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=e("gl/meshes/Trees/Trees"),c=n(u),h=e("utils/math/random-float"),p=n(h),d=e("utils/math/point-in-circle"),f=n(d),m={COUNT:150,RADIUS:{INNER:925,OUTER:1075,OFFSET:200},MAX_DISTANCE:1800,COLLISION:{TREES:120},SCALE:{MIN:.8,MAX:1.2},ORIENTATION:{MIN:0,MAX:2*Math.PI}},v=function(e){function t(e){var r=e.model,i=e.trunkMaterial,n=e.branchMaterial;a(this,t);var s=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{model:r,trunkMaterial:i,branchMaterial:n}));return i.uniforms.uWaveSpeed.value=n.uniforms.uWaveSpeed.value=2,i.uniforms.uWaveLength.value=n.uniforms.uWaveLength.value=3,i.uniforms.uBendAmount.value=n.uniforms.uBendAmount.value=60,s.addHelpers(),s}return s(t,e),l(t,[{key:"generateTrees",value:function(){for(var e=m.COUNT,t=0;e>t;t++){for(var r=new i.Vector3(p["default"](-m.MAX_DISTANCE,m.MAX_DISTANCE),0,p["default"](-m.MAX_DISTANCE,m.MAX_DISTANCE)),n=f["default"]({x:r.x,y:r.z},m.RADIUS.INNER-m.RADIUS.OFFSET/2),a=f["default"]({x:r.x,y:r.z},m.RADIUS.OUTER+m.RADIUS.OFFSET/2),o=!1,s=0,l=this.treesPositions.length;l>s;s++)if(r.distanceTo(this.treesPositions[s])<=m.COLLISION.TREES){o=!0;break}if(!n&&a||o)e++;else{this.treesPositions.push(r);var u=p["default"](m.SCALE.MIN,m.SCALE.MAX);this.treesScales.push(u);var c=p["default"](m.ORIENTATION.MIN,m.ORIENTATION.MAX);this.treesOrientations.push(c);var h=p["default"](0,1);this.treesRandoms.push(h)}}}},{key:"addHelpers",value:function(){var e=new i.MeshBasicMaterial({color:16711680,wireframe:!0,fog:!1}),t=new i.Mesh(new i.RingBufferGeometry(m.RADIUS.INNER-m.RADIUS.OFFSET/2,m.RADIUS.OUTER+m.RADIUS.OFFSET/2,32),e);t.name="RailsHelper",t.position.y=10,t.rotation.x=-Math.PI/2,this.add(t)}}]),t}(c["default"]);r["default"]=v,t.exports=r["default"]}).call(this,e("three"))},{"gl/meshes/Trees/Trees":118,three:27,"utils/math/point-in-circle":184,"utils/math/random-float":185}],152:[function(e){(function(t){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e("devices/DeviceManager"),s=i(o),l=e("devices"),u=r(l);e("gl/loaders/FBXLoader");var c=function(){function e(){n(this,e)}return a(e,null,[{key:"begin",value:function(){{var e=s["default"].deviceType,r=u[e];new t({name:"application",el:"#application",components:{device:r}})}}}]),e}();document.addEventListener("DOMContentLoaded",function(){TweenMax.to(".headphones",1.5,{autoAlpha:0,ease:Expo.easeOut,delay:1,onComplete:function(){c.begin()}})})}).call(this,e("vue/dist/vue.min.js"))},{devices:58,"devices/DeviceManager":55,"gl/loaders/FBXLoader":81,"vue/dist/vue.min.js":28}],153:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e("lodash.capitalize"),s=i(o),l=function(){function e(){n(this,e)}return a(e,[{key:"init",value:function(e){this.groups=e,this.assets={};for(var t=0;t<this.groups.length;t++){var r=this.groups[t],i=r.file,n=r.id,a="parse"+s["default"](n);"function"==typeof this[a]?this[a](i):this.parseDefault(i)}}},{key:"parseDefault",value:function(e){for(var t=0,r=e.length;r>t;t++){var i=e[t];this.assets[i.id]=i.file}}}]),e}();r["default"]=new l,t.exports=r["default"]},{"lodash.capitalize":18}],154:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("assets-loader"),a=i(n),o=e("managers/AssetsManager"),s=i(o),l=e("utils/math/clamp"),u=i(l),c=e("sono"),h=i(c),p={autoLoad:!1,assets:[],data:function(){return{assetsLoaded:!1,assetsProgress:0}},created:function(){var e=this,t=this.$options.assets;if(Object.keys(t).length){this.loader=a["default"]({crossOrigin:"anonymous",webAudioContext:h["default"].context});for(var r in t){var i=t[r];this.loader.add({id:r,assets:i})}this.loader.on("error",function(e){console.error("[AssetsLoaderMixin] Assets loading error : "+e)}).on("progress",function(){e.assetsProgress=u["default"](a["default"].stats.mbs/11.5,0,1)}).on("complete",function(t){s["default"].init(t),e.assetsLoaded=!0,e.onAssetsLoaded()}),this.$options.autoLoad&&this.loader.start()}else this.assetsLoaded=!0,this.onAssetsLoaded()},methods:{onAssetsLoaded:function(){}}};r["default"]=p,t.exports=r["default"]},{"assets-loader":4,"managers/AssetsManager":153,sono:25,"utils/math/clamp":181}],155:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var n=e("../../package.json"),a=e("lodash.capitalize"),o=i(a),s=e("consts/console"),l=i(s),u={created:function(){console.log("%c• "+n.name.toUpperCase()+" •",l["default"]),console.log("%c"+o["default"](this.$options.name)+" device",l["default"]),console.log(""),console.log("%c~> You can discover the original experience here : http://christmasexperiments.com/",l["default"]),console.log("%cHave fun! ~~",l["default"])}};r["default"]=u,t.exports=r["default"]},{"../../package.json":29,"consts/console":51,"lodash.capitalize":18}],156:[function(e,t){t.exports='<div class="gl-container">\n  <canvas id="gl" ref="canvas"></canvas>\n</div>\n'},{}],157:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("gl/core/Renderer"),o=n(a),s=e("gl/managers/SceneManager"),l=n(s),u=e("gl/helpers/Clock"),c=n(u),h=e("gl/helpers/RAFManager"),p=n(h);r["default"]=i.extend({name:"gl",template:e("./gl.html"),beforeDestroy:function(){this.stopRAF()},methods:{init:function(){this.canvasEl=this.$refs.canvas,this.clock=new c["default"],this.renderer=new o["default"]({canvas:this.canvasEl,name:"Renderer exp"}),this.sceneManager=new l["default"]({domEl:this.canvasEl,renderer:this.renderer}),this.update=this.update.bind(this)},start:function(){this.startRAF(),this.sceneManager.scene.start()},startRAF:function(){p["default"].add(this.update)},stopRAF:function(){p["default"].remove(this.update)},update:function(){this.sceneManager.update(this.clock.delta,this.clock.time)}}}),t.exports=r["default"]}).call(this,e("vue/dist/vue.min.js"))},{"./gl.html":156,"gl/core/Renderer":70,"gl/helpers/Clock":76,"gl/helpers/RAFManager":79,"gl/managers/SceneManager":84,"vue/dist/vue.min.js":28}],158:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("bodymovin"),o=n(a),s=e("sono"),l=n(s),u=e("gl/helpers/RAFManager"),c=n(u),h=e("gl/core/Renderer"),p=n(h),d=e("gl/scenes/home/Home"),f=n(d),m=e("mixins/AssetsLoaderMixin"),v=n(m),g=e("data/manifest");r["default"]=i.extend({name:"home-desktop",autoLoad:!0,assets:g.gl,template:e("./home.html"),mixins:[v["default"]],props:{assets:Object},data:function(){return{homeMobile:!1}},created:function(){this.audio=l["default"].createSound(this.assets.homeAmbient),this.audio.loop=!0,this.audio.play(),this.audio.volume=0,this.audio.fade(1,2)},mounted:function(){var e=this;i.nextTick(function(){e.createLogo(),e.createBackgroundCanvas(),e.createTls(),e.enterTl.play(),e.update=e.update.bind(e),e.startRAF()})},beforeDestroy:function(){this.enterTl.clear(),this.leaveTl.clear(),this.logo.destroy()},methods:{createLogo:function(){this.logo=o["default"].loadAnimation({container:this.$refs.logo,renderer:"svg",loop:!1,autoplay:!1,animationData:this.assets.logo}),this.logo.setSpeed(.8)},createBackgroundCanvas:function(){this.canvas=this.$refs.background,this.renderer=new p["default"]({canvas:this.canvas,name:"Renderer home"}),this.renderer.autoClear=!1,this.scene=new f["default"]({domEl:this.canvas,renderer:this.renderer,name:"home"}),this.camera=this.scene.camera},startRAF:function(){c["default"].add(this.update)},stopRAF:function(){c["default"].remove(this.update)},update:function(e,t){this.renderer.render(this.scene,this.camera),this.scene.update(e,t)},createTls:function(){var e=this;this.enterTl=new TimelineMax({paused:!0}),this.enterTl.addCallback(function(){return e.logo.play()},0).fromTo(this.$refs.event,5,{x:-10,opacity:0},{x:0,opacity:1,ease:Expo.easeOut},1.5).fromTo(this.$refs.date,5,{x:10,opacity:0},{x:0,opacity:1,ease:Expo.easeOut},1.5).fromTo(this.$refs.line,1.8,{scaleX:0,opacity:0},{scaleX:1,opacity:1,ease:Expo.easeOut},1.8).fromTo(this.$refs.start,2,{y:10,opacity:0},{y:0,opacity:1,ease:Expo.easeOut},1.5),this.leaveTl=new TimelineMax({paused:!0}),this.leaveTl.set(this.$el,{pointerEvents:"none"}).to(this.$refs.event,2.5,{x:-10,opacity:0,ease:Expo.easeOut},0).to(this.$refs.date,2.5,{x:10,opacity:0,ease:Expo.easeOut},0).to(this.$refs.line,1.6,{scaleX:0,opacity:0,ease:Expo.easeOut},.3).to(this.$refs.start,1,{y:10,opacity:0,ease:Expo.easeOut},.5).to(this.$el,3,{opacity:0,ease:Expo.easeOut},1.5).addCallback(function(){e.logo.setDirection(-1),e.logo.setSpeed(1.2),e.logo.play()},.3)},start:function(){var e=this;this.renderer.removeGUI(),this.$emit("started"),this.enterTl.pause(),this.leaveTl.play(),this.renderer.destroy(),this.scene.dispose(),this.stopRAF(),this.leaveTl.eventCallback("onComplete",function(){e.$el.style.display="none",e.$destroy(),e.audio.fade(0,1),TweenMax.delayedCall(1,function(){e.audio.destroy()})})},onAssetsLoaded:function(){this.$emit("expAssetsLoaded")}}}),t.exports=r["default"]}).call(this,e("vue/dist/vue.min.js"))},{"./home.html":160,bodymovin:8,"data/manifest":53,"gl/core/Renderer":70,"gl/helpers/RAFManager":79,"gl/scenes/home/Home":138,"mixins/AssetsLoaderMixin":154,sono:25,"vue/dist/vue.min.js":28}],159:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var a=e("bodymovin"),o=n(a),s=e("gl/helpers/RAFManager"),l=n(s),u=e("gl/core/Renderer"),c=n(u),h=e("gl/scenes/home/Home"),p=n(h);r["default"]=i.extend({name:"home-mobile",template:e("./home.html"),props:{assets:Object},data:function(){return{assetsLoaded:!0,assetsProgress:1,homeMobile:!0}},mounted:function(){var e=this;i.nextTick(function(){e.createLogo(),e.createBackgroundCanvas(),e.createTls(),e.enterTl.play(),e.update=e.update.bind(e),e.startRAF()})},methods:{createLogo:function(){this.logo=o["default"].loadAnimation({container:this.$refs.logo,renderer:"svg",loop:!1,autoplay:!1,animationData:this.assets.logo})},createBackgroundCanvas:function(){this.canvas=this.$refs.background,this.renderer=new c["default"]({canvas:this.canvas,
name:"Renderer home"}),this.renderer.autoClear=!1,this.scene=new p["default"]({domEl:this.canvas,renderer:this.renderer,name:"home"}),this.camera=this.scene.camera},startRAF:function(){l["default"].add(this.update)},stopRAF:function(){l["default"].remove(this.update)},update:function(e,t){this.renderer.render(this.scene,this.camera),this.scene.update(e,t)},createTls:function(){var e=this;this.enterTl=new TimelineMax({paused:!0}),this.enterTl.addCallback(function(){e.logo.setDirection(1),e.logo.setSpeed(.8),e.logo.play()},0).fromTo(this.$refs.event,5,{x:-10,autoAlpha:0},{x:0,autoAlpha:1,ease:Expo.easeOut},1.5).fromTo(this.$refs.date,5,{x:10,autoAlpha:0},{x:0,autoAlpha:1,ease:Expo.easeOut},1.5).fromTo(this.$refs.line,1.8,{scaleX:0,autoAlpha:0},{scaleX:1,autoAlpha:1,ease:Expo.easeOut},1.8).fromTo(this.$refs.start,2,{y:10,autoAlpha:0},{y:0,autoAlpha:1,ease:Expo.easeOut},1.5),this.leaveTl=new TimelineMax({paused:!0,onComplete:function(){return e.stopRAF()}}),this.leaveTl.to(this.$refs.event,2.5,{x:-10,autoAlpha:0,ease:Expo.easeOut},0).to(this.$refs.date,2.5,{x:10,autoAlpha:0,ease:Expo.easeOut},0).to(this.$refs.line,1.6,{scaleX:0,autoAlpha:0,ease:Expo.easeOut},.3).to(this.$refs.start,1,{y:10,autoAlpha:0,ease:Expo.easeOut},.5).to(this.$el,1,{autoAlpha:0},1.5).addCallback(function(){e.logo.setDirection(-1),e.logo.setSpeed(1.2),e.logo.play()},.3)},enterAnimation:function(){this.leaveTl.pause(0),this.enterTl.play(0),this.startRAF()},leaveAnimation:function(){this.enterTl.pause(),this.leaveTl.play(0)},start:function(){this.leaveAnimation(),this.$emit("started")}}}),t.exports=r["default"]}).call(this,e("vue/dist/vue.min.js"))},{"./home.html":160,bodymovin:8,"gl/core/Renderer":70,"gl/helpers/RAFManager":79,"gl/scenes/home/Home":138,"vue/dist/vue.min.js":28}],160:[function(e,t){t.exports='<div class="home">\n  <div class="home__header">\n    <div class="home__header__event" ref="event">GOBELINS</div>\n    <div class="line" ref="line"></div>\n    <div class="home__header_date" ref="date">WISH CARD 2017</div>\n  </div>\n\n  <div class="home__logo" ref="logo"></div>\n\n  <div class="home__start" ref="start">\n    <div class="home__start__container">\n      <a href="#" :class="{ \'home__start-btn\': true, \'show\': assetsLoaded || homeMobile }" ref="start" @click.prevent="start">{{ homeMobile ? \'PLAY\' : \'START\' }}</a>\n      <div :class="{ \'home__loading-percentage\': true, \'hide\': assetsLoaded }" >{{ Math.floor(assetsProgress * 100) }}</div>\n    </div>\n\n    <div class="home__loading-bar" :style="{ transform: \'scale(\' + assetsProgress + \', 1)\' }"></div>\n  </div>\n\n  <canvas class="home__background" ref="background"></canvas>\n</div>\n'},{}],161:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=e("min-signal"),o=i(a),s=function l(){n(this,l),this.progress=new o["default"],this.complete=new o["default"]};r["default"]=new s,t.exports=r["default"]},{"min-signal":21}],162:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),l=e("min-signal"),u=i(l),c=function(e){function t(){n(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.keydown=new u["default"],e.keypress=new u["default"],e.keyup=new u["default"],e.handleKeydown=e.handleKeydown.bind(e),e.handleKeypress=e.handleKeypress.bind(e),e.handleKeyup=e.handleKeyup.bind(e),document.addEventListener("keydown",e.handleKeydown,!1),document.addEventListener("keypress",e.handleKeypress,!1),document.addEventListener("keyup",e.handleKeyup,!1),e}return o(t,e),s(t,[{key:"handleKeydown",value:function(e){this.keydown.dispatch(e)}},{key:"handleKeypress",value:function(e){this.keypress.dispatch(e)}},{key:"handleKeyup",value:function(e){this.keyup.dispatch(e)}}]),t}(u["default"]);r["default"]=new c,t.exports=r["default"]},{"min-signal":21}],163:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e("min-signal"),s=i(o),l=function(){function e(){n(this,e),this.LEFT_BUTTON=0,this.MIDDLE_BUTTON=1,this.RIGHT_BUTTON=2,this.click=new s["default"],this.move=new s["default"],this.handleMouseClick=this.handleMouseClick.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),document.addEventListener("click",this.handleMouseClick,!1),document.addEventListener("mousemove",this.handleMouseMove,!1)}return a(e,[{key:"handleMouseClick",value:function(e){this.click.dispatch(e)}},{key:"handleMouseMove",value:function(e){this.move.dispatch(e)}}]),e}();r["default"]=new l,t.exports=r["default"]},{"min-signal":21}],164:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=e("min-signal"),o=i(a),s=function l(){n(this,l),this.created=new o["default"]};r["default"]=new s,t.exports=r["default"]},{"min-signal":21}],165:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=e("min-signal"),o=i(a),s=function l(){n(this,l),this.changeStarted=new o["default"],this.change=new o["default"],this.changed=new o["default"],this.end=new o["default"],this.endOverlay=new o["default"]};r["default"]=new s,t.exports=r["default"]},{"min-signal":21}],166:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=e("consts/scenes"),o=i(a),s=function l(){n(this,l),this.scene=null,this.postProcessing=null,this.progression=0,this.mainCompleted=!1,this.nbExperiences=Object.keys(o["default"]).filter(function(e){return o["default"][e].isExperience}).length};r["default"]=new s,t.exports=r["default"]},{"consts/scenes":52}],167:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=e("min-signal"),o=i(a),s=function l(){n(this,l),this.add=new o["default"]};r["default"]=new s,t.exports=r["default"]},{"min-signal":21}],168:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e("min-signal"),s=i(o),l=e("consts/checkpoints"),u=i(l),c=function(){function e(){n(this,e),this.checkpoints=u["default"],this.createSignals()}return a(e,[{key:"createSignals",value:function(){for(var e=0,t=this.checkpoints.length;t>e;e++){var r=this.checkpoints[e];this[r.name]=new s["default"]}}}]),e}();r["default"]=new c,t.exports=r["default"]},{"consts/checkpoints":50,"min-signal":21}],169:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=e("min-signal"),s=i(o),l=e("lodash.debounce"),u=i(l),c=function(){function e(){n(this,e),this.metrics={width:window.innerWidth,height:window.innerHeight},this.resize=new s["default"],this.blur=new s["default"],this.focus=new s["default"],this.handleResize=this.handleResize.bind(this),this.handleWindowBlur=this.handleWindowBlur.bind(this),this.handleWindowFocus=this.handleWindowFocus.bind(this),window.addEventListener("resize",u["default"](this.handleResize,100),!1),window.addEventListener("blur",this.handleWindowBlur,!1),window.addEventListener("focus",this.handleWindowFocus,!1)}return a(e,[{key:"handleResize",value:function(){this.metrics.width=window.innerWidth,this.metrics.height=window.innerHeight,this.resize.dispatch(window.innerWidth,window.innerHeight)}},{key:"handleWindowBlur",value:function(){this.blur.dispatch()}},{key:"handleWindowFocus",value:function(){this.focus.dispatch()}}]),e}();r["default"]=new c,t.exports=r["default"]},{"lodash.debounce":20,"min-signal":21}],170:[function(e,t,r){"use strict";function i(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,r=document.createDocumentFragment(),i=0,n=e.length;n>i;i++){var a=e.charAt(i),o=document.createElement("span");if(t&&" "===a){var s=document.createElement("br");r.appendChild(s)}else o.classList.add(" "===a?"text-split-space":"text-split-character"),o.innerHTML=a,r.appendChild(o)}return r}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=i,t.exports=r["default"]},{}],171:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){return s["default"](e,3).map(function(e){return new i.Vector3(e[0],e[1],e[2])})}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=a;var o=e("lodash.chunk"),s=n(o);t.exports=r["default"]}).call(this,e("three"))},{"lodash.chunk":19,three:27}],172:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,r,n,a){e.addColor({color:"#"+r.getHexString()},"color").name(s["default"](a)).onChange(function(e){t[n]=new i.Color(e)})}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=a;var o=e("lodash.capitalize"),s=n(o);t.exports=r["default"]}).call(this,e("three"))},{"lodash.capitalize":18,three:27}],173:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r,i,n){e.add(t,i).name(o["default"](n))}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var a=e("lodash.capitalize"),o=i(a);t.exports=r["default"]},{"lodash.capitalize":18}],174:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0}),r.parseDefault=r.parseBoolean=r.parseNumber=r.parseString=r.parseVector4=r.parseVector3=r.parseVector2=r.parseColor=void 0;var n=e("./parse-color"),a=i(n),o=e("./parse-vector2"),s=i(o),l=e("./parse-vector3"),u=i(l),c=e("./parse-vector4"),h=i(c),p=e("./parse-string"),d=i(p),f=e("./parse-number"),m=i(f),v=e("./parse-default"),g=i(v);r.parseColor=a["default"],r.parseVector2=s["default"],r.parseVector3=u["default"],r.parseVector4=h["default"],r.parseString=d["default"],r.parseNumber=m["default"],r.parseBoolean=g["default"],r.parseDefault=g["default"]},{"./parse-color":172,"./parse-default":173,"./parse-number":175,"./parse-string":177,"./parse-vector2":178,"./parse-vector3":179,"./parse-vector4":180}],175:[function(e,t,r){(function(i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,r,n,a){switch(a){case"shading":e.add(t,n,{FlatShading:i.FlatShading,SmoothShading:i.SmoothShading}).name(u["default"](a));break;case"intensity":e.add(t,n,0,5,.01).name(u["default"](a));break;case"angle":e.add(t,n,.01,Math.PI/2,.01).name(u["default"](a));break;case"uWhiteTransition":e.add(t,n,0,1,.01).name(u["default"](a));break;default:s["default"](e,t,r,n,a)}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=a;var o=e("./parse-default"),s=n(o),l=e("lodash.capitalize"),u=n(l);t.exports=r["default"]}).call(this,e("three"))},{"./parse-default":173,"lodash.capitalize":18,three:27}],176:[function(e,t,r){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t["default"]=e,t}function n(e){return e&&e.__esModule?e:{"default":e}}function a(e){var t=e.object,r=e.folder,i=e.propertiesWhitelist,n=void 0===i?[]:i,a=e.folderName,o=void 0===a?null:a;o||(o="undefined"!=typeof t.uuid?t.type+"  ["+t.uuid.slice(0,3)+"]":"undefined"!=typeof t.type?t.type:"Folder"),r||(r=s["default"].addFolder(o));var l=r.addFolder(o);for(var c in t){var d=t[c];if(-1!==n.indexOf(c)&&"undefined"!=typeof d||!n.length){var f=p[c];f="parse"+u["default"](f);var m=h[f],v=c,g=t;"u"===c.charAt(0)&&(g=d,v=c,c="value"),"undefined"!=typeof m?m(l,g,d,c,v):console.error("[parseObject] Undefined parse function for '"+c+"'")}}return l}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=a;var o=e("gl/helpers/GUI"),s=n(o),l=e("lodash.capitalize"),u=n(l),c=e("./parse-functions"),h=i(c),p={position:"Vector3",color:"Color",intensity:"Number",castShadow:"Boolean",distance:"Number",angle:"Number",penumbra:"Number",decay:"Number",strength:"Number",radius:"Number",threshold:"Number",uWhiteTransition:"Number",uRadialBlur:"Vector2"};t.exports=r["default"]},{"./parse-functions":174,"gl/helpers/GUI":77,"lodash.capitalize":18}],177:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r,i,n){"#"===r.charAt(0)?e.addColor(t,i).name(l["default"](n)):o["default"](e,t,r,i,n)}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var a=e("./parse-default"),o=i(a),s=e("lodash.capitalize"),l=i(s);t.exports=r["default"]},{"./parse-default":173,"lodash.capitalize":18}],178:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r,i,n){var a=void 0;switch(n){case"uRadialBlur":a=e.addFolder(o["default"](n)),a.add(t[i],"x",0,1,.01).name("X").step(.1),a.add(t[i],"y",0,5,.01).name("Y").step(.1);break;default:a=e.addFolder(o["default"](n)),a.add(t[i],"x").name("X").step(.1),a.add(t[i],"y").name("Y").step(.1)}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var a=e("lodash.capitalize"),o=i(a);t.exports=r["default"]},{"lodash.capitalize":18}],179:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r,i,n){var a=e.addFolder(o["default"](n)),s=a.add(t[i],"x").name("X").step(.1),l=a.add(t[i],"y").name("Y").step(.1),u=a.add(t[i],"z").name("Z").step(.1);switch(i){case"position":s.min(-3e3).max(3e3),l.min(-3e3).max(3e3),u.min(-3e3).max(3e3)}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var a=e("lodash.capitalize"),o=i(a);t.exports=r["default"]},{"lodash.capitalize":18}],180:[function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function n(e,t,r,i,n){var a=e.addFolder(o["default"](n));a.add(t[i],"x").name("X").step(.1),a.add(t[i],"y").name("Y").step(.1),a.add(t[i],"z").name("Z").step(.1),a.add(t[i],"w").name("W").step(.1)}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var a=e("lodash.capitalize"),o=i(a);t.exports=r["default"]},{"lodash.capitalize":18}],181:[function(e,t,r){"use strict";function i(e,t,r){return t>e?t:e>r?r:e}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=i,t.exports=r["default"]},{}],182:[function(e,t,r){"use strict";function i(e,t){return 0>e&&(e=t+e%t),e>=t?e%t:e}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=i,t.exports=r["default"]},{}],183:[function(e,t,r){"use strict";function i(e,t,r,i,n){return(e-t)/(r-t)*(n-i)+i}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=i,t.exports=r["default"]},{}],184:[function(e,t,r){"use strict";function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{x:0,y:0};return Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2)<Math.pow(t,2)}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=i,t.exports=r["default"]},{}],185:[function(e,t,r){"use strict";function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return parseFloat(Math.min(e+Math.random()*(t-e),t).toFixed(r))}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=i,t.exports=r["default"]},{}],186:[function(e,t,r){"use strict";function i(){return"#"+("00000"+(Math.random()*(1<<24)|0).toString(16)).slice(-6)}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=i,t.exports=r["default"]},{}],187:[function(e,t,r){"use strict";function i(e){return e*Math.PI/180}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=i,t.exports=r["default"]},{}],188:[function(e,t,r){"use strict";function i(e,t){e.effect.script({bufferSize:2048,inputChannels:1,channels:1,callback:function(e){for(var r=e.inputBuffer.getChannelData(0),i=e.outputBuffer.getChannelData(0),n=0,a=0,o=r.length;o>a;a++){var s=Math.abs(r[a]);s>n&&(n=s),i[a]=r[a]}t(n)}})}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=i,t.exports=r["default"]},{}]},{},[152]);